import{o as W,c as L,a as V,r as oe,F as ue,b as ke,d as z,w as ee,e as ae,t as fe,n as xe,p as Ae,f as Te,T as je,g as Oe,h as $e,i as se,j as Ee,k as De,u as Ne,l as Ce,m as Pe,q as Ie}from"./vendor.344a7b7f.js";const Je=function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))g(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&g(o)}).observe(document,{childList:!0,subtree:!0});function O(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerpolicy&&(u.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?u.credentials="include":i.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function g(i){if(i.ep)return;i.ep=!0;const u=O(i);fetch(i.href,u)}};Je();const Re={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Ue=V("path",{"fill-rule":"evenodd",d:"M16 4C9.371 4 4 9.371 4 16c0 5.3 3.438 9.8 8.207 11.387c.602.11.82-.258.82-.578c0-.286-.011-1.04-.015-2.04c-3.34.723-4.043-1.609-4.043-1.609c-.547-1.387-1.332-1.758-1.332-1.758c-1.09-.742.082-.726.082-.726c1.203.086 1.836 1.234 1.836 1.234c1.07 1.836 2.808 1.305 3.492 1c.11-.777.422-1.305.762-1.605c-2.664-.301-5.465-1.332-5.465-5.93c0-1.313.469-2.383 1.234-3.223c-.121-.3-.535-1.523.117-3.175c0 0 1.008-.32 3.301 1.23A11.487 11.487 0 0 1 16 9.805c1.02.004 2.047.136 3.004.402c2.293-1.55 3.297-1.23 3.297-1.23c.656 1.652.246 2.875.12 3.175c.77.84 1.231 1.91 1.231 3.223c0 4.61-2.804 5.621-5.476 5.922c.43.367.812 1.101.812 2.219c0 1.605-.011 2.898-.011 3.293c0 .32.214.695.824.578C24.566 25.797 28 21.3 28 16c0-6.629-5.371-12-12-12z",fill:"currentColor"},null,-1),Fe=[Ue];function Me(P,_){return W(),L("svg",Re,Fe)}var He={name:"la-github",render:Me};var ce=(P,_)=>{const O=P.__vccOpts||P;for(const[g,i]of _)O[g]=i;return O};const Ke=P=>(Ae("data-v-17fc3d9c"),P=P(),Te(),P),Be={class:"flex flex-wrap items-center"},qe=Ke(()=>V("div",{class:"flex-1"},null,-1)),We={class:"text-2xl m-2",href:"https://github.com/davay42/vite-gun-starter",target:"_blank"},Ge={setup(P){const _={"/":"Home","/players/":"Players","/game/":"Game","/account/":"Account"};return(O,g)=>{const i=oe("router-link"),u=He;return W(),L("div",Be,[(W(),L(ue,null,ke(_,(o,f)=>z(i,{class:xe(["p-2",{active:O.$route.path==f}]),key:o,to:f},{default:ee(()=>[ae(fe(o),1)]),_:2},1032,["to","class"])),64)),qe,V("a",We,[z(u)])])}}};var Le=ce(Ge,[["__scopeId","data-v-17fc3d9c"]]);function Ve(P,_){const O=Le,g=oe("router-view");return W(),L(ue,null,[z(O),z(g,null,{default:ee(({Component:i})=>[z(je,{name:"fade"},{default:ee(()=>[(W(),Oe($e(i)))]),_:2},1024)]),_:1})],64)}const ze={};var Qe=ce(ze,[["render",Ve]]);const Ye="modulepreload",le={},Xe="./",te=function(_,O){return!O||O.length===0?_():Promise.all(O.map(g=>{if(g=`${Xe}${g}`,g in le)return;le[g]=!0;const i=g.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${u}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Ye,i||(o.as="script",o.crossOrigin=""),o.href=g,document.head.appendChild(o),i)return new Promise((f,l)=>{o.addEventListener("load",f),o.addEventListener("error",l)})})).then(()=>_())},Ze={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},et=V("path",{d:"M16 4C9.383 4 4 9.383 4 16s5.383 12 12 12s12-5.383 12-12S22.617 4 16 4zm0 2c5.535 0 10 4.465 10 10s-4.465 10-10 10S6 21.535 6 16S10.465 6 16 6zm-1 2v9h7v-2h-5V8z",fill:"currentColor"},null,-1),tt=[et];function nt(P,_){return W(),L("svg",Ze,tt)}var rt={name:"la-clock",render:nt},it=Object.defineProperty,pe=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,he=(P,_,O)=>_ in P?it(P,_,{enumerable:!0,configurable:!0,writable:!0,value:O}):P[_]=O,Y=(P,_)=>{for(var O in _||(_={}))ot.call(_,O)&&he(P,O,_[O]);if(pe)for(var O of pe(_))ut.call(_,O)&&he(P,O,_[O]);return P},ne=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function de(P){throw new Error('Could not dynamically require "'+P+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Q={exports:{}};(function(P){(function(){function _(g,i){return i?de(g):g.slice?_[u(g)]:function(o,f){g(o={exports:{}}),_[u(f)]=o.exports};function u(o){return o.split("/").slice(-1).toString().replace(".js","")}}var O=P;_(function(g){String.random=function(u,o){var f="";for(u=u||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";u-- >0;)f+=o.charAt(Math.floor(Math.random()*o.length));return f},String.match=function(u,o){var f,l;return typeof u!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},f=o["="]||o["*"]||o[">"]||o["<"],u===f?!0:l!==o["="]?!1:(f=o["*"]||o[">"],u.slice(0,(f||"").length)===f?!0:l!==o["*"]?!1:l!==o[">"]&&l!==o["<"]?u>=o[">"]&&u<=o["<"]:l!==o[">"]&&u>=o[">"]||l!==o["<"]&&u<=o["<"]))},String.hash=function(u,o){if(typeof u=="string"){if(o=o||0,!u.length)return o;for(var f=0,l=u.length,e;f<l;++f)e=u.charCodeAt(f),o=(o<<5)-o+e,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(u){return u?u instanceof Object&&u.constructor===Object||Object.prototype.toString.call(u).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(u,o){for(var f in u)if(i.call(u,f)&&(!o||o.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(u){var o=[];for(var f in u)i.call(u,f)&&o.push(f);return o},function(){var u,o=setTimeout,f=0,l=0,e=typeof setImmediate!=""+u&&setImmediate||o;o.poll=o.poll||function(y){if(1>=+new Date-f&&l++<3333){y();return}e(function(){f=+new Date,y()},l=0)}}(),function(){var u=setTimeout,o=u.turn=u.turn||function(d){f.push(d)==1&&l(c)},f=o.s=[],l=u.poll,e=0,y,c=function(){(y=f[e++])&&y(),(e==f.length||e==99)&&(f=o.s=f.slice(e),e=0),f.length&&l(c)}}(),function(){var u,o=setTimeout,f=o.turn;(o.each=o.each||function(l,e,y,c){c=c||9,function d(p,m,a){if(m=(p=(l||[]).splice(0,c)).length){for(var s=0;s<m&&u===(a=e(p[s]));s++);if(u===a){f(d);return}}y&&y(a)}()})()}()})(_,"./shim"),_(function(g){g.exports=function i(u,o,f){if(!u)return{to:i};var l,e=typeof o=="function",u=(this.tag||(this.tag={}))[u]||e&&(this.tag[u]={tag:u,to:i._={next:function(c){var d;(d=this.to)&&d.next(c)}}});if(e){var y={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:u,on:this,as:f};return(y.back=u.last||u).to=y,u.last=y}return(u=u.to)&&l!==o&&u.next(o),u}})(_,"./onto"),_(function(g){_("./shim"),g.exports=function(i){return i===void 0?!1:i===null?!0:i===1/0||i!==i?!1:typeof i=="string"||typeof i=="boolean"||typeof i=="number"?!0:i&&typeof(i["#"]||0)=="string"&&Object.empty(i,["#"])?i["#"]:!1}})(_,"./valid"),_(function(g){_("./shim");function i(){var y=+new Date;return l<y?(o=0,l=y+i.drift):l=y+(o+=1)/f+i.drift}i.drift=0;var u=-1/0,o=0,f=999,l=u,e;i.is=function(y,c,d){var p=c&&y&&y._&&y._[">"]||d;if(!!p)return typeof(p=p[c])=="number"?p:u},i.ify=function(y,c,d,p,m){(y=y||{})._=y._||{},m&&(y._["#"]=m);var a=y._[">"]||(y._[">"]={});return e!==c&&c!=="_"&&(typeof d=="number"&&(a[c]=d),e!==p&&(y[c]=p)),y},g.exports=i})(_,"./state"),_(function(g){_("./shim");function i(u){var o={s:{}},f=o.s;u=u||{max:999,age:1e3*9},o.check=function(e){return f[e]?l(e):!1};var l=o.track=function(e){var y=f[e]||(f[e]={});return y.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,u.age+9)),y};return o.drop=function(e){o.to=null,o.now=+new Date;var y=Object.keys(f);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(y,function(c){var d=f[c];d&&(e||u.age)>o.now-d.was||delete f[c]},0,99)},o}g.exports=i})(_,"./dup"),_(function(g){_("./onto"),g.exports=function(o,f){if(!!this.on){var l=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var y=o["#"]||o,e=(this.tag||"")[y];return e?(f&&(e=this.on(y,f),clearTimeout(e.err),e.err=setTimeout(function(){e.off()},l)),!0):void 0}var y=f&&f["#"]||i(9);if(!o)return y;var c=this.on(y,o,f);return c.err=c.err||setTimeout(function(){c.off(),c.next({err:"Error: No ACK yet.",lack:!0})},l),y}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(_,"./ask"),_(function(g){function i(m){return m instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:m}):new i(m)}i.is=function(m){return m instanceof i||m&&m._&&m===m._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},_("./shim"),i.valid=_("./valid"),i.state=_("./state"),i.on=_("./onto"),i.dup=_("./dup"),i.ask=_("./ask"),function(){i.create=function(S){S.root=S.root||S,S.graph=S.graph||{},S.on=S.on||i.on,S.ask=S.ask||i.ask,S.dup=S.dup||i.dup();var $=S.$.opt(S.opt);return S.once||(S.on("in",m,S),S.on("out",m,S),S.on("put",v,S),i.on("create",S),S.on("create",S)),S.once=1,$};function m(S){if(!!S){if(S.out===m){this.to.next(S);return}var $=this,w=$.as,b=w.at||w,A=b.$,E=b.dup,C,D=S.DBG;if((C=S["#"])||(C=S["#"]=o(9)),!E.check(C)){if(E.track(C),C=S._,S._=typeof C=="function"?C:function(){},S.$&&S.$===(S.$._||"").$||(S.$=A),S["@"]&&!S.put&&n(S),!b.ask(S["@"],S))if(D&&(D.u=+new Date),S.put){a(S);return}else S.get&&i.on.get(S,A);D&&(D.uc=+new Date),$.to.next(S),D&&(D.ua=+new Date),!(S.nts||S.NTS)&&(S.out=m,b.on("out",S),D&&(D.ue=+new Date))}}}function a(S){if(!!S){var $=S._||"",w=$.root=(($.$=S.$||"")._||"").root;if(S["@"]&&$.faith&&!$.miss){S.out=m,w.on("out",S);return}$.latch=w.hatch,$.match=w.hatch=[];var b=S.put,A=$.DBG=S.DBG,E=+new Date;if(!(b["#"]&&b["."])){A&&(A.p=E),$["#"]=S["#"],$.msg=S,$.all=0,$.stun=1;var C=Object.keys(b);console.STAT&&console.STAT(E,((A||$).pk=+new Date)-E,"put sort");var D=0,N,I,J,R,U,F,B;(function M(X){if(N!=D){if(N=D,!(J=C[D])){console.STAT&&console.STAT(E,((A||$).pd=+new Date)-E,"put"),r($);return}(R=b[J])?(B=R._)?J!==B["#"]?F=h+x(J)+"soul not same.":(U=B[">"])||(F=h+x(J)+"no state."):F=h+x(J)+"no meta.":F=h+x(J)+"no node.",I=Object.keys(R||{})}if(F){S.err=$.err=F,r($);return}var re=0,G;for(X=X||0;X++<9&&(G=I[re++]);)if(G!=="_"){var Z=R[G],ie=U[G];if(c===ie){F=h+x(G)+"on"+x(J)+"no state.";break}if(!l(Z)){F=h+x(G)+"on"+x(J)+"bad "+typeof Z+x(Z);break}s(Z,G,J,ie,S)}if((I=I.slice(re)).length){f(M);return}++D,I=null,M(X)})()}}}i.on.put=a;function s(S,$,w,b,A){var E=A._||"",C=E.root,D=C.graph,N,I=D[w]||d,J=e(I,$,1),R=I[$],U=E.DBG;(N=console.STAT)&&(!D[w]||!R)&&(N.has=(N.has||0)+1);var F=j();if(b>F){setTimeout(function(){s(S,$,w,b,A)},(N=b-F)>k?k:N),console.STAT&&console.STAT((U||E).Hf=+new Date,N,"future");return}if(!(b<J&&!E.miss)&&!(!E.faith&&b===J&&(S===R||T(S)<=T(R))&&!E.miss)){E.stun++;var B=A["#"]+E.all++,M={toString:function(){return B},_:E};M.toJSON=M.toString,U&&(U.ph=U.ph||+new Date),C.on("put",{"#":M,"@":A["@"],put:{"#":w,".":$,":":S,">":b},_:E})}}function v(S){var $;($=(S._||"").DBG)&&($.pa=+new Date,$.pm=$.pm||+new Date);var w=this,b=w.as,A=b.graph,E=S._,C=S.put,D=C["#"],N=C["."],I=C[":"],J=C[">"];S["#"];var R;(R=E.msg)&&(R=R.put)&&(R=R[D])&&y(R,N,J,I,D),A[D]=y(A[D],N,J,I,D),(R=(b.next||"")[D])&&R.on("in",S),r(E),w.to.next(S)}function r(S,$){var w;if(!S.stop&&!(!S.err&&0<--S.stun)&&(S.stop=1,!!(w=S.root))){var b=S.match;b.end=1,b===w.hatch&&(!(b=S.latch)||b.end?delete w.hatch:w.hatch=b),S.hatch&&S.hatch(),setTimeout.each(S.match,function(A){A&&A()}),!(!($=S.msg)||S.err||$.err)&&($.out=m,S.root.on("out",$))}}function n(S){var $=S["@"]||"",w;!(w=$._)||(w.acks=(w.acks||0)+1,(w.err=S.err)&&(S["@"]=w["#"],r(w)),!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){t(w)})),t(w))}function t(S){!S||!S.root||S.stun||S.acks!==S.all||S.root.on("in",{"@":S["#"],err:S.err,ok:S.err?c:{"":1}})}var h="Error: Invalid graph!",x=function(S){return" '"+(""+S).slice(0,9)+"...' "},T=JSON.stringify,k=2147483647,j=i.state}(),function(){i.on.get=function(a,s){var v=s._,r=a.get,n=r["#"],t=v.graph[n],h=r["."],x=v.next||(v.next={});x[n];var T=a._||{},k=T.DBG=a.DBG;if(k&&(k.g=+new Date),!t)return v.on("get",a);if(h){if(typeof h!="string"||c===t[h])return v.on("get",a);t=y({},h,e(t,h),t[h],n)}t&&m(a,t),v.on("get",a)};function m(a,s){var v=+new Date,r=a._||{},n=r.DBG=a.DBG,t=a["#"],h=o(9),x=Object.keys(s||"").sort(),T=((s||"")._||"")["#"];x.length;var k=a.$._.root,j=s===k.graph[T];console.STAT&&console.STAT(v,((n||r).gk=+new Date)-v,"got keys"),s&&function S(){v=+new Date;for(var $=0,w,b={},A;$<9&&(w=x[$++]);)y(b,w,e(s,w),s[w],T);x=x.slice($),(A={})[T]=b,b=A;var E;j&&(E=function(){},E.ram=E.faith=!0),A=x.length,console.STAT&&console.STAT(v,-(v-(v=+new Date)),"got copied some"),n&&(n.ga=+new Date),k.on("in",{"@":t,"#":h,put:b,"%":A?h=o(9):c,$:k.$,_:E,DBG:n}),console.STAT&&console.STAT(v,+new Date-v,"got in"),!!A&&setTimeout.turn(S)}(),s||k.on("in",{"@":a["#"]})}i.on.get.ack=m}(),function(){i.chain.opt=function(m){m=m||{};var a=this,s=a._,v=m.peers||m;return Object.plain(m)||(m={}),Object.plain(s.opt)||(s.opt=m),typeof v=="string"&&(v=[v]),v instanceof Array&&(Object.plain(s.opt.peers)||(s.opt.peers={}),v.forEach(function(r){var n={};n.id=n.url=r,s.opt.peers[r]=s.opt.peers[r]||n})),s.opt.peers=s.opt.peers||{},u(m,function r(n){var t=this[n];if(this&&this.hasOwnProperty(n)||typeof t=="string"||Object.empty(t)){this[n]=t;return}t&&t.constructor!==Object&&!(t instanceof Array)||u(t,r)}),i.on("opt",s),s.opt.uuid=s.opt.uuid||function(n){return i.state().toString(36).replace(".","")+String.random(n||12)},a}}();var u=function(m,a){Object.keys(m).forEach(a,m)},o=String.random,f=setTimeout.turn,l=i.valid,e=i.state.is,y=i.state.ify,c,d={},p;i.log=function(){return!i.log.off&&p.log.apply(p,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(m,a,s){return(s=i.log.once)[m]=s[m]||0,s[m]++||i.log(a)},typeof window!="undefined"&&((window.GUN=window.Gun=i).window=window);try{typeof O!="undefined"&&(O.exports=i)}catch{}g.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(p=console).only=function(m,a){return p.only.i&&m===p.only.i&&p.only.i++&&(p.log.apply(p,arguments)||a)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(_,"./root"),_(function(g){var i=_("./root");i.chain.back=function(f,l){var e;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var y=this,c=y._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var d=0,p=f.length,e=c;for(d;d<p;d++)e=(e||u)[f[d]];return o!==e?l?y:e:(e=c.back)?e.$.back(f,l):void 0}if(typeof f=="function"){for(var m,e={back:c};(e=e.back)&&o===(m=f(e,l)););return m}return typeof f=="number"?(c.back||c).$.back(f-1):this};var u={},o})(_,"./back"),_(function(g){var i=_("./root");i.chain.chain=function(r){var n=this,t=n._,h=new(r||n).constructor(n),x=h._,T;return x.root=T=t.root,x.id=++T.once,x.back=n._,x.on=i.on,x.on("in",i.on.in,x),x.on("out",i.on.out,x),h};function u(r){var n,t=this.as,h=t.back,x=t.root,T;if(r.$||(r.$=t.$),this.to.next(r),t.err){t.on("in",{put:t.put=c,$:t.$});return}if(n=r.get){if(x.pass&&(x.pass[t.id]=t),t.lex&&Object.keys(t.lex).forEach(function(k){T[k]=t.lex[k]},T=r.get=r.get||{}),n["#"]||t.soul){if(n["#"]=n["#"]||t.soul,r["#"]||(r["#"]=d(9)),h=x.$.get(n["#"])._,n=n["."]){if(m(h.put,n)&&(T=h.ask&&h.ask[n],(h.ask||(h.ask={}))[n]=h.$.get(n)._,h.on("in",{get:n,put:{"#":h.soul,".":n,":":h.put[n],">":s(x.graph[h.soul],n)}}),T))return}else{if(T=h.ask&&h.ask[""],(h.ask||(h.ask={}))[""]=h,c!==h.put&&(h.on("in",h),T))return;r.$=h.$}return x.ask(e,r),x.on("in",r)}if(n["."])return t.get?(r={get:{".":t.get},$:t.$},(h.ask||(h.ask={}))[t.get]=r.$._,h.on("out",r)):(r={get:t.lex?r.get:{},$:t.$},h.on("out",r));if((t.ask||(t.ask={}))[""]=t,t.get)return n["."]=t.get,(h.ask||(h.ask={}))[t.get]=r.$._,h.on("out",r)}return h.on("out",r)}i.on.out=u;function o(r,n){n=n||this.as;var t=n.root,h=r.$||(r.$=n.$),x=(h||"")._||y,T=r.put||"",k=T["#"],j=T["."],S=c!==T["="]?T["="]:T[":"],$=T[">"]||-1/0,w;if(c!==r.put&&(c===T["#"]||c===T["."]||c===T[":"]&&c===T["="]||c===T[">"])){if(!p(T)){if(!(k=((T||"")._||"")["#"])){console.log("chain not yet supported for",T,"...",r,n);return}return h=n.root.$.get(k),setTimeout.each(Object.keys(T).sort(),function(b){b=="_"||c===($=s(T,b))||n.on("in",{$:h,put:{"#":k,".":b,"=":T[b],">":$},VIA:r})})}n.on("in",{$:x.back.$,put:{"#":k=x.back.soul,".":j=x.has||x.get,"=":T,">":s(x.back.put,j)},via:r});return}(r.seen||"")[n.id]||((r.seen||(r.seen=function(){}))[n.id]=n,n!==x&&(Object.keys(r).forEach(function(b){T[b]=r[b]},T={}),T.get=n.get||T.get,!n.soul&&!n.has?T.$$$=T.$$$||n.$:x.soul&&(T.$=n.$,T.$$=T.$$||x.$),r=T),l(r,n),(n.soul||r.$$)&&$>=s(t.graph[k],j)&&((T=t.$.get(k)._).put=v(T.put,j,$,S,k)),!x.soul&&$>=s(t.graph[k],j)&&(w=(t.$.get(k)._.next||"")[j])&&(w.put=S,typeof(T=p(S))=="string"&&(w.put=t.$.get(T)._.put||S)),this.to&&this.to.next(r),n.any&&setTimeout.each(Object.keys(n.any),function(b){(b=n.any[b])&&b(r)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(b){(b=n.echo[b])&&b.on("in",r)},0,99),((r.$$||"")._||x).soul&&(w=n.next)&&(w=w[j])&&(T={},Object.keys(r).forEach(function(b){T[b]=r[b]}),T.$=(r.$$||r.$).get(T.get=j),delete T.$$,delete T.$$$,w.on("in",T)),f(r,n))}i.on.in=o;function f(r,n){if(n=n||this.as||r.$._,!(r.$$&&this!==i.on)&&!(!r.put||n.soul)){var t=r.put||"",h=t["="]||t[":"],x,T=n.root,k=T.$.get(t["#"]).get(t["."])._;if(typeof(h=p(h))!="string"){this===i.on&&((k.echo||(k.echo={}))[n.id]=n);return}if(!((k.echo||(k.echo={}))[n.id]&&!(T.pass||"")[n.id])){if(x=T.pass){if(x[h+n.id])return;x[h+n.id]=1}(k.echo||(k.echo={}))[n.id]=n,n.has&&(n.link=h);var j=T.$.get(k.link=h)._;(j.echo||(j.echo={}))[k.id]=k;var x=n.ask||"";(x[""]||n.lex)&&j.on("out",{get:{"#":h}}),setTimeout.each(Object.keys(x),function(S,$){!S||!($=x[S])||$.on("out",{get:{"#":h,".":S}})},0,99)}}}i.on.link=f;function l(r,n){var t=r.put||"",h=c!==t["="]?t["="]:t[":"],x=n.root,T,k;if(c===h){if(n.soul&&c!==n.put||(k=(r.$$||r.$||"")._||"",r["@"]&&(c!==k.put||c!==n.put)))return;(T=n.link||r.linked)&&delete(x.$.get(T)._.echo||"")[n.id],n.has&&(n.link=null),n.put=c,setTimeout.each(Object.keys(n.next||""),function(j,S){!(S=n.next[j])||(T&&delete(x.$.get(T).get(j)._.echo||"")[S.id],S.on("in",{get:j,put:c,$:S.$}))},0,99);return}n.soul||r.$$||(T=p(h),k=r.$._||"",!((T===k.link||n.has&&!k.link)&&!((x.pass||"")[n.id]&&typeof T!="string"))&&(delete(k.echo||"")[n.id],l({get:n.get,put:c,$:r.$,linked:r.linked=r.linked||k.link},n)))}i.on.unlink=l;function e(r,n){var t=this.as,h=t.$._;h.root;var x=t.get||"",T=(r.put||"")[x["#"]]||"";if(!r.put||typeof x["."]=="string"&&c===T[x["."]]){if(c!==h.put||!h.soul&&!h.has)return;h.ack=(h.ack||0)+1,h.on("in",{get:h.get,put:h.put=c,$:h.$,"@":r["@"]});return}(r._||{}).miss=1,i.on.put(r)}var y={},c,d=String.random,p=i.valid,m=function(r,n){return r&&Object.prototype.hasOwnProperty.call(r,n)},a=i.state,s=a.is,v=a.ify})(_,"./chain"),_(function(g){var i=_("./root");i.chain.get=function(c,d,p){var m,a;if(typeof c=="string"){if(c.length==0)return(m=this.chain())._.err={err:i.log("0 length key!",c)},d&&d.call(m,m._.err),m;var s=this,v=s._,r=v.next||l;(m=r[c])||(m=c&&u(c,s)),m=m&&m.$}else if(typeof c=="function"){let T=function(j,S,$){if(!T.stun&&!((D=t.pass)&&!D[h])){var w=j.$._,b=(j.$$||"")._,A=(b||w).put,E=!w.has&&!w.soul,C={},D;if((E||y===A)&&(A=y===((D=j.put)||"")["="]?y===(D||"")[":"]?D:D[":"]:D["="]),typeof(D=i.valid(A))=="string"&&(A=y===(D=t.$.get(D)._.put)?n.not?y:A:D),!(n.not&&y===A)){if(y===n.stun){if((D=t.stun)&&D.on&&(v.$.back(function(N){if(D.on(""+N.id,C={}),(C.run||0)<T.id)return C}),!C.run&&D.on(""+w.id,C={}),!C.run&&b&&D.on(""+b.id,C={}),T.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=D.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[h]=function(){T(j,S,1)};return}if(y===A&&($=0),(D=t.hatch)&&!D.end&&y===n.hatch&&!$){if(x[w.$._.id])return;x[w.$._.id]=1,D.push(function(){T(j,S,1)});return}x={}}if(t.pass){if(t.pass[h+w.id])return;t.pass[h+w.id]=1}if(n.on){n.ok.call(w.$,A,w.get,j,S||T);return}if(n.v2020){n.ok(j,S||T);return}Object.keys(j).forEach(function(N){D[N]=j[N]},D={}),j=D,j.put=A,n.ok.call(n.as,j,S||T)}}};if(d===!0)return o(this,c,d,p),this;m=this;var v=m._,n=d||{},t=v.root,h;n.at=v,n.ok=c;var x={};return T.at=v,(v.any||(v.any={}))[h=String.random(7)]=T,T.off=function(){T.stun=1,!!v.any&&delete v.any[h]},T.rid=f,T.id=n.run||++t.once,a=t.pass,(t.pass={})[h]=1,n.out=n.out||{get:{}},v.on("out",n.out),t.pass=a,m}else{if(typeof c=="number")return this.get(""+c,d,p);if(typeof(a=e(c))=="string")return this.get(a,d,p);(a=this.get.next)&&(m=a(this,c))}return m?(d&&typeof d=="function"&&m.get(d,p),m):((m=this.chain())._.err={err:i.log("Invalid get request!",c)},d&&d.call(m,m._.err),m)};function u(c,d){var p=d._,m=p.next,a=d.chain(),s=a._;return m||(m=p.next={}),m[s.get=c]=s,d===p.root.$?s.soul=c:(p.soul||p.has)&&(s.has=c),s}function o(c,d,p,m){var a=c._,s=0,v;return(v=a.soul||a.link)?d(v,m,a):a.jam?a.jam.push([d,m]):(a.jam=[[d,m]],c.get(function(n,t){if(!(y===n.put&&!a.root.opt.super&&(v=Object.keys(a.root.opt.peers).length)&&++s<=v)){t.rid(n);var h=(h=n.$)&&h._||{},x=0,T;for(v=a.jam,delete a.jam;T=v[x++];){var k=T[0];T=T[1],k&&k(h.link||h.soul||i.valid(n.put)||((n.put||{})._||{})["#"],T,n,t)}}},{out:{get:{".":!0}}}),c)}function f(c){var d=this.at||this.on;if(!c||d.soul||d.has)return this.off();if(!!(c=(c=(c=c.$||c)._||c).id)){d.map;var p;if((p=this.seen||(this.seen={}))[c])return!0;p[c]=!0}}var l={},e=i.valid,y})(_,"./get"),_(function(g){var i=_("./root");i.chain.put=function(p,m,a){var s=this,v=s._,r=v.root;a=a||{},a.root=v.root,a.run||(a.run=r.once),u(a,v.id),a.ack=a.ack||m,a.via=a.via||s,a.data=a.data||p,a.soul||(a.soul=v.soul||typeof m=="string"&&m);var n=a.state=a.state||i.state();return typeof p=="function"?(p(function(t){a.data=t,s.put(l,l,a)}),s):a.soul?(a.$=r.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||y,a.ran=a.ran||o,function t(){var h=a.todo,x=h.pop(),T=x.it;x.ref&&x.ref._.id;var k,j,S,$,w;if(u(a,x.ref),($=x.todo)&&(j=$.pop(),T=T[j],$.length&&h.push(x)),j&&(h.path||(h.path=[])).push(j),!(k=c(T))&&!(w=i.is(T))){if(!Object.plain(T)){(a.ack||e).call(a,a.out={err:a.err=i.log("Invalid data: "+(T&&($=T.constructor)&&$.name||typeof T)+" at "+(a.via.back(function(C){C.get&&$.push(C.get)},$=[])||$.join("."))+"."+(h.path||[]).join("."))}),a.ran(a);return}for(var b=a.seen||(a.seen=[]),A=b.length;A--;)if(T===($=b[A]).it){k=T=$.link;break}}if(j&&k)x.node=d(x.node,j,n,T);else{let C=function(D,N){var I=S.link["#"];N&&(N.off(),N.rid(D));var J=I||D.soul||($=(D.$$||D.$)._||"").soul||$.link||(($=$.put||"")._||"")["#"]||$["#"]||(($=D.put||"")&&D.$$?$["#"]:($["="]||$[":"]||"")["#"]);if(!I&&u(a,D.$),!J&&!x.link["#"]){(x.wait||(x.wait=[])).push(function(){C(D,N)});return}J||(J=[],(D.$$||D.$).back(function(R){if($=R.soul||R.link)return J.push($);J.push(R.get)}),J=J.reverse().join("/")),S.link["#"]=J,!w&&(((a.graph||(a.graph={}))[J]=S.node||(S.node={_:{}}))._["#"]=J),delete a.wait[E],S.wait&&setTimeout.each(S.wait,function(R){R&&R()}),a.ran(a)};a.seen.push(S={it:T,link:{},todo:w?[]:Object.keys(T).sort().reverse(),path:(h.path||[]).slice(),up:x}),x.node=d(x.node,j,n,S.link),!w&&S.todo.length&&h.push(S);var E=a.seen.length;(a.wait||(a.wait={}))[E]="",$=(S.ref=w?T:j?x.ref.get(j):x.ref)._,($=T&&(T._||"")["#"]||$.soul||$.link)?C({soul:$}):S.ref.get(C,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!h.length)return a.ran(a);a.turn(t)}(),s):(f(a),s)};function u(p,m){if(!!m){m=(m._||"").id||m;var a=p.root.stun||(p.root.stun={on:i.on}),s={},v;p.stun||(p.stun=a.on("stun",function(){})),(v=a.on(""+m))&&v.the.last.next(s),!(s.run>=p.run)&&a.on(""+m,function(r){if(p.stun.end){this.off(),this.to.next(r);return}r.run=r.run||p.run,r.stun=r.stun||p.stun})}}function o(p){if(p.err){o.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var m=p.$.back(-1)._,a=m.root,s=m.ask(function(t){a.on("ack",t),t.err&&i.log(t),++v>(p.acks||0)&&this.off(),!!p.ack&&p.ack(t,this)},p.opt),v=0,r=p.stun,n;(n=function(){!r||(o.end(r,a),setTimeout.each(Object.keys(r=r.add||""),function(t){(t=r[t])&&t()}))}).hatch=n,p.via._.on("out",{put:p.out=p.graph,opt:p.opt,"#":s,_:n})}}o.end=function(p,m){p.end=e,p.the.to===p&&p===p.the.last&&delete m.stun,p.off()};function f(p){var m=p.via._,a;p.via=p.via.back(function(s){if(s.soul||!s.get)return s.$;a=p.data,(p.data={})[s.get]=a}),(!p.via||!p.via._.soul)&&(p.via=m.root.$.get(((p.data||"")._||"")["#"]||m.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}var l,e=function(){},y=setTimeout.turn,c=i.valid,d=i.state.ify})(_,"./put"),_(function(g){var i=_("./root");_("./chain"),_("./back"),_("./put"),_("./get"),g.exports=i})(_,"./index"),_(function(g){var i=_("./index");i.chain.on=function(f,l,e,y){var c=this,d=c._;d.root;var p;if(typeof f=="string")return l?(p=d.on(f,l,e||d,y),e&&e.$&&(e.subs||(e.subs=[])).push(p),c):d.on(f);var m=l;return(m=m===!0?{change:!0}:m||{}).not=1,m.on=1,c.get(f,m),c},i.chain.once=function(f,l){if(l=l||{},!f)return u(this);var e=this,y=e._,c=y.root;y.put;var d=String.random(7),p;return e.get(function(m,a,s,v){var r=this,n=r._,t=n.one||(n.one={});if(v.stun||t[d]==="")return;if((p=i.valid(m))===!0){h();return}if(typeof p=="string")return;clearTimeout((y.one||"")[d]),clearTimeout(t[d]),t[d]=setTimeout(h,l.wait||99);function h(){!n.has&&!n.soul&&(n={put:m,get:a}),o===(p=n.put)&&(p=((s.$$||"")._||"").put),!(typeof i.valid(p)=="string"&&(p=c.$.get(p)._.put,p===o))&&(v.stun||t[d]!==""&&(t[d]="",(y.soul||y.has)&&v.off(),f.call(r,p,n.get)))}},{on:1}),e};function u(f,l,e){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(e=f.chain())._.nix=f.once(function(y,c){e._.on("in",this._)}),e._.lex=f._.lex,e}i.chain.off=function(){var f=this,l=f._,e,y=l.back;if(!!y)return l.ack=0,(e=y.next)&&e[l.get]&&delete e[l.get],(e=y.ask)&&delete e[l.get],(e=y.put)&&delete e[l.get],(e=l.soul)&&delete y.root.graph[e],(e=l.map)&&Object.keys(e).forEach(function(c,d){d=e[c],d.link&&y.root.$.get(d.link).off()}),(e=l.next)&&Object.keys(e).forEach(function(c,d){d=e[c],d.$.off()}),l.on("off",{}),f};var o})(_,"./on"),_(function(g){var i=_("./index"),u=i.chain.get.next;i.chain.get.next=function(e,y){var c;return Object.plain(y)?(c=((c=y["#"])||"")["="]||c)?e.get(c):((c=e.chain()._).lex=y,e.on("in",function(d){String.match(d.get||(d.put||"")["."],y["."]||y["#"]||y)&&c.on("in",d),this.to.next(d)}),c.$):(u||f)(e,y)},i.chain.map=function(e,y,c){var d=this,p=d._,m,a;return Object.plain(e)&&(m=e["."]?e:{".":e},e=l),e?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),a=d.chain(),d.map().on(function(s,v,r,n){var t=(e||f).call(this,s,v,r,n);if(l!==t){if(s===t)return a._.on("in",r);if(i.is(t))return a._.on("in",t._);var h={};Object.keys(r.put).forEach(function(x){h[x]=r.put[x]},h),h["="]=t,a._.on("in",{get:v,put:h})}}),a):((a=p.each)||((p.each=a=d.chain())._.lex=m||a._.lex||p.lex,a._.nix=d.back("nix"),d.on("in",o,a._)),a)};function o(e){this.to.next(e);var y=this.as,c=e.$,d=c._,p=e.put,m;!d.soul&&!e.$$||(m=y.lex)&&!String.match(e.get||(p||"")["."],m["."]||m["#"]||m)||i.on.link(e,y)}var f=function(){},l})(_,"./map"),_(function(g){var i=_("./index");i.chain.set=function(u,o,f){var l=this,e=l.back(-1),y,c;return o=o||function(){},f=f||{},f.item=f.item||u,(y=((u||"")._||"")["#"])&&((u={})["#"]=y),typeof(c=i.valid(u))=="string"?l.get(y=c).put(u,o,f):i.is(u)?(l.put(function(d){u.get(function(p,m,a){if(!p)return o.call(l,{err:i.log('Only a node can be linked! Not "'+a.put+'"!')});(c={})[p]={"#":p},d(c)},!0)}),u):(Object.plain(u)&&(u=e.get(y=l.back("opt.uuid")()).put(u)),l.get(y||e.back("opt.uuid")(7)).put(u,o,f))}})(_,"./set"),_(function(g){_("./shim");function i(o){var f=function(){},l=o.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var e=setTimeout.turn||setTimeout,y=JSON.parseAsync||function(n,t,h){var x;try{t(x,JSON.parse(n,h))}catch(T){t(T)}},c=JSON.stringifyAsync||function(n,t,h,x){var T;try{t(T,JSON.stringify(n,h,x))}catch(k){t(k)}},d=o.dup,p=d.check,m=d.track,a=f.hear=function(n,t){if(!!n){if(l.max<=n.length)return f.say({dam:"!",err:"Message too big!"},t);f===this&&(a.d+=n.length||0,++a.c);var h=t.SH=+new Date,x=n[0],T;if(x==="["){y(n,function(k,j){if(k||!j)return f.say({dam:"!",err:"DAM JSON parse error."},t);console.STAT&&console.STAT(+new Date,j.length,"# on hear batch");var S=l.puff;(function $(){for(var w=+new Date,b=0,A;b<S&&(A=j[b++]);)a(A,t);j=j.slice(b),console.STAT&&console.STAT(w,+new Date-w,"hear loop"),s(t),!!j.length&&e($,0)})()}),n="";return}if(x==="{"||(n["#"]||Object.plain(n))&&(T=n)){if(T)return a.one(T,t,h);y(n,function(k,j){if(k||!j)return f.say({dam:"!",err:"DAM JSON parse error."},t);a.one(j,t,h)});return}}};a.one=function(n,t,h){var x,T,k,j,S;if(n.DBG&&(n.DBG=S={DBG:n.DBG}),S&&(S.h=h),S&&(S.hp=+new Date),(x=n["#"])||(x=n["#"]=String.random(9)),!(k=p(x))&&(T=n["##"],!(T&&(k=n["@"]||n.get&&x)&&d.check(j=k+T)))){if((n._=function(){}).via=f.leap=t,(k=n["><"])&&typeof k=="string"&&k.slice(0,99).split(",").forEach(function($){this[$]=1},n._.yo={}),k=n.dam){(k=f.hear[k])&&k(n,t,o),m(x);return}var h=+new Date;S&&(S.is=h),t.SI=x,o.on("in",f.last=n),S&&(S.hd=+new Date),console.STAT&&console.STAT(h,+new Date-h,n.get?"msg get":n.put?"msg put":"msg"),(k=m(x)).via=t,n.get&&(k.it=n),j&&m(j),f.leap=f.last=null}},a.c=a.d=0,function(){var n=0,t;f.hash=function(k,j){var S,$,w,b=+new Date;c(k.put,function A(E,C){var D=($||($=w=C||"")).slice(0,32768);if(S=String.hash(D,S),$=$.slice(32768),$){e(A,0);return}console.STAT&&console.STAT(b,+new Date-b,"say json+hash"),k._.$put=w,k["##"]=S,T(k,j),delete k._.$put},h)};function h(k,j){var S;return j instanceof Object?(Object.keys(j).sort().forEach(x,{to:S={},on:j}),S):j}function x(k){this.to[k]=this.on[k]}var T=f.say=function(k,j){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(k),!k)return!1;var $,w,b=k["@"],A=k._||(k._=function(){}),E=k.DBG,C=+new Date;if(A.y=A.y||C,j||E&&(E.y=C),($=k["#"])||($=k["#"]=String.random(9)),!t&&m($),k.put&&(k.err||(d.s[$]||"").err))return!1;if(!k["##"]&&u!==k.put&&!A.via&&b){f.hash(k,j);return}if(!j&&b&&(j=(S=d.s[b])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=f.last)&&b===S["#"]&&f.leap),!j&&b)return d.s[b]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!j&&f.way)return f.way(k);if(E&&(E.yh=+new Date),!(w=A.raw)){f.raw(k,j);return}if(E&&(E.yr=+new Date),!j||!j.id){if(!Object.plain(j||l.peers))return!1;var C=+new Date;l.puff;var D=l.peers,N=Object.keys(j||l.peers||{});console.STAT&&console.STAT(C,+new Date-C,"peer keys"),function R(){var U=+new Date;t=1;var F=A.raw;A.raw=w;for(var B=0,M;B<9&&(M=(N||"")[B++]);)!(M=D[M])||T(k,M);A.raw=F,t=0,N=N.slice(B),console.STAT&&console.STAT(U,+new Date-U,"say loop"),!!N.length&&(e(R,0),b&&m(b))}();return}if(!j.wire&&f.wire&&f.wire(j),$!==j.last){if(j.last=$,j===A.via||(S=A.yo)&&(S[j.url]||S[j.pid]||S[j.id]))return!1;if(console.STAT&&console.STAT(C,((E||A).yp=+new Date)-(A.y||C),"say prep"),!t&&b&&m(b),j.batch){if(j.tail=(S=j.tail||0)+w.length,j.tail<=l.pack){j.batch+=(S?",":"")+w;return}s(j)}j.batch="[";var I=+new Date;setTimeout(function(){console.STAT&&console.STAT(I,+new Date-I,"0ms TO"),s(j)},l.gap),v(w,j),console.STAT&&b===j.SI&&console.STAT(C,+new Date-j.SH,"say ack")}};f.say.c=f.say.d=0,f.raw=function(k,j){if(!k)return"";var S=k._||{},$,w;if(w=S.raw)return w;if(typeof k=="string")return k;var b=k["##"],A=k["@"];if(b&&A){if(!S.via&&p(A+b))return!1;if((w=(d.s[A]||"").it)||(w=f.last)&&A===w["#"]){if(b===w["##"])return!1;w["##"]||(w["##"]=b)}}if(!k.dam){var E=0,C=[];w=l.peers;for(var D in w){var N=w[D];if(C.push(N.url||N.pid||N.id),++E>6)break}E>1&&(k["><"]=C.join())}if($=S.$put){w={},Object.keys(k).forEach(function(J){w[J]=k[J]}),w.put=":])([:",c(w,function(J,R){if(!J){var U=+new Date;w=R.indexOf('"put":":])([:"'),I(u,R=R.slice(0,w+6)+$+R.slice(w+14)),console.STAT&&console.STAT(U,+new Date-U,"say slice")}});return}c(k,I);function I(J,R){J||(S.raw=R,T(k,j))}}}();function s(n){var t=n.batch,h=typeof t=="string";if(h&&(t+="]"),n.batch=n.tail=null,!!t&&!(h?3>t.length:!t.length)){if(!h)try{t=t.length===1?t[0]:JSON.stringify(t)}catch(x){return l.log("DAM JSON stringify error",x)}!t||v(t,n)}}function v(n,t){try{var h=t.wire;t.say?t.say(n):h.send&&h.send(n),f.say.d+=n.length||0,++f.say.c}catch{(t.queue=t.queue||[]).push(n)}}f.hi=function(n){var t=n.wire||{};n.id?l.peers[n.url||n.id]=n:(t=n.id=n.id||String.random(9),f.say({dam:"?",pid:o.opt.pid},l.peers[t]=n),delete d.s[n.last]),n.met=n.met||+new Date,t.hied||o.on(t.hied="hi",n),t=n.queue,n.queue=[],setTimeout.each(t||[],function(h){v(h,n)},0,9)},f.bye=function(n){o.on("bye",n);var t=+new Date;t=t-(n.met||t),f.bye.time=((f.bye.time||t)+t)/2},f.hear["!"]=function(n,t){l.log("Error:",n.err)},f.hear["?"]=function(n,t){n.pid&&(t.pid||(t.pid=n.pid),n["@"])||(f.say({dam:"?",pid:l.pid,"@":n["#"]},t),delete d.s[t.last])},o.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",f.say)}),o.on("bye",function(n,t){n=l.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(t=n.wire)&&t.close&&t.close(),delete l.peers[n.id],n.wire=null});var r={};return o.on("bye",function(n,t){this.to.next(n),(t=console.STAT)&&(t.peers=(t.peers||0)-1),!!(t=n.url)&&(r[t]=!0,setTimeout(function(){delete r[t]},l.lack||9e3))}),o.on("hi",function(n,t){this.to.next(n),(t=console.STAT)&&(t.peers=(t.peers||0)+1),!(!(t=n.url)||!r[t])&&(delete r[t],!l.super&&setTimeout.each(Object.keys(o.next),function(h){o.next[h],t={},t[h]=o.graph[h],t=String.hash(t),f.say({"##":t,get:{"#":h}},n)}))}),f}var u;try{g.exports=i}catch{}})(_,"./mesh"),_(function(g){var i=_("../index");i.Mesh=_("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var f=o.opt;if(f.WebSocket===!1)return;var l=i.window||{},e=f.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!e)return;f.WebSocket=e;var y=f.mesh=f.mesh||i.Mesh(o);y.wire||f.wire,y.wire=f.wire=c;function c(a){try{if(!a||!a.url)return v&&v(a);var s=a.url.replace(/^http/,"ws"),v=a.wire=new f.WebSocket(s);return v.onclose=function(){f.mesh.bye(a),p(a)},v.onerror=function(r){p(a)},v.onopen=function(){f.mesh.hi(a)},v.onmessage=function(r){!r||f.mesh.hear(r.data||r,a)},v}catch{}}setTimeout(function(){!f.super&&o.on("out",{dam:"hi"})},1);var d=2*999;function p(a){clearTimeout(a.defer),!(m&&a.retry<=0)&&(a.retry=(a.retry||f.retry+1||60)-(-a.tried+(a.tried=+new Date)<d*4?1:0),a.defer=setTimeout(function s(){if(m&&m.hidden)return setTimeout(s,d);c(a)},d))}var m=""+u!=typeof document&&document});var u})(_,"./websocket"),_(function(g){if(typeof Gun!="undefined"){var i=function(){},u;try{u=(Gun.window||i).localStorage}catch{}u||(Gun.log("Warning: No localStorage exists to persist data to!"),u={setItem:function(o,f){this[o]=f},removeItem:function(o){delete this[o]},getItem:function(o){return this[o]}}),Gun.on("create",function o(f){this.to.next(f);var l=f.opt;f.graph;var e=[],y,c;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{y=o[l.prefix]=o[l.prefix]||JSON.parse(u.getItem(l.prefix))||{}}catch{y=o[l.prefix]={}}f.on("get",function(p){this.to.next(p);var m=p.get,a,s,v,r;!m||!(a=m["#"])||(s=y[a]||r,s&&(v=m["."])&&!Object.plain(v)&&(s=Gun.state.ify({},v,Gun.state.is(s,v),s[v],a)),Gun.on.get.ack(p,s))}),f.on("put",function(p){this.to.next(p);var m=p.put,a=m["#"],s=m["."];y[a]=Gun.state.ify(y[a],s,m[">"],m[":"],a),p["@"]||e.push(p["#"]),!c&&(c=setTimeout(d,l.wait||1))});function d(){var p,m=e;clearTimeout(c),c=!1,e=[];try{u.setItem(l.prefix,JSON.stringify(y))}catch(a){Gun.log((p=a||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),f.on("localStorage:error",{err:p,get:l.prefix,put:y})}!p&&!Object.empty(l.peers)||setTimeout.each(m,function(a){f.on("in",{"@":a,err:p,ok:0})})}})}})(_,"./localStorage")})(),function(){var _;if(""+_!=typeof Gun){var O=function(w){console.log("Warning! Deprecated internal utility will break in next version:",w)},g=Gun;g.fn=g.fn||{is:function(w){return O("fn"),!!w&&typeof w=="function"}},g.bi=g.bi||{is:function(w){return O("bi"),w instanceof Boolean||typeof w=="boolean"}},g.num=g.num||{is:function(w){return O("num"),!u(w)&&(w-parseFloat(w)+1>=0||w===1/0||w===-1/0)}},g.text=g.text||{is:function(w){return O("text"),typeof w=="string"}},g.text.ify=g.text.ify||function(w){return O("text.ify"),g.text.is(w)?w:typeof JSON!="undefined"?JSON.stringify(w):w&&w.toString?w.toString():w},g.text.random=g.text.random||function(w,b){O("text.random");var A="";for(w=w||24,b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";w>0;)A+=b.charAt(Math.floor(Math.random()*b.length)),w--;return A},g.text.match=g.text.match||function(w,b){var A,E;return O("text.match"),typeof w!="string"?!1:(typeof b=="string"&&(b={"=":b}),b=b||{},A=b["="]||b["*"]||b[">"]||b["<"],w===A?!0:E!==b["="]?!1:(A=b["*"]||b[">"]||b["<"],w.slice(0,(A||"").length)===A?!0:E!==b["*"]?!1:E!==b[">"]&&E!==b["<"]?w>=b[">"]&&w<=b["<"]:E!==b[">"]&&w>=b[">"]||E!==b["<"]&&w<=b["<"]))},g.text.hash=g.text.hash||function(w,b){if(O("text.hash"),typeof w=="string"){if(b=b||0,!w.length)return b;for(var A=0,E=w.length,C;A<E;++A)C=w.charCodeAt(A),b=(b<<5)-b+C,b|=0;return b}},g.list=g.list||{is:function(w){return O("list"),w instanceof Array}},g.list.slit=g.list.slit||Array.prototype.slice,g.list.sort=g.list.sort||function(w){return O("list.sort"),function(b,A){return!b||!A?0:(b=b[w],A=A[w],b<A?-1:b>A?1:0)}},g.list.map=g.list.map||function(w,b,A){return O("list.map"),e(w,b,A)},g.list.index=1,g.obj=g.boj||{is:function(w){return O("obj"),w?w instanceof Object&&w.constructor===Object||Object.prototype.toString.call(w).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},g.obj.put=g.obj.put||function(w,b,A){return O("obj.put"),(w||{})[b]=A,w},g.obj.has=g.obj.has||function(w,b){return O("obj.has"),w&&Object.prototype.hasOwnProperty.call(w,b)},g.obj.del=g.obj.del||function(w,b){if(O("obj.del"),!!w)return w[b]=null,delete w[b],w},g.obj.as=g.obj.as||function(w,b,A,E){return O("obj.as"),w[b]=w[b]||(E===A?{}:A)},g.obj.ify=g.obj.ify||function(w){if(O("obj.ify"),f(w))return w;try{w=JSON.parse(w)}catch{w={}}return w},function(){var w;function b(A,E){l(this,E)&&w!==this[E]||(this[E]=A)}g.obj.to=g.obj.to||function(A,E){return O("obj.to"),E=E||{},e(A,b,E),E}}(),g.obj.copy=g.obj.copy||function(w){return O("obj.copy"),w&&JSON.parse(JSON.stringify(w))},function(){function w(b,A){var E=this.n,C;if(!(E&&(A===E||f(E)&&l(E,A)))&&C!==A)return!0}g.obj.empty=g.obj.empty||function(b,A){return O("obj.empty"),b?!e(b,w,{n:A}):!0}}(),function(){function w(E,C){if(arguments.length===2){w.r=w.r||{},w.r[E]=C;return}w.r=w.r||[],w.r.push(E)}var b=Object.keys,A;Object.keys=Object.keys||function(E){return A(E,function(C,D,N){N(D)})},g.obj.map=A=g.obj.map||function(E,C,D){O("obj.map");var N,I=0,J,R,U,F,B=typeof C=="function";if(w.r=N,b&&f(E)&&(U=b(E),F=!0),D=D||{},u(E)||U)for(J=(U||E).length;I<J;I++){var M=I+g.list.index;if(B){if(R=F?C.call(D,E[U[I]],U[I],w):C.call(D,E[I],M,w),R!==N)return R}else if(C===E[F?U[I]:I])return U?U[I]:M}else for(I in E)if(B){if(l(E,I)&&(R=D?C.call(D,E[I],I,w):C(E[I],I,w),R!==N))return R}else if(C===E[I])return I;return B?w.r:g.list.index?0:-1}}(),g.time=g.time||{},g.time.is=g.time.is||function(w){return O("time"),w?w instanceof Date:+new Date().getTime()};var i=g.fn.is,u=g.list.is,o=g.obj,f=o.is,l=o.has,e=o.map,y={};y.is=function(w){return O("val.is"),w===_?!1:w===null?!0:w===1/0?!1:m(w)||d(w)||p(w)?!0:y.link.is(w)||!1},y.link=y.rel={_:"#"},function(){y.link.is=function(b){if(O("val.link.is"),b&&b[c]&&!b._&&f(b)){var A={};if(e(b,w,A),A.id)return A.id}return!1};function w(b,A){var E=this;if(E.id)return E.id=!1;if(A==c&&m(b))E.id=b;else return E.id=!1}}(),y.link.ify=function(w){return O("val.link.ify"),a({},c,w)},g.obj.has._=".";var c=y.link._,_,d=g.bi.is,p=g.num.is,m=g.text.is,o=g.obj,f=o.is,a=o.put,e=o.map;g.val=g.val||y;var s={_:"_"};s.soul=function(w,b){return O("node.soul"),w&&w._&&w._[b||t]},s.soul.ify=function(w,b){return O("node.soul.ify"),b=typeof b=="string"?{soul:b}:b||{},w=w||{},w._=w._||{},w._[t]=b.soul||w._[t]||n(),w},s.soul._=y.link._,function(){s.is=function(b,A,E){O("node.is");var C;return f(b)&&(C=s.soul(b))?!e(b,w,{as:E,cb:A,s:C,n:b}):!1};function w(b,A){if(A!==s._){if(!y.is(b))return!0;this.cb&&this.cb.call(this.as,b,A,this.n,this.s)}}}(),function(){s.ify=function(b,A,E){return O("node.ify"),A?typeof A=="string"?A={soul:A}:typeof A=="function"&&(A={map:A}):A={},A.map&&(A.node=A.map.call(E,b,_,A.node||{})),(A.node=s.soul.ify(A.node||{},A))&&e(b,w,{o:A,as:E}),A.node};function w(b,A){var E=this.o,C,D;if(E.map){C=E.map.call(this.as,b,""+A,E.node),D===C?v(E.node,A):E.node&&(E.node[A]=C);return}y.is(b)&&(E.node[A]=b)}}();var o=g.obj,f=o.is,v=o.del,e=o.map,r=g.text,n=r.random,t=s.soul._,_;g.node=g.node||s;var h=g.state;h.lex=function(){return O("state.lex"),h().toString(36).replace(".","")},h.to=function(w,b,A){O("state.to");var E=(w||{})[b];return f(E)&&(E=x(E)),h.ify(A,b,h.is(w,b),E,s.soul(w))},function(){h.map=function(b,A,E){O("state.map");var C,D=f(D=b||A)?D:null;return b=i(b=b||A)?b:null,D&&!b?(A=p(A)?A:h(),D[j]=D[j]||{},e(D,w,{o:D,s:A}),D):(E=E||f(A)?A:C,A=p(A)?A:h(),function(N,I,J,R){if(!b)return w.call({o:J,s:A},N,I),N;b.call(E||this||{},N,I,J,R),!(l(J,I)&&C===J[I])&&w.call({o:J,s:A},N,I)})};function w(b,A){j!==A&&h.ify(this.o,A,this.s)}}();var o=g.obj;o.as;var l=o.has,f=o.is,e=o.map,x=o.copy,T=g.num,p=T.is,k=g.fn,i=k.is,j=s._,_,S={};(function(){S.is=function(A,E,C,D){return O("graph.is"),!A||!f(A)||$(A)?!1:!e(A,w,{cb:E,fn:C,as:D})};function w(A,E){if(!A||E!==s.soul(A)||!s.is(A,this.fn,this.as))return!0;!this.cb||(b.n=A,b.as=this.as,this.cb.call(b.as,A,E,b))}function b(A){A&&s.is(b.n,A,b.as)}})(),function(){S.ify=function(D,N,I){O("graph.ify");var J={path:[],obj:D};return N?typeof N=="string"?N={soul:N}:typeof N=="function"&&(N.map=N):N={},typeof I=="string"&&(N.soul=N.soul||I,I=_),N.soul&&(J.link=y.link.ify(N.soul)),N.shell=(I||{}).shell,N.graph=N.graph||{},N.seen=N.seen||[],N.as=N.as||I,w(N,J),N.root=J.node,N.graph};function w(D,N){var I;return(I=C(D,N))?I:(N.env=D,N.soul=A,s.ify(N.obj,b,N)&&(N.link=N.link||y.link.ify(s.soul(N.node)),N.obj!==D.shell&&(D.graph[y.link.is(N.link)]=N.node)),N)}function b(D,N,I){var J=this,R=J.env,U,F;if(s._===N&&l(D,y.link._))return I._;if(!!(U=E(D,N,I,J,R))){if(N||(J.node=J.node||I||{},l(D,s._)&&s.soul(D)&&(J.node._=x(D._)),J.node=s.soul.ify(J.node,y.link.is(J.link)),J.link=J.link||y.link.ify(s.soul(J.node))),(F=R.map)&&(F.call(R.as||{},D,N,I,J),l(I,N))){if(D=I[N],_===D){v(I,N);return}if(!(U=E(D,N,I,J,R)))return}if(!N)return J.node;if(U===!0)return D;if(F=w(R,{obj:D,path:J.path.concat(N)}),!!F.node)return F.link}}function A(D){var N=this,I=y.link.is(N.link),J=N.env.graph;N.link=N.link||y.link.ify(D),N.link[y.link._]=D,N.node&&N.node[s._]&&(N.node[s._][y.link._]=D),l(J,I)&&(J[D]=J[I],v(J,I))}function E(D,N,I,J,R){var U;if(y.is(D))return!0;if(f(D))return 1;if(U=R.invalid)return D=U.call(R.as||{},D,N,I),E(D,N,I,J,R);R.err="Invalid value at '"+J.path.concat(N).join(".")+"'!",g.list.is(D)&&(R.err+=" Use `.set(item)` instead of an Array.")}function C(D,N){for(var I=D.seen,J=I.length,R;J--;)if(R=I[J],N.obj===R.obj)return R;I.push(N)}}(),S.node=function(w){O("graph.node");var b=s.soul(w);if(!!b)return a({},b,w)},function(){S.to=function(b,A,E){if(O("graph.to"),!!b){var C={};return E=E||{seen:{}},e(b[A],w,{obj:C,graph:b,opt:E}),C}};function w(b,A){var E,C;if(s._===A){if($(b,y.link._))return;this.obj[A]=x(b);return}if(!(E=y.link.is(b))){this.obj[A]=b;return}if(C=this.opt.seen[E]){this.obj[A]=C;return}this.obj[A]=this.opt.seen[E]=S.to(this.graph,E,this.opt)}}();var i=g.fn.is,o=g.obj,f=o.is,v=o.del,l=o.has,$=o.empty,a=o.put,e=o.map,x=o.copy,_;g.graph=g.graph||S}}()})(Q);var ye=Q.exports,ve={exports:{}};(function(P){(function(){function _(g,i){return i?de(g):g.slice?_[u(g)]:function(o,f){g(o={exports:{}}),_[u(f)]=o.exports};function u(o){return o.split("/").slice(-1).toString().replace(".js","")}}var O=P;_(function(g){typeof window!="undefined"&&(g.window=window);var i=g.window||g,u,o=i.SEA||{};(o.window=g.window)&&(o.window.SEA=o);try{u+""!=typeof O&&(O.exports=o)}catch{}g.exports=o})(_,"./root"),_(function(g){var i=_("./root");try{i.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(_,"./https"),_(function(g){var i;if(i+""==typeof btoa){if(i+""==typeof Buffer)try{ne.Buffer=_("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}ne.btoa=function(u){return Buffer.from(u,"binary").toString("base64")},ne.atob=function(u){return Buffer.from(u,"base64").toString("binary")}}})(_,"./base64"),_(function(g){_("./base64");function i(){}Object.assign(i,{from:Array.from}),i.prototype=Object.create(Array.prototype),i.prototype.toString=function(u,o,f){u=u||"utf8",o=o||0;const l=this.length;if(u==="hex"){const e=new Uint8Array(this);return[...Array((f&&f+1||l)-o).keys()].map(y=>e[y+o].toString(16).padStart(2,"0")).join("")}if(u==="utf8")return Array.from({length:(f||l)-o},(e,y)=>String.fromCharCode(this[y+o])).join("");if(u==="base64")return btoa(this)},g.exports=i})(_,"./array"),_(function(g){_("./base64");var i=_("./array");function u(...o){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),u.from(...o)}u.prototype=Object.create(Array.prototype),Object.assign(u,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const o=arguments[0];let f;if(typeof o=="string"){const e=arguments[1]||"utf8";if(e==="hex"){const y=o.match(/([\da-fA-F]{2})/g).map(c=>parseInt(c,16));if(!y||!y.length)throw new TypeError("Invalid first argument for type 'hex'.");f=i.from(y)}else if(e==="utf8"||e==="binary"){const y=o.length,c=new Uint16Array(y);Array.from({length:y},(d,p)=>c[p]=o.charCodeAt(p)),f=i.from(c)}else if(e==="base64"){const y=atob(o),c=y.length,d=new Uint8Array(c);Array.from({length:c},(p,m)=>d[m]=y.charCodeAt(m)),f=i.from(d)}else e==="binary"?f=i.from(o):console.info("SafeBuffer.from unknown encoding: "+e);return f}if(o.byteLength,o.byteLength?o.byteLength:o.length){let e;return o instanceof ArrayBuffer&&(e=new Uint8Array(o)),i.from(e||o)}},alloc(o,f=0){return i.from(new Uint8Array(Array.from({length:o},()=>f)))},allocUnsafe(o){return i.from(new Uint8Array(Array.from({length:o})))},concat(o){if(!Array.isArray(o))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return i.from(o.reduce((f,l)=>f.concat(Array.from(l)),[]))}}),u.prototype.from=u.from,u.prototype.toString=i.prototype.toString,g.exports=u})(_,"./buffer"),_(function(g){const i=_("./root"),u={Buffer:_("./buffer")};var o={},f;if(JSON.parseAsync=JSON.parseAsync||function(e,y,c){var d;try{y(d,JSON.parse(e,c))}catch(p){y(p)}},JSON.stringifyAsync=JSON.stringifyAsync||function(e,y,c,d){var p;try{y(p,JSON.stringify(e,c,d))}catch(m){y(m)}},u.parse=function(e,y){return new Promise(function(c,d){JSON.parseAsync(e,function(p,m){p?d(p):c(m)},y)})},u.stringify=function(e,y,c){return new Promise(function(d,p){JSON.stringifyAsync(e,function(m,a){m?p(m):d(a)},y,c)})},i.window&&(u.crypto=window.crypto||window.msCrypto,u.subtle=(u.crypto||o).subtle||(u.crypto||o).webkitSubtle,u.TextEncoder=window.TextEncoder,u.TextDecoder=window.TextDecoder,u.random=e=>u.Buffer.from(u.crypto.getRandomValues(new Uint8Array(u.Buffer.alloc(e))))),!u.TextDecoder){const{TextEncoder:e,TextDecoder:y}=_((f+""==typeof O?".":"")+"./lib/text-encoding",1);u.TextDecoder=y,u.TextEncoder=e}if(!u.crypto)try{var l=_("crypto",1);Object.assign(u,{crypto:l,random:y=>u.Buffer.from(l.randomBytes(y))});const{Crypto:e}=_("@peculiar/webcrypto",1);u.ossl=u.subtle=new e({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}g.exports=u})(_,"./shim"),_(function(g){var i=_("./root"),u=_("./shim"),o={};o.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},o.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},o.ecdh={name:"ECDH",namedCurve:"P-256"},o.jwk=function(f,l){f=f.split(".");var e=f[0],y=f[1],c={kty:"EC",crv:"P-256",x:e,y,ext:!0};return c.key_ops=l?["sign"]:["verify"],l&&(c.d=l),c},o.keyToJwk=function(f){const e=f.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:e,ext:!1,alg:"A256GCM"}},o.recall={validity:12*60*60,hook:function(f){return f}},o.check=function(f){return typeof f=="string"&&f.slice(0,4)==="SEA{"},o.parse=async function(l){try{var e=typeof l=="string";return e&&l.slice(0,4)==="SEA{"&&(l=l.slice(3)),e?await u.parse(l):l}catch{}return l},i.opt=o,g.exports=o})(_,"./settings"),_(function(g){var i=_("./shim");g.exports=async function(u,o){var f=typeof u=="string"?u:await i.stringify(u),l=await i.subtle.digest({name:o||"SHA-256"},new i.TextEncoder().encode(f));return i.Buffer.from(l)}})(_,"./sha256"),_(function(g){const i=_("./shim"),u=i.subtle,o=i.ossl?i.ossl:u,f=l=>o.digest({name:"SHA-1"},new ArrayBuffer(l));g.exports=f})(_,"./sha1"),_(function(g){var i=_("./root"),u=_("./shim"),o=_("./settings"),f=_("./sha256"),l;i.work=i.work||(async(e,y,c,d)=>{try{var p=(y||{}).epub||y;if(d=d||{},p instanceof Function&&(c=p,p=l),e=typeof e=="string"?e:await u.stringify(e),(d.name||"").toLowerCase().slice(0,3)==="sha"){var m=u.Buffer.from(await f(e,d.name),"binary").toString(d.encode||"base64");if(c)try{c(m)}catch(r){console.log(r)}return m}p=p||u.random(9);var a=await(u.ossl||u.subtle).importKey("raw",new u.TextEncoder().encode(e),{name:d.name||"PBKDF2"},!1,["deriveBits"]),s=await(u.ossl||u.subtle).deriveBits({name:d.name||"PBKDF2",iterations:d.iterations||o.pbkdf2.iter,salt:new u.TextEncoder().encode(d.salt||p),hash:d.hash||o.pbkdf2.hash},a,d.length||o.pbkdf2.ks*8);e=u.random(e.length);var v=u.Buffer.from(s,"binary").toString(d.encode||"base64");if(c)try{c(v)}catch(r){console.log(r)}return v}catch(r){if(console.log(r),i.err=r,i.throw)throw r;c&&c();return}}),g.exports=i.work})(_,"./work"),_(function(g){var i=_("./root"),u=_("./shim");_("./settings"),i.name=i.name||(async(o,f)=>{try{if(o)try{o()}catch(l){console.log(l)}return}catch(l){if(console.log(l),i.err=l,i.throw)throw l;o&&o();return}}),i.pair=i.pair||(async(o,f)=>{try{var l=u.ossl||u.subtle,e=await u.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async d=>{var p={};p.priv=(await u.subtle.exportKey("jwk",d.privateKey)).d;var m=await u.subtle.exportKey("jwk",d.publicKey);return p.pub=m.x+"."+m.y,p});try{var y=await l.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async d=>{var p={};p.epriv=(await l.exportKey("jwk",d.privateKey)).d;var m=await l.exportKey("jwk",d.publicKey);return p.epub=m.x+"."+m.y,p})}catch(d){if(i.window)throw d;if(d=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw d}y=y||{};var c={pub:e.pub,priv:e.priv,epub:y.epub,epriv:y.epriv};if(o)try{o(c)}catch(d){console.log(d)}return c}catch(d){if(console.log(d),i.err=d,i.throw)throw d;o&&o();return}}),g.exports=i.pair})(_,"./pair"),_(function(g){var i=_("./root"),u=_("./shim"),o=_("./settings"),f=_("./sha256"),l;i.sign=i.sign||(async(e,y,c,d)=>{try{if(d=d||{},!(y||d).priv){if(!i.I)throw"No signing key.";y=await i.I(null,{what:e,how:"sign",why:d.why})}if(l===e)throw"`undefined` not allowed.";var p=await o.parse(e),m=d.check=d.check||p;if(i.verify&&(i.opt.check(m)||m&&m.s&&m.m)&&l!==await i.verify(m,y)){var t=await o.parse(m);if(d.raw||(t="SEA"+await u.stringify(t)),c)try{c(t)}catch(x){console.log(x)}return t}var a=y.pub,s=y.priv,v=o.jwk(a,s),r=await f(p),n=await(u.ossl||u.subtle).importKey("jwk",v,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(h=>(u.ossl||u.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},h,new Uint8Array(r))),t={m:p,s:u.Buffer.from(n,"binary").toString(d.encode||"base64")};if(d.raw||(t="SEA"+await u.stringify(t)),c)try{c(t)}catch(h){console.log(h)}return t}catch(h){if(console.log(h),i.err=h,i.throw)throw h;c&&c();return}}),g.exports=i.sign})(_,"./sign"),_(function(g){var i=_("./root"),u=_("./shim"),o=_("./settings"),f=_("./sha256"),l;i.verify=i.verify||(async(c,d,p,m)=>{try{var a=await o.parse(c);if(d===!1){var s=await o.parse(a.m);if(p)try{p(s)}catch(j){console.log(j)}return s}m=m||{};var v=d.pub||d,r=i.opt.slow_leak?await i.opt.slow_leak(v):await(u.ossl||u.subtle).importKey("jwk",o.jwk(v),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await f(a.m),t,h,x,T;try{if(t=u.Buffer.from(a.s,m.encode||"base64"),h=new Uint8Array(t),x=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,h,new Uint8Array(n)),!x)throw"Signature did not match."}catch{if(i.opt.fallback)return await i.opt.fall_verify(c,d,p,m)}var k=x?await o.parse(a.m):l;if(p)try{p(k)}catch(j){console.log(j)}return k}catch(j){if(console.log(j),i.err=j,i.throw)throw j;p&&p();return}}),g.exports=i.verify;var e={};i.opt.slow_leak=c=>{if(e[c])return e[c];var d=o.jwk(c);return e[c]=(u.ossl||u.subtle).importKey("jwk",d,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),e[c]};var y=i.opt;i.opt.fall_verify=async function(c,d,p,m,a){if(a===i.opt.fallback)throw"Signature did not match";a=a||1;var s=c||"";c=i.opt.unpack(c)||c;var v=await o.parse(c),r=d.pub||d,n=await i.opt.slow_leak(r),t=a<=i.opt.fallback?u.Buffer.from(await u.subtle.digest({name:"SHA-256"},new u.TextEncoder().encode(await o.parse(v.m)))):await f(v.m),h,x,T;try{if(h=u.Buffer.from(v.s,m.encode||"base64"),x=new Uint8Array(h),T=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,x,new Uint8Array(t)),!T)throw"Signature did not match."}catch{try{h=u.Buffer.from(v.s,"utf8"),x=new Uint8Array(h),T=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,x,new Uint8Array(t))}catch{if(!T)throw"Signature did not match."}}var k=T?await o.parse(v.m):l;if(y.fall_soul=s["#"],y.fall_key=s["."],y.fall_val=c,y.fall_state=s[">"],p)try{p(k)}catch(j){console.log(j)}return k},i.opt.fallback=2})(_,"./verify"),_(function(g){var i=_("./shim"),u=_("./settings"),o=_("./sha256");const f=async(l,e,y)=>{const c=l+(e||i.random(8)).toString("utf8"),d=i.Buffer.from(await o(c),"binary"),p=u.keyToJwk(d);return await i.subtle.importKey("jwk",p,{name:"AES-GCM"},!1,["encrypt","decrypt"])};g.exports=f})(_,"./aeskey"),_(function(g){var i=_("./root"),u=_("./shim");_("./settings");var o=_("./aeskey"),f;i.encrypt=i.encrypt||(async(l,e,y,c)=>{try{c=c||{};var d=(e||c).epriv||e;if(f===l)throw"`undefined` not allowed.";if(!d){if(!i.I)throw"No encryption key.";e=await i.I(null,{what:l,how:"encrypt",why:c.why}),d=e.epriv||e}var p=typeof l=="string"?l:await u.stringify(l),m={s:u.random(9),iv:u.random(15)},a=await o(d,m.s,c).then(v=>u.subtle.encrypt({name:c.name||"AES-GCM",iv:new Uint8Array(m.iv)},v,new u.TextEncoder().encode(p))),s={ct:u.Buffer.from(a,"binary").toString(c.encode||"base64"),iv:m.iv.toString(c.encode||"base64"),s:m.s.toString(c.encode||"base64")};if(c.raw||(s="SEA"+await u.stringify(s)),y)try{y(s)}catch(v){console.log(v)}return s}catch(v){if(console.log(v),i.err=v,i.throw)throw v;y&&y();return}}),g.exports=i.encrypt})(_,"./encrypt"),_(function(g){var i=_("./root"),u=_("./shim"),o=_("./settings"),f=_("./aeskey");i.decrypt=i.decrypt||(async(l,e,y,c)=>{try{c=c||{};var d=(e||c).epriv||e;if(!d){if(!i.I)throw"No decryption key.";e=await i.I(null,{what:l,how:"decrypt",why:c.why}),d=e.epriv||e}var p=await o.parse(l),m,a,s;try{m=u.Buffer.from(p.s,c.encode||"base64"),a=u.Buffer.from(p.iv,c.encode||"base64"),s=u.Buffer.from(p.ct,c.encode||"base64");var v=await f(d,m,c).then(n=>u.subtle.decrypt({name:c.name||"AES-GCM",iv:new Uint8Array(a),tagLength:128},n,new Uint8Array(s)))}catch{if(c.encode==="utf8")throw"Could not decrypt";if(i.opt.fallback)return c.encode="utf8",await i.decrypt(l,e,y,c)}var r=await o.parse(new u.TextDecoder("utf8").decode(v));if(y)try{y(r)}catch(n){console.log(n)}return r}catch(n){if(console.log(n),i.err=n,i.throw)throw n;y&&y();return}}),g.exports=i.decrypt})(_,"./decrypt"),_(function(g){var i=_("./root"),u=_("./shim");_("./settings"),i.secret=i.secret||(async(f,l,e,y)=>{try{if(y=y||{},!l||!l.epriv||!l.epub){if(!i.I)throw"No secret mix.";l=await i.I(null,{what:f,how:"secret",why:y.why})}var c=f.epub||f,d=l.epub,p=l.epriv,m=u.ossl||u.subtle,a=o(c),s=Object.assign({public:await m.importKey(...a,!0,[])},{name:"ECDH",namedCurve:"P-256"}),v=o(d,p),r=await m.importKey(...v,!1,["deriveBits"]).then(async t=>{var h=await m.deriveBits(s,t,256),x=new Uint8Array(h),T=await m.importKey("raw",x,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return m.exportKey("jwk",T).then(({k})=>k)}),n=r;if(e)try{e(n)}catch(t){console.log(t)}return n}catch(t){if(console.log(t),i.err=t,i.throw)throw t;e&&e();return}});var o=(f,l)=>{var[e,y]=f.split("."),c=l?{d:l}:{};return["jwk",Object.assign(c,{x:e,y,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};g.exports=i.secret})(_,"./secret"),_(function(g){var i=_("./root");i.certify=i.certify||(async(u,o={},f,l,e={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),u=(()=>{var n=[];if(u){if((typeof u=="string"||Array.isArray(u))&&u.indexOf("*")>-1)return"*";if(typeof u=="string")return u;if(Array.isArray(u)){if(u.length===1&&u[0])return typeof u[0]=="object"&&u[0].pub?u[0].pub:typeof u[0]=="string"?u[0]:null;u.map(t=>{typeof t=="string"?n.push(t):typeof t=="object"&&t.pub&&n.push(t.pub)})}return typeof u=="object"&&u.pub?u.pub:n.length>0?n:null}})(),!u)return console.log("No certificant found.");const c=e.expiry&&(typeof e.expiry=="number"||typeof e.expiry=="string")?parseFloat(e.expiry):null,d=(o||{}).read?o.read:null,p=(o||{}).write?o.write:typeof o=="string"||Array.isArray(o)||o["+"]||o["#"]||o["."]||o["="]||o["*"]||o[">"]||o["<"]?o:null,m=(e||{}).block||(e||{}).blacklist||(e||{}).ban||{},a=m.read&&(typeof m.read=="string"||(m.read||{})["#"])?m.read:null,s=typeof m=="string"?m:m.write&&(typeof m.write=="string"||m.write["#"])?m.write:null;if(!d&&!p)return console.log("No policy found.");const v=JSON.stringify(Y(Y(Y(Y(Y({c:u},c?{e:c}:{}),d?{r:d}:{}),p?{w:p}:{}),a?{rb:a}:{}),s?{wb:s}:{}));var y=await i.sign(v,f,null,{raw:1});if(e.raw||(y="SEA"+JSON.stringify(y)),l)try{l(y)}catch(n){console.log(n)}return y}catch(c){if(i.err=c,i.throw)throw c;l&&l();return}}),g.exports=i.certify})(_,"./certify"),_(function(g){var i=_("./shim"),u=_("./root");u.work=_("./work"),u.sign=_("./sign"),u.verify=_("./verify"),u.encrypt=_("./encrypt"),u.decrypt=_("./decrypt"),u.certify=_("./certify"),u.random=u.random||i.random,u.Buffer=u.Buffer||_("./buffer"),u.keyid=u.keyid||(async o=>{try{const f=i.Buffer.concat(o.replace(/-/g,"+").replace(/_/g,"/").split(".").map(c=>i.Buffer.from(c,"base64"))),l=i.Buffer.concat([i.Buffer.from([153,f.length/256,f.length%256]),f]),e=await sha1hash(l),y=i.Buffer.from(e,"binary");return y.toString("hex",y.length-8)}catch(f){throw console.log(f),f}}),((u.window||{}).GUN||{}).SEA=u,g.exports=u})(_,"./sea"),_(function(g){var i=_("./sea"),u,o;i.window?u=i.window.GUN||{chain:{}}:u=_((o+""==typeof O?".":"")+"./gun",1),i.GUN=u;function f(e){this._={$:this}}f.prototype=function(){function e(){}return e.prototype=u.chain,new e}(),f.prototype.constructor=f,u.chain.user=function(e){var y=this,c=y.back(-1),d;if(e)return e=i.opt.pub((e._||"")["#"])||e,c.get("~"+e);if(d=c.back("user"))return d;var c=c._,p=c,m=p.opt.uuid||l;return(p=(d=p.user=y.chain(new f))._).opt={},p.opt.uuid=function(a){var s=m(),v=c.user;return!v||!(v=v.is)||!(v=v.pub)||(s="~"+v+"/"+s,a&&a.call&&a(null,s)),s},d};function l(){return u.state().toString(36).replace(".","")}u.User=f,f.GUN=u,f.SEA=u.SEA=i,g.exports=f})(_,"./user"),_(function(g){var i,u=""+i!=typeof window?window.Gun||{chain:{}}:_((""+i==typeof O?".":"")+"./gun",1);u.chain.then=function(o,f){var l=this,e=new Promise(function(y,c){l.once(y,f)});return o?e.then(o):e}})(_,"./then"),_(function(g){var i=_("./user"),u=i.SEA,o=i.GUN,f=function(){};i.prototype.create=function(...l){var e=typeof l[0]=="object"&&(l[0].pub||l[0].epub)?l[0]:typeof l[1]=="object"&&(l[1].pub||l[1].epub)?l[1]:null,y=e&&(e.pub||e.epub)?e.pub:typeof l[0]=="string"?l[0]:null,c=e&&(e.pub||e.epub)?e:y&&typeof l[1]=="string"?l[1]:null,d=l.filter(n=>typeof n=="function")[0]||null,p=l&&l.length>1&&typeof l[l.length-1]=="object"?l[l.length-1]:{},m=this,a=m._,s=m.back(-1);if(d=d||f,p=p||{},p.check!==!1){var v;if(y||(v="No user."),(c||"").length<8&&(v="Password too short!"),v)return d({err:o.log(v)}),m}if(a.ing)return(d||f)({err:o.log("User is already being created or authenticated!"),wait:!0}),m;a.ing=!0;var r={};return r.a=function(n){if(r.pubs=n,n&&!p.already){var t={err:o.log("User already created!")};a.ing=!1,(d||f)(t),m.leave();return}r.salt=String.random(64),u.work(c,r.salt,r.b)},r.b=function(n){r.proof=n,e?r.c(e):u.pair(r.c)},r.c=function(n){var t;r.pair=n||{},(t=a.root.user)&&(t._.sea=n,t.is={pub:n.pub,epub:n.epub,alias:y}),r.data={pub:n.pub},r.d()},r.d=function(){r.data.alias=y,r.e()},r.e=function(){r.data.epub=r.pair.epub,u.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},r.proof,r.f,{raw:1})},r.f=function(n){r.data.auth=JSON.stringify({ek:n,s:r.salt}),r.g(r.data.auth)},r.g=function(n){var t;r.data.auth=r.data.auth||n,s.get(t="~"+r.pair.pub).put(r.data).on(r.h);var h={};h[t]={"#":t},s.get("~@"+y).put(h).get(t).on(r.i)},r.h=function(n,t,h,x){x.off(),r.h.ok=1,r.i()},r.i=function(n,t,h,x){x&&(r.i.ok=1,x.off()),!(!r.h.ok||!r.i.ok)&&(a.ing=!1,d({ok:0,pub:r.pair.pub}),f===d&&(e?m.auth(e):m.auth(y,c)))},s.get("~@"+y).once(r.a),m},i.prototype.leave=function(l,e){var y=this,c=y.back(-1)._.user;if(c&&(delete c.is,delete c._.is,delete c._.sea),u.window)try{var d={};d=window.sessionStorage,delete d.recall,delete d.pair}catch{}return y}})(_,"./create"),_(function(g){var i=_("./user"),u=i.SEA,o=i.GUN,f=function(){};i.prototype.auth=function(...e){var y=typeof e[0]=="object"&&(e[0].pub||e[0].epub)?e[0]:typeof e[1]=="object"&&(e[1].pub||e[1].epub)?e[1]:null,c=!y&&typeof e[0]=="string"?e[0]:null,d=c&&typeof e[1]=="string"?e[1]:null,p=e.filter(t=>typeof t=="function")[0]||null,m=e&&e.length>1&&typeof e[e.length-1]=="object"?e[e.length-1]:{},a=this,s=a._,v=a.back(-1);if(s.ing)return(p||f)({err:o.log("User is already being created or authenticated!"),wait:!0}),a;s.ing=!0;var r={},n;return r.a=function(t){if(!t)return r.b();if(!t.pub){var h=[];return Object.keys(t).forEach(function(x){x!="_"&&h.push(t[x])}),r.b(h)}if(r.name)return r.f(t);r.c((r.data=t).auth)},r.b=function(t){var h=(r.list=(r.list||[]).concat(t||[])).shift();if(n===h)return r.name?r.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):r.err("Wrong user or password.");v.get(h).once(r.a)},r.c=function(t){if(n===t)return r.b();if(typeof t=="string")return r.c(l(t));u.work(d,(r.auth=t).s,r.d,r.enc)},r.d=function(t){u.decrypt(r.auth.ek,t,r.e,r.enc)},r.e=function(t){if(n===t)return r.enc?(r.enc=null,r.b()):(r.enc={encode:"utf8"},r.c(r.auth));r.half=t,r.f(r.data)},r.f=function(t){var h=r.half||{},x=r.data||{};r.g(r.lol={pub:t.pub||x.pub,epub:t.epub||x.epub,priv:t.priv||h.priv,epriv:t.epriv||h.epriv})},r.g=function(t){if(!t||!t.pub||!t.epub)return r.b();r.pair=t;var h=v._.user,x=h._;x.tag;var T=x.opt;x=h._=v.get("~"+t.pub)._,x.opt=T,h.is={pub:t.pub,epub:t.epub,alias:c||t.pub},x.sea=r.pair,s.ing=!1;try{d&&n==(l(s.root.graph["~"+t.pub].auth)||"")[":"]&&(m.shuffle=m.change=d)}catch{}if(m.change?r.z():(p||f)(x),u.window&&(a.back("user")._.opt||m).remember)try{var k={};k=window.sessionStorage,k.recall=!0,k.pair=JSON.stringify(t)}catch{}try{v._.tag.auth?v._.on("auth",x):setTimeout(function(){v._.on("auth",x)},1)}catch(j){o.log("Your 'auth' callback crashed with:",j)}},r.z=function(){r.salt=String.random(64),u.work(m.change,r.salt,r.y)},r.y=function(t){u.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},t,r.x,{raw:1})},r.x=function(t){r.w(JSON.stringify({ek:t,s:r.salt}))},r.w=function(t){if(m.shuffle){console.log("migrate core account from UTF8 & shuffle");var h={};Object.keys(r.data).forEach(function(x){h[x]=r.data[x]}),delete h._,h.auth=t,v.get("~"+r.pair.pub).put(h)}v.get("~"+r.pair.pub).get("auth").put(t,p||f)},r.err=function(t){var h={err:o.log(t||"User cannot be found!")};s.ing=!1,(p||f)(h)},r.plugin=function(t){if(!(r.name=t))return r.err();var h=[t];t[0]!=="~"&&(h[1]="~"+t,h[2]="~@"+t),r.b(h)},y?r.g(y):c?v.get("~@"+c).once(r.a):!c&&!d&&u.name(r.plugin),a};function l(e){if(typeof e!="string")return e;try{e=JSON.parse(e)}catch{e={}}return e}})(_,"./auth"),_(function(g){var i=_("./user"),u=i.SEA;i.GUN,i.prototype.recall=function(o,f){var l=this,e=l.back(-1);if(o=o||{},o&&o.sessionStorage){if(u.window)try{var y={};y=window.sessionStorage,y&&(e._.opt.remember=!0,(l.back("user")._.opt||o).remember=!0,(y.recall||y.pair)&&e.user().auth(JSON.parse(y.pair),f))}catch{}return l}return l}})(_,"./recall"),_(function(g){var i=_("./user"),u=i.SEA,o=i.GUN,f=function(){};i.prototype.pair=function(){var l=this,e;try{e=new Proxy({DANGER:"\u2620"},{get:function(y,c,d){if(!(!l.is||!(l._||"").sea))return l._.sea[c]}})}catch{}return e},i.prototype.delete=async function(l,e,y){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var c=this;c.back(-1);var d=c.back("user");try{d.auth(l,e,function(p){var m=(d.is||{}).pub;d.map().once(function(){this.put(null)}),d.leave(),(y||f)({ok:0})})}catch(p){o.log("User.delete failed! Error:",p)}return c},i.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const l=this.back(-1);try{return await authRecall(l),l._.user._}catch{const y="No session!";throw o.log(y),{err:y}}},i.prototype.trust=async function(l){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(l)&&l.get("pub").get((e,y)=>{console.log(e,y)}),l.get("trust").get(path).put(theirPubkey)},i.prototype.grant=function(l,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,c=y.back(-1).user(),d=c._.sea,p="";return y.back(function(m){m.is||(p+=m.get||"")}),async function(){var m,a=await c.get("grant").get(d.pub).get(p).then();a=await u.decrypt(a,d),a||(a=u.random(16).toString(),m=await u.encrypt(a,d),c.get("grant").get(d.pub).get(p).put(m));var s=l.get("pub").then(),v=l.get("epub").then();s=await s,v=await v;var r=await u.secret(v,d);m=await u.encrypt(a,r),c.get("grant").get(s).get(p).put(m,e)}(),y},i.prototype.secret=function(l,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,c=y.back(-1).user(),d=c.pair(),p="";return y.back(function(m){m.is||(p+=m.get||"")}),async function(){var m,a=await c.get("trust").get(d.pub).get(p).then();a=await u.decrypt(a,d),a||(a=u.random(16).toString(),m=await u.encrypt(a,d),c.get("trust").get(d.pub).get(p).put(m)),m=await u.encrypt(l,a),y.put(m,e)}(),y},g.exports=i})(_,"./share"),_(function(g){var i=_("./sea"),u=_("./settings"),o=function(){},f,l=""+f!=typeof window?window.Gun||{on:o}:_((""+f==typeof O?".":"")+"./gun",1);l.on("opt",function(a){a.sea||(a.sea={own:{}},a.on("put",e,a)),this.to.next(a)});function e(a){var s=this,v=s.as,r=a.put,n=r["#"],t=r["."],h=r[":"],x=r[">"],T=a["#"],k;if(!(!n||!t)){if((a._||"").faith&&(v.opt||"").faith&&typeof a._=="function"){i.opt.pack(r,function(S){i.verify(S,!1,function($){r["="]=i.opt.unpack($),s.to.next(a)})});return}var j=function(S){v.on("in",{"@":T,err:a.err=S})};if((a._||"").DBG&&((a._||"").DBG.c=+new Date),0<=n.indexOf("<?")&&(k=parseFloat(n.split("<?")[1]||""),k&&x<l.state()-k*1e3)){(k=a._)&&k.stun&&k.stun--;return}if(n==="~@"){e.alias(s,a,h,t,n,v,j);return}if(n.slice(0,2)==="~@"){e.pubs(s,a,h,t,n,v,j);return}if(k=i.opt.pub(n)){e.pub(s,a,h,t,n,v,j,v.user||"",k);return}if(0<=n.indexOf("#")){e.hash(s,a,h,t,n,v,j);return}e.any(s,a,h,t,n,v,j,v.user||"")}}e.hash=function(a,s,v,r,n,t,h){i.work(v,null,function(x){if(x&&x===r.split("#").slice(-1)[0])return a.to.next(s);h("Data hash not same as hash!")},{name:"SHA-256"})},e.alias=function(a,s,v,r,n,t,h){if(!v)return h("Data must exist!");if("~@"+r===c(v))return a.to.next(s);h("Alias not same!")},e.pubs=function(a,s,v,r,n,t,h){if(!v)return h("Alias must exist!");if(r===c(v))return a.to.next(s);h("Alias not same!")},e.pub=async function(a,s,v,r,n,t,h,x,T){var k;const j=await u.parse(v)||{},S=($,w,b)=>{if($.m&&$.s&&w&&T)return i.verify($,T,A=>{if(f!==A&&f!==A.e&&s.put[">"]&&s.put[">"]>parseFloat(A.e))return h("Certificate expired.");if(f!==A&&A.c&&A.w&&(A.c===w||A.c.indexOf("*")>-1)){let C=n.indexOf("/")>-1?n.replace(n.substring(0,n.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const D=Array.isArray(A.w)?A.w:typeof A.w=="object"||typeof A.w=="string"?[A.w]:[];for(const N of D)if(String.match(C,N["#"])&&String.match(r,N["."])||!N["."]&&String.match(C,N["#"])||!N["#"]&&String.match(r,N["."])||String.match(C?C+"/"+r:r,N["#"]||N)){if(N["+"]&&N["+"].indexOf("*")>-1&&C&&C.indexOf(w)==-1&&r.indexOf(w)==-1)return h(`Path "${C}" or key "${r}" must contain string "${w}".`);if(A.wb&&(typeof A.wb=="string"||(A.wb||{})["#"])){var E=a.as.root.$.back(-1);return typeof A.wb=="string"&&A.wb.slice(0,1)!=="~"&&(E=E.get("~"+T)),E.get(A.wb).get(w).once(I=>I&&(I===1||I===!0)?h(`Certificant ${w} blocked.`):b(A))}return b(A)}return h("Certificate verification fail.")}})};if(r==="pub"&&"~"+T===n)return v===T?a.to.next(s):h("Account not same!");if((k=x.is)&&k.pub&&!j["*"]&&!j["+"]&&(T===k.pub||T!==k.pub&&((s._.msg||{}).opt||{}).cert)){i.opt.pack(s.put,$=>{i.sign($,x._.sea,async function(w){if(f===w)return h(i.err||"Signature fail.");if(s.put[":"]={":":k=i.opt.unpack(w.m),"~":w.s},s.put["="]=k,T===x.is.pub){(k=c(v))&&((t.sea.own[k]=t.sea.own[k]||{})[T]=1),JSON.stringifyAsync(s.put[":"],function(b,A){return b?h(b||"Stringify error."):(s.put[":"]=A,a.to.next(s))});return}if(T!==x.is.pub&&((s._.msg||{}).opt||{}).cert){const b=await u.parse(s._.msg.opt.cert);b&&b.m&&b.s&&S(b,x.is.pub,A=>{s.put[":"]["+"]=b,s.put[":"]["*"]=x.is.pub,JSON.stringifyAsync(s.put[":"],function(E,C){return E?h(E||"Stringify error."):(s.put[":"]=C,a.to.next(s))})})}},{raw:1})});return}i.opt.pack(s.put,$=>{i.verify($,j["*"]||T,function(w){var b;if(w=i.opt.unpack(w),f===w)return h("Unverified data.");if((b=c(w))&&T===i.opt.pub(b)&&((t.sea.own[b]=t.sea.own[b]||{})[T]=1),j["+"]&&j["+"].m&&j["+"].s&&j["*"])S(j["+"],j["*"],A=>(s.put["="]=w,a.to.next(s)));else return s.put["="]=w,a.to.next(s)})})},e.any=function(a,s,v,r,n,t,h,x){if(t.opt.secure)return h("Soul missing public key at '"+r+"'.");t.on("secure",function(T){if(this.off(),!t.opt.secure)return a.to.next(T);h("Data cannot be changed.")}).on.on("secure",s)};var y=l.valid,c=function(a,s){return typeof(s=y(a))=="string"&&s};(l.state||"").ify;var d=/[^\w_-]/;i.opt.pub=function(a){if(!!a&&(a=a.split("~"),!(!a||!(a=a[1]))&&(a=a.split(d).slice(0,2),!(!a||a.length!=2)&&(a[0]||"")[0]!=="@")))return a=a.slice(0,2).join("."),a},i.opt.stringy=function(a){},i.opt.pack=function(a,s,v,r,n){var t,h;if(i.opt.check(a))return s(a);a&&a["#"]&&a["."]&&a[">"]&&(t=a[":"],h=1),JSON.parseAsync(h?t:a,function(x,T){var k=f!==(T||"")[":"]&&(T||"")["~"];if(!k){s(a);return}s({m:{"#":n||a["#"],".":v||a["."],":":(T||"")[":"],">":a[">"]||l.state.is(r,v)},s:k})})};var p=i.opt;i.opt.unpack=function(a,s,v){var r;if(f!==a){if(a&&f!==(r=a[":"]))return r;if(s=s||p.fall_key,!v&&p.fall_val&&(v={},v[s]=p.fall_val),!(!s||!v)){if(a===v[s]||!i.opt.check(v[s]))return a;var n=v&&v._&&v._["#"]||p.fall_soul,t=l.state.is(v,s)||p.fall_state;if(a&&a.length===4&&n===a[0]&&s===a[1]&&m(t)===m(a[3]))return a[2];if(t<i.opt.shuffle_attack)return a}}},i.opt.shuffle_attack=15463296e5;var m=Math.floor})(_,"./index")})()})(ve);var we=ve.exports,ge=typeof window!="undefined"?window.Gun:Q.exports;ge.chain.promise=function(P){var _=this,P=P||function(O){return O};return new Promise(function(O,g){_.once(function(i,u){O({put:i,get:u,gun:this})})}).then(P)};ge.chain.then=function(P){var _=this,O=new Promise((g,i)=>{_.once(function(u,o){g(u,o)})});return P?O.then(P):O};var me={exports:{}};(function(){function P(){var u=function(o,f,l){if(u.unit=0,!l&&g!==f&&(u.last=""+o<u.last?u.last:""+o,delete(u.$||{})[i]),l=l||u.$||(u.$={}),!o&&Object.keys(l).length)return l;o=""+o;for(var e=0,y=o.length-1,c=o[e],d,p;!(d=l[c])&&e<y;)c+=o[++e];if(d)if(e==y){if(g===f)return g===(p=d[""])?d:(u.unit=1)&&p;d[""]=f}else return g!==f&&delete d[i],u(o.slice(++e),f,d||(d={}));else{if(!_(l,function(m,a){var s=0,v="";if((a||"").length)for(;a[s]==o[s];)v+=a[s++];if(v){if(g===f)return s<=y?void 0:((p||(p={}))[a.slice(s)]=m,m);var r={};if(r[a.slice(s)]=m,s=o.slice(s),s===""?r[""]=f:(r[s]={})[""]=f,l[v]=r,P.debug&&""+v=="undefined"){console.log(0,v);debugger}return delete l[a],!0}})){if(g===f)return;if((l[c]||(l[c]={}))[""]=f,P.debug&&""+c=="undefined"){console.log(1,c);debugger}}if(g===f)return p}};return u}if(P.map=function u(o,f,l,e){e=e||[];var y=typeof o=="function"?o.$||{}:o;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!y){if(typeof y=="string"){if(P.debug)throw["BUG:",o,f,l,e];return}var c=(y[i]||O).sort||(y[i]=function k(){return k.sort=Object.keys(y).sort(),k}()).sort,d;l=l===!0?{branch:!0}:l||{},(d=l.reverse)&&(c=c.slice(0).reverse());for(var p=l.start,m=l.end,a="\uFFFF",s=0,v=c.length;s<v;s++){var r=c[s],n=y[r],t,h,x;if(!(!n||r===""||i===r)&&(h=e.slice(0),h.push(r),x=h.join(""),!(g!==p&&x<(p||"").slice(0,x.length))&&!(g!==m&&(m||a)<x))){if(d&&(t=u(n,f,l,h),g!==t))return t;if(g!==(t=n[""])){var T=1;if(g!==p&&x<(p||"")&&(T=0),g!==m&&x>(m||a)&&(T=0),T&&(t=f(t,x,r,e),g!==t))return t}else if(l.branch&&(t=f(g,x,r,e),g!==t))return t;if(e=h,!d&&(t=u(n,f,l,e),g!==t))return t;e.pop()}}}},typeof window!="undefined")window.Radix=P;else try{me.exports=P}catch{}var _=P.object=function(u,o,f){for(var l in u)if(!!u.hasOwnProperty(l)&&(f=o(u[l],l))!==g)return f},O={},g,i=String.fromCharCode(24)})();var be={exports:{}},at={exports:{}};(function(P){(function(){var _={},O,g=setTimeout.turn||typeof setImmediate!=""+O&&setImmediate||setTimeout;_.parseAsync=function(u,o,f,l){if(typeof u!="string"){try{o(O,JSON.parse(u))}catch(c){o(c)}return}var e={i:0,text:u,done:o,l:u.length,up:[]};l=l||1024*32,y();function y(){for(var c=e.text,d=e.i,p=e.l,m=0,a=e.w,s,v;m++<l;){var r=c[d++];if(d>p){e.end=!0;break}if(a)d=c.indexOf('"',d-1),r=c[d],v=c[d-1]=="\\",s=s||v,r=='"'&&!v&&(a=O,v=e.s,e.a?(v=c.slice(e.sl,d),(s||1+v.indexOf("\\u"))&&(v=JSON.parse('"'+v+'"')),e.at instanceof Array?e.at.push(e.s=v):(e.at||(e.end=m=l,v=O),(e.at||{})[e.s]=e.s=v)):(e.s=c.slice(e.sl,d),(s||1+e.s.indexOf("\\u"))&&(e.s=JSON.parse('"'+e.s+'"'))),e.a=s=O),++d;else switch(r){case'"':e.sl=d,a=!0;break;case":":e.ai=d,e.a=!0;break;case",":(e.a||e.at instanceof Array)&&(v=c.slice(e.ai,d-1))&&O!==(v=i(v))&&(e.at instanceof Array?e.at.push(v):e.at[e.s]=v),e.a=O,e.at instanceof Array&&(e.a=!0,e.ai=d);break;case"{":e.up.push(e.at||(e.at={})),e.at instanceof Array?e.at.push(e.at={}):O!==(v=e.s)&&(e.at[v]=e.at={}),e.a=O;break;case"}":e.a&&(v=c.slice(e.ai,d-1))&&O!==(v=i(v))&&(e.at instanceof Array?e.at.push(v):(e.at||(e.end=m=l,v=O),(e.at||{})[e.s]=v)),e.a=O,e.at=e.up.pop();break;case"[":O!==(v=e.s)?(e.up.push(e.at),e.at[v]=e.at=[]):e.at||e.up.push(e.at=[]),e.a=!0,e.ai=d;break;case"]":e.a&&(v=c.slice(e.ai,d-1))&&O!==(v=i(v))&&(e.at instanceof Array?e.at.push(v):e.at[e.s]=v),e.a=O,e.at=e.up.pop();break}}if(e.s=O,e.i=d,e.w=a,e.end){if(v=e.at,O===v)try{v=JSON.parse(u)}catch(n){return e.done(n)}e.done(O,v)}else g(y)}};function i(u){var o=parseFloat(u);if(!isNaN(o))return o;if(u=u.trim(),u=="true")return!0;if(u=="false")return!1;if(u=="null")return null}_.stringifyAsync=function(u,o,f,l,e){e=e||{},e.text=e.text||"",e.up=[e.at={d:u}],e.done=o,e.i=0;var y=0;c();function c(){var d=e.at,p=d.d,m="",a;switch(d.i&&d.i-d.j>0&&(m+=","),O!==(a=d.k)&&(m+=JSON.stringify(a)+":"),typeof p){case"boolean":m+=""+p;break;case"string":m+=JSON.stringify(p);break;case"number":m+=p;break;case"object":if(!p){m+="null";break}if(p instanceof Array){m+="[",d={i:-1,as:p,up:d,j:0},d.l=p.length,e.up.push(e.at=d);break}if(typeof(p||"").toJSON!="function"){m+="{",d={i:-1,ok:Object.keys(p).sort(),as:p,up:d,j:0},d.l=d.ok.length,e.up.push(e.at=d);break}if(a=p.toJSON()){m+=a;break}case"function":if(d.as instanceof Array){m+="null";break}default:m="",d.j++}for(e.text+=m;1+d.i>=d.l;)e.text+=d.ok?"}":"]",d=e.at=d.up;if(++d.i<d.l){if((a=d.ok)?d.d=d.as[d.k=a[d.i]]:d.d=d.as[d.i],++y<9)return c();y=0,g(c);return}e.done(O,e.text)}},typeof window!=""+O&&(window.YSON=_);try{""+O!="object"&&(P.exports=_)}catch{}typeof JSON!=""+O&&(JSON.parseAsync=_.parseAsync,JSON.stringifyAsync=_.stringifyAsync)})()})(at);(function(){function P(g){g=g||{},g.log=g.log||console.log,g.file=String(g.file||"radata");var i=(P.has||(P.has={}))[g.file];if(i)return i;g.max=g.max||(g.memory?g.memory*999*999:3e8)*.3,g.until=g.until||g.wait||250,g.batch=g.batch||10*1e3,g.chunk=g.chunk||1024*1024*1,g.code=g.code||{},g.code.from=g.code.from||"!",g.jsonify=!0;function u(s){return encodeURIComponent(s).replace(/\*/g,"%2A")}function o(s){return e!==s&&(!s||typeof s!="object")}var f=""+e==typeof setImmediate?setTimeout:setImmediate,l=setTimeout.turn||f,e,y=O.object,c=0;if(!g.store)return g.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!g.store.put)return g.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!g.store.get)return g.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");!g.store.list;var d=JSON.parseAsync||function(s,v,r){var n;try{v(n,JSON.parse(s,r))}catch(t){v(t)}},p=function(s,v,r,n,t){if(typeof v=="function"){var h=r||{};r=v,p.read(s,r,h,t||n);return}p.save(s,v,r,n,t)};p.save=function(s,v,r,n,t){var h={key:s},x,T;h.find=function(k){var j;if(h.file=k||(k=g.code.from),t&&(t=t[k]=t[k]||{}),t&&(t.sf=t.sf||+new Date),j=p.disk[k]){h.mix(e,j);return}p.parse(k,h.mix,e,t)},h.mix=function(k,j){if(t&&(t.sml=+new Date),t&&(t.sm=t.sm||+new Date),h.err=k||h.err){r(k);return}var S=h.file=(j||"").file||h.file,$;if(!j&&S!==g.code.from){p.find.bad(S),p.save(s,v,r,n);return}if((j=p.disk[S]||(p.disk[S]=j||O())).file||(j.file=S),g.compare&&(v=g.compare(j(s),v,s,S),e===v)){r(k,-1);return}if((h.disk=j)(s,v),n&&(($=($=j.tags||(j.tags={}))[n]||($[n]=p.tags[n]||(p.tags[n]={})))[S]||($[S]=p.one[n]||(p.one[n]=r)),r=null),t&&(t.st=t.st||+new Date),j.Q){r&&j.Q.push(r);return}j.Q=r?[r]:[],j.to=setTimeout(h.write,g.until)},h.write=function(){t&&(t.sto=t.sto||+new Date);var k=x=h.file,j=h.disk;T=h.q=j.Q,h.tags=j.tags,delete j.Q,delete p.disk[k],delete j.tags,p.write(k,j,h.ack,e,t)},h.ack=function(k,j){t&&(t.sa=t.sa||+new Date),t&&(t.sal=T.length);var S,$;for(var w in p.tags)if(!!p.tags.hasOwnProperty(w)){var b=p.tags[w];if(!(($=p.disk[x])&&($=$.tags)&&$[b])){S=b[x],delete b[x];var A;for(var E in b)if(b.hasOwnProperty(E)){A=!0;break}A||(delete p.tags[b],S&&S(k,j))}}!T&&(T="");for(var C=T.length,D=0,N=+new Date;D<C;D++)(S=T[D])&&S(k,j);console.STAT&&console.STAT(N,+new Date-N,"rad acks",u(h.file)),console.STAT&&console.STAT(N,T.length,"rad acks #",u(h.file))},r||(r=function(k,j){}),p.find(s,h.find)},p.disk={},p.one={},p.tags={};var m=0;p.write=function(s,v,r,n,t){if(!v){r("No radix!");return}n=typeof n=="object"?n:{force:n};var h=function(){},x,T;if(h.text="",h.file=s=v.file||(v.file=s),!s){r("What file?");return}if(h.write=function(){var k=v.raw=h.text;p.disk[s=v.file||h.file||s]=v;var j=+new Date;t&&(t.wd=j),p.find.add(s,function($){if(t&&(t.wa=+new Date),$){r($);return}g.store.put(u(s),k,function(b,A){t&&(t.wp=+new Date),console.STAT&&console.STAT(j,c=+new Date-j,"wrote disk",JSON.stringify(s),++m,"total all writes."),r(b,A||1),v.Q||delete p.disk[s]})})},h.split=function(){var k=+new Date;t&&(t.wf=k),h.text="",h.count||(h.count=0,O.map(v,function(){h.count++})),t&&(t.wfc=h.count),h.limit=Math.ceil(h.count/2);var j=h.count;return h.count=0,t&&(t.wf1=+new Date),h.sub=O(),O.map(v,h.slice,{reverse:1}),t&&(t.wf2=+new Date),p.write(h.end,h.sub,h.both,n),t&&(t.wf3=+new Date),h.hub=O(),O.map(v,h.stop),t&&(t.wf4=+new Date),p.write(v.file,h.hub,h.both,n),t&&(t.wf5=+new Date),console.STAT&&console.STAT(k,+new Date-k,"rad split",u(v.file),j),!0},h.slice=function(k,j){if(h.sub(h.end=j,k),h.limit<=++h.count)return!0},h.stop=function(k,j){if(j>=h.end)return!0;h.hub(j,k)},h.both=function(k,j){if(t&&(t.wfd=+new Date),T){r(k||T);return}if(x){r(k,j);return}x=!0,T=k},h.each=function(k,j,S,$){if(e!==k&&h.count++,g.max<=(k||"").length)return r("Data too big!"),!0;var w=P.encode($.length)+"#"+P.encode(S)+(e===k?"":":"+P.encode(k))+`
`;if(g.chunk<h.text.length+w.length&&1<h.count&&!n.force)return h.split();h.text+=w},g.jsonify){p.write.jsonify(h,v,r,n,t);return}O.map(v,h.each,!0)||h.write()},p.write.jsonify=function(s,v,r,n,t){var h,x=+new Date;t&&(t.w=x);try{h=JSON.stringify(v.$)}catch{r("Cannot radisk!");return}if(t&&(t.ws=+new Date),console.STAT&&console.STAT(x,+new Date-x,"rad stringified JSON"),g.chunk<h.length&&!n.force){var T=0;if(O.map(v,function(){if(T++)return!0}),T>1)return s.split()}s.text=h,s.write()},p.range=function(s,v){if(!(!s||!v)){if(e===v.start&&e===v.end||o(s))return s;var r=O();return O.map(s,function(n,t){r(t,n)},v),r("")}},function(){p.read=function(s,v,r,n){r=r||{};var t={key:s};t.find=function(h){var x;if(t.file=h||(h=g.code.from),n&&(n=n[h]=n[h]||{}),n&&(n.rf=n.rf||+new Date),x=p.disk[t.file=h]){t.check(e,x);return}p.parse(h,t.check,e,n)},t.get=function(h,x,T){if(n&&(n.rgl=+new Date),n&&(n.rg=n.rg||+new Date),t.err=h||t.err){v(h);return}var k=t.file=(x||"").file||t.file;if(!x&&k!==g.code.from){p.find.bad(k),p.read(s,v,r);return}if(x=p.disk[k]||(p.disk[k]=x),!x){v(k===g.code.from?e:"No file!");return}x.file||(x.file=k);var j=p.range(x(s),r);if(n&&(n.rr=+new Date),r.unit=x.unit,r.chunks=(r.chunks||0)+1,r.parsed=(r.parsed||0)+((T||"").parsed||r.chunks*g.chunk),r.more=1,r.next=e,O.map(p.list,function(b,A){if(!(!b||k===A))return r.next=A,1},r.reverse?{reverse:1,end:k}:{start:k}),n&&(n.rl=+new Date),r.next||(r.more=0),r.next&&(!r.reverse&&(s<r.next&&r.next.indexOf(s)!=0||e!==r.end&&(r.end||"\uFFFF")<r.next)&&(r.more=0),r.reverse&&(s>r.next&&s.indexOf(r.next)!=0||e!==r.start&&(r.start||"")>r.next&&k<=r.start)&&(r.more=0)),!r.more){v(t.err,j,r);return}if(j&&v(t.err,j,r),!(r.parsed>=r.limit)){var S=+new Date;n&&(n.rm=S);var $=r.next;f(function(){console.STAT&&console.STAT(S,+new Date-S,"rad more"),p.parse($,t.check)},0)}},t.check=function(h,x,T){if(t.get(h,x,T),!(!x||x.check)){x.check=1;var k=+new Date;(T||(T={})).file||(T.file=t.file),O.map(x,function(j,S){p.find(S,function($){if(($||($=g.code.from))!==T.file){var w=(""+Math.random()).slice(-3);l(function(){p.save(S,j,function b(A,E){if(A){p.save(S,j,b);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",w,u(S),u(T.file),u($))})},0)}})}),console.STAT&&console.STAT(k,+new Date-k,"rad check")}},p.find(s||(r.reverse?r.end||"":r.start||""),t.find)}}(),function(){var s=0,v={},r=String.fromCharCode(31);p.parse=function(n,t,h,x){var T;if(!n)return t();if(T=v[n]){T.push(t);return}T=v[n]=[t];var k=function(){},j={file:n};(k.disk=O()).file=n,k.read=function($,w){if(x&&(x.rpg=+new Date),console.STAT&&console.STAT(S,+new Date-S,"read disk",JSON.stringify(n),++s,"total all parses."),(k.err=$)||(k.not=!w)){delete v[n],k.map(T,k.ack);return}if(typeof w!="string"){try{g.max<=w.length?k.err="Chunk too big!":w=w.toString()}catch(b){k.err=b}if(k.err){delete v[n],k.map(T,k.ack);return}}if(j.parsed=w.length,x&&(x.rpl=j.parsed),x&&(x.rpa=T.length),S=+new Date,!(g.jsonify||w[0]==="{")){k.radec($,w);return}d(w,function(b,A){if(!b){delete v[n],k.disk.$=A,console.STAT&&(c=+new Date-S)>9&&console.STAT(S,c,"rad parsed JSON"),x&&(x.rpd=+new Date),k.map(T,k.ack);return}if(w[0]==="{"){delete v[n],k.err="JSON error!",k.map(T,k.ack);return}k.radec(b,w)})},k.map=function(){if(!(!T||!T.length)){for(var $=+new Date,w=k.err,b=k.not?e:k.disk,A=0,E;A<9&&(E=T[A++]);)E(w,b,j);console.STAT&&console.STAT($,+new Date-$,"rad packs",u(n)),console.STAT&&console.STAT($,A,"rad packs #",u(n)),!!(T=T.slice(A)).length&&l(k.map,0)}},k.ack=function($){if(!!$){if(k.err||k.not){$(k.err,e,j);return}$(e,k.disk,j)}},k.radec=function($,w){delete v[n],S=+new Date;var b=k.split(w),A=[],E,C,D;if(!b||b[1]!==0){k.err="File '"+n+"' does not have root radix! ",k.map(T,k.ack);return}for(;b;)C=D=e,E=b[1],b=k.split(b[2])||"",b[0]=="#"&&(C=b[1],A=A.slice(0,E),E<=A.length&&A.push(C)),b=k.split(b[2])||"",b[0]!=`
`&&((b[0]=="="||b[0]==":")&&(D=b[1]),e!==C&&e!==D&&k.disk(A.join(""),D),b=k.split(b[2]));console.STAT&&console.STAT(S,+new Date-S,"parsed RAD"),k.map(T,k.ack)},k.split=function($){if(!!$){var w=[],b={},A=-1,E="";if(A=$.indexOf(r),!!$[A])return E=$.slice(0,A),w[0]=E,w[1]=P.decode($.slice(A),b),w[2]=$.slice(A+b.i),w}},p.disk&&(h||(h=(p.disk[n]||"").raw));var S=+new Date;if(x&&(x.rp=S),h)return l(function(){k.read(e,h)},0);g.store.get(u(n),k.read)}}(),function(){var s,v=String.fromCharCode(28),r;p.find=function(h,x){if(!s){if(r){r.push([h,x]);return}r=[[h,x]],p.parse(v,n);return}O.map(p.list=s,function(T,k){if(!!T)return x(k)||!0},{reverse:1,end:h})||x(g.code.from)},p.find.add=function(h,x){var T=s(h);if(T||h===v){x(e,1);return}s(h,1),x.found=(x.found||0)+1,p.write(v,s,function(k,j){if(k){x(k);return}x.found=(x.found||0)-1,x.found===0&&x(e,1)},!0)},p.find.bad=function(h,x){s(h,0),p.write(v,s,x||a)};function n(h,x){if(h){g.log("list",h),setTimeout(function(){p.parse(v,n)},1e3);return}if(x){t(x);return}if(s=s||x||O(),!g.store.list){t(s);return}g.store.list(function(T){if(!T){t(s);return}p.find.add(T,a)})}function t(h,x){s=s||h,s.file=v,x=r,r=null,y(x,function(T){p.find(T[0],T[1])})}}();try{!_.window&&require("./radmigtmp")(p)}catch{}var a=function(){},e;return P.has[g.file]=p,p}if(function(){var g=String.fromCharCode(31);P.encode=function(i,u,o){o=o||g;var f=o,l;if(typeof i=="string"){for(var e=i.indexOf(o);e!=-1;)f+=o,e=i.indexOf(o,e+1);return f+'"'+i+o}else{if(i&&i["#"]&&Object.keys(i).length==1)return f+"#"+l+f;if(typeof i=="number")return f+"+"+(i||0)+f;if(i===null)return f+" "+f;if(i===!0)return f+"+"+f;if(i===!1)return f+"-"+f}},P.decode=function(i,u,o){o=o||g;var f="",l=-1,e=0,y,c;if(o===i[0]){for(;o===i[++l];)++e;for(c=i[y=e]||!0;--e>=0;)l=i.indexOf(o,l+1);if(l==-1&&(l=i.length),f=i.slice(y+1,l),u&&(u.i=l+1),c==='"')return f;if(c==="#")return{"#":f};if(c==="+")return f.length===0?!0:parseFloat(f);if(c===" ")return null;if(c==="-")return!1}}}(),typeof window!="undefined"){var _=window.Gun,O=window.Radix;window.Radisk=P}else{var _=Q.exports,O=me.exports;try{be.exports=P}catch{}}P.Radix=O})();var q=typeof window!="undefined"?window.Gun:Q.exports;q.on("create",function(P){q.TESTING&&(P.opt.file="radatatest"),this.to.next(P);var _=P.opt,O;if(!(_.rad===!1||_.radisk===!1)&&!(O+""!=typeof process&&""+(process.env||"").RAD=="false")){var g=q.window&&q.window.Radisk||be.exports,i=g.Radix,u=g(_),o=String.fromCharCode(27),f=0;P.on("put",function(e){if(this.to.next(e),!(e._||"").rad){var y=e["#"],c=e.put,d=c["#"],p=c["."],m=c[":"],a=c[">"],s=(e._||"").DBG;s&&(s.sp=s.sp||+new Date);var v=(e._||"").RPS||((e._||"").RPS=+new Date);u(d+o+p,{":":m,">":a},function(r,n){if(s&&(s.spd=s.spd||+new Date),console.STAT&&console.STAT(v,+new Date-v,"put"),r){P.on("in",{"@":y,err:r,DBG:s});return}P.on("in",{"@":y,ok:n,DBG:s})},!1,s&&(s.r=s.r||{})),s&&(s.sps=s.sps||+new Date)}}),P.on("get",function(e){this.to.next(e);var y=e._||"",c=y.DBG=e.DBG;c&&(c.sg=+new Date);var d=e["#"],p=e.get,m=e.get["#"],a=e.get["."]||"",s={},v,r,n,t;if(typeof m=="string"?r=m:m&&(O!==(n=m["*"])&&(s.limit=t=1),O!==m[">"]&&(s.start=m[">"]),O!==m["<"]&&(s.end=m["<"]),r=t?""+n:n||m["="],t=null),r&&!s.limit&&(typeof a=="string"?r=r+o+(s.atom=a):a&&(O!==a[">"]&&(s.start=a[">"],s.limit=1),O!==a["<"]&&(s.end=a["<"],s.limit=1),O!==(n=a["*"])&&(s.limit=t=1),r&&(r=r+o+(t?""+(n||""):n||(s.atom=a["="]||""))))),((n=p["%"])||s.limit)&&(s.limit=n<=(s.pack||1e3*100)?n:1),(a["-"]||(m||{})["-"]||p["-"])&&(s.reverse=!0),(n=(P.next||"")[m])&&n.put){if(s.atom){if(n=(n.next||"")[s.atom],n&&n.rad)return}else if(n&&n.rad)return}var h=q.state(),x=+new Date,T=0;c&&(c.sgm=x),u(r||"",function(j,S,$){c&&(c.sgr=+new Date),c&&(c.sgi=$);try{_.store.stats.get.time[l%50]=+new Date-x,++l,_.store.stats.get.count++,j&&(_.store.stats.get.err=j)}catch{}console.STAT&&console.STAT(x,+new Date-x,"got",JSON.stringify(r)),x=+new Date,$=$||"";var w,b;if($.unit&&S&&O!==(w=S[":"])&&O!==(b=S[">"])){var A=r.split(o),E=A[0],C=A[1];(v=v||{})[E]=q.state.ify(v[E],C,b,w,E),P.$.get(E).get(C)._.rad=h}else S&&(typeof S!="string"&&(s.atom?S=O:i.map(S,k,s)),!v&&S&&k(S,""),!s.atom&&!a&typeof m=="string"&&!s.limit&&!s.more&&(P.$.get(m)._.rad=h));c&&(c.sgp=+new Date),console.STAT&&(f=+new Date-x)>9&&(console.STAT(x,f,"got prep time"),console.STAT(x,T,"got prep #")),T=0,x=+new Date;var D=function(){};D.faith=!0,D.rad=p,P.on("in",{"@":d,put:v,"%":$.more?1:O,err:j||O,_:D,DBG:c}),console.STAT&&(f=+new Date-x)>9&&console.STAT(x,f,"got emit",Object.keys(v||{}).length),v=O},s,c&&(c.r=c.r||{})),c&&(c.sgd=+new Date),console.STAT&&(f=+new Date-x)>9&&console.STAT(x,f,"get call");function k(j,S,$,w){if(T++,!!j){S=(r+S).split(o);var b=S.slice(0,1)[0];if(S=S.slice(-1)[0],s.limit&&s.limit<=s.count)return!0;var A,E,C=b,D=S;if(typeof j!="string"){A=j[":"],E=j[">"],(v=v||{})[C]=q.state.ify(v[C],D,E,A,C),s.count=(s.count||0)+((A||"").length||9);return}s.count=(s.count||0)+j.length;var N=j.lastIndexOf(">"),I=g.decode(j.slice(N+1),null,o);j=g.decode(j.slice(0,N),null,o),(v=v||{})[b]=q.state.ify(v[b],S,I,j,b)}}}),q.valid,(_.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}});var ft={exports:{}};(function(){function P(O){O=O||{},O.file=String(O.file||"radata");var g=P[O.file],i=null,u;if(g)return console.log("Warning: reusing same IndexedDB store and options as 1st."),P[O.file];g=P[O.file]=function(){};try{O.indexedDB=O.indexedDB||P.indexedDB||indexedDB}catch{}try{if(!O.indexedDB||location.protocol=="file:"){var o=g.d||(g.d={});return g.put=function(f,l,e){o[f]=l,setTimeout(function(){e(null,1)},250)},g.get=function(f,l){setTimeout(function(){l(null,o[f]||u)},5)},console.log("Warning: No indexedDB exists to persist data to!"),g}}catch{}return g.start=function(){var f=indexedDB.open(O.file,1);f.onupgradeneeded=function(l){l.target.result.createObjectStore(O.file)},f.onsuccess=function(){i=f.result},f.onerror=function(l){console.log(l||1)}},g.start(),g.put=function(f,l,e){if(!i){setTimeout(function(){g.put(f,l,e)},1);return}var y=i.transaction([O.file],"readwrite"),c=y.objectStore(O.file),d=c.put(l,""+f);d.onsuccess=c.onsuccess=y.onsuccess=function(){e(null,1)},d.onabort=c.onabort=y.onabort=function(p){e(p||"put.tx.abort")},d.onerror=c.onerror=y.onerror=function(p){e(p||"put.tx.error")}},g.get=function(f,l){if(!i){setTimeout(function(){g.get(f,l)},9);return}var e=i.transaction([O.file],"readonly"),y=e.objectStore(O.file),c=y.get(""+f);c.onsuccess=function(){l(null,c.result)},c.onabort=function(d){l(d||4)},c.onerror=function(d){l(d||5)}},setInterval(function(){i&&i.close(),i=null,g.start()},1e3*15),g}if(typeof window!="undefined")(P.window=window).RindexedDB=P,P.indexedDB=window.indexedDB;else try{ft.exports=P}catch{}try{var _=P.window.Gun||require("../gun");_.on("create",function(O){this.to.next(O),O.opt.store=O.opt.store||P(O.opt)})}catch{}})();(function(){var P=typeof window!="undefined"?window.Gun:Q.exports;P.on("create",function(_){})})();const _e={appPath:"test",peers:["https://etogun.glitch.me/gun"]},H=ye({peers:_e.peers,localStorage:!1}),Se=we;window.gun=H;window.sea=we;const st=_e.appPath,ct=H.get(st);ye.node.soul;function lt(){const P=se({pulse:0});return ct.get("relay").get("pulse").on(_=>{P.pulse=_}),P}const K=se({is:null,pub:Ee(()=>{var P;return(P=K.is)==null?void 0:P.pub}),profile:{},pair:null,name:null,presence:null,graph(){return H.user()},async generate(){K.pair=await Se.pair()},init(){K.is=H.user().is,K.presence=setInterval(()=>{H.user().get("presence").put(Date.now())},1500),H.user().get("profile").map().on((P,_)=>{K.profile[_]=P})},logout(){var P;let _=!!((P=K.is)==null?void 0:P.pub);H.user().leave(),clearInterval(K.presence),setTimeout(()=>{var O;_&&!((O=H.user()._)==null?void 0:O.sea)&&(K.is=null,K.profile={},console.info("User logged out"))},500)},auth(P=K.pair){if(!P)return console.log("No pair to auth");H.user().auth(P,async()=>{})},async hasPass(P){return await H.get(`~${P}`).get("pass").get("pair").then()},async logWithPass(P,_){let O=await H.get(`~${P}`).get("pass").get("pair").then(),g=await Se.decrypt(O,_);participate(g)}});function kt(){return De(K.profile,P=>{for(let _ in P)H.user().get("profile").get(_).put(P[_])}),{account:K}}H.user().recall({sessionStorage:!0},()=>{K.init()});H.on("auth",()=>{K.init()});const pt={class:"flex items-center p-4"},ht=V("h1",{class:"font-bold"},"RELAY pulse",-1),dt={class:"p-4 flex items-center"},yt={setup(P){const _=lt();return(O,g)=>{const i=rt;return W(),L("div",pt,[ht,V("div",dt,[z(i,{class:"mx-2"}),V("span",null,fe(Ne(_).pulse),1)])])}}},vt={class:"p-4"},wt=ae("INDEX PAGE"),gt={setup(P){return(_,O)=>(W(),L("div",vt,[wt,z(yt,{class:"text-bold"})]))}},mt=[{name:"index",path:"/",component:gt,props:!0},{name:"account",path:"/account",component:()=>te(()=>import("./index.d5aac13e.js"),["assets/index.d5aac13e.js","assets/vendor.344a7b7f.js"]),props:!0},{name:"game",path:"/game",component:()=>te(()=>import("./index.9264376d.js"),["assets/index.9264376d.js","assets/vendor.344a7b7f.js"]),props:!0},{name:"players",path:"/players",component:()=>te(()=>import("./index.2f2a3f3f.js"),["assets/index.2f2a3f3f.js","assets/index.2494c318.css","assets/vendor.344a7b7f.js"]),props:!0}],bt=Ce({history:Pe(),routes:mt}),_t=Ie(Qe);_t.use(bt).mount("#app");export{ce as _,ct as d,Se as s,kt as u};
