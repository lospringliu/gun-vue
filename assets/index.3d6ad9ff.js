var ce=Object.defineProperty;var Pt=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var It=(E,v,k)=>v in E?ce(E,v,{enumerable:!0,configurable:!0,writable:!0,value:k}):E[v]=k,Rt=(E,v)=>{for(var k in v||(v={}))le.call(v,k)&&It(E,k,v[k]);if(Pt)for(var k of Pt(v))he.call(v,k)&&It(E,k,v[k]);return E};import{o as Q,c as Z,a as rt,r as Mt,F as $t,b as Ut,u as X,d as ut,p as Jt,e as Wt,f as Ht,w as Et,g as pe,t as bt,n as de,T as ve,h as ye,i as dt,j as ht,k as tt,l as we,m as vt,q as ge,s as me,v as Ft,x as Bt,y as _e,z as be,A as ke,B as Se}from"./vendor.d55da865.js";const xe=function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function k(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(e){if(e.ep)return;e.ep=!0;const a=k(e);fetch(e.href,a)}};xe();const Ae={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Te=rt("path",{"fill-rule":"evenodd",d:"M16 4C9.371 4 4 9.371 4 16c0 5.3 3.438 9.8 8.207 11.387c.602.11.82-.258.82-.578c0-.286-.011-1.04-.015-2.04c-3.34.723-4.043-1.609-4.043-1.609c-.547-1.387-1.332-1.758-1.332-1.758c-1.09-.742.082-.726.082-.726c1.203.086 1.836 1.234 1.836 1.234c1.07 1.836 2.808 1.305 3.492 1c.11-.777.422-1.305.762-1.605c-2.664-.301-5.465-1.332-5.465-5.93c0-1.313.469-2.383 1.234-3.223c-.121-.3-.535-1.523.117-3.175c0 0 1.008-.32 3.301 1.23A11.487 11.487 0 0 1 16 9.805c1.02.004 2.047.136 3.004.402c2.293-1.55 3.297-1.23 3.297-1.23c.656 1.652.246 2.875.12 3.175c.77.84 1.231 1.91 1.231 3.223c0 4.61-2.804 5.621-5.476 5.922c.43.367.812 1.101.812 2.219c0 1.605-.011 2.898-.011 3.293c0 .32.214.695.824.578C24.566 25.797 28 21.3 28 16c0-6.629-5.371-12-12-12z",fill:"currentColor"},null,-1),je=[Te];function Oe(E,v){return Q(),Z("svg",Ae,je)}var $e={name:"la-github",render:Oe};const Lt={"/":"Home","/space/":"Space","/account/":"Account"};var Ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",routes:Lt});var Dt=(E,v)=>{const k=E.__vccOpts||E;for(const[u,e]of v)k[u]=e;return k};const De=E=>(Jt("data-v-7d7c080b"),E=E(),Wt(),E),Ne={class:"flex flex-wrap items-center p-2 bg-light-900 shadow-md"},Ce=De(()=>rt("div",{class:"flex-1"},null,-1)),Pe={class:"text-2xl m-2",href:"https://github.com/defucc/gun-vue",target:"_blank"},Ie={setup(E){return(v,k)=>{const u=Mt("router-link"),e=$e;return Q(),Z("div",Ne,[(Q(!0),Z($t,null,Ut(X(Lt),(a,i)=>(Q(),Ht(u,{class:de(["p-2 rounded-xl",{active:v.$route.path==i}]),key:a,to:i},{default:Et(()=>[pe(bt(a),1)]),_:2},1032,["to","class"]))),128)),Ce,rt("a",Pe,[ut(e)])])}}};var Re=Dt(Ie,[["__scopeId","data-v-7d7c080b"]]);function Me(E,v){const k=Re,u=Mt("router-view");return Q(),Z($t,null,[ut(k),ut(u,null,{default:Et(({Component:e})=>[ut(ve,{name:"fade"},{default:Et(()=>[(Q(),Ht(ye(e)))]),_:2},1024)]),_:1})],64)}const Ue={};var Je=Dt(Ue,[["render",Me]]);const We="modulepreload",Kt={},He="./",Nt=function(v,k){return!k||k.length===0?v():Promise.all(k.map(u=>{if(u=`${He}${u}`,u in Kt)return;Kt[u]=!0;const e=u.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${a}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":We,e||(i.as="script",i.crossOrigin=""),i.href=u,document.head.appendChild(i),e)return new Promise((s,l)=>{i.addEventListener("load",s),i.addEventListener("error",l)})})).then(()=>v())};var Fe=Object.defineProperty,Gt=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,qt=(E,v,k)=>v in E?Fe(E,v,{enumerable:!0,configurable:!0,writable:!0,value:k}):E[v]=k,kt=(E,v)=>{for(var k in v||(v={}))Be.call(v,k)&&qt(E,k,v[k]);if(Gt)for(var k of Gt(v))Le.call(v,k)&&qt(E,k,v[k]);return E},st=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ke(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function Vt(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yt={exports:{}};(function(E){(function(){function v(u,e){return e?Vt(u):u.slice?v[a(u)]:function(i,s){u(i={exports:{}}),v[a(s)]=i.exports};function a(i){return i.split("/").slice(-1).toString().replace(".js","")}}var k=E;v(function(u){String.random=function(a,i){var s="";for(a=a||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a-- >0;)s+=i.charAt(Math.floor(Math.random()*i.length));return s},String.match=function(a,i){var s,l;return typeof a!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},s=i["="]||i["*"]||i[">"]||i["<"],a===s?!0:l!==i["="]?!1:(s=i["*"]||i[">"],a.slice(0,(s||"").length)===s?!0:l!==i["*"]?!1:l!==i[">"]&&l!==i["<"]?a>=i[">"]&&a<=i["<"]:l!==i[">"]&&a>=i[">"]||l!==i["<"]&&a<=i["<"]))},String.hash=function(a,i){if(typeof a=="string"){if(i=i||0,!a.length)return i;for(var s=0,l=a.length,t;s<l;++s)t=a.charCodeAt(s),i=(i<<5)-i+t,i|=0;return i}};var e=Object.prototype.hasOwnProperty;Object.plain=function(a){return a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(a,i){for(var s in a)if(e.call(a,s)&&(!i||i.indexOf(s)==-1))return!1;return!0},Object.keys=Object.keys||function(a){var i=[];for(var s in a)e.call(a,s)&&i.push(s);return i},function(){var a,i=setTimeout,s=0,l=0,t=typeof setImmediate!=""+a&&setImmediate||i;i.poll=i.poll||function(y){if(1>=+new Date-s&&l++<3333){y();return}t(function(){s=+new Date,y()},l=0)}}(),function(){var a=setTimeout,i=a.turn=a.turn||function(w){s.push(w)==1&&l(f)},s=i.s=[],l=a.poll,t=0,y,f=function(){(y=s[t++])&&y(),(t==s.length||t==99)&&(s=i.s=s.slice(t),t=0),s.length&&l(f)}}(),function(){var a,i=setTimeout,s=i.turn;(i.each=i.each||function(l,t,y,f){f=f||9,function w(p,m,c){if(m=(p=(l||[]).splice(0,f)).length){for(var h=0;h<m&&a===(c=t(p[h]));h++);if(a===c){s(w);return}}y&&y(c)}()})()}()})(v,"./shim"),v(function(u){u.exports=function e(a,i,s){if(!a)return{to:e};var l,t=typeof i=="function",a=(this.tag||(this.tag={}))[a]||t&&(this.tag[a]={tag:a,to:e._={next:function(f){var w;(w=this.to)&&w.next(f)}}});if(t){var y={off:e.off||(e.off=function(){if(this.next===e._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=e._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:e._,next:i,the:a,on:this,as:s};return(y.back=a.last||a).to=y,a.last=y}return(a=a.to)&&l!==i&&a.next(i),a}})(v,"./onto"),v(function(u){v("./shim"),u.exports=function(e){return e===void 0?!1:e===null?!0:e===1/0||e!==e?!1:typeof e=="string"||typeof e=="boolean"||typeof e=="number"?!0:e&&typeof(e["#"]||0)=="string"&&Object.empty(e,["#"])?e["#"]:!1}})(v,"./valid"),v(function(u){v("./shim");function e(){var y=+new Date;return l<y?(i=0,l=y+e.drift):l=y+(i+=1)/s+e.drift}e.drift=0;var a=-1/0,i=0,s=999,l=a,t;e.is=function(y,f,w){var p=f&&y&&y._&&y._[">"]||w;if(!!p)return typeof(p=p[f])=="number"?p:a},e.ify=function(y,f,w,p,m){(y=y||{})._=y._||{},m&&(y._["#"]=m);var c=y._[">"]||(y._[">"]={});return t!==f&&f!=="_"&&(typeof w=="number"&&(c[f]=w),t!==p&&(y[f]=p)),y},u.exports=e})(v,"./state"),v(function(u){v("./shim");function e(a){var i={s:{}},s=i.s;a=a||{max:999,age:1e3*9},i.check=function(t){return s[t]?l(t):!1};var l=i.track=function(t){var y=s[t]||(s[t]={});return y.was=i.now=+new Date,i.to||(i.to=setTimeout(i.drop,a.age+9)),y};return i.drop=function(t){i.to=null,i.now=+new Date;var y=Object.keys(s);console.STAT&&console.STAT(i.now,+new Date-i.now,"dup drop keys"),setTimeout.each(y,function(f){var w=s[f];w&&(t||a.age)>i.now-w.was||delete s[f]},0,99)},i}u.exports=e})(v,"./dup"),v(function(u){v("./onto"),u.exports=function(i,s){if(!!this.on){var l=(this.opt||{}).lack||9e3;if(typeof i!="function"){if(!i)return;var y=i["#"]||i,t=(this.tag||"")[y];return t?(s&&(t=this.on(y,s),clearTimeout(t.err),t.err=setTimeout(function(){t.off()},l)),!0):void 0}var y=s&&s["#"]||e(9);if(!i)return y;var f=this.on(y,i,s);return f.err=f.err||setTimeout(function(){f.off(),f.next({err:"Error: No ACK yet.",lack:!0})},l),y}};var e=String.random||function(){return Math.random().toString(36).slice(2)}})(v,"./ask"),v(function(u){function e(m){return m instanceof e?(this._={$:this}).$:this instanceof e?e.create(this._={$:this,opt:m}):new e(m)}e.is=function(m){return m instanceof e||m&&m._&&m===m._.$||!1},e.version=.202,e.chain=e.prototype,e.chain.toJSON=function(){},v("./shim"),e.valid=v("./valid"),e.state=v("./state"),e.on=v("./onto"),e.dup=v("./dup"),e.ask=v("./ask"),function(){e.create=function(x){x.root=x.root||x,x.graph=x.graph||{},x.on=x.on||e.on,x.ask=x.ask||e.ask,x.dup=x.dup||e.dup();var j=x.$.opt(x.opt);return x.once||(x.on("in",m,x),x.on("out",m,x),x.on("put",g,x),e.on("create",x),x.on("create",x)),x.once=1,j};function m(x){if(!!x){if(x.out===m){this.to.next(x);return}var j=this,_=j.as,b=_.at||_,T=b.$,D=b.dup,R,C=x.DBG;if((R=x["#"])||(R=x["#"]=i(9)),!D.check(R)){if(D.track(R),R=x._,x._=typeof R=="function"?R:function(){},x.$&&x.$===(x.$._||"").$||(x.$=T),x["@"]&&!x.put&&r(x),!b.ask(x["@"],x))if(C&&(C.u=+new Date),x.put){c(x);return}else x.get&&e.on.get(x,T);C&&(C.uc=+new Date),j.to.next(x),C&&(C.ua=+new Date),!(x.nts||x.NTS)&&(x.out=m,b.on("out",x),C&&(C.ue=+new Date))}}}function c(x){if(!!x){var j=x._||"",_=j.root=((j.$=x.$||"")._||"").root;if(x["@"]&&j.faith&&!j.miss){x.out=m,_.on("out",x);return}j.latch=_.hatch,j.match=_.hatch=[];var b=x.put,T=j.DBG=x.DBG,D=+new Date;if(!(b["#"]&&b["."])){T&&(T.p=D),j["#"]=x["#"],j.msg=x,j.all=0,j.stun=1;var R=Object.keys(b);console.STAT&&console.STAT(D,((T||j).pk=+new Date)-D,"put sort");var C=0,P,J,H,U,N,I,W;(function B(M){if(P!=C){if(P=C,!(H=R[C])){console.STAT&&console.STAT(D,((T||j).pd=+new Date)-D,"put"),o(j);return}(U=b[H])?(W=U._)?H!==W["#"]?I=d+S(H)+"soul not same.":(N=W[">"])||(I=d+S(H)+"no state."):I=d+S(H)+"no meta.":I=d+S(H)+"no node.",J=Object.keys(U||{})}if(I){x.err=j.err=I,o(j);return}var F=0,L;for(M=M||0;M++<9&&(L=J[F++]);)if(L!=="_"){var K=U[L],q=N[L];if(f===q){I=d+S(L)+"on"+S(H)+"no state.";break}if(!l(K)){I=d+S(L)+"on"+S(H)+"bad "+typeof K+S(K);break}h(K,L,H,q,x)}if((J=J.slice(F)).length){s(B);return}++C,J=null,B(M)})()}}}e.on.put=c;function h(x,j,_,b,T){var D=T._||"",R=D.root,C=R.graph,P,J=C[_]||w,H=t(J,j,1),U=J[j],N=D.DBG;(P=console.STAT)&&(!C[_]||!U)&&(P.has=(P.has||0)+1);var I=$();if(b>I){setTimeout(function(){h(x,j,_,b,T)},(P=b-I)>A?A:P),console.STAT&&console.STAT((N||D).Hf=+new Date,P,"future");return}if(!(b<H&&!D.miss)&&!(!D.faith&&b===H&&(x===U||O(x)<=O(U))&&!D.miss)){D.stun++;var W=T["#"]+D.all++,B={toString:function(){return W},_:D};B.toJSON=B.toString,N&&(N.ph=N.ph||+new Date),R.on("put",{"#":B,"@":T["@"],put:{"#":_,".":j,":":x,">":b},_:D})}}function g(x){var j;(j=(x._||"").DBG)&&(j.pa=+new Date,j.pm=j.pm||+new Date);var _=this,b=_.as,T=b.graph,D=x._,R=x.put,C=R["#"],P=R["."],J=R[":"],H=R[">"];x["#"];var U;(U=D.msg)&&(U=U.put)&&(U=U[C])&&y(U,P,H,J,C),T[C]=y(T[C],P,H,J,C),(U=(b.next||"")[C])&&U.on("in",x),o(D),_.to.next(x)}function o(x,j){var _;if(!x.stop&&!(!x.err&&0<--x.stun)&&(x.stop=1,!!(_=x.root))){var b=x.match;b.end=1,b===_.hatch&&(!(b=x.latch)||b.end?delete _.hatch:_.hatch=b),x.hatch&&x.hatch(),setTimeout.each(x.match,function(T){T&&T()}),!(!(j=x.msg)||x.err||j.err)&&(j.out=m,x.root.on("out",j))}}function r(x){var j=x["@"]||"",_;!(_=j._)||(_.acks=(_.acks||0)+1,(_.err=x.err)&&(x["@"]=_["#"],o(_)),!_.stop&&!_.crack&&(_.crack=_.match&&_.match.push(function(){n(_)})),n(_))}function n(x){!x||!x.root||x.stun||x.acks!==x.all||x.root.on("in",{"@":x["#"],err:x.err,ok:x.err?f:{"":1}})}var d="Error: Invalid graph!",S=function(x){return" '"+(""+x).slice(0,9)+"...' "},O=JSON.stringify,A=2147483647,$=e.state}(),function(){e.on.get=function(c,h){var g=h._,o=c.get,r=o["#"],n=g.graph[r],d=o["."],S=g.next||(g.next={});S[r];var O=c._||{},A=O.DBG=c.DBG;if(A&&(A.g=+new Date),!n)return g.on("get",c);if(d){if(typeof d!="string"||f===n[d])return g.on("get",c);n=y({},d,t(n,d),n[d],r)}n&&m(c,n),g.on("get",c)};function m(c,h){var g=+new Date,o=c._||{},r=o.DBG=c.DBG,n=c["#"],d=i(9),S=Object.keys(h||"").sort(),O=((h||"")._||"")["#"];S.length;var A=c.$._.root,$=h===A.graph[O];console.STAT&&console.STAT(g,((r||o).gk=+new Date)-g,"got keys"),h&&function x(){g=+new Date;for(var j=0,_,b={},T;j<9&&(_=S[j++]);)y(b,_,t(h,_),h[_],O);S=S.slice(j),(T={})[O]=b,b=T;var D;$&&(D=function(){},D.ram=D.faith=!0),T=S.length,console.STAT&&console.STAT(g,-(g-(g=+new Date)),"got copied some"),r&&(r.ga=+new Date),A.on("in",{"@":n,"#":d,put:b,"%":T?d=i(9):f,$:A.$,_:D,DBG:r}),console.STAT&&console.STAT(g,+new Date-g,"got in"),!!T&&setTimeout.turn(x)}(),h||A.on("in",{"@":c["#"]})}e.on.get.ack=m}(),function(){e.chain.opt=function(m){m=m||{};var c=this,h=c._,g=m.peers||m;return Object.plain(m)||(m={}),Object.plain(h.opt)||(h.opt=m),typeof g=="string"&&(g=[g]),g instanceof Array&&(Object.plain(h.opt.peers)||(h.opt.peers={}),g.forEach(function(o){var r={};r.id=r.url=o,h.opt.peers[o]=h.opt.peers[o]||r})),h.opt.peers=h.opt.peers||{},a(m,function o(r){var n=this[r];if(this&&this.hasOwnProperty(r)||typeof n=="string"||Object.empty(n)){this[r]=n;return}n&&n.constructor!==Object&&!(n instanceof Array)||a(n,o)}),e.on("opt",h),h.opt.uuid=h.opt.uuid||function(r){return e.state().toString(36).replace(".","")+String.random(r||12)},c}}();var a=function(m,c){Object.keys(m).forEach(c,m)},i=String.random,s=setTimeout.turn,l=e.valid,t=e.state.is,y=e.state.ify,f,w={},p;e.log=function(){return!e.log.off&&p.log.apply(p,arguments),[].slice.call(arguments).join(" ")},e.log.once=function(m,c,h){return(h=e.log.once)[m]=h[m]||0,h[m]++||e.log(c)},typeof window!="undefined"&&((window.GUN=window.Gun=e).window=window);try{typeof k!="undefined"&&(k.exports=e)}catch{}u.exports=e,(e.window||{}).console=(e.window||{}).console||{log:function(){}},(p=console).only=function(m,c){return p.only.i&&m===p.only.i&&p.only.i++&&(p.log.apply(p,arguments)||c)},e.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(v,"./root"),v(function(u){var e=v("./root");e.chain.back=function(s,l){var t;if(s=s||1,s===-1||s===1/0)return this._.root.$;if(s===1)return(this._.back||this._).$;var y=this,f=y._;if(typeof s=="string"&&(s=s.split(".")),s instanceof Array){var w=0,p=s.length,t=f;for(w;w<p;w++)t=(t||a)[s[w]];return i!==t?l?y:t:(t=f.back)?t.$.back(s,l):void 0}if(typeof s=="function"){for(var m,t={back:f};(t=t.back)&&i===(m=s(t,l)););return m}return typeof s=="number"?(f.back||f).$.back(s-1):this};var a={},i})(v,"./back"),v(function(u){var e=v("./root");e.chain.chain=function(o){var r=this,n=r._,d=new(o||r).constructor(r),S=d._,O;return S.root=O=n.root,S.id=++O.once,S.back=r._,S.on=e.on,S.on("in",e.on.in,S),S.on("out",e.on.out,S),d};function a(o){var r,n=this.as,d=n.back,S=n.root,O;if(o.$||(o.$=n.$),this.to.next(o),n.err){n.on("in",{put:n.put=f,$:n.$});return}if(r=o.get){if(S.pass&&(S.pass[n.id]=n),n.lex&&Object.keys(n.lex).forEach(function(A){O[A]=n.lex[A]},O=o.get=o.get||{}),r["#"]||n.soul){if(r["#"]=r["#"]||n.soul,o["#"]||(o["#"]=w(9)),d=S.$.get(r["#"])._,r=r["."]){if(m(d.put,r)&&(O=d.ask&&d.ask[r],(d.ask||(d.ask={}))[r]=d.$.get(r)._,d.on("in",{get:r,put:{"#":d.soul,".":r,":":d.put[r],">":h(S.graph[d.soul],r)}}),O))return}else{if(O=d.ask&&d.ask[""],(d.ask||(d.ask={}))[""]=d,f!==d.put&&(d.on("in",d),O))return;o.$=d.$}return S.ask(t,o),S.on("in",o)}if(r["."])return n.get?(o={get:{".":n.get},$:n.$},(d.ask||(d.ask={}))[n.get]=o.$._,d.on("out",o)):(o={get:n.lex?o.get:{},$:n.$},d.on("out",o));if((n.ask||(n.ask={}))[""]=n,n.get)return r["."]=n.get,(d.ask||(d.ask={}))[n.get]=o.$._,d.on("out",o)}return d.on("out",o)}e.on.out=a;function i(o,r){r=r||this.as;var n=r.root,d=o.$||(o.$=r.$),S=(d||"")._||y,O=o.put||"",A=O["#"],$=O["."],x=f!==O["="]?O["="]:O[":"],j=O[">"]||-1/0,_;if(f!==o.put&&(f===O["#"]||f===O["."]||f===O[":"]&&f===O["="]||f===O[">"])){if(!p(O)){if(!(A=((O||"")._||"")["#"])){console.log("chain not yet supported for",O,"...",o,r);return}return d=r.root.$.get(A),setTimeout.each(Object.keys(O).sort(),function(b){b=="_"||f===(j=h(O,b))||r.on("in",{$:d,put:{"#":A,".":b,"=":O[b],">":j},VIA:o})})}r.on("in",{$:S.back.$,put:{"#":A=S.back.soul,".":$=S.has||S.get,"=":O,">":h(S.back.put,$)},via:o});return}(o.seen||"")[r.id]||((o.seen||(o.seen=function(){}))[r.id]=r,r!==S&&(Object.keys(o).forEach(function(b){O[b]=o[b]},O={}),O.get=r.get||O.get,!r.soul&&!r.has?O.$$$=O.$$$||r.$:S.soul&&(O.$=r.$,O.$$=O.$$||S.$),o=O),l(o,r),(r.soul||o.$$)&&j>=h(n.graph[A],$)&&((O=n.$.get(A)._).put=g(O.put,$,j,x,A)),!S.soul&&j>=h(n.graph[A],$)&&(_=(n.$.get(A)._.next||"")[$])&&(_.put=x,typeof(O=p(x))=="string"&&(_.put=n.$.get(O)._.put||x)),this.to&&this.to.next(o),r.any&&setTimeout.each(Object.keys(r.any),function(b){(b=r.any[b])&&b(o)},0,99),r.echo&&setTimeout.each(Object.keys(r.echo),function(b){(b=r.echo[b])&&b.on("in",o)},0,99),((o.$$||"")._||S).soul&&(_=r.next)&&(_=_[$])&&(O={},Object.keys(o).forEach(function(b){O[b]=o[b]}),O.$=(o.$$||o.$).get(O.get=$),delete O.$$,delete O.$$$,_.on("in",O)),s(o,r))}e.on.in=i;function s(o,r){if(r=r||this.as||o.$._,!(o.$$&&this!==e.on)&&!(!o.put||r.soul)){var n=o.put||"",d=n["="]||n[":"],S,O=r.root,A=O.$.get(n["#"]).get(n["."])._;if(typeof(d=p(d))!="string"){this===e.on&&((A.echo||(A.echo={}))[r.id]=r);return}if(!((A.echo||(A.echo={}))[r.id]&&!(O.pass||"")[r.id])){if(S=O.pass){if(S[d+r.id])return;S[d+r.id]=1}(A.echo||(A.echo={}))[r.id]=r,r.has&&(r.link=d);var $=O.$.get(A.link=d)._;($.echo||($.echo={}))[A.id]=A;var S=r.ask||"";(S[""]||r.lex)&&$.on("out",{get:{"#":d}}),setTimeout.each(Object.keys(S),function(x,j){!x||!(j=S[x])||j.on("out",{get:{"#":d,".":x}})},0,99)}}}e.on.link=s;function l(o,r){var n=o.put||"",d=f!==n["="]?n["="]:n[":"],S=r.root,O,A;if(f===d){if(r.soul&&f!==r.put||(A=(o.$$||o.$||"")._||"",o["@"]&&(f!==A.put||f!==r.put)))return;(O=r.link||o.linked)&&delete(S.$.get(O)._.echo||"")[r.id],r.has&&(r.link=null),r.put=f,setTimeout.each(Object.keys(r.next||""),function($,x){!(x=r.next[$])||(O&&delete(S.$.get(O).get($)._.echo||"")[x.id],x.on("in",{get:$,put:f,$:x.$}))},0,99);return}r.soul||o.$$||(O=p(d),A=o.$._||"",!((O===A.link||r.has&&!A.link)&&!((S.pass||"")[r.id]&&typeof O!="string"))&&(delete(A.echo||"")[r.id],l({get:r.get,put:f,$:o.$,linked:o.linked=o.linked||A.link},r)))}e.on.unlink=l;function t(o,r){var n=this.as,d=n.$._;d.root;var S=n.get||"",O=(o.put||"")[S["#"]]||"";if(!o.put||typeof S["."]=="string"&&f===O[S["."]]){if(f!==d.put||!d.soul&&!d.has)return;d.ack=(d.ack||0)+1,d.on("in",{get:d.get,put:d.put=f,$:d.$,"@":o["@"]});return}(o._||{}).miss=1,e.on.put(o)}var y={},f,w=String.random,p=e.valid,m=function(o,r){return o&&Object.prototype.hasOwnProperty.call(o,r)},c=e.state,h=c.is,g=c.ify})(v,"./chain"),v(function(u){var e=v("./root");e.chain.get=function(f,w,p){var m,c;if(typeof f=="string"){if(f.length==0)return(m=this.chain())._.err={err:e.log("0 length key!",f)},w&&w.call(m,m._.err),m;var h=this,g=h._,o=g.next||l;(m=o[f])||(m=f&&a(f,h)),m=m&&m.$}else if(typeof f=="function"){let O=function($,x,j){if(!O.stun&&!((C=n.pass)&&!C[d])){var _=$.$._,b=($.$$||"")._,T=(b||_).put,D=!_.has&&!_.soul,R={},C;if((D||y===T)&&(T=y===((C=$.put)||"")["="]?y===(C||"")[":"]?C:C[":"]:C["="]),typeof(C=e.valid(T))=="string"&&(T=y===(C=n.$.get(C)._.put)?r.not?y:T:C),!(r.not&&y===T)){if(y===r.stun){if((C=n.stun)&&C.on&&(g.$.back(function(P){if(C.on(""+P.id,R={}),(R.run||0)<O.id)return R}),!R.run&&C.on(""+_.id,R={}),!R.run&&b&&C.on(""+b.id,R={}),O.id>R.run&&((!R.stun||R.stun.end)&&(R.stun=C.on("stun"),R.stun=R.stun&&R.stun.last),R.stun&&!R.stun.end))){(R.stun.add||(R.stun.add={}))[d]=function(){O($,x,1)};return}if(y===T&&(j=0),(C=n.hatch)&&!C.end&&y===r.hatch&&!j){if(S[_.$._.id])return;S[_.$._.id]=1,C.push(function(){O($,x,1)});return}S={}}if(n.pass){if(n.pass[d+_.id])return;n.pass[d+_.id]=1}if(r.on){r.ok.call(_.$,T,_.get,$,x||O);return}if(r.v2020){r.ok($,x||O);return}Object.keys($).forEach(function(P){C[P]=$[P]},C={}),$=C,$.put=T,r.ok.call(r.as,$,x||O)}}};if(w===!0)return i(this,f,w,p),this;m=this;var g=m._,r=w||{},n=g.root,d;r.at=g,r.ok=f;var S={};return O.at=g,(g.any||(g.any={}))[d=String.random(7)]=O,O.off=function(){O.stun=1,!!g.any&&delete g.any[d]},O.rid=s,O.id=r.run||++n.once,c=n.pass,(n.pass={})[d]=1,r.out=r.out||{get:{}},g.on("out",r.out),n.pass=c,m}else{if(typeof f=="number")return this.get(""+f,w,p);if(typeof(c=t(f))=="string")return this.get(c,w,p);(c=this.get.next)&&(m=c(this,f))}return m?(w&&typeof w=="function"&&m.get(w,p),m):((m=this.chain())._.err={err:e.log("Invalid get request!",f)},w&&w.call(m,m._.err),m)};function a(f,w){var p=w._,m=p.next,c=w.chain(),h=c._;return m||(m=p.next={}),m[h.get=f]=h,w===p.root.$?h.soul=f:(p.soul||p.has)&&(h.has=f),h}function i(f,w,p,m){var c=f._,h=0,g;return(g=c.soul||c.link)?w(g,m,c):c.jam?c.jam.push([w,m]):(c.jam=[[w,m]],f.get(function(r,n){if(!(y===r.put&&!c.root.opt.super&&(g=Object.keys(c.root.opt.peers).length)&&++h<=g)){n.rid(r);var d=(d=r.$)&&d._||{},S=0,O;for(g=c.jam,delete c.jam;O=g[S++];){var A=O[0];O=O[1],A&&A(d.link||d.soul||e.valid(r.put)||((r.put||{})._||{})["#"],O,r,n)}}},{out:{get:{".":!0}}}),f)}function s(f){var w=this.at||this.on;if(!f||w.soul||w.has)return this.off();if(!!(f=(f=(f=f.$||f)._||f).id)){w.map;var p;if((p=this.seen||(this.seen={}))[f])return!0;p[f]=!0}}var l={},t=e.valid,y})(v,"./get"),v(function(u){var e=v("./root");e.chain.put=function(p,m,c){var h=this,g=h._,o=g.root;c=c||{},c.root=g.root,c.run||(c.run=o.once),a(c,g.id),c.ack=c.ack||m,c.via=c.via||h,c.data=c.data||p,c.soul||(c.soul=g.soul||typeof m=="string"&&m);var r=c.state=c.state||e.state();return typeof p=="function"?(p(function(n){c.data=n,h.put(l,l,c)}),h):c.soul?(c.$=o.$.get(c.soul),c.todo=[{it:c.data,ref:c.$}],c.turn=c.turn||y,c.ran=c.ran||i,function n(){var d=c.todo,S=d.pop(),O=S.it;S.ref&&S.ref._.id;var A,$,x,j,_;if(a(c,S.ref),(j=S.todo)&&($=j.pop(),O=O[$],j.length&&d.push(S)),$&&(d.path||(d.path=[])).push($),!(A=f(O))&&!(_=e.is(O))){if(!Object.plain(O)){(c.ack||t).call(c,c.out={err:c.err=e.log("Invalid data: "+(O&&(j=O.constructor)&&j.name||typeof O)+" at "+(c.via.back(function(R){R.get&&j.push(R.get)},j=[])||j.join("."))+"."+(d.path||[]).join("."))}),c.ran(c);return}for(var b=c.seen||(c.seen=[]),T=b.length;T--;)if(O===(j=b[T]).it){A=O=j.link;break}}if($&&A)S.node=w(S.node,$,r,O);else{let R=function(C,P){var J=x.link["#"];P&&(P.off(),P.rid(C));var H=J||C.soul||(j=(C.$$||C.$)._||"").soul||j.link||((j=j.put||"")._||"")["#"]||j["#"]||((j=C.put||"")&&C.$$?j["#"]:(j["="]||j[":"]||"")["#"]);if(!J&&a(c,C.$),!H&&!S.link["#"]){(S.wait||(S.wait=[])).push(function(){R(C,P)});return}H||(H=[],(C.$$||C.$).back(function(U){if(j=U.soul||U.link)return H.push(j);H.push(U.get)}),H=H.reverse().join("/")),x.link["#"]=H,!_&&(((c.graph||(c.graph={}))[H]=x.node||(x.node={_:{}}))._["#"]=H),delete c.wait[D],x.wait&&setTimeout.each(x.wait,function(U){U&&U()}),c.ran(c)};c.seen.push(x={it:O,link:{},todo:_?[]:Object.keys(O).sort().reverse(),path:(d.path||[]).slice(),up:S}),S.node=w(S.node,$,r,x.link),!_&&x.todo.length&&d.push(x);var D=c.seen.length;(c.wait||(c.wait={}))[D]="",j=(x.ref=_?O:$?S.ref.get($):S.ref)._,(j=O&&(O._||"")["#"]||j.soul||j.link)?R({soul:j}):x.ref.get(R,{run:c.run,v2020:1,out:{get:{".":" "}}})}if(!d.length)return c.ran(c);c.turn(n)}(),h):(s(c),h)};function a(p,m){if(!!m){m=(m._||"").id||m;var c=p.root.stun||(p.root.stun={on:e.on}),h={},g;p.stun||(p.stun=c.on("stun",function(){})),(g=c.on(""+m))&&g.the.last.next(h),!(h.run>=p.run)&&c.on(""+m,function(o){if(p.stun.end){this.off(),this.to.next(o);return}o.run=o.run||p.run,o.stun=o.stun||p.stun})}}function i(p){if(p.err){i.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var m=p.$.back(-1)._,c=m.root,h=m.ask(function(n){c.on("ack",n),n.err&&e.log(n),++g>(p.acks||0)&&this.off(),!!p.ack&&p.ack(n,this)},p.opt),g=0,o=p.stun,r;(r=function(){!o||(i.end(o,c),setTimeout.each(Object.keys(o=o.add||""),function(n){(n=o[n])&&n()}))}).hatch=r,p.via._.on("out",{put:p.out=p.graph,opt:p.opt,"#":h,_:r})}}i.end=function(p,m){p.end=t,p.the.to===p&&p===p.the.last&&delete m.stun,p.off()};function s(p){var m=p.via._,c;p.via=p.via.back(function(h){if(h.soul||!h.get)return h.$;c=p.data,(p.data={})[h.get]=c}),(!p.via||!p.via._.soul)&&(p.via=m.root.$.get(((p.data||"")._||"")["#"]||m.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}var l,t=function(){},y=setTimeout.turn,f=e.valid,w=e.state.ify})(v,"./put"),v(function(u){var e=v("./root");v("./chain"),v("./back"),v("./put"),v("./get"),u.exports=e})(v,"./index"),v(function(u){var e=v("./index");e.chain.on=function(s,l,t,y){var f=this,w=f._;w.root;var p;if(typeof s=="string")return l?(p=w.on(s,l,t||w,y),t&&t.$&&(t.subs||(t.subs=[])).push(p),f):w.on(s);var m=l;return(m=m===!0?{change:!0}:m||{}).not=1,m.on=1,f.get(s,m),f},e.chain.once=function(s,l){if(l=l||{},!s)return a(this);var t=this,y=t._,f=y.root;y.put;var w=String.random(7),p;return t.get(function(m,c,h,g){var o=this,r=o._,n=r.one||(r.one={});if(g.stun||n[w]==="")return;if((p=e.valid(m))===!0){d();return}if(typeof p=="string")return;clearTimeout((y.one||"")[w]),clearTimeout(n[w]),n[w]=setTimeout(d,l.wait||99);function d(){!r.has&&!r.soul&&(r={put:m,get:c}),i===(p=r.put)&&(p=((h.$$||"")._||"").put),!(typeof e.valid(p)=="string"&&(p=f.$.get(p)._.put,p===i))&&(g.stun||n[w]!==""&&(n[w]="",(y.soul||y.has)&&g.off(),s.call(o,p,r.get)))}},{on:1}),t};function a(s,l,t){return e.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(t=s.chain())._.nix=s.once(function(y,f){t._.on("in",this._)}),t._.lex=s._.lex,t}e.chain.off=function(){var s=this,l=s._,t,y=l.back;if(!!y)return l.ack=0,(t=y.next)&&t[l.get]&&delete t[l.get],(t=y.ask)&&delete t[l.get],(t=y.put)&&delete t[l.get],(t=l.soul)&&delete y.root.graph[t],(t=l.map)&&Object.keys(t).forEach(function(f,w){w=t[f],w.link&&y.root.$.get(w.link).off()}),(t=l.next)&&Object.keys(t).forEach(function(f,w){w=t[f],w.$.off()}),l.on("off",{}),s};var i})(v,"./on"),v(function(u){var e=v("./index"),a=e.chain.get.next;e.chain.get.next=function(t,y){var f;return Object.plain(y)?(f=((f=y["#"])||"")["="]||f)?t.get(f):((f=t.chain()._).lex=y,t.on("in",function(w){String.match(w.get||(w.put||"")["."],y["."]||y["#"]||y)&&f.on("in",w),this.to.next(w)}),f.$):(a||s)(t,y)},e.chain.map=function(t,y,f){var w=this,p=w._,m,c;return Object.plain(t)&&(m=t["."]?t:{".":t},t=l),t?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),c=w.chain(),w.map().on(function(h,g,o,r){var n=(t||s).call(this,h,g,o,r);if(l!==n){if(h===n)return c._.on("in",o);if(e.is(n))return c._.on("in",n._);var d={};Object.keys(o.put).forEach(function(S){d[S]=o.put[S]},d),d["="]=n,c._.on("in",{get:g,put:d})}}),c):((c=p.each)||((p.each=c=w.chain())._.lex=m||c._.lex||p.lex,c._.nix=w.back("nix"),w.on("in",i,c._)),c)};function i(t){this.to.next(t);var y=this.as,f=t.$,w=f._,p=t.put,m;!w.soul&&!t.$$||(m=y.lex)&&!String.match(t.get||(p||"")["."],m["."]||m["#"]||m)||e.on.link(t,y)}var s=function(){},l})(v,"./map"),v(function(u){var e=v("./index");e.chain.set=function(a,i,s){var l=this,t=l.back(-1),y,f;return i=i||function(){},s=s||{},s.item=s.item||a,(y=((a||"")._||"")["#"])&&((a={})["#"]=y),typeof(f=e.valid(a))=="string"?l.get(y=f).put(a,i,s):e.is(a)?(l.put(function(w){a.get(function(p,m,c){if(!p)return i.call(l,{err:e.log('Only a node can be linked! Not "'+c.put+'"!')});(f={})[p]={"#":p},w(f)},!0)}),a):(Object.plain(a)&&(a=t.get(y=l.back("opt.uuid")()).put(a)),l.get(y||t.back("opt.uuid")(7)).put(a,i,s))}})(v,"./set"),v(function(u){v("./shim");function e(i){var s=function(){},l=i.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var t=setTimeout.turn||setTimeout,y=JSON.parseAsync||function(r,n,d){var S;try{n(S,JSON.parse(r,d))}catch(O){n(O)}},f=JSON.stringifyAsync||function(r,n,d,S){var O;try{n(O,JSON.stringify(r,d,S))}catch(A){n(A)}},w=i.dup,p=w.check,m=w.track,c=s.hear=function(r,n){if(!!r){if(l.max<=r.length)return s.say({dam:"!",err:"Message too big!"},n);s===this&&(c.d+=r.length||0,++c.c);var d=n.SH=+new Date,S=r[0],O;if(S==="["){y(r,function(A,$){if(A||!$)return s.say({dam:"!",err:"DAM JSON parse error."},n);console.STAT&&console.STAT(+new Date,$.length,"# on hear batch");var x=l.puff;(function j(){for(var _=+new Date,b=0,T;b<x&&(T=$[b++]);)c(T,n);$=$.slice(b),console.STAT&&console.STAT(_,+new Date-_,"hear loop"),h(n),!!$.length&&t(j,0)})()}),r="";return}if(S==="{"||(r["#"]||Object.plain(r))&&(O=r)){if(O)return c.one(O,n,d);y(r,function(A,$){if(A||!$)return s.say({dam:"!",err:"DAM JSON parse error."},n);c.one($,n,d)});return}}};c.one=function(r,n,d){var S,O,A,$,x;if(r.DBG&&(r.DBG=x={DBG:r.DBG}),x&&(x.h=d),x&&(x.hp=+new Date),(S=r["#"])||(S=r["#"]=String.random(9)),!(A=p(S))&&(O=r["##"],!(O&&(A=r["@"]||r.get&&S)&&w.check($=A+O)))){if((r._=function(){}).via=s.leap=n,(A=r["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(j){this[j]=1},r._.yo={}),A=r.dam){(A=s.hear[A])&&A(r,n,i),m(S);return}var d=+new Date;x&&(x.is=d),n.SI=S,i.on("in",s.last=r),x&&(x.hd=+new Date),console.STAT&&console.STAT(d,+new Date-d,r.get?"msg get":r.put?"msg put":"msg"),(A=m(S)).via=n,r.get&&(A.it=r),$&&m($),s.leap=s.last=null}},c.c=c.d=0,function(){var r=0,n;s.hash=function(A,$){var x,j,_,b=+new Date;f(A.put,function T(D,R){var C=(j||(j=_=R||"")).slice(0,32768);if(x=String.hash(C,x),j=j.slice(32768),j){t(T,0);return}console.STAT&&console.STAT(b,+new Date-b,"say json+hash"),A._.$put=_,A["##"]=x,O(A,$),delete A._.$put},d)};function d(A,$){var x;return $ instanceof Object?(Object.keys($).sort().forEach(S,{to:x={},on:$}),x):$}function S(A){this.to[A]=this.on[A]}var O=s.say=function(A,$){var x;if((x=this)&&(x=x.to)&&x.next&&x.next(A),!A)return!1;var j,_,b=A["@"],T=A._||(A._=function(){}),D=A.DBG,R=+new Date;if(T.y=T.y||R,$||D&&(D.y=R),(j=A["#"])||(j=A["#"]=String.random(9)),!n&&m(j),A.put&&(A.err||(w.s[j]||"").err))return!1;if(!A["##"]&&a!==A.put&&!T.via&&b){s.hash(A,$);return}if(!$&&b&&($=(x=w.s[b])&&(x.via||(x=x.it)&&(x=x._)&&x.via)||(x=s.last)&&b===x["#"]&&s.leap),!$&&b)return w.s[b]?void 0:(console.STAT&&console.STAT(+new Date,++r,"total no peer to ack to"),!1);if(!$&&s.way)return s.way(A);if(D&&(D.yh=+new Date),!(_=T.raw)){s.raw(A,$);return}if(D&&(D.yr=+new Date),!$||!$.id){if(!Object.plain($||l.peers))return!1;var R=+new Date;l.puff;var C=l.peers,P=Object.keys($||l.peers||{});console.STAT&&console.STAT(R,+new Date-R,"peer keys"),function U(){var N=+new Date;n=1;var I=T.raw;T.raw=_;for(var W=0,B;W<9&&(B=(P||"")[W++]);)!(B=C[B])||O(A,B);T.raw=I,n=0,P=P.slice(W),console.STAT&&console.STAT(N,+new Date-N,"say loop"),!!P.length&&(t(U,0),b&&m(b))}();return}if(!$.wire&&s.wire&&s.wire($),j!==$.last){if($.last=j,$===T.via||(x=T.yo)&&(x[$.url]||x[$.pid]||x[$.id]))return!1;if(console.STAT&&console.STAT(R,((D||T).yp=+new Date)-(T.y||R),"say prep"),!n&&b&&m(b),$.batch){if($.tail=(x=$.tail||0)+_.length,$.tail<=l.pack){$.batch+=(x?",":"")+_;return}h($)}$.batch="[";var J=+new Date;setTimeout(function(){console.STAT&&console.STAT(J,+new Date-J,"0ms TO"),h($)},l.gap),g(_,$),console.STAT&&b===$.SI&&console.STAT(R,+new Date-$.SH,"say ack")}};s.say.c=s.say.d=0,s.raw=function(A,$){if(!A)return"";var x=A._||{},j,_;if(_=x.raw)return _;if(typeof A=="string")return A;var b=A["##"],T=A["@"];if(b&&T){if(!x.via&&p(T+b))return!1;if((_=(w.s[T]||"").it)||(_=s.last)&&T===_["#"]){if(b===_["##"])return!1;_["##"]||(_["##"]=b)}}if(!A.dam){var D=0,R=[];_=l.peers;for(var C in _){var P=_[C];if(R.push(P.url||P.pid||P.id),++D>6)break}D>1&&(A["><"]=R.join())}if(j=x.$put){_={},Object.keys(A).forEach(function(H){_[H]=A[H]}),_.put=":])([:",f(_,function(H,U){if(!H){var N=+new Date;_=U.indexOf('"put":":])([:"'),J(a,U=U.slice(0,_+6)+j+U.slice(_+14)),console.STAT&&console.STAT(N,+new Date-N,"say slice")}});return}f(A,J);function J(H,U){H||(x.raw=U,O(A,$))}}}();function h(r){var n=r.batch,d=typeof n=="string";if(d&&(n+="]"),r.batch=r.tail=null,!!n&&!(d?3>n.length:!n.length)){if(!d)try{n=n.length===1?n[0]:JSON.stringify(n)}catch(S){return l.log("DAM JSON stringify error",S)}!n||g(n,r)}}function g(r,n){try{var d=n.wire;n.say?n.say(r):d.send&&d.send(r),s.say.d+=r.length||0,++s.say.c}catch{(n.queue=n.queue||[]).push(r)}}s.hi=function(r){var n=r.wire||{};r.id?l.peers[r.url||r.id]=r:(n=r.id=r.id||String.random(9),s.say({dam:"?",pid:i.opt.pid},l.peers[n]=r),delete w.s[r.last]),r.met=r.met||+new Date,n.hied||i.on(n.hied="hi",r),n=r.queue,r.queue=[],setTimeout.each(n||[],function(d){g(d,r)},0,9)},s.bye=function(r){i.on("bye",r);var n=+new Date;n=n-(r.met||n),s.bye.time=((s.bye.time||n)+n)/2},s.hear["!"]=function(r,n){l.log("Error:",r.err)},s.hear["?"]=function(r,n){r.pid&&(n.pid||(n.pid=r.pid),r["@"])||(s.say({dam:"?",pid:l.pid,"@":r["#"]},n),delete w.s[n.last])},i.on("create",function(r){r.opt.pid=r.opt.pid||String.random(9),this.to.next(r),r.on("out",s.say)}),i.on("bye",function(r,n){r=l.peers[r.id||r]||r,this.to.next(r),r.bye?r.bye():(n=r.wire)&&n.close&&n.close(),delete l.peers[r.id],r.wire=null});var o={};return i.on("bye",function(r,n){this.to.next(r),(n=console.STAT)&&(n.peers=(n.peers||0)-1),!!(n=r.url)&&(o[n]=!0,setTimeout(function(){delete o[n]},l.lack||9e3))}),i.on("hi",function(r,n){this.to.next(r),(n=console.STAT)&&(n.peers=(n.peers||0)+1),!(!(n=r.url)||!o[n])&&(delete o[n],!l.super&&setTimeout.each(Object.keys(i.next),function(d){i.next[d],n={},n[d]=i.graph[d],n=String.hash(n),s.say({"##":n,get:{"#":d}},r)}))}),s}var a;try{u.exports=e}catch{}})(v,"./mesh"),v(function(u){var e=v("../index");e.Mesh=v("./mesh"),e.on("opt",function(i){if(this.to.next(i),i.once)return;var s=i.opt;if(s.WebSocket===!1)return;var l=e.window||{},t=s.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!t)return;s.WebSocket=t;var y=s.mesh=s.mesh||e.Mesh(i);y.wire||s.wire,y.wire=s.wire=f;function f(c){try{if(!c||!c.url)return g&&g(c);var h=c.url.replace(/^http/,"ws"),g=c.wire=new s.WebSocket(h);return g.onclose=function(){s.mesh.bye(c),p(c)},g.onerror=function(o){p(c)},g.onopen=function(){s.mesh.hi(c)},g.onmessage=function(o){!o||s.mesh.hear(o.data||o,c)},g}catch{}}setTimeout(function(){!s.super&&i.on("out",{dam:"hi"})},1);var w=2*999;function p(c){clearTimeout(c.defer),!(m&&c.retry<=0)&&(c.retry=(c.retry||s.retry+1||60)-(-c.tried+(c.tried=+new Date)<w*4?1:0),c.defer=setTimeout(function h(){if(m&&m.hidden)return setTimeout(h,w);f(c)},w))}var m=""+a!=typeof document&&document});var a})(v,"./websocket"),v(function(u){if(typeof Gun!="undefined"){var e=function(){},a;try{a=(Gun.window||e).localStorage}catch{}a||(Gun.log("Warning: No localStorage exists to persist data to!"),a={setItem:function(i,s){this[i]=s},removeItem:function(i){delete this[i]},getItem:function(i){return this[i]}}),Gun.on("create",function i(s){this.to.next(s);var l=s.opt;s.graph;var t=[],y,f;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{y=i[l.prefix]=i[l.prefix]||JSON.parse(a.getItem(l.prefix))||{}}catch{y=i[l.prefix]={}}s.on("get",function(p){this.to.next(p);var m=p.get,c,h,g,o;!m||!(c=m["#"])||(h=y[c]||o,h&&(g=m["."])&&!Object.plain(g)&&(h=Gun.state.ify({},g,Gun.state.is(h,g),h[g],c)),Gun.on.get.ack(p,h))}),s.on("put",function(p){this.to.next(p);var m=p.put,c=m["#"],h=m["."];y[c]=Gun.state.ify(y[c],h,m[">"],m[":"],c),p["@"]||t.push(p["#"]),!f&&(f=setTimeout(w,l.wait||1))});function w(){var p,m=t;clearTimeout(f),f=!1,t=[];try{a.setItem(l.prefix,JSON.stringify(y))}catch(c){Gun.log((p=c||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),s.on("localStorage:error",{err:p,get:l.prefix,put:y})}!p&&!Object.empty(l.peers)||setTimeout.each(m,function(c){s.on("in",{"@":c,err:p,ok:0})})}})}})(v,"./localStorage")})(),function(){var v;if(""+v!=typeof Gun){var k=function(_){console.log("Warning! Deprecated internal utility will break in next version:",_)},u=Gun;u.fn=u.fn||{is:function(_){return k("fn"),!!_&&typeof _=="function"}},u.bi=u.bi||{is:function(_){return k("bi"),_ instanceof Boolean||typeof _=="boolean"}},u.num=u.num||{is:function(_){return k("num"),!a(_)&&(_-parseFloat(_)+1>=0||_===1/0||_===-1/0)}},u.text=u.text||{is:function(_){return k("text"),typeof _=="string"}},u.text.ify=u.text.ify||function(_){return k("text.ify"),u.text.is(_)?_:typeof JSON!="undefined"?JSON.stringify(_):_&&_.toString?_.toString():_},u.text.random=u.text.random||function(_,b){k("text.random");var T="";for(_=_||24,b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";_>0;)T+=b.charAt(Math.floor(Math.random()*b.length)),_--;return T},u.text.match=u.text.match||function(_,b){var T,D;return k("text.match"),typeof _!="string"?!1:(typeof b=="string"&&(b={"=":b}),b=b||{},T=b["="]||b["*"]||b[">"]||b["<"],_===T?!0:D!==b["="]?!1:(T=b["*"]||b[">"]||b["<"],_.slice(0,(T||"").length)===T?!0:D!==b["*"]?!1:D!==b[">"]&&D!==b["<"]?_>=b[">"]&&_<=b["<"]:D!==b[">"]&&_>=b[">"]||D!==b["<"]&&_<=b["<"]))},u.text.hash=u.text.hash||function(_,b){if(k("text.hash"),typeof _=="string"){if(b=b||0,!_.length)return b;for(var T=0,D=_.length,R;T<D;++T)R=_.charCodeAt(T),b=(b<<5)-b+R,b|=0;return b}},u.list=u.list||{is:function(_){return k("list"),_ instanceof Array}},u.list.slit=u.list.slit||Array.prototype.slice,u.list.sort=u.list.sort||function(_){return k("list.sort"),function(b,T){return!b||!T?0:(b=b[_],T=T[_],b<T?-1:b>T?1:0)}},u.list.map=u.list.map||function(_,b,T){return k("list.map"),t(_,b,T)},u.list.index=1,u.obj=u.boj||{is:function(_){return k("obj"),_?_ instanceof Object&&_.constructor===Object||Object.prototype.toString.call(_).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},u.obj.put=u.obj.put||function(_,b,T){return k("obj.put"),(_||{})[b]=T,_},u.obj.has=u.obj.has||function(_,b){return k("obj.has"),_&&Object.prototype.hasOwnProperty.call(_,b)},u.obj.del=u.obj.del||function(_,b){if(k("obj.del"),!!_)return _[b]=null,delete _[b],_},u.obj.as=u.obj.as||function(_,b,T,D){return k("obj.as"),_[b]=_[b]||(D===T?{}:T)},u.obj.ify=u.obj.ify||function(_){if(k("obj.ify"),s(_))return _;try{_=JSON.parse(_)}catch{_={}}return _},function(){var _;function b(T,D){l(this,D)&&_!==this[D]||(this[D]=T)}u.obj.to=u.obj.to||function(T,D){return k("obj.to"),D=D||{},t(T,b,D),D}}(),u.obj.copy=u.obj.copy||function(_){return k("obj.copy"),_&&JSON.parse(JSON.stringify(_))},function(){function _(b,T){var D=this.n,R;if(!(D&&(T===D||s(D)&&l(D,T)))&&R!==T)return!0}u.obj.empty=u.obj.empty||function(b,T){return k("obj.empty"),b?!t(b,_,{n:T}):!0}}(),function(){function _(D,R){if(arguments.length===2){_.r=_.r||{},_.r[D]=R;return}_.r=_.r||[],_.r.push(D)}var b=Object.keys,T;Object.keys=Object.keys||function(D){return T(D,function(R,C,P){P(C)})},u.obj.map=T=u.obj.map||function(D,R,C){k("obj.map");var P,J=0,H,U,N,I,W=typeof R=="function";if(_.r=P,b&&s(D)&&(N=b(D),I=!0),C=C||{},a(D)||N)for(H=(N||D).length;J<H;J++){var B=J+u.list.index;if(W){if(U=I?R.call(C,D[N[J]],N[J],_):R.call(C,D[J],B,_),U!==P)return U}else if(R===D[I?N[J]:J])return N?N[J]:B}else for(J in D)if(W){if(l(D,J)&&(U=C?R.call(C,D[J],J,_):R(D[J],J,_),U!==P))return U}else if(R===D[J])return J;return W?_.r:u.list.index?0:-1}}(),u.time=u.time||{},u.time.is=u.time.is||function(_){return k("time"),_?_ instanceof Date:+new Date().getTime()};var e=u.fn.is,a=u.list.is,i=u.obj,s=i.is,l=i.has,t=i.map,y={};y.is=function(_){return k("val.is"),_===v?!1:_===null?!0:_===1/0?!1:m(_)||w(_)||p(_)?!0:y.link.is(_)||!1},y.link=y.rel={_:"#"},function(){y.link.is=function(b){if(k("val.link.is"),b&&b[f]&&!b._&&s(b)){var T={};if(t(b,_,T),T.id)return T.id}return!1};function _(b,T){var D=this;if(D.id)return D.id=!1;if(T==f&&m(b))D.id=b;else return D.id=!1}}(),y.link.ify=function(_){return k("val.link.ify"),c({},f,_)},u.obj.has._=".";var f=y.link._,v,w=u.bi.is,p=u.num.is,m=u.text.is,i=u.obj,s=i.is,c=i.put,t=i.map;u.val=u.val||y;var h={_:"_"};h.soul=function(_,b){return k("node.soul"),_&&_._&&_._[b||n]},h.soul.ify=function(_,b){return k("node.soul.ify"),b=typeof b=="string"?{soul:b}:b||{},_=_||{},_._=_._||{},_._[n]=b.soul||_._[n]||r(),_},h.soul._=y.link._,function(){h.is=function(b,T,D){k("node.is");var R;return s(b)&&(R=h.soul(b))?!t(b,_,{as:D,cb:T,s:R,n:b}):!1};function _(b,T){if(T!==h._){if(!y.is(b))return!0;this.cb&&this.cb.call(this.as,b,T,this.n,this.s)}}}(),function(){h.ify=function(b,T,D){return k("node.ify"),T?typeof T=="string"?T={soul:T}:typeof T=="function"&&(T={map:T}):T={},T.map&&(T.node=T.map.call(D,b,v,T.node||{})),(T.node=h.soul.ify(T.node||{},T))&&t(b,_,{o:T,as:D}),T.node};function _(b,T){var D=this.o,R,C;if(D.map){R=D.map.call(this.as,b,""+T,D.node),C===R?g(D.node,T):D.node&&(D.node[T]=R);return}y.is(b)&&(D.node[T]=b)}}();var i=u.obj,s=i.is,g=i.del,t=i.map,o=u.text,r=o.random,n=h.soul._,v;u.node=u.node||h;var d=u.state;d.lex=function(){return k("state.lex"),d().toString(36).replace(".","")},d.to=function(_,b,T){k("state.to");var D=(_||{})[b];return s(D)&&(D=S(D)),d.ify(T,b,d.is(_,b),D,h.soul(_))},function(){d.map=function(b,T,D){k("state.map");var R,C=s(C=b||T)?C:null;return b=e(b=b||T)?b:null,C&&!b?(T=p(T)?T:d(),C[$]=C[$]||{},t(C,_,{o:C,s:T}),C):(D=D||s(T)?T:R,T=p(T)?T:d(),function(P,J,H,U){if(!b)return _.call({o:H,s:T},P,J),P;b.call(D||this||{},P,J,H,U),!(l(H,J)&&R===H[J])&&_.call({o:H,s:T},P,J)})};function _(b,T){$!==T&&d.ify(this.o,T,this.s)}}();var i=u.obj;i.as;var l=i.has,s=i.is,t=i.map,S=i.copy,O=u.num,p=O.is,A=u.fn,e=A.is,$=h._,v,x={};(function(){x.is=function(T,D,R,C){return k("graph.is"),!T||!s(T)||j(T)?!1:!t(T,_,{cb:D,fn:R,as:C})};function _(T,D){if(!T||D!==h.soul(T)||!h.is(T,this.fn,this.as))return!0;!this.cb||(b.n=T,b.as=this.as,this.cb.call(b.as,T,D,b))}function b(T){T&&h.is(b.n,T,b.as)}})(),function(){x.ify=function(C,P,J){k("graph.ify");var H={path:[],obj:C};return P?typeof P=="string"?P={soul:P}:typeof P=="function"&&(P.map=P):P={},typeof J=="string"&&(P.soul=P.soul||J,J=v),P.soul&&(H.link=y.link.ify(P.soul)),P.shell=(J||{}).shell,P.graph=P.graph||{},P.seen=P.seen||[],P.as=P.as||J,_(P,H),P.root=H.node,P.graph};function _(C,P){var J;return(J=R(C,P))?J:(P.env=C,P.soul=T,h.ify(P.obj,b,P)&&(P.link=P.link||y.link.ify(h.soul(P.node)),P.obj!==C.shell&&(C.graph[y.link.is(P.link)]=P.node)),P)}function b(C,P,J){var H=this,U=H.env,N,I;if(h._===P&&l(C,y.link._))return J._;if(!!(N=D(C,P,J,H,U))){if(P||(H.node=H.node||J||{},l(C,h._)&&h.soul(C)&&(H.node._=S(C._)),H.node=h.soul.ify(H.node,y.link.is(H.link)),H.link=H.link||y.link.ify(h.soul(H.node))),(I=U.map)&&(I.call(U.as||{},C,P,J,H),l(J,P))){if(C=J[P],v===C){g(J,P);return}if(!(N=D(C,P,J,H,U)))return}if(!P)return H.node;if(N===!0)return C;if(I=_(U,{obj:C,path:H.path.concat(P)}),!!I.node)return I.link}}function T(C){var P=this,J=y.link.is(P.link),H=P.env.graph;P.link=P.link||y.link.ify(C),P.link[y.link._]=C,P.node&&P.node[h._]&&(P.node[h._][y.link._]=C),l(H,J)&&(H[C]=H[J],g(H,J))}function D(C,P,J,H,U){var N;if(y.is(C))return!0;if(s(C))return 1;if(N=U.invalid)return C=N.call(U.as||{},C,P,J),D(C,P,J,H,U);U.err="Invalid value at '"+H.path.concat(P).join(".")+"'!",u.list.is(C)&&(U.err+=" Use `.set(item)` instead of an Array.")}function R(C,P){for(var J=C.seen,H=J.length,U;H--;)if(U=J[H],P.obj===U.obj)return U;J.push(P)}}(),x.node=function(_){k("graph.node");var b=h.soul(_);if(!!b)return c({},b,_)},function(){x.to=function(b,T,D){if(k("graph.to"),!!b){var R={};return D=D||{seen:{}},t(b[T],_,{obj:R,graph:b,opt:D}),R}};function _(b,T){var D,R;if(h._===T){if(j(b,y.link._))return;this.obj[T]=S(b);return}if(!(D=y.link.is(b))){this.obj[T]=b;return}if(R=this.opt.seen[D]){this.obj[T]=R;return}this.obj[T]=this.opt.seen[D]=x.to(this.graph,D,this.opt)}}();var e=u.fn.is,i=u.obj,s=i.is,g=i.del,l=i.has,j=i.empty,c=i.put,t=i.map,S=i.copy,v;u.graph=u.graph||x}}()})(yt);var Yt=yt.exports,zt={exports:{}};(function(E){(function(){function v(u,e){return e?Vt(u):u.slice?v[a(u)]:function(i,s){u(i={exports:{}}),v[a(s)]=i.exports};function a(i){return i.split("/").slice(-1).toString().replace(".js","")}}var k=E;v(function(u){typeof window!="undefined"&&(u.window=window);var e=u.window||u,a,i=e.SEA||{};(i.window=u.window)&&(i.window.SEA=i);try{a+""!=typeof k&&(k.exports=i)}catch{}u.exports=i})(v,"./root"),v(function(u){var e=v("./root");try{e.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(v,"./https"),v(function(u){var e;if(e+""==typeof btoa){if(e+""==typeof Buffer)try{st.Buffer=v("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}st.btoa=function(a){return Buffer.from(a,"binary").toString("base64")},st.atob=function(a){return Buffer.from(a,"base64").toString("binary")}}})(v,"./base64"),v(function(u){v("./base64");function e(){}Object.assign(e,{from:Array.from}),e.prototype=Object.create(Array.prototype),e.prototype.toString=function(a,i,s){a=a||"utf8",i=i||0;const l=this.length;if(a==="hex"){const t=new Uint8Array(this);return[...Array((s&&s+1||l)-i).keys()].map(y=>t[y+i].toString(16).padStart(2,"0")).join("")}if(a==="utf8")return Array.from({length:(s||l)-i},(t,y)=>String.fromCharCode(this[y+i])).join("");if(a==="base64")return btoa(this)},u.exports=e})(v,"./array"),v(function(u){v("./base64");var e=v("./array");function a(...i){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),a.from(...i)}a.prototype=Object.create(Array.prototype),Object.assign(a,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const i=arguments[0];let s;if(typeof i=="string"){const t=arguments[1]||"utf8";if(t==="hex"){const y=i.match(/([\da-fA-F]{2})/g).map(f=>parseInt(f,16));if(!y||!y.length)throw new TypeError("Invalid first argument for type 'hex'.");s=e.from(y)}else if(t==="utf8"||t==="binary"){const y=i.length,f=new Uint16Array(y);Array.from({length:y},(w,p)=>f[p]=i.charCodeAt(p)),s=e.from(f)}else if(t==="base64"){const y=atob(i),f=y.length,w=new Uint8Array(f);Array.from({length:f},(p,m)=>w[m]=y.charCodeAt(m)),s=e.from(w)}else t==="binary"?s=e.from(i):console.info("SafeBuffer.from unknown encoding: "+t);return s}if(i.byteLength,i.byteLength?i.byteLength:i.length){let t;return i instanceof ArrayBuffer&&(t=new Uint8Array(i)),e.from(t||i)}},alloc(i,s=0){return e.from(new Uint8Array(Array.from({length:i},()=>s)))},allocUnsafe(i){return e.from(new Uint8Array(Array.from({length:i})))},concat(i){if(!Array.isArray(i))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return e.from(i.reduce((s,l)=>s.concat(Array.from(l)),[]))}}),a.prototype.from=a.from,a.prototype.toString=e.prototype.toString,u.exports=a})(v,"./buffer"),v(function(u){const e=v("./root"),a={Buffer:v("./buffer")};var i={},s;if(JSON.parseAsync=JSON.parseAsync||function(t,y,f){var w;try{y(w,JSON.parse(t,f))}catch(p){y(p)}},JSON.stringifyAsync=JSON.stringifyAsync||function(t,y,f,w){var p;try{y(p,JSON.stringify(t,f,w))}catch(m){y(m)}},a.parse=function(t,y){return new Promise(function(f,w){JSON.parseAsync(t,function(p,m){p?w(p):f(m)},y)})},a.stringify=function(t,y,f){return new Promise(function(w,p){JSON.stringifyAsync(t,function(m,c){m?p(m):w(c)},y,f)})},e.window&&(a.crypto=window.crypto||window.msCrypto,a.subtle=(a.crypto||i).subtle||(a.crypto||i).webkitSubtle,a.TextEncoder=window.TextEncoder,a.TextDecoder=window.TextDecoder,a.random=t=>a.Buffer.from(a.crypto.getRandomValues(new Uint8Array(a.Buffer.alloc(t))))),!a.TextDecoder){const{TextEncoder:t,TextDecoder:y}=v((s+""==typeof k?".":"")+"./lib/text-encoding",1);a.TextDecoder=y,a.TextEncoder=t}if(!a.crypto)try{var l=v("crypto",1);Object.assign(a,{crypto:l,random:y=>a.Buffer.from(l.randomBytes(y))});const{Crypto:t}=v("@peculiar/webcrypto",1);a.ossl=a.subtle=new t({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}u.exports=a})(v,"./shim"),v(function(u){var e=v("./root"),a=v("./shim"),i={};i.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},i.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},i.ecdh={name:"ECDH",namedCurve:"P-256"},i.jwk=function(s,l){s=s.split(".");var t=s[0],y=s[1],f={kty:"EC",crv:"P-256",x:t,y,ext:!0};return f.key_ops=l?["sign"]:["verify"],l&&(f.d=l),f},i.keyToJwk=function(s){const t=s.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:t,ext:!1,alg:"A256GCM"}},i.recall={validity:12*60*60,hook:function(s){return s}},i.check=function(s){return typeof s=="string"&&s.slice(0,4)==="SEA{"},i.parse=async function(l){try{var t=typeof l=="string";return t&&l.slice(0,4)==="SEA{"&&(l=l.slice(3)),t?await a.parse(l):l}catch{}return l},e.opt=i,u.exports=i})(v,"./settings"),v(function(u){var e=v("./shim");u.exports=async function(a,i){var s=typeof a=="string"?a:await e.stringify(a),l=await e.subtle.digest({name:i||"SHA-256"},new e.TextEncoder().encode(s));return e.Buffer.from(l)}})(v,"./sha256"),v(function(u){const e=v("./shim"),a=e.subtle,i=e.ossl?e.ossl:a,s=l=>i.digest({name:"SHA-1"},new ArrayBuffer(l));u.exports=s})(v,"./sha1"),v(function(u){var e=v("./root"),a=v("./shim"),i=v("./settings"),s=v("./sha256"),l;e.work=e.work||(async(t,y,f,w)=>{try{var p=(y||{}).epub||y;if(w=w||{},p instanceof Function&&(f=p,p=l),t=typeof t=="string"?t:await a.stringify(t),(w.name||"").toLowerCase().slice(0,3)==="sha"){var m=a.Buffer.from(await s(t,w.name),"binary").toString(w.encode||"base64");if(f)try{f(m)}catch(o){console.log(o)}return m}p=p||a.random(9);var c=await(a.ossl||a.subtle).importKey("raw",new a.TextEncoder().encode(t),{name:w.name||"PBKDF2"},!1,["deriveBits"]),h=await(a.ossl||a.subtle).deriveBits({name:w.name||"PBKDF2",iterations:w.iterations||i.pbkdf2.iter,salt:new a.TextEncoder().encode(w.salt||p),hash:w.hash||i.pbkdf2.hash},c,w.length||i.pbkdf2.ks*8);t=a.random(t.length);var g=a.Buffer.from(h,"binary").toString(w.encode||"base64");if(f)try{f(g)}catch(o){console.log(o)}return g}catch(o){if(console.log(o),e.err=o,e.throw)throw o;f&&f();return}}),u.exports=e.work})(v,"./work"),v(function(u){var e=v("./root"),a=v("./shim");v("./settings"),e.name=e.name||(async(i,s)=>{try{if(i)try{i()}catch(l){console.log(l)}return}catch(l){if(console.log(l),e.err=l,e.throw)throw l;i&&i();return}}),e.pair=e.pair||(async(i,s)=>{try{var l=a.ossl||a.subtle,t=await a.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async w=>{var p={};p.priv=(await a.subtle.exportKey("jwk",w.privateKey)).d;var m=await a.subtle.exportKey("jwk",w.publicKey);return p.pub=m.x+"."+m.y,p});try{var y=await l.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async w=>{var p={};p.epriv=(await l.exportKey("jwk",w.privateKey)).d;var m=await l.exportKey("jwk",w.publicKey);return p.epub=m.x+"."+m.y,p})}catch(w){if(e.window)throw w;if(w=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw w}y=y||{};var f={pub:t.pub,priv:t.priv,epub:y.epub,epriv:y.epriv};if(i)try{i(f)}catch(w){console.log(w)}return f}catch(w){if(console.log(w),e.err=w,e.throw)throw w;i&&i();return}}),u.exports=e.pair})(v,"./pair"),v(function(u){var e=v("./root"),a=v("./shim"),i=v("./settings"),s=v("./sha256"),l;e.sign=e.sign||(async(t,y,f,w)=>{try{if(w=w||{},!(y||w).priv){if(!e.I)throw"No signing key.";y=await e.I(null,{what:t,how:"sign",why:w.why})}if(l===t)throw"`undefined` not allowed.";var p=await i.parse(t),m=w.check=w.check||p;if(e.verify&&(e.opt.check(m)||m&&m.s&&m.m)&&l!==await e.verify(m,y)){var n=await i.parse(m);if(w.raw||(n="SEA"+await a.stringify(n)),f)try{f(n)}catch(S){console.log(S)}return n}var c=y.pub,h=y.priv,g=i.jwk(c,h),o=await s(p),r=await(a.ossl||a.subtle).importKey("jwk",g,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(d=>(a.ossl||a.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},d,new Uint8Array(o))),n={m:p,s:a.Buffer.from(r,"binary").toString(w.encode||"base64")};if(w.raw||(n="SEA"+await a.stringify(n)),f)try{f(n)}catch(d){console.log(d)}return n}catch(d){if(console.log(d),e.err=d,e.throw)throw d;f&&f();return}}),u.exports=e.sign})(v,"./sign"),v(function(u){var e=v("./root"),a=v("./shim"),i=v("./settings"),s=v("./sha256"),l;e.verify=e.verify||(async(f,w,p,m)=>{try{var c=await i.parse(f);if(w===!1){var h=await i.parse(c.m);if(p)try{p(h)}catch($){console.log($)}return h}m=m||{};var g=w.pub||w,o=e.opt.slow_leak?await e.opt.slow_leak(g):await(a.ossl||a.subtle).importKey("jwk",i.jwk(g),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),r=await s(c.m),n,d,S,O;try{if(n=a.Buffer.from(c.s,m.encode||"base64"),d=new Uint8Array(n),S=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},o,d,new Uint8Array(r)),!S)throw"Signature did not match."}catch{if(e.opt.fallback)return await e.opt.fall_verify(f,w,p,m)}var A=S?await i.parse(c.m):l;if(p)try{p(A)}catch($){console.log($)}return A}catch($){if(console.log($),e.err=$,e.throw)throw $;p&&p();return}}),u.exports=e.verify;var t={};e.opt.slow_leak=f=>{if(t[f])return t[f];var w=i.jwk(f);return t[f]=(a.ossl||a.subtle).importKey("jwk",w,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),t[f]};var y=e.opt;e.opt.fall_verify=async function(f,w,p,m,c){if(c===e.opt.fallback)throw"Signature did not match";c=c||1;var h=f||"";f=e.opt.unpack(f)||f;var g=await i.parse(f),o=w.pub||w,r=await e.opt.slow_leak(o),n=c<=e.opt.fallback?a.Buffer.from(await a.subtle.digest({name:"SHA-256"},new a.TextEncoder().encode(await i.parse(g.m)))):await s(g.m),d,S,O;try{if(d=a.Buffer.from(g.s,m.encode||"base64"),S=new Uint8Array(d),O=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,S,new Uint8Array(n)),!O)throw"Signature did not match."}catch{try{d=a.Buffer.from(g.s,"utf8"),S=new Uint8Array(d),O=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,S,new Uint8Array(n))}catch{if(!O)throw"Signature did not match."}}var A=O?await i.parse(g.m):l;if(y.fall_soul=h["#"],y.fall_key=h["."],y.fall_val=f,y.fall_state=h[">"],p)try{p(A)}catch($){console.log($)}return A},e.opt.fallback=2})(v,"./verify"),v(function(u){var e=v("./shim"),a=v("./settings"),i=v("./sha256");const s=async(l,t,y)=>{const f=l+(t||e.random(8)).toString("utf8"),w=e.Buffer.from(await i(f),"binary"),p=a.keyToJwk(w);return await e.subtle.importKey("jwk",p,{name:"AES-GCM"},!1,["encrypt","decrypt"])};u.exports=s})(v,"./aeskey"),v(function(u){var e=v("./root"),a=v("./shim");v("./settings");var i=v("./aeskey"),s;e.encrypt=e.encrypt||(async(l,t,y,f)=>{try{f=f||{};var w=(t||f).epriv||t;if(s===l)throw"`undefined` not allowed.";if(!w){if(!e.I)throw"No encryption key.";t=await e.I(null,{what:l,how:"encrypt",why:f.why}),w=t.epriv||t}var p=typeof l=="string"?l:await a.stringify(l),m={s:a.random(9),iv:a.random(15)},c=await i(w,m.s,f).then(g=>a.subtle.encrypt({name:f.name||"AES-GCM",iv:new Uint8Array(m.iv)},g,new a.TextEncoder().encode(p))),h={ct:a.Buffer.from(c,"binary").toString(f.encode||"base64"),iv:m.iv.toString(f.encode||"base64"),s:m.s.toString(f.encode||"base64")};if(f.raw||(h="SEA"+await a.stringify(h)),y)try{y(h)}catch(g){console.log(g)}return h}catch(g){if(console.log(g),e.err=g,e.throw)throw g;y&&y();return}}),u.exports=e.encrypt})(v,"./encrypt"),v(function(u){var e=v("./root"),a=v("./shim"),i=v("./settings"),s=v("./aeskey");e.decrypt=e.decrypt||(async(l,t,y,f)=>{try{f=f||{};var w=(t||f).epriv||t;if(!w){if(!e.I)throw"No decryption key.";t=await e.I(null,{what:l,how:"decrypt",why:f.why}),w=t.epriv||t}var p=await i.parse(l),m,c,h;try{m=a.Buffer.from(p.s,f.encode||"base64"),c=a.Buffer.from(p.iv,f.encode||"base64"),h=a.Buffer.from(p.ct,f.encode||"base64");var g=await s(w,m,f).then(r=>a.subtle.decrypt({name:f.name||"AES-GCM",iv:new Uint8Array(c),tagLength:128},r,new Uint8Array(h)))}catch{if(f.encode==="utf8")throw"Could not decrypt";if(e.opt.fallback)return f.encode="utf8",await e.decrypt(l,t,y,f)}var o=await i.parse(new a.TextDecoder("utf8").decode(g));if(y)try{y(o)}catch(r){console.log(r)}return o}catch(r){if(console.log(r),e.err=r,e.throw)throw r;y&&y();return}}),u.exports=e.decrypt})(v,"./decrypt"),v(function(u){var e=v("./root"),a=v("./shim");v("./settings"),e.secret=e.secret||(async(s,l,t,y)=>{try{if(y=y||{},!l||!l.epriv||!l.epub){if(!e.I)throw"No secret mix.";l=await e.I(null,{what:s,how:"secret",why:y.why})}var f=s.epub||s,w=l.epub,p=l.epriv,m=a.ossl||a.subtle,c=i(f),h=Object.assign({public:await m.importKey(...c,!0,[])},{name:"ECDH",namedCurve:"P-256"}),g=i(w,p),o=await m.importKey(...g,!1,["deriveBits"]).then(async n=>{var d=await m.deriveBits(h,n,256),S=new Uint8Array(d),O=await m.importKey("raw",S,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return m.exportKey("jwk",O).then(({k:A})=>A)}),r=o;if(t)try{t(r)}catch(n){console.log(n)}return r}catch(n){if(console.log(n),e.err=n,e.throw)throw n;t&&t();return}});var i=(s,l)=>{var[t,y]=s.split("."),f=l?{d:l}:{};return["jwk",Object.assign(f,{x:t,y,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};u.exports=e.secret})(v,"./secret"),v(function(u){var e=v("./root");e.certify=e.certify||(async(a,i={},s,l,t={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),a=(()=>{var r=[];if(a){if((typeof a=="string"||Array.isArray(a))&&a.indexOf("*")>-1)return"*";if(typeof a=="string")return a;if(Array.isArray(a)){if(a.length===1&&a[0])return typeof a[0]=="object"&&a[0].pub?a[0].pub:typeof a[0]=="string"?a[0]:null;a.map(n=>{typeof n=="string"?r.push(n):typeof n=="object"&&n.pub&&r.push(n.pub)})}return typeof a=="object"&&a.pub?a.pub:r.length>0?r:null}})(),!a)return console.log("No certificant found.");const f=t.expiry&&(typeof t.expiry=="number"||typeof t.expiry=="string")?parseFloat(t.expiry):null,w=(i||{}).read?i.read:null,p=(i||{}).write?i.write:typeof i=="string"||Array.isArray(i)||i["+"]||i["#"]||i["."]||i["="]||i["*"]||i[">"]||i["<"]?i:null,m=(t||{}).block||(t||{}).blacklist||(t||{}).ban||{},c=m.read&&(typeof m.read=="string"||(m.read||{})["#"])?m.read:null,h=typeof m=="string"?m:m.write&&(typeof m.write=="string"||m.write["#"])?m.write:null;if(!w&&!p)return console.log("No policy found.");const g=JSON.stringify(kt(kt(kt(kt(kt({c:a},f?{e:f}:{}),w?{r:w}:{}),p?{w:p}:{}),c?{rb:c}:{}),h?{wb:h}:{}));var y=await e.sign(g,s,null,{raw:1});if(t.raw||(y="SEA"+JSON.stringify(y)),l)try{l(y)}catch(r){console.log(r)}return y}catch(f){if(e.err=f,e.throw)throw f;l&&l();return}}),u.exports=e.certify})(v,"./certify"),v(function(u){var e=v("./shim"),a=v("./root");a.work=v("./work"),a.sign=v("./sign"),a.verify=v("./verify"),a.encrypt=v("./encrypt"),a.decrypt=v("./decrypt"),a.certify=v("./certify"),a.random=a.random||e.random,a.Buffer=a.Buffer||v("./buffer"),a.keyid=a.keyid||(async i=>{try{const s=e.Buffer.concat(i.replace(/-/g,"+").replace(/_/g,"/").split(".").map(f=>e.Buffer.from(f,"base64"))),l=e.Buffer.concat([e.Buffer.from([153,s.length/256,s.length%256]),s]),t=await sha1hash(l),y=e.Buffer.from(t,"binary");return y.toString("hex",y.length-8)}catch(s){throw console.log(s),s}}),((a.window||{}).GUN||{}).SEA=a,u.exports=a})(v,"./sea"),v(function(u){var e=v("./sea"),a,i;e.window?a=e.window.GUN||{chain:{}}:a=v((i+""==typeof k?".":"")+"./gun",1),e.GUN=a;function s(t){this._={$:this}}s.prototype=function(){function t(){}return t.prototype=a.chain,new t}(),s.prototype.constructor=s,a.chain.user=function(t){var y=this,f=y.back(-1),w;if(t)return t=e.opt.pub((t._||"")["#"])||t,f.get("~"+t);if(w=f.back("user"))return w;var f=f._,p=f,m=p.opt.uuid||l;return(p=(w=p.user=y.chain(new s))._).opt={},p.opt.uuid=function(c){var h=m(),g=f.user;return!g||!(g=g.is)||!(g=g.pub)||(h="~"+g+"/"+h,c&&c.call&&c(null,h)),h},w};function l(){return a.state().toString(36).replace(".","")}a.User=s,s.GUN=a,s.SEA=a.SEA=e,u.exports=s})(v,"./user"),v(function(u){var e,a=""+e!=typeof window?window.Gun||{chain:{}}:v((""+e==typeof k?".":"")+"./gun",1);a.chain.then=function(i,s){var l=this,t=new Promise(function(y,f){l.once(y,s)});return i?t.then(i):t}})(v,"./then"),v(function(u){var e=v("./user"),a=e.SEA,i=e.GUN,s=function(){};e.prototype.create=function(...l){var t=typeof l[0]=="object"&&(l[0].pub||l[0].epub)?l[0]:typeof l[1]=="object"&&(l[1].pub||l[1].epub)?l[1]:null,y=t&&(t.pub||t.epub)?t.pub:typeof l[0]=="string"?l[0]:null,f=t&&(t.pub||t.epub)?t:y&&typeof l[1]=="string"?l[1]:null,w=l.filter(r=>typeof r=="function")[0]||null,p=l&&l.length>1&&typeof l[l.length-1]=="object"?l[l.length-1]:{},m=this,c=m._,h=m.back(-1);if(w=w||s,p=p||{},p.check!==!1){var g;if(y||(g="No user."),(f||"").length<8&&(g="Password too short!"),g)return w({err:i.log(g)}),m}if(c.ing)return(w||s)({err:i.log("User is already being created or authenticated!"),wait:!0}),m;c.ing=!0;var o={};return o.a=function(r){if(o.pubs=r,r&&!p.already){var n={err:i.log("User already created!")};c.ing=!1,(w||s)(n),m.leave();return}o.salt=String.random(64),a.work(f,o.salt,o.b)},o.b=function(r){o.proof=r,t?o.c(t):a.pair(o.c)},o.c=function(r){var n;o.pair=r||{},(n=c.root.user)&&(n._.sea=r,n.is={pub:r.pub,epub:r.epub,alias:y}),o.data={pub:r.pub},o.d()},o.d=function(){o.data.alias=y,o.e()},o.e=function(){o.data.epub=o.pair.epub,a.encrypt({priv:o.pair.priv,epriv:o.pair.epriv},o.proof,o.f,{raw:1})},o.f=function(r){o.data.auth=JSON.stringify({ek:r,s:o.salt}),o.g(o.data.auth)},o.g=function(r){var n;o.data.auth=o.data.auth||r,h.get(n="~"+o.pair.pub).put(o.data).on(o.h);var d={};d[n]={"#":n},h.get("~@"+y).put(d).get(n).on(o.i)},o.h=function(r,n,d,S){S.off(),o.h.ok=1,o.i()},o.i=function(r,n,d,S){S&&(o.i.ok=1,S.off()),!(!o.h.ok||!o.i.ok)&&(c.ing=!1,w({ok:0,pub:o.pair.pub}),s===w&&(t?m.auth(t):m.auth(y,f)))},h.get("~@"+y).once(o.a),m},e.prototype.leave=function(l,t){var y=this,f=y.back(-1)._.user;if(f&&(delete f.is,delete f._.is,delete f._.sea),a.window)try{var w={};w=window.sessionStorage,delete w.recall,delete w.pair}catch{}return y}})(v,"./create"),v(function(u){var e=v("./user"),a=e.SEA,i=e.GUN,s=function(){};e.prototype.auth=function(...t){var y=typeof t[0]=="object"&&(t[0].pub||t[0].epub)?t[0]:typeof t[1]=="object"&&(t[1].pub||t[1].epub)?t[1]:null,f=!y&&typeof t[0]=="string"?t[0]:null,w=f&&typeof t[1]=="string"?t[1]:null,p=t.filter(n=>typeof n=="function")[0]||null,m=t&&t.length>1&&typeof t[t.length-1]=="object"?t[t.length-1]:{},c=this,h=c._,g=c.back(-1);if(h.ing)return(p||s)({err:i.log("User is already being created or authenticated!"),wait:!0}),c;h.ing=!0;var o={},r;return o.a=function(n){if(!n)return o.b();if(!n.pub){var d=[];return Object.keys(n).forEach(function(S){S!="_"&&d.push(n[S])}),o.b(d)}if(o.name)return o.f(n);o.c((o.data=n).auth)},o.b=function(n){var d=(o.list=(o.list||[]).concat(n||[])).shift();if(r===d)return o.name?o.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):o.err("Wrong user or password.");g.get(d).once(o.a)},o.c=function(n){if(r===n)return o.b();if(typeof n=="string")return o.c(l(n));a.work(w,(o.auth=n).s,o.d,o.enc)},o.d=function(n){a.decrypt(o.auth.ek,n,o.e,o.enc)},o.e=function(n){if(r===n)return o.enc?(o.enc=null,o.b()):(o.enc={encode:"utf8"},o.c(o.auth));o.half=n,o.f(o.data)},o.f=function(n){var d=o.half||{},S=o.data||{};o.g(o.lol={pub:n.pub||S.pub,epub:n.epub||S.epub,priv:n.priv||d.priv,epriv:n.epriv||d.epriv})},o.g=function(n){if(!n||!n.pub||!n.epub)return o.b();o.pair=n;var d=g._.user,S=d._;S.tag;var O=S.opt;S=d._=g.get("~"+n.pub)._,S.opt=O,d.is={pub:n.pub,epub:n.epub,alias:f||n.pub},S.sea=o.pair,h.ing=!1;try{w&&r==(l(h.root.graph["~"+n.pub].auth)||"")[":"]&&(m.shuffle=m.change=w)}catch{}if(m.change?o.z():(p||s)(S),a.window&&(c.back("user")._.opt||m).remember)try{var A={};A=window.sessionStorage,A.recall=!0,A.pair=JSON.stringify(n)}catch{}try{g._.tag.auth?g._.on("auth",S):setTimeout(function(){g._.on("auth",S)},1)}catch($){i.log("Your 'auth' callback crashed with:",$)}},o.z=function(){o.salt=String.random(64),a.work(m.change,o.salt,o.y)},o.y=function(n){a.encrypt({priv:o.pair.priv,epriv:o.pair.epriv},n,o.x,{raw:1})},o.x=function(n){o.w(JSON.stringify({ek:n,s:o.salt}))},o.w=function(n){if(m.shuffle){console.log("migrate core account from UTF8 & shuffle");var d={};Object.keys(o.data).forEach(function(S){d[S]=o.data[S]}),delete d._,d.auth=n,g.get("~"+o.pair.pub).put(d)}g.get("~"+o.pair.pub).get("auth").put(n,p||s)},o.err=function(n){var d={err:i.log(n||"User cannot be found!")};h.ing=!1,(p||s)(d)},o.plugin=function(n){if(!(o.name=n))return o.err();var d=[n];n[0]!=="~"&&(d[1]="~"+n,d[2]="~@"+n),o.b(d)},y?o.g(y):f?g.get("~@"+f).once(o.a):!f&&!w&&a.name(o.plugin),c};function l(t){if(typeof t!="string")return t;try{t=JSON.parse(t)}catch{t={}}return t}})(v,"./auth"),v(function(u){var e=v("./user"),a=e.SEA;e.GUN,e.prototype.recall=function(i,s){var l=this,t=l.back(-1);if(i=i||{},i&&i.sessionStorage){if(a.window)try{var y={};y=window.sessionStorage,y&&(t._.opt.remember=!0,(l.back("user")._.opt||i).remember=!0,(y.recall||y.pair)&&t.user().auth(JSON.parse(y.pair),s))}catch{}return l}return l}})(v,"./recall"),v(function(u){var e=v("./user"),a=e.SEA,i=e.GUN,s=function(){};e.prototype.pair=function(){var l=this,t;try{t=new Proxy({DANGER:"\u2620"},{get:function(y,f,w){if(!(!l.is||!(l._||"").sea))return l._.sea[f]}})}catch{}return t},e.prototype.delete=async function(l,t,y){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var f=this;f.back(-1);var w=f.back("user");try{w.auth(l,t,function(p){var m=(w.is||{}).pub;w.map().once(function(){this.put(null)}),w.leave(),(y||s)({ok:0})})}catch(p){i.log("User.delete failed! Error:",p)}return f},e.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const l=this.back(-1);try{return await authRecall(l),l._.user._}catch{const y="No session!";throw i.log(y),{err:y}}},e.prototype.trust=async function(l){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),i.is(l)&&l.get("pub").get((t,y)=>{console.log(t,y)}),l.get("trust").get(path).put(theirPubkey)},e.prototype.grant=function(l,t){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,f=y.back(-1).user(),w=f._.sea,p="";return y.back(function(m){m.is||(p+=m.get||"")}),async function(){var m,c=await f.get("grant").get(w.pub).get(p).then();c=await a.decrypt(c,w),c||(c=a.random(16).toString(),m=await a.encrypt(c,w),f.get("grant").get(w.pub).get(p).put(m));var h=l.get("pub").then(),g=l.get("epub").then();h=await h,g=await g;var o=await a.secret(g,w);m=await a.encrypt(c,o),f.get("grant").get(h).get(p).put(m,t)}(),y},e.prototype.secret=function(l,t){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,f=y.back(-1).user(),w=f.pair(),p="";return y.back(function(m){m.is||(p+=m.get||"")}),async function(){var m,c=await f.get("trust").get(w.pub).get(p).then();c=await a.decrypt(c,w),c||(c=a.random(16).toString(),m=await a.encrypt(c,w),f.get("trust").get(w.pub).get(p).put(m)),m=await a.encrypt(l,c),y.put(m,t)}(),y},u.exports=e})(v,"./share"),v(function(u){var e=v("./sea"),a=v("./settings"),i=function(){},s,l=""+s!=typeof window?window.Gun||{on:i}:v((""+s==typeof k?".":"")+"./gun",1);l.on("opt",function(c){c.sea||(c.sea={own:{}},c.on("put",t,c)),this.to.next(c)});function t(c){var h=this,g=h.as,o=c.put,r=o["#"],n=o["."],d=o[":"],S=o[">"],O=c["#"],A;if(!(!r||!n)){if((c._||"").faith&&(g.opt||"").faith&&typeof c._=="function"){e.opt.pack(o,function(x){e.verify(x,!1,function(j){o["="]=e.opt.unpack(j),h.to.next(c)})});return}var $=function(x){g.on("in",{"@":O,err:c.err=x})};if((c._||"").DBG&&((c._||"").DBG.c=+new Date),0<=r.indexOf("<?")&&(A=parseFloat(r.split("<?")[1]||""),A&&S<l.state()-A*1e3)){(A=c._)&&A.stun&&A.stun--;return}if(r==="~@"){t.alias(h,c,d,n,r,g,$);return}if(r.slice(0,2)==="~@"){t.pubs(h,c,d,n,r,g,$);return}if(A=e.opt.pub(r)){t.pub(h,c,d,n,r,g,$,g.user||"",A);return}if(0<=r.indexOf("#")){t.hash(h,c,d,n,r,g,$);return}t.any(h,c,d,n,r,g,$,g.user||"")}}t.hash=function(c,h,g,o,r,n,d){e.work(g,null,function(S){if(S&&S===o.split("#").slice(-1)[0])return c.to.next(h);d("Data hash not same as hash!")},{name:"SHA-256"})},t.alias=function(c,h,g,o,r,n,d){if(!g)return d("Data must exist!");if("~@"+o===f(g))return c.to.next(h);d("Alias not same!")},t.pubs=function(c,h,g,o,r,n,d){if(!g)return d("Alias must exist!");if(o===f(g))return c.to.next(h);d("Alias not same!")},t.pub=async function(c,h,g,o,r,n,d,S,O){var A;const $=await a.parse(g)||{},x=(j,_,b)=>{if(j.m&&j.s&&_&&O)return e.verify(j,O,T=>{if(s!==T&&s!==T.e&&h.put[">"]&&h.put[">"]>parseFloat(T.e))return d("Certificate expired.");if(s!==T&&T.c&&T.w&&(T.c===_||T.c.indexOf("*")>-1)){let R=r.indexOf("/")>-1?r.replace(r.substring(0,r.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const C=Array.isArray(T.w)?T.w:typeof T.w=="object"||typeof T.w=="string"?[T.w]:[];for(const P of C)if(String.match(R,P["#"])&&String.match(o,P["."])||!P["."]&&String.match(R,P["#"])||!P["#"]&&String.match(o,P["."])||String.match(R?R+"/"+o:o,P["#"]||P)){if(P["+"]&&P["+"].indexOf("*")>-1&&R&&R.indexOf(_)==-1&&o.indexOf(_)==-1)return d(`Path "${R}" or key "${o}" must contain string "${_}".`);if(T.wb&&(typeof T.wb=="string"||(T.wb||{})["#"])){var D=c.as.root.$.back(-1);return typeof T.wb=="string"&&T.wb.slice(0,1)!=="~"&&(D=D.get("~"+O)),D.get(T.wb).get(_).once(J=>J&&(J===1||J===!0)?d(`Certificant ${_} blocked.`):b(T))}return b(T)}return d("Certificate verification fail.")}})};if(o==="pub"&&"~"+O===r)return g===O?c.to.next(h):d("Account not same!");if((A=S.is)&&A.pub&&!$["*"]&&!$["+"]&&(O===A.pub||O!==A.pub&&((h._.msg||{}).opt||{}).cert)){e.opt.pack(h.put,j=>{e.sign(j,S._.sea,async function(_){if(s===_)return d(e.err||"Signature fail.");if(h.put[":"]={":":A=e.opt.unpack(_.m),"~":_.s},h.put["="]=A,O===S.is.pub){(A=f(g))&&((n.sea.own[A]=n.sea.own[A]||{})[O]=1),JSON.stringifyAsync(h.put[":"],function(b,T){return b?d(b||"Stringify error."):(h.put[":"]=T,c.to.next(h))});return}if(O!==S.is.pub&&((h._.msg||{}).opt||{}).cert){const b=await a.parse(h._.msg.opt.cert);b&&b.m&&b.s&&x(b,S.is.pub,T=>{h.put[":"]["+"]=b,h.put[":"]["*"]=S.is.pub,JSON.stringifyAsync(h.put[":"],function(D,R){return D?d(D||"Stringify error."):(h.put[":"]=R,c.to.next(h))})})}},{raw:1})});return}e.opt.pack(h.put,j=>{e.verify(j,$["*"]||O,function(_){var b;if(_=e.opt.unpack(_),s===_)return d("Unverified data.");if((b=f(_))&&O===e.opt.pub(b)&&((n.sea.own[b]=n.sea.own[b]||{})[O]=1),$["+"]&&$["+"].m&&$["+"].s&&$["*"])x($["+"],$["*"],T=>(h.put["="]=_,c.to.next(h)));else return h.put["="]=_,c.to.next(h)})})},t.any=function(c,h,g,o,r,n,d,S){if(n.opt.secure)return d("Soul missing public key at '"+o+"'.");n.on("secure",function(O){if(this.off(),!n.opt.secure)return c.to.next(O);d("Data cannot be changed.")}).on.on("secure",h)};var y=l.valid,f=function(c,h){return typeof(h=y(c))=="string"&&h};(l.state||"").ify;var w=/[^\w_-]/;e.opt.pub=function(c){if(!!c&&(c=c.split("~"),!(!c||!(c=c[1]))&&(c=c.split(w).slice(0,2),!(!c||c.length!=2)&&(c[0]||"")[0]!=="@")))return c=c.slice(0,2).join("."),c},e.opt.stringy=function(c){},e.opt.pack=function(c,h,g,o,r){var n,d;if(e.opt.check(c))return h(c);c&&c["#"]&&c["."]&&c[">"]&&(n=c[":"],d=1),JSON.parseAsync(d?n:c,function(S,O){var A=s!==(O||"")[":"]&&(O||"")["~"];if(!A){h(c);return}h({m:{"#":r||c["#"],".":g||c["."],":":(O||"")[":"],">":c[">"]||l.state.is(o,g)},s:A})})};var p=e.opt;e.opt.unpack=function(c,h,g){var o;if(s!==c){if(c&&s!==(o=c[":"]))return o;if(h=h||p.fall_key,!g&&p.fall_val&&(g={},g[h]=p.fall_val),!(!h||!g)){if(c===g[h]||!e.opt.check(g[h]))return c;var r=g&&g._&&g._["#"]||p.fall_soul,n=l.state.is(g,h)||p.fall_state;if(c&&c.length===4&&r===c[0]&&h===c[1]&&m(n)===m(c[3]))return c[2];if(n<e.opt.shuffle_attack)return c}}},e.opt.shuffle_attack=15463296e5;var m=Math.floor})(v,"./index")})()})(zt);var Xt=zt.exports,Qt=typeof window!="undefined"?window.Gun:yt.exports;Qt.chain.promise=function(E){var v=this,E=E||function(k){return k};return new Promise(function(k,u){v.once(function(e,a){k({put:e,get:a,gun:this})})}).then(E)};Qt.chain.then=function(E){var v=this,k=new Promise((u,e)=>{v.once(function(a,i){u(a,i)})});return E?k.then(E):k};var Zt={exports:{}};(function(){function E(){var a=function(i,s,l){if(a.unit=0,!l&&u!==s&&(a.last=""+i<a.last?a.last:""+i,delete(a.$||{})[e]),l=l||a.$||(a.$={}),!i&&Object.keys(l).length)return l;i=""+i;for(var t=0,y=i.length-1,f=i[t],w,p;!(w=l[f])&&t<y;)f+=i[++t];if(w)if(t==y){if(u===s)return u===(p=w[""])?w:(a.unit=1)&&p;w[""]=s}else return u!==s&&delete w[e],a(i.slice(++t),s,w||(w={}));else{if(!v(l,function(m,c){var h=0,g="";if((c||"").length)for(;c[h]==i[h];)g+=c[h++];if(g){if(u===s)return h<=y?void 0:((p||(p={}))[c.slice(h)]=m,m);var o={};if(o[c.slice(h)]=m,h=i.slice(h),h===""?o[""]=s:(o[h]={})[""]=s,l[g]=o,E.debug&&""+g=="undefined"){console.log(0,g);debugger}return delete l[c],!0}})){if(u===s)return;if((l[f]||(l[f]={}))[""]=s,E.debug&&""+f=="undefined"){console.log(1,f);debugger}}if(u===s)return p}};return a}if(E.map=function a(i,s,l,t){t=t||[];var y=typeof i=="function"?i.$||{}:i;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!y){if(typeof y=="string"){if(E.debug)throw["BUG:",i,s,l,t];return}var f=(y[e]||k).sort||(y[e]=function A(){return A.sort=Object.keys(y).sort(),A}()).sort,w;l=l===!0?{branch:!0}:l||{},(w=l.reverse)&&(f=f.slice(0).reverse());for(var p=l.start,m=l.end,c="\uFFFF",h=0,g=f.length;h<g;h++){var o=f[h],r=y[o],n,d,S;if(!(!r||o===""||e===o)&&(d=t.slice(0),d.push(o),S=d.join(""),!(u!==p&&S<(p||"").slice(0,S.length))&&!(u!==m&&(m||c)<S))){if(w&&(n=a(r,s,l,d),u!==n))return n;if(u!==(n=r[""])){var O=1;if(u!==p&&S<(p||"")&&(O=0),u!==m&&S>(m||c)&&(O=0),O&&(n=s(n,S,o,t),u!==n))return n}else if(l.branch&&(n=s(u,S,o,t),u!==n))return n;if(t=d,!w&&(n=a(r,s,l,t),u!==n))return n;t.pop()}}}},typeof window!="undefined")window.Radix=E;else try{Zt.exports=E}catch{}var v=E.object=function(a,i,s){for(var l in a)if(!!a.hasOwnProperty(l)&&(s=i(a[l],l))!==u)return s},k={},u,e=String.fromCharCode(24)})();var te={exports:{}},Ge={exports:{}};(function(E){(function(){var v={},k,u=setTimeout.turn||typeof setImmediate!=""+k&&setImmediate||setTimeout;v.parseAsync=function(a,i,s,l){if(typeof a!="string"){try{i(k,JSON.parse(a))}catch(f){i(f)}return}var t={i:0,text:a,done:i,l:a.length,up:[]};l=l||1024*32,y();function y(){for(var f=t.text,w=t.i,p=t.l,m=0,c=t.w,h,g;m++<l;){var o=f[w++];if(w>p){t.end=!0;break}if(c)w=f.indexOf('"',w-1),o=f[w],g=f[w-1]=="\\",h=h||g,o=='"'&&!g&&(c=k,g=t.s,t.a?(g=f.slice(t.sl,w),(h||1+g.indexOf("\\u"))&&(g=JSON.parse('"'+g+'"')),t.at instanceof Array?t.at.push(t.s=g):(t.at||(t.end=m=l,g=k),(t.at||{})[t.s]=t.s=g)):(t.s=f.slice(t.sl,w),(h||1+t.s.indexOf("\\u"))&&(t.s=JSON.parse('"'+t.s+'"'))),t.a=h=k),++w;else switch(o){case'"':t.sl=w,c=!0;break;case":":t.ai=w,t.a=!0;break;case",":(t.a||t.at instanceof Array)&&(g=f.slice(t.ai,w-1))&&k!==(g=e(g))&&(t.at instanceof Array?t.at.push(g):t.at[t.s]=g),t.a=k,t.at instanceof Array&&(t.a=!0,t.ai=w);break;case"{":t.up.push(t.at||(t.at={})),t.at instanceof Array?t.at.push(t.at={}):k!==(g=t.s)&&(t.at[g]=t.at={}),t.a=k;break;case"}":t.a&&(g=f.slice(t.ai,w-1))&&k!==(g=e(g))&&(t.at instanceof Array?t.at.push(g):(t.at||(t.end=m=l,g=k),(t.at||{})[t.s]=g)),t.a=k,t.at=t.up.pop();break;case"[":k!==(g=t.s)?(t.up.push(t.at),t.at[g]=t.at=[]):t.at||t.up.push(t.at=[]),t.a=!0,t.ai=w;break;case"]":t.a&&(g=f.slice(t.ai,w-1))&&k!==(g=e(g))&&(t.at instanceof Array?t.at.push(g):t.at[t.s]=g),t.a=k,t.at=t.up.pop();break}}if(t.s=k,t.i=w,t.w=c,t.end){if(g=t.at,k===g)try{g=JSON.parse(a)}catch(r){return t.done(r)}t.done(k,g)}else u(y)}};function e(a){var i=parseFloat(a);if(!isNaN(i))return i;if(a=a.trim(),a=="true")return!0;if(a=="false")return!1;if(a=="null")return null}v.stringifyAsync=function(a,i,s,l,t){t=t||{},t.text=t.text||"",t.up=[t.at={d:a}],t.done=i,t.i=0;var y=0;f();function f(){var w=t.at,p=w.d,m="",c;switch(w.i&&w.i-w.j>0&&(m+=","),k!==(c=w.k)&&(m+=JSON.stringify(c)+":"),typeof p){case"boolean":m+=""+p;break;case"string":m+=JSON.stringify(p);break;case"number":m+=p;break;case"object":if(!p){m+="null";break}if(p instanceof Array){m+="[",w={i:-1,as:p,up:w,j:0},w.l=p.length,t.up.push(t.at=w);break}if(typeof(p||"").toJSON!="function"){m+="{",w={i:-1,ok:Object.keys(p).sort(),as:p,up:w,j:0},w.l=w.ok.length,t.up.push(t.at=w);break}if(c=p.toJSON()){m+=c;break}case"function":if(w.as instanceof Array){m+="null";break}default:m="",w.j++}for(t.text+=m;1+w.i>=w.l;)t.text+=w.ok?"}":"]",w=t.at=w.up;if(++w.i<w.l){if((c=w.ok)?w.d=w.as[w.k=c[w.i]]:w.d=w.as[w.i],++y<9)return f();y=0,u(f);return}t.done(k,t.text)}},typeof window!=""+k&&(window.YSON=v);try{""+k!="object"&&(E.exports=v)}catch{}typeof JSON!=""+k&&(JSON.parseAsync=v.parseAsync,JSON.stringifyAsync=v.stringifyAsync)})()})(Ge);(function(){function E(u){u=u||{},u.log=u.log||console.log,u.file=String(u.file||"radata");var e=(E.has||(E.has={}))[u.file];if(e)return e;u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.until=u.until||u.wait||250,u.batch=u.batch||10*1e3,u.chunk=u.chunk||1024*1024*1,u.code=u.code||{},u.code.from=u.code.from||"!",u.jsonify=!0;function a(h){return encodeURIComponent(h).replace(/\*/g,"%2A")}function i(h){return t!==h&&(!h||typeof h!="object")}var s=""+t==typeof setImmediate?setTimeout:setImmediate,l=setTimeout.turn||s,t,y=k.object,f=0;if(!u.store)return u.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!u.store.put)return u.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!u.store.get)return u.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");!u.store.list;var w=JSON.parseAsync||function(h,g,o){var r;try{g(r,JSON.parse(h,o))}catch(n){g(n)}},p=function(h,g,o,r,n){if(typeof g=="function"){var d=o||{};o=g,p.read(h,o,d,n||r);return}p.save(h,g,o,r,n)};p.save=function(h,g,o,r,n){var d={key:h},S,O;d.find=function(A){var $;if(d.file=A||(A=u.code.from),n&&(n=n[A]=n[A]||{}),n&&(n.sf=n.sf||+new Date),$=p.disk[A]){d.mix(t,$);return}p.parse(A,d.mix,t,n)},d.mix=function(A,$){if(n&&(n.sml=+new Date),n&&(n.sm=n.sm||+new Date),d.err=A||d.err){o(A);return}var x=d.file=($||"").file||d.file,j;if(!$&&x!==u.code.from){p.find.bad(x),p.save(h,g,o,r);return}if(($=p.disk[x]||(p.disk[x]=$||k())).file||($.file=x),u.compare&&(g=u.compare($(h),g,h,x),t===g)){o(A,-1);return}if((d.disk=$)(h,g),r&&((j=(j=$.tags||($.tags={}))[r]||(j[r]=p.tags[r]||(p.tags[r]={})))[x]||(j[x]=p.one[r]||(p.one[r]=o)),o=null),n&&(n.st=n.st||+new Date),$.Q){o&&$.Q.push(o);return}$.Q=o?[o]:[],$.to=setTimeout(d.write,u.until)},d.write=function(){n&&(n.sto=n.sto||+new Date);var A=S=d.file,$=d.disk;O=d.q=$.Q,d.tags=$.tags,delete $.Q,delete p.disk[A],delete $.tags,p.write(A,$,d.ack,t,n)},d.ack=function(A,$){n&&(n.sa=n.sa||+new Date),n&&(n.sal=O.length);var x,j;for(var _ in p.tags)if(!!p.tags.hasOwnProperty(_)){var b=p.tags[_];if(!((j=p.disk[S])&&(j=j.tags)&&j[b])){x=b[S],delete b[S];var T;for(var D in b)if(b.hasOwnProperty(D)){T=!0;break}T||(delete p.tags[b],x&&x(A,$))}}!O&&(O="");for(var R=O.length,C=0,P=+new Date;C<R;C++)(x=O[C])&&x(A,$);console.STAT&&console.STAT(P,+new Date-P,"rad acks",a(d.file)),console.STAT&&console.STAT(P,O.length,"rad acks #",a(d.file))},o||(o=function(A,$){}),p.find(h,d.find)},p.disk={},p.one={},p.tags={};var m=0;p.write=function(h,g,o,r,n){if(!g){o("No radix!");return}r=typeof r=="object"?r:{force:r};var d=function(){},S,O;if(d.text="",d.file=h=g.file||(g.file=h),!h){o("What file?");return}if(d.write=function(){var A=g.raw=d.text;p.disk[h=g.file||d.file||h]=g;var $=+new Date;n&&(n.wd=$),p.find.add(h,function(j){if(n&&(n.wa=+new Date),j){o(j);return}u.store.put(a(h),A,function(b,T){n&&(n.wp=+new Date),console.STAT&&console.STAT($,f=+new Date-$,"wrote disk",JSON.stringify(h),++m,"total all writes."),o(b,T||1),g.Q||delete p.disk[h]})})},d.split=function(){var A=+new Date;n&&(n.wf=A),d.text="",d.count||(d.count=0,k.map(g,function(){d.count++})),n&&(n.wfc=d.count),d.limit=Math.ceil(d.count/2);var $=d.count;return d.count=0,n&&(n.wf1=+new Date),d.sub=k(),k.map(g,d.slice,{reverse:1}),n&&(n.wf2=+new Date),p.write(d.end,d.sub,d.both,r),n&&(n.wf3=+new Date),d.hub=k(),k.map(g,d.stop),n&&(n.wf4=+new Date),p.write(g.file,d.hub,d.both,r),n&&(n.wf5=+new Date),console.STAT&&console.STAT(A,+new Date-A,"rad split",a(g.file),$),!0},d.slice=function(A,$){if(d.sub(d.end=$,A),d.limit<=++d.count)return!0},d.stop=function(A,$){if($>=d.end)return!0;d.hub($,A)},d.both=function(A,$){if(n&&(n.wfd=+new Date),O){o(A||O);return}if(S){o(A,$);return}S=!0,O=A},d.each=function(A,$,x,j){if(t!==A&&d.count++,u.max<=(A||"").length)return o("Data too big!"),!0;var _=E.encode(j.length)+"#"+E.encode(x)+(t===A?"":":"+E.encode(A))+`
`;if(u.chunk<d.text.length+_.length&&1<d.count&&!r.force)return d.split();d.text+=_},u.jsonify){p.write.jsonify(d,g,o,r,n);return}k.map(g,d.each,!0)||d.write()},p.write.jsonify=function(h,g,o,r,n){var d,S=+new Date;n&&(n.w=S);try{d=JSON.stringify(g.$)}catch{o("Cannot radisk!");return}if(n&&(n.ws=+new Date),console.STAT&&console.STAT(S,+new Date-S,"rad stringified JSON"),u.chunk<d.length&&!r.force){var O=0;if(k.map(g,function(){if(O++)return!0}),O>1)return h.split()}h.text=d,h.write()},p.range=function(h,g){if(!(!h||!g)){if(t===g.start&&t===g.end||i(h))return h;var o=k();return k.map(h,function(r,n){o(n,r)},g),o("")}},function(){p.read=function(h,g,o,r){o=o||{};var n={key:h};n.find=function(d){var S;if(n.file=d||(d=u.code.from),r&&(r=r[d]=r[d]||{}),r&&(r.rf=r.rf||+new Date),S=p.disk[n.file=d]){n.check(t,S);return}p.parse(d,n.check,t,r)},n.get=function(d,S,O){if(r&&(r.rgl=+new Date),r&&(r.rg=r.rg||+new Date),n.err=d||n.err){g(d);return}var A=n.file=(S||"").file||n.file;if(!S&&A!==u.code.from){p.find.bad(A),p.read(h,g,o);return}if(S=p.disk[A]||(p.disk[A]=S),!S){g(A===u.code.from?t:"No file!");return}S.file||(S.file=A);var $=p.range(S(h),o);if(r&&(r.rr=+new Date),o.unit=S.unit,o.chunks=(o.chunks||0)+1,o.parsed=(o.parsed||0)+((O||"").parsed||o.chunks*u.chunk),o.more=1,o.next=t,k.map(p.list,function(b,T){if(!(!b||A===T))return o.next=T,1},o.reverse?{reverse:1,end:A}:{start:A}),r&&(r.rl=+new Date),o.next||(o.more=0),o.next&&(!o.reverse&&(h<o.next&&o.next.indexOf(h)!=0||t!==o.end&&(o.end||"\uFFFF")<o.next)&&(o.more=0),o.reverse&&(h>o.next&&h.indexOf(o.next)!=0||t!==o.start&&(o.start||"")>o.next&&A<=o.start)&&(o.more=0)),!o.more){g(n.err,$,o);return}if($&&g(n.err,$,o),!(o.parsed>=o.limit)){var x=+new Date;r&&(r.rm=x);var j=o.next;s(function(){console.STAT&&console.STAT(x,+new Date-x,"rad more"),p.parse(j,n.check)},0)}},n.check=function(d,S,O){if(n.get(d,S,O),!(!S||S.check)){S.check=1;var A=+new Date;(O||(O={})).file||(O.file=n.file),k.map(S,function($,x){p.find(x,function(j){if((j||(j=u.code.from))!==O.file){var _=(""+Math.random()).slice(-3);l(function(){p.save(x,$,function b(T,D){if(T){p.save(x,$,b);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",_,a(x),a(O.file),a(j))})},0)}})}),console.STAT&&console.STAT(A,+new Date-A,"rad check")}},p.find(h||(o.reverse?o.end||"":o.start||""),n.find)}}(),function(){var h=0,g={},o=String.fromCharCode(31);p.parse=function(r,n,d,S){var O;if(!r)return n();if(O=g[r]){O.push(n);return}O=g[r]=[n];var A=function(){},$={file:r};(A.disk=k()).file=r,A.read=function(j,_){if(S&&(S.rpg=+new Date),console.STAT&&console.STAT(x,+new Date-x,"read disk",JSON.stringify(r),++h,"total all parses."),(A.err=j)||(A.not=!_)){delete g[r],A.map(O,A.ack);return}if(typeof _!="string"){try{u.max<=_.length?A.err="Chunk too big!":_=_.toString()}catch(b){A.err=b}if(A.err){delete g[r],A.map(O,A.ack);return}}if($.parsed=_.length,S&&(S.rpl=$.parsed),S&&(S.rpa=O.length),x=+new Date,!(u.jsonify||_[0]==="{")){A.radec(j,_);return}w(_,function(b,T){if(!b){delete g[r],A.disk.$=T,console.STAT&&(f=+new Date-x)>9&&console.STAT(x,f,"rad parsed JSON"),S&&(S.rpd=+new Date),A.map(O,A.ack);return}if(_[0]==="{"){delete g[r],A.err="JSON error!",A.map(O,A.ack);return}A.radec(b,_)})},A.map=function(){if(!(!O||!O.length)){for(var j=+new Date,_=A.err,b=A.not?t:A.disk,T=0,D;T<9&&(D=O[T++]);)D(_,b,$);console.STAT&&console.STAT(j,+new Date-j,"rad packs",a(r)),console.STAT&&console.STAT(j,T,"rad packs #",a(r)),!!(O=O.slice(T)).length&&l(A.map,0)}},A.ack=function(j){if(!!j){if(A.err||A.not){j(A.err,t,$);return}j(t,A.disk,$)}},A.radec=function(j,_){delete g[r],x=+new Date;var b=A.split(_),T=[],D,R,C;if(!b||b[1]!==0){A.err="File '"+r+"' does not have root radix! ",A.map(O,A.ack);return}for(;b;)R=C=t,D=b[1],b=A.split(b[2])||"",b[0]=="#"&&(R=b[1],T=T.slice(0,D),D<=T.length&&T.push(R)),b=A.split(b[2])||"",b[0]!=`
`&&((b[0]=="="||b[0]==":")&&(C=b[1]),t!==R&&t!==C&&A.disk(T.join(""),C),b=A.split(b[2]));console.STAT&&console.STAT(x,+new Date-x,"parsed RAD"),A.map(O,A.ack)},A.split=function(j){if(!!j){var _=[],b={},T=-1,D="";if(T=j.indexOf(o),!!j[T])return D=j.slice(0,T),_[0]=D,_[1]=E.decode(j.slice(T),b),_[2]=j.slice(T+b.i),_}},p.disk&&(d||(d=(p.disk[r]||"").raw));var x=+new Date;if(S&&(S.rp=x),d)return l(function(){A.read(t,d)},0);u.store.get(a(r),A.read)}}(),function(){var h,g=String.fromCharCode(28),o;p.find=function(d,S){if(!h){if(o){o.push([d,S]);return}o=[[d,S]],p.parse(g,r);return}k.map(p.list=h,function(O,A){if(!!O)return S(A)||!0},{reverse:1,end:d})||S(u.code.from)},p.find.add=function(d,S){var O=h(d);if(O||d===g){S(t,1);return}h(d,1),S.found=(S.found||0)+1,p.write(g,h,function(A,$){if(A){S(A);return}S.found=(S.found||0)-1,S.found===0&&S(t,1)},!0)},p.find.bad=function(d,S){h(d,0),p.write(g,h,S||c)};function r(d,S){if(d){u.log("list",d),setTimeout(function(){p.parse(g,r)},1e3);return}if(S){n(S);return}if(h=h||S||k(),!u.store.list){n(h);return}u.store.list(function(O){if(!O){n(h);return}p.find.add(O,c)})}function n(d,S){h=h||d,h.file=g,S=o,o=null,y(S,function(O){p.find(O[0],O[1])})}}();try{!v.window&&require("./radmigtmp")(p)}catch{}var c=function(){},t;return E.has[u.file]=p,p}if(function(){var u=String.fromCharCode(31);E.encode=function(e,a,i){i=i||u;var s=i,l;if(typeof e=="string"){for(var t=e.indexOf(i);t!=-1;)s+=i,t=e.indexOf(i,t+1);return s+'"'+e+i}else{if(e&&e["#"]&&Object.keys(e).length==1)return s+"#"+l+s;if(typeof e=="number")return s+"+"+(e||0)+s;if(e===null)return s+" "+s;if(e===!0)return s+"+"+s;if(e===!1)return s+"-"+s}},E.decode=function(e,a,i){i=i||u;var s="",l=-1,t=0,y,f;if(i===e[0]){for(;i===e[++l];)++t;for(f=e[y=t]||!0;--t>=0;)l=e.indexOf(i,l+1);if(l==-1&&(l=e.length),s=e.slice(y+1,l),a&&(a.i=l+1),f==='"')return s;if(f==="#")return{"#":s};if(f==="+")return s.length===0?!0:parseFloat(s);if(f===" ")return null;if(f==="-")return!1}}}(),typeof window!="undefined"){var v=window.Gun,k=window.Radix;window.Radisk=E}else{var v=yt.exports,k=Zt.exports;try{te.exports=E}catch{}}E.Radix=k})();var ft=typeof window!="undefined"?window.Gun:yt.exports;ft.on("create",function(E){ft.TESTING&&(E.opt.file="radatatest"),this.to.next(E);var v=E.opt,k;if(!(v.rad===!1||v.radisk===!1)&&!(k+""!=typeof process&&""+(process.env||"").RAD=="false")){var u=ft.window&&ft.window.Radisk||te.exports,e=u.Radix,a=u(v),i=String.fromCharCode(27),s=0;E.on("put",function(t){if(this.to.next(t),!(t._||"").rad){var y=t["#"],f=t.put,w=f["#"],p=f["."],m=f[":"],c=f[">"],h=(t._||"").DBG;h&&(h.sp=h.sp||+new Date);var g=(t._||"").RPS||((t._||"").RPS=+new Date);a(w+i+p,{":":m,">":c},function(o,r){if(h&&(h.spd=h.spd||+new Date),console.STAT&&console.STAT(g,+new Date-g,"put"),o){E.on("in",{"@":y,err:o,DBG:h});return}E.on("in",{"@":y,ok:r,DBG:h})},!1,h&&(h.r=h.r||{})),h&&(h.sps=h.sps||+new Date)}}),E.on("get",function(t){this.to.next(t);var y=t._||"",f=y.DBG=t.DBG;f&&(f.sg=+new Date);var w=t["#"],p=t.get,m=t.get["#"],c=t.get["."]||"",h={},g,o,r,n;if(typeof m=="string"?o=m:m&&(k!==(r=m["*"])&&(h.limit=n=1),k!==m[">"]&&(h.start=m[">"]),k!==m["<"]&&(h.end=m["<"]),o=n?""+r:r||m["="],n=null),o&&!h.limit&&(typeof c=="string"?o=o+i+(h.atom=c):c&&(k!==c[">"]&&(h.start=c[">"],h.limit=1),k!==c["<"]&&(h.end=c["<"],h.limit=1),k!==(r=c["*"])&&(h.limit=n=1),o&&(o=o+i+(n?""+(r||""):r||(h.atom=c["="]||""))))),((r=p["%"])||h.limit)&&(h.limit=r<=(h.pack||1e3*100)?r:1),(c["-"]||(m||{})["-"]||p["-"])&&(h.reverse=!0),(r=(E.next||"")[m])&&r.put){if(h.atom){if(r=(r.next||"")[h.atom],r&&r.rad)return}else if(r&&r.rad)return}var d=ft.state(),S=+new Date,O=0;f&&(f.sgm=S),a(o||"",function($,x,j){f&&(f.sgr=+new Date),f&&(f.sgi=j);try{v.store.stats.get.time[l%50]=+new Date-S,++l,v.store.stats.get.count++,$&&(v.store.stats.get.err=$)}catch{}console.STAT&&console.STAT(S,+new Date-S,"got",JSON.stringify(o)),S=+new Date,j=j||"";var _,b;if(j.unit&&x&&k!==(_=x[":"])&&k!==(b=x[">"])){var T=o.split(i),D=T[0],R=T[1];(g=g||{})[D]=ft.state.ify(g[D],R,b,_,D),E.$.get(D).get(R)._.rad=d}else x&&(typeof x!="string"&&(h.atom?x=k:e.map(x,A,h)),!g&&x&&A(x,""),!h.atom&&!c&typeof m=="string"&&!h.limit&&!h.more&&(E.$.get(m)._.rad=d));f&&(f.sgp=+new Date),console.STAT&&(s=+new Date-S)>9&&(console.STAT(S,s,"got prep time"),console.STAT(S,O,"got prep #")),O=0,S=+new Date;var C=function(){};C.faith=!0,C.rad=p,E.on("in",{"@":w,put:g,"%":j.more?1:k,err:$||k,_:C,DBG:f}),console.STAT&&(s=+new Date-S)>9&&console.STAT(S,s,"got emit",Object.keys(g||{}).length),g=k},h,f&&(f.r=f.r||{})),f&&(f.sgd=+new Date),console.STAT&&(s=+new Date-S)>9&&console.STAT(S,s,"get call");function A($,x,j,_){if(O++,!!$){x=(o+x).split(i);var b=x.slice(0,1)[0];if(x=x.slice(-1)[0],h.limit&&h.limit<=h.count)return!0;var T,D,R=b,C=x;if(typeof $!="string"){T=$[":"],D=$[">"],(g=g||{})[R]=ft.state.ify(g[R],C,D,T,R),h.count=(h.count||0)+((T||"").length||9);return}h.count=(h.count||0)+$.length;var P=$.lastIndexOf(">"),J=u.decode($.slice(P+1),null,i);$=u.decode($.slice(0,P),null,i),(g=g||{})[b]=ft.state.ify(g[b],x,J,$,b)}}}),ft.valid,(v.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}});var qe={exports:{}};(function(){function E(k){k=k||{},k.file=String(k.file||"radata");var u=E[k.file],e=null,a;if(u)return console.log("Warning: reusing same IndexedDB store and options as 1st."),E[k.file];u=E[k.file]=function(){};try{k.indexedDB=k.indexedDB||E.indexedDB||indexedDB}catch{}try{if(!k.indexedDB||location.protocol=="file:"){var i=u.d||(u.d={});return u.put=function(s,l,t){i[s]=l,setTimeout(function(){t(null,1)},250)},u.get=function(s,l){setTimeout(function(){l(null,i[s]||a)},5)},console.log("Warning: No indexedDB exists to persist data to!"),u}}catch{}return u.start=function(){var s=indexedDB.open(k.file,1);s.onupgradeneeded=function(l){l.target.result.createObjectStore(k.file)},s.onsuccess=function(){e=s.result},s.onerror=function(l){console.log(l||1)}},u.start(),u.put=function(s,l,t){if(!e){setTimeout(function(){u.put(s,l,t)},1);return}var y=e.transaction([k.file],"readwrite"),f=y.objectStore(k.file),w=f.put(l,""+s);w.onsuccess=f.onsuccess=y.onsuccess=function(){t(null,1)},w.onabort=f.onabort=y.onabort=function(p){t(p||"put.tx.abort")},w.onerror=f.onerror=y.onerror=function(p){t(p||"put.tx.error")}},u.get=function(s,l){if(!e){setTimeout(function(){u.get(s,l)},9);return}var t=e.transaction([k.file],"readonly"),y=t.objectStore(k.file),f=y.get(""+s);f.onsuccess=function(){l(null,f.result)},f.onabort=function(w){l(w||4)},f.onerror=function(w){l(w||5)}},setInterval(function(){e&&e.close(),e=null,u.start()},1e3*15),u}if(typeof window!="undefined")(E.window=window).RindexedDB=E,E.indexedDB=window.indexedDB;else try{qe.exports=E}catch{}try{var v=E.window.Gun||require("../gun");v.on("create",function(k){this.to.next(k),k.opt.store=k.opt.store||E(k.opt)})}catch{}})();(function(){var E=typeof window!="undefined"?window.Gun:yt.exports;E.on("create",function(v){})})();const ee=["https://etogun.glitch.me/gun"],et=Yt({peers:ee,localStorage:!1});Yt.node.soul;const Y=dt({initiated:!1,is:null,pub:ht(()=>{var E;return(E=Y.is)==null?void 0:E.pub}),profile:{},pair:null,name:null,pulse:0,pulser:null,blink:!1,user(){return et.user()},init(){Y.initiated||(Y.is=et.user().is,Y.pulser&&clearInterval(Y.pulser),Y.pulser=setInterval(()=>{et.user().get("pulse").put(Date.now())},1e3),Y.loadProfile(),Y.initiated=!0)},loadProfile(){et.user().get("pulse").on(E=>{Y.blink=!Y.blink,Y.pulse=E}),et.user().get("profile").map().on((E,v)=>{Y.profile[v]=E})},logout(){var E;let v=!!((E=Y.is)==null?void 0:E.pub);Y.initiated=!1,clearInterval(Y.pulser),et.user().leave(),setTimeout(()=>{var k;v&&!((k=et.user()._)==null?void 0:k.sea)&&(Y.is=null,Y.profile={},console.info("User logged out"))},500)},async auth(E){(!E||!E.pub||!E.priv)&&(E=await Xt.pair(),console.log("new account created")),et.user().auth(E,async()=>{console.log("account is authenticated")})},async hasPass(E){return await et.get(`~${E}`).get("pass").get("pair").then()},async logWithPass(E,v){let k=await et.get(`~${E}`).get("pass").get("pair").then();await Xt.decrypt(k,v)},isMine(E){if(!!E)return E.slice(1,88)==user.pub}});function Ve(){return vt(Y.profile,E=>{for(let v in E)et.user().get("profile").get(v).put(E[v])}),et.user().recall({sessionStorage:!0},()=>{Y.init()}),et.on("auth",()=>{Y.init()}),Y}var wt=1e3,gt=wt*60,mt=gt*60,pt=mt*24,Ye=pt*7,ze=pt*365.25,Xe=function(E,v){v=v||{};var k=typeof E;if(k==="string"&&E.length>0)return Qe(E);if(k==="number"&&isFinite(E))return v.long?tn(E):Ze(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function Qe(E){if(E=String(E),!(E.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(!!v){var k=parseFloat(v[1]),u=(v[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return k*ze;case"weeks":case"week":case"w":return k*Ye;case"days":case"day":case"d":return k*pt;case"hours":case"hour":case"hrs":case"hr":case"h":return k*mt;case"minutes":case"minute":case"mins":case"min":case"m":return k*gt;case"seconds":case"second":case"secs":case"sec":case"s":return k*wt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function Ze(E){var v=Math.abs(E);return v>=pt?Math.round(E/pt)+"d":v>=mt?Math.round(E/mt)+"h":v>=gt?Math.round(E/gt)+"m":v>=wt?Math.round(E/wt)+"s":E+"ms"}function tn(E){var v=Math.abs(E);return v>=pt?xt(E,v,pt,"day"):v>=mt?xt(E,v,mt,"hour"):v>=gt?xt(E,v,gt,"minute"):v>=wt?xt(E,v,wt,"second"):E+" ms"}function xt(E,v,k,u){var e=v>=k*1.5;return Math.round(E/k)+" "+u+(e?"s":"")}function en(E=new URL(ee[0]).hostname){const v=dt({pulse:0,host:E,started:0,pulse:0,lag:0,diff:ht(()=>v.pulse-v.started),age:ht(()=>Xe(v.diff)),status:"offline",blink:!1});return vt(()=>v.pulse,(k,u)=>{v.blink=!v.blink,v.lag=k-u-500}),et.get(E).map().on((k,u)=>{v[u]=k}),v}function nn(E){const v=et.get(E);return dt({title:E,db:v})}function rn(E){return ge()?(me(E),!0):!1}const ne=typeof window!="undefined",on=E=>typeof E=="string",Ct=()=>{};function re(E){var v;const k=X(E);return(v=k==null?void 0:k.$el)!=null?v:k}const At=ne?window:void 0;function nt(...E){let v,k,u,e;if(on(E[0])?([k,u,e]=E,v=At):[v,k,u,e]=E,!v)return Ct;let a=Ct;const i=vt(()=>X(v),l=>{a(),!!l&&(l.addEventListener(k,u,e),a=()=>{l.removeEventListener(k,u,e),a=Ct})},{immediate:!0,flush:"post"}),s=()=>{i(),a()};return rn(s),s}function an(E={}){const{touch:v=!0,resetOnTouchEnds:k=!1,initialValue:u={x:0,y:0},window:e=At}=E,a=tt(u.x),i=tt(u.y),s=tt(null),l=f=>{a.value=f.pageX,i.value=f.pageY,s.value="mouse"},t=()=>{a.value=u.x,i.value=u.y},y=f=>{f.touches.length>0&&(a.value=f.touches[0].clientX,i.value=f.touches[0].clientY,s.value="touch")};return e&&(nt(e,"mousemove",l,{passive:!0}),nt(e,"dragover",l,{passive:!0}),v&&(nt(e,"touchstart",y,{passive:!0}),nt(e,"touchmove",y,{passive:!0}),k&&nt(e,"touchend",t,{passive:!0}))),{x:a,y:i,sourceType:s}}function un(E,v={}){const{handleOutside:k=!0,window:u=At}=v,{x:e,y:a,sourceType:i}=an(v),s=tt(E!=null?E:u==null?void 0:u.document.body),l=tt(0),t=tt(0),y=tt(0),f=tt(0),w=tt(0),p=tt(0),m=tt(!1);let c=()=>{};return u&&(c=vt([s,e,a],()=>{const h=re(s);if(!h)return;const{left:g,top:o,width:r,height:n}=h.getBoundingClientRect();y.value=g+u.pageXOffset,f.value=o+u.pageYOffset,w.value=n,p.value=r;const d=e.value-y.value,S=a.value-f.value;m.value=d<0||S<0||d>p.value||S>w.value,(k||!m.value)&&(l.value=d,t.value=S)},{immediate:!0})),{x:e,y:a,sourceType:i,elementX:l,elementY:t,elementPositionX:y,elementPositionY:f,elementHeight:w,elementWidth:p,isOutside:m,stop:c}}function sn(E={}){const{touch:v=!0,drag:k=!0,initialValue:u=!1,window:e=At}=E,a=tt(u),i=tt(null);if(!e)return{pressed:a,sourceType:i};const s=y=>()=>{a.value=!0,i.value=y},l=()=>{a.value=!1,i.value=null},t=ht(()=>re(E.target)||e);return nt(t,"mousedown",s("mouse"),{passive:!0}),nt(e,"mouseleave",l,{passive:!0}),nt(e,"mouseup",l,{passive:!0}),k&&(nt(t,"dragstart",s("mouse"),{passive:!0}),nt(e,"drop",l,{passive:!0}),nt(e,"dragend",l,{passive:!0})),v&&(nt(t,"touchstart",s("touch"),{passive:!0}),nt(e,"touchend",l,{passive:!0}),nt(e,"touchcancel",l,{passive:!0})),{pressed:a,sourceType:i}}var ie;(function(E){E.UP="UP",E.RIGHT="RIGHT",E.DOWN="DOWN",E.LEFT="LEFT",E.NONE="NONE"})(ie||(ie={}));var oe,ae;ne&&(window==null?void 0:window.navigator)&&((oe=window==null?void 0:window.navigator)==null?void 0:oe.platform)&&/iP(ad|hone|od)/.test((ae=window==null?void 0:window.navigator)==null?void 0:ae.platform);function fn(){const E=tt(null),v=tt(null),{pressed:k}=sn(),u=dt({x:0,y:0,normX:0,normY:0,pressed:k,inside:!1});we(()=>{E.value.addEventListener("mousemove",e);const{isOutside:a}=un(v);vt(a,i=>{u.inside=!i})});function e(a,i=E.value,s=v.value){if(!i)return;var l=i.createSVGPoint();l.x=a.clientX,l.y=a.clientY;let t=l.matrixTransform(i.getScreenCTM().inverse());if(s){let y=s.getBBox();u.x=t.x<y.width?t.x<0?0:t.x:y.width,u.y=t.y<y.height?t.y<0?0:t.y:y.height,u.normY=1-u.y/y.height,u.normX=u.x/y.width}else u.x=t.x,u.y=t.y}return{svg:E,area:v,mouse:u}}var ue={};(function(E){var v=st&&st.__extends||function(){var U=function(N,I){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,B){W.__proto__=B}||function(W,B){for(var M in B)Object.prototype.hasOwnProperty.call(B,M)&&(W[M]=B[M])},U(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");U(N,I);function W(){this.constructor=N}N.prototype=I===null?Object.create(I):(W.prototype=I.prototype,new W)}}(),k=st&&st.__classPrivateFieldSet||function(U,N,I){if(!N.has(U))throw new TypeError("attempted to set private field on non-instance");return N.set(U,I),I},u=st&&st.__classPrivateFieldGet||function(U,N){if(!N.has(U))throw new TypeError("attempted to get private field on non-instance");return N.get(U)},e,a,i,s,l,t,y,f,w,p,m,c,h,g,o,r,n,d,S,O,A,$;E.__esModule=!0,E.default=void 0;var x=function(U){var N=131,I=137,W=0;U+="x";for(var B=Math.floor(9007199254740991/I),M=0;M<U.length;M++)W>B&&(W=Math.floor(W/I)),W=W*N+U.charCodeAt(M);return W},j="0123456789abcdef".split(""),_=[-2147483648,8388608,32768,128],b=[24,16,8,0],T=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],D=[],R=function(){function U(N,I){N===void 0&&(N=!1),I===void 0&&(I=!1),e.set(this,void 0),a.set(this,void 0),i.set(this,void 0),s.set(this,void 0),l.set(this,void 0),t.set(this,void 0),y.set(this,void 0),f.set(this,void 0),w.set(this,void 0),p.set(this,void 0),m.set(this,void 0),c.set(this,void 0),h.set(this,void 0),g.set(this,void 0),o.set(this,void 0),r.set(this,void 0),n.set(this,0),d.set(this,void 0),this.init(N,I)}return U.prototype.init=function(N,I){I?(D[0]=D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0,k(this,a,D)):k(this,a,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),N?(k(this,t,3238371032),k(this,y,914150663),k(this,f,812702999),k(this,w,4144912697),k(this,p,4290775857),k(this,m,1750603025),k(this,c,1694076839),k(this,h,3204075428)):(k(this,t,1779033703),k(this,y,3144134277),k(this,f,1013904242),k(this,w,2773480762),k(this,p,1359893119),k(this,m,2600822924),k(this,c,528734635),k(this,h,1541459225)),k(this,e,k(this,d,k(this,i,k(this,o,0)))),k(this,s,k(this,g,!1)),k(this,l,!0),k(this,r,N)},U.prototype.update=function(N){if(u(this,s))return this;var I;N instanceof ArrayBuffer?I=new Uint8Array(N):I=N;for(var W=0,B=I.length,M=u(this,a);W<B;){var F=void 0;if(u(this,g)&&(k(this,g,!1),M[0]=u(this,e),M[16]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0),typeof I!="string")for(F=u(this,d);W<B&&F<64;++W)M[F>>2]|=I[W]<<b[F++&3];else for(F=u(this,d);W<B&&F<64;++W){var L=I.charCodeAt(W);L<128?M[F>>2]|=L<<b[F++&3]:L<2048?(M[F>>2]|=(192|L>>6)<<b[F++&3],M[F>>2]|=(128|L&63)<<b[F++&3]):L<55296||L>=57344?(M[F>>2]|=(224|L>>12)<<b[F++&3],M[F>>2]|=(128|L>>6&63)<<b[F++&3],M[F>>2]|=(128|L&63)<<b[F++&3]):(L=65536+((L&1023)<<10|I.charCodeAt(++W)&1023),M[F>>2]|=(240|L>>18)<<b[F++&3],M[F>>2]|=(128|L>>12&63)<<b[F++&3],M[F>>2]|=(128|L>>6&63)<<b[F++&3],M[F>>2]|=(128|L&63)<<b[F++&3])}k(this,n,F),k(this,i,u(this,i)+(F-u(this,d))),F>=64?(k(this,e,M[16]),k(this,d,F-64),this.hash(),k(this,g,!0)):k(this,d,F)}return u(this,i)>4294967295&&(k(this,o,u(this,o)+(u(this,i)/4294967296<<0)),k(this,i,u(this,i)%4294967296)),this},U.prototype.finalize=function(){if(!u(this,s)){k(this,s,!0);var N=u(this,a),I=u(this,n);N[16]=u(this,e),N[I>>2]|=_[I&3],k(this,e,N[16]),I>=56&&(u(this,g)||this.hash(),N[0]=u(this,e),N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0),N[14]=u(this,o)<<3|u(this,i)>>>29,N[15]=u(this,i)<<3,this.hash()}},U.prototype.hash=function(){for(var N=u(this,t),I=u(this,y),W=u(this,f),B=u(this,w),M=u(this,p),F=u(this,m),L=u(this,c),K=u(this,h),q=u(this,a),z,V,it,G,ot,ct,_t,jt,Ot,St,lt=16;lt<64;++lt)G=q[lt-15],z=(G>>>7|G<<25)^(G>>>18|G<<14)^G>>>3,G=q[lt-2],V=(G>>>17|G<<15)^(G>>>19|G<<13)^G>>>10,q[lt]=q[lt-16]+z+q[lt-7]+V<<0;St=I&W;for(var at=0;at<64;at+=4)u(this,l)?(u(this,r)?(_t=300032,G=q[0]-1413257819,K=G-150054599<<0,B=G+24177077<<0):(_t=704751109,G=q[0]-210244248,K=G-1521486534<<0,B=G+143694565<<0),k(this,l,!1)):(z=(N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10),V=(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7),_t=N&I,it=_t^N&W^St,ct=M&F^~M&L,G=K+V+ct+T[at]+q[at],ot=z+it,K=B+G<<0,B=G+ot<<0),z=(B>>>2|B<<30)^(B>>>13|B<<19)^(B>>>22|B<<10),V=(K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7),jt=B&N,it=jt^B&I^_t,ct=K&M^~K&F,G=L+V+ct+T[at+1]+q[at+1],ot=z+it,L=W+G<<0,W=G+ot<<0,z=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),V=(L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7),Ot=W&B,it=Ot^W&N^jt,ct=L&K^~L&M,G=F+V+ct+T[at+2]+q[at+2],ot=z+it,F=I+G<<0,I=G+ot<<0,z=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),V=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),St=I&W,it=St^I&B^Ot,ct=F&L^~F&K,G=M+V+ct+T[at+3]+q[at+3],ot=z+it,M=N+G<<0,N=G+ot<<0;k(this,t,u(this,t)+N<<0),k(this,y,u(this,y)+I<<0),k(this,f,u(this,f)+W<<0),k(this,w,u(this,w)+B<<0),k(this,p,u(this,p)+M<<0),k(this,m,u(this,m)+F<<0),k(this,c,u(this,c)+L<<0),k(this,h,u(this,h)+K<<0)},U.prototype.hex=function(){this.finalize();var N=u(this,t),I=u(this,y),W=u(this,f),B=u(this,w),M=u(this,p),F=u(this,m),L=u(this,c),K=u(this,h),q=j[N>>28&15]+j[N>>24&15]+j[N>>20&15]+j[N>>16&15]+j[N>>12&15]+j[N>>8&15]+j[N>>4&15]+j[N&15]+j[I>>28&15]+j[I>>24&15]+j[I>>20&15]+j[I>>16&15]+j[I>>12&15]+j[I>>8&15]+j[I>>4&15]+j[I&15]+j[W>>28&15]+j[W>>24&15]+j[W>>20&15]+j[W>>16&15]+j[W>>12&15]+j[W>>8&15]+j[W>>4&15]+j[W&15]+j[B>>28&15]+j[B>>24&15]+j[B>>20&15]+j[B>>16&15]+j[B>>12&15]+j[B>>8&15]+j[B>>4&15]+j[B&15]+j[M>>28&15]+j[M>>24&15]+j[M>>20&15]+j[M>>16&15]+j[M>>12&15]+j[M>>8&15]+j[M>>4&15]+j[M&15]+j[F>>28&15]+j[F>>24&15]+j[F>>20&15]+j[F>>16&15]+j[F>>12&15]+j[F>>8&15]+j[F>>4&15]+j[F&15]+j[L>>28&15]+j[L>>24&15]+j[L>>20&15]+j[L>>16&15]+j[L>>12&15]+j[L>>8&15]+j[L>>4&15]+j[L&15];return u(this,r)||(q+=j[K>>28&15]+j[K>>24&15]+j[K>>20&15]+j[K>>16&15]+j[K>>12&15]+j[K>>8&15]+j[K>>4&15]+j[K&15]),q},U.prototype.toString=function(){return this.hex()},U.prototype.digest=function(){this.finalize();var N=u(this,t),I=u(this,y),W=u(this,f),B=u(this,w),M=u(this,p),F=u(this,m),L=u(this,c),K=u(this,h),q=[N>>24&255,N>>16&255,N>>8&255,N&255,I>>24&255,I>>16&255,I>>8&255,I&255,W>>24&255,W>>16&255,W>>8&255,W&255,B>>24&255,B>>16&255,B>>8&255,B&255,M>>24&255,M>>16&255,M>>8&255,M&255,F>>24&255,F>>16&255,F>>8&255,F&255,L>>24&255,L>>16&255,L>>8&255,L&255];return u(this,r)||q.push(K>>24&255,K>>16&255,K>>8&255,K&255),q},U.prototype.array=function(){return this.digest()},U.prototype.arrayBuffer=function(){this.finalize();var N=new ArrayBuffer(u(this,r)?28:32),I=new DataView(N);return I.setUint32(0,u(this,t)),I.setUint32(4,u(this,y)),I.setUint32(8,u(this,f)),I.setUint32(12,u(this,w)),I.setUint32(16,u(this,p)),I.setUint32(20,u(this,m)),I.setUint32(24,u(this,c)),u(this,r)||I.setUint32(28,u(this,h)),N},U}();e=new WeakMap,a=new WeakMap,i=new WeakMap,s=new WeakMap,l=new WeakMap,t=new WeakMap,y=new WeakMap,f=new WeakMap,w=new WeakMap,p=new WeakMap,m=new WeakMap,c=new WeakMap,h=new WeakMap,g=new WeakMap,o=new WeakMap,r=new WeakMap,n=new WeakMap,d=new WeakMap,function(U){v(N,U);function N(I,W,B){W===void 0&&(W=!1),B===void 0&&(B=!1);var M=U.call(this,W,B)||this;S.set(M,void 0),O.set(M,void 0),A.set(M,void 0),$.set(M,void 0);var F;if(typeof I=="string"){for(var L=[],K=I.length,q=0,z=0;z<K;++z){var V=I.charCodeAt(z);V<128?L[q++]=V:V<2048?(L[q++]=192|V>>6,L[q++]=128|V&63):V<55296||V>=57344?(L[q++]=224|V>>12,L[q++]=128|V>>6&63,L[q++]=128|V&63):(V=65536+((V&1023)<<10|I.charCodeAt(++z)&1023),L[q++]=240|V>>18,L[q++]=128|V>>12&63,L[q++]=128|V>>6&63,L[q++]=128|V&63)}F=L}else I instanceof ArrayBuffer?F=new Uint8Array(I):F=I;F.length>64&&(F=new R(W,!0).update(F).array());for(var it=[],G=[],z=0;z<64;++z){var ot=F[z]||0;it[z]=92^ot,G[z]=54^ot}return M.update(G),k(M,A,it),k(M,S,!0),k(M,O,W),k(M,$,B),M}return N.prototype.finalize=function(){if(U.prototype.finalize.call(this),u(this,S)){k(this,S,!1);var I=this.array();U.prototype.init.call(this,u(this,O),u(this,$)),this.update(u(this,A)),this.update(I),U.prototype.finalize.call(this)}},N}(R),S=new WeakMap,O=new WeakMap,A=new WeakMap,$=new WeakMap;function C(U){var N=new R;return N.update(U),parseInt(N.hex().substring(0,8),16)}var P=function(U){var N="#";return U.forEach(function(I){I<16&&(N+=0),N+=I.toString(16)}),N},J=function(U,N,I){U/=360;var W=I<.5?I*(1+N):I+N-I*N,B=2*I-W;return[U+1/3,U,U-1/3].map(function(M){return M<0&&M++,M>1&&M--,M<1/6?M=B+(W-B)*6*M:M<.5?M=W:M<2/3?M=B+(W-B)*6*(2/3-M):M=B,Math.round(M*255)})},H=function(){function U(N){N===void 0&&(N={});var I=[N.lightness,N.saturation].map(function(M){return M=M!==void 0?M:[.35,.5,.65],Array.isArray(M)?M.concat():[M]}),W=I[0],B=I[1];this.L=W,this.S=B,typeof N.hue=="number"&&(N.hue={min:N.hue,max:N.hue}),typeof N.hue=="object"&&!Array.isArray(N.hue)&&(N.hue=[N.hue]),typeof N.hue=="undefined"&&(N.hue=[]),this.hueRanges=N.hue.map(function(M){return{min:typeof M.min=="undefined"?0:M.min,max:typeof M.max=="undefined"?360:M.max}}),this.hash=C,typeof N.hash=="function"&&(this.hash=N.hash),N.hash==="bkdr"&&(this.hash=x)}return U.prototype.hsl=function(N){var I,W,B,M=this.hash(N),F=727;if(this.hueRanges.length){var L=this.hueRanges[M%this.hueRanges.length];I=M/this.hueRanges.length%F*(L.max-L.min)/F+L.min}else I=M%359;return M=Math.ceil(M/360),W=this.S[M%this.S.length],M=Math.ceil(M/this.S.length),B=this.L[M%this.L.length],[I,W,B]},U.prototype.rgb=function(N){var I=this.hsl(N);return J.apply(this,I)},U.prototype.hex=function(N){var I=this.rgb(N);return P(I)},U}();E.default=H})(ue);var Tt=Ke(ue);const se={light:new Tt({saturation:[.05,.08,.12],lightness:[.85,.87,.9]}),regular:new Tt({saturation:[.1,.5,.7],lightness:[.3,.5,.7]}),deep:new Tt({saturation:[.5,.7,.9],lightness:[.5,.7,.9]}),dark:new Tt({saturation:[.02,.05,.08],lightness:[.18,.2,.3]})},cn={class:"flex flex-col items-center"},ln=["transform"],hn=rt("circle",{fill:"red",r:"4"},null,-1),pn=[hn],dn={class:"players"},vn=["transform"],yn=["fill"],wn={setup(E){const v=nn("testSpace"),{svg:k,area:u,mouse:e}=fn(),a=dt({num:null,x:ht(()=>e.normX),y:ht(()=>1-e.normY)}),i=dt({next:0,max:10,list:{}});v.db.get("playersNext").on(l=>i.next=l),v.db.get("players").map().on((l,t)=>{l!=null&&(i.list[t]=Rt({},l))});async function s(){if(!Y.is)return;let l=Y.user()._.sea;a.num=i.next%i.max;const t=v.db.get("players").get(a.num);vt(e,f=>{t.put({x:f.normX,y:1-f.normY})});let y={pub:l.pub,pulse:Date.now(),x:e.normX,y:1-e.normY};t.put(y),v.db.get("playersNext").put(a.num+1)}return(l,t)=>(Q(),Z("div",cn,[(Q(),Z("svg",{onClick:t[0]||(t[0]=y=>s()),ref:(y,f)=>{f.svg=y,Ft(k)&&(k.value=y)},version:"1.1",baseProfile:"full",viewBox:"0 0 1000 500",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner , sans-serif","text-anchor":"middle","dominant-baseline":"middle"},[rt("rect",{ref:(y,f)=>{f.area=y,Ft(u)&&(u.value=y)},x:"2",y:"0",width:"1000",height:"1000",fill:"none","stroke-width":"0"},null,512),rt("g",{class:"me",transform:`translate(${X(a).x*1e3} ${X(a).y*1e3})`},pn,8,ln),rt("g",dn,[(Q(!0),Z($t,null,Ut(X(i).list,y=>(Q(),Z("g",{class:"player",key:y,transform:`translate(${y.x*1e3} ${y.y*1e3})`},[rt("circle",{r:"10",fill:X(se).deep.hex(y.pub)},null,8,yn)],8,vn))),128))])],512))]))}},fe={props:{blink:Boolean},setup(E){return(v,k)=>(Q(),Z("div",{class:"p-1 m-1 rounded-full transition-all duration-300 ease-in-out",style:Bt({backgroundColor:E.blink?"white":"black"})},null,4))}},gn={class:"flex flex-col"},mn={class:"ml-2 text-xs"},_n={class:"text-xs p-4"},bn={class:"flex flex-wrap"},kn={setup(E){const v=Ve();return(k,u)=>(Q(),Z("div",gn,[X(v).is?(Q(),Z("div",{key:0,class:"p-4 flex",style:Bt({backgroundColor:X(se).deep.hex(X(v).pub)})},[ut(fe,{blink:X(v).blink},null,8,["blink"]),rt("div",mn,bt(X(v).pub),1)],4)):_e("",!0),rt("div",_n,"Profile: "+bt(X(v).profile),1),rt("div",bn,[X(v).is?(Q(),Z("button",{key:1,class:"button",onClick:u[1]||(u[1]=e=>X(v).logout())},"Logout")):(Q(),Z("button",{key:0,class:"button",onClick:u[0]||(u[0]=e=>X(v).auth())},"Auth"))])]))}},Sn={class:"flex items-center px-4"},xn={class:"p-4"},An={setup(E){const v=en();return ht(()=>(v.pulse/1e3%60).toFixed(2)),(k,u)=>(Q(),Z("div",Sn,[ut(fe,{blink:X(v).blink},null,8,["blink"]),rt("div",xn,"Server is "+bt(X(v).status)+" for "+bt(X(v).age),1)]))}},Tn=E=>(Jt("data-v-2a7066a4"),E=E(),Wt(),E),jn={class:"p-4"},On=Tn(()=>rt("div",{class:"font-bold text-3xl"},"@gun-vue demo",-1));function $n(E,v){const k=An,u=kn,e=wn;return Q(),Z("div",jn,[On,ut(k,{class:"card"}),ut(u,{class:"card"}),ut(e,{class:"card"})])}const En={};var Dn=Dt(En,[["render",$n],["__scopeId","data-v-2a7066a4"]]);const Nn=[{name:"index",path:"/",component:Dn,props:!0},{name:"routes",path:"/routes",component:()=>Nt(()=>Promise.resolve().then(function(){return Ee}),void 0),props:!0},{name:"account",path:"/account",component:()=>Nt(()=>import("./index.459388f2.js"),["assets/index.459388f2.js","assets/vendor.d55da865.js"]),props:!0},{name:"space",path:"/space",component:()=>Nt(()=>import("./index.5377c300.js"),["assets/index.5377c300.js","assets/vendor.d55da865.js"]),props:!0}],Cn=be({history:ke(),routes:Nn}),Pn=Se(Je);Pn.use(Cn).mount("#app");export{kn as _,Dt as a,wn as b};
