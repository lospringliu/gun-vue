var vt=Object.defineProperty;var He=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var Le=($,f,k)=>f in $?vt($,f,{enumerable:!0,configurable:!0,writable:!0,value:k}):$[f]=k,ze=($,f)=>{for(var k in f||(f={}))yt.call(f,k)&&Le($,k,f[k]);if(He)for(var k of He(f))wt.call(f,k)&&Le($,k,f[k]);return $};import{o as q,c as K,a as X,r as We,F as $e,b as Ie,u as G,d as ne,p as Be,e as Fe,f as je,w as Oe,g as gt,t as ve,n as qe,T as _t,h as mt,i as le,j as he,k as re,l as Ge,m as xe,q as bt,s as kt,v as xt,x as Ve,y as St,z as At,A as Tt,B as pe,C as $t,D as Ke,E as jt,G as Ot,H as Et}from"./vendor.a19d8be6.js";const Dt=function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function k(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(t){if(t.ep)return;t.ep=!0;const o=k(t);fetch(t.href,o)}};Dt();const Ct={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Nt=X("path",{"fill-rule":"evenodd",d:"M16 4C9.371 4 4 9.371 4 16c0 5.3 3.438 9.8 8.207 11.387c.602.11.82-.258.82-.578c0-.286-.011-1.04-.015-2.04c-3.34.723-4.043-1.609-4.043-1.609c-.547-1.387-1.332-1.758-1.332-1.758c-1.09-.742.082-.726.082-.726c1.203.086 1.836 1.234 1.836 1.234c1.07 1.836 2.808 1.305 3.492 1c.11-.777.422-1.305.762-1.605c-2.664-.301-5.465-1.332-5.465-5.93c0-1.313.469-2.383 1.234-3.223c-.121-.3-.535-1.523.117-3.175c0 0 1.008-.32 3.301 1.23A11.487 11.487 0 0 1 16 9.805c1.02.004 2.047.136 3.004.402c2.293-1.55 3.297-1.23 3.297-1.23c.656 1.652.246 2.875.12 3.175c.77.84 1.231 1.91 1.231 3.223c0 4.61-2.804 5.621-5.476 5.922c.43.367.812 1.101.812 2.219c0 1.605-.011 2.898-.011 3.293c0 .32.214.695.824.578C24.566 25.797 28 21.3 28 16c0-6.629-5.371-12-12-12z",fill:"currentColor"},null,-1),Pt=[Nt];function Mt($,f){return q(),K("svg",Ct,Pt)}var It={name:"la-github",render:Mt};const Ye={"/":"Home","/space/":"Space","/account/":"Account"};var Rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",routes:Ye});var Se=($,f)=>{const k=$.__vccOpts||$;for(const[u,t]of f)k[u]=t;return k};const Ut=$=>(Be("data-v-7d7c080b"),$=$(),Fe(),$),Jt={class:"flex flex-wrap items-center p-2 bg-light-900 shadow-md"},Ht=Ut(()=>X("div",{class:"flex-1"},null,-1)),Lt={class:"text-2xl m-2",href:"https://github.com/defucc/gun-vue",target:"_blank"},zt={setup($){return(f,k)=>{const u=We("router-link"),t=It;return q(),K("div",Jt,[(q(!0),K($e,null,Ie(G(Ye),(o,i)=>(q(),je(u,{class:qe(["p-2 rounded-xl",{active:f.$route.path==i}]),key:o,to:i},{default:Oe(()=>[gt(ve(o),1)]),_:2},1032,["to","class"]))),128)),Ht,X("a",Lt,[ne(t)])])}}};var Wt=Se(zt,[["__scopeId","data-v-7d7c080b"]]);function Bt($,f){const k=Wt,u=We("router-view");return q(),K($e,null,[ne(k),ne(u,null,{default:Oe(({Component:t})=>[ne(_t,{name:"fade"},{default:Oe(()=>[(q(),je(mt(t)))]),_:2},1024)]),_:1})],64)}const Ft={};var qt=Se(Ft,[["render",Bt]]);const Gt="modulepreload",Xe={},Vt="./",Re=function(f,k){return!k||k.length===0?f():Promise.all(k.map(u=>{if(u=`${Vt}${u}`,u in Xe)return;Xe[u]=!0;const t=u.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${o}`))return;const i=document.createElement("link");if(i.rel=t?"stylesheet":Gt,t||(i.as="script",i.crossOrigin=""),i.href=u,document.head.appendChild(i),t)return new Promise((s,l)=>{i.addEventListener("load",s),i.addEventListener("error",l)})})).then(()=>f())};var Kt=Object.defineProperty,Qe=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Ze=($,f,k)=>f in $?Kt($,f,{enumerable:!0,configurable:!0,writable:!0,value:k}):$[f]=k,Ae=($,f)=>{for(var k in f||(f={}))Yt.call(f,k)&&Ze($,k,f[k]);if(Qe)for(var k of Qe(f))Xt.call(f,k)&&Ze($,k,f[k]);return $},se=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Qt($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}function et($){throw new Error('Could not dynamically require "'+$+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var we={exports:{}};(function($){(function(){function f(u,t){return t?et(u):u.slice?f[o(u)]:function(i,s){u(i={exports:{}}),f[o(s)]=i.exports};function o(i){return i.split("/").slice(-1).toString().replace(".js","")}}var k=$;f(function(u){String.random=function(o,i){var s="";for(o=o||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";o-- >0;)s+=i.charAt(Math.floor(Math.random()*i.length));return s},String.match=function(o,i){var s,l;return typeof o!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},s=i["="]||i["*"]||i[">"]||i["<"],o===s?!0:l!==i["="]?!1:(s=i["*"]||i[">"],o.slice(0,(s||"").length)===s?!0:l!==i["*"]?!1:l!==i[">"]&&l!==i["<"]?o>=i[">"]&&o<=i["<"]:l!==i[">"]&&o>=i[">"]||l!==i["<"]&&o<=i["<"]))},String.hash=function(o,i){if(typeof o=="string"){if(i=i||0,!o.length)return i;for(var s=0,l=o.length,e;s<l;++s)e=o.charCodeAt(s),i=(i<<5)-i+e,i|=0;return i}};var t=Object.prototype.hasOwnProperty;Object.plain=function(o){return o?o instanceof Object&&o.constructor===Object||Object.prototype.toString.call(o).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(o,i){for(var s in o)if(t.call(o,s)&&(!i||i.indexOf(s)==-1))return!1;return!0},Object.keys=Object.keys||function(o){var i=[];for(var s in o)t.call(o,s)&&i.push(s);return i},function(){var o,i=setTimeout,s=0,l=0,e=typeof setImmediate!=""+o&&setImmediate||i;i.poll=i.poll||function(y){if(1>=+new Date-s&&l++<3333){y();return}e(function(){s=+new Date,y()},l=0)}}(),function(){var o=setTimeout,i=o.turn=o.turn||function(w){s.push(w)==1&&l(c)},s=i.s=[],l=o.poll,e=0,y,c=function(){(y=s[e++])&&y(),(e==s.length||e==99)&&(s=i.s=s.slice(e),e=0),s.length&&l(c)}}(),function(){var o,i=setTimeout,s=i.turn;(i.each=i.each||function(l,e,y,c){c=c||9,function w(d,_,h){if(_=(d=(l||[]).splice(0,c)).length){for(var p=0;p<_&&o===(h=e(d[p]));p++);if(o===h){s(w);return}}y&&y(h)}()})()}()})(f,"./shim"),f(function(u){u.exports=function t(o,i,s){if(!o)return{to:t};var l,e=typeof i=="function",o=(this.tag||(this.tag={}))[o]||e&&(this.tag[o]={tag:o,to:t._={next:function(c){var w;(w=this.to)&&w.next(c)}}});if(e){var y={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:i,the:o,on:this,as:s};return(y.back=o.last||o).to=y,o.last=y}return(o=o.to)&&l!==i&&o.next(i),o}})(f,"./onto"),f(function(u){f("./shim"),u.exports=function(t){return t===void 0?!1:t===null?!0:t===1/0||t!==t?!1:typeof t=="string"||typeof t=="boolean"||typeof t=="number"?!0:t&&typeof(t["#"]||0)=="string"&&Object.empty(t,["#"])?t["#"]:!1}})(f,"./valid"),f(function(u){f("./shim");function t(){var y=+new Date;return l<y?(i=0,l=y+t.drift):l=y+(i+=1)/s+t.drift}t.drift=0;var o=-1/0,i=0,s=999,l=o,e;t.is=function(y,c,w){var d=c&&y&&y._&&y._[">"]||w;if(!!d)return typeof(d=d[c])=="number"?d:o},t.ify=function(y,c,w,d,_){(y=y||{})._=y._||{},_&&(y._["#"]=_);var h=y._[">"]||(y._[">"]={});return e!==c&&c!=="_"&&(typeof w=="number"&&(h[c]=w),e!==d&&(y[c]=d)),y},u.exports=t})(f,"./state"),f(function(u){f("./shim");function t(o){var i={s:{}},s=i.s;o=o||{max:999,age:1e3*9},i.check=function(e){return s[e]?l(e):!1};var l=i.track=function(e){var y=s[e]||(s[e]={});return y.was=i.now=+new Date,i.to||(i.to=setTimeout(i.drop,o.age+9)),y};return i.drop=function(e){i.to=null,i.now=+new Date;var y=Object.keys(s);console.STAT&&console.STAT(i.now,+new Date-i.now,"dup drop keys"),setTimeout.each(y,function(c){var w=s[c];w&&(e||o.age)>i.now-w.was||delete s[c]},0,99)},i}u.exports=t})(f,"./dup"),f(function(u){f("./onto"),u.exports=function(i,s){if(!!this.on){var l=(this.opt||{}).lack||9e3;if(typeof i!="function"){if(!i)return;var y=i["#"]||i,e=(this.tag||"")[y];return e?(s&&(e=this.on(y,s),clearTimeout(e.err),e.err=setTimeout(function(){e.off()},l)),!0):void 0}var y=s&&s["#"]||t(9);if(!i)return y;var c=this.on(y,i,s);return c.err=c.err||setTimeout(function(){c.off(),c.next({err:"Error: No ACK yet.",lack:!0})},l),y}};var t=String.random||function(){return Math.random().toString(36).slice(2)}})(f,"./ask"),f(function(u){function t(_){return _ instanceof t?(this._={$:this}).$:this instanceof t?t.create(this._={$:this,opt:_}):new t(_)}t.is=function(_){return _ instanceof t||_&&_._&&_===_._.$||!1},t.version=.202,t.chain=t.prototype,t.chain.toJSON=function(){},f("./shim"),t.valid=f("./valid"),t.state=f("./state"),t.on=f("./onto"),t.dup=f("./dup"),t.ask=f("./ask"),function(){t.create=function(S){S.root=S.root||S,S.graph=S.graph||{},S.on=S.on||t.on,S.ask=S.ask||t.ask,S.dup=S.dup||t.dup();var j=S.$.opt(S.opt);return S.once||(S.on("in",_,S),S.on("out",_,S),S.on("put",g,S),t.on("create",S),S.on("create",S)),S.once=1,j};function _(S){if(!!S){if(S.out===_){this.to.next(S);return}var j=this,m=j.as,b=m.at||m,T=b.$,D=b.dup,I,N=S.DBG;if((I=S["#"])||(I=S["#"]=i(9)),!D.check(I)){if(D.track(I),I=S._,S._=typeof I=="function"?I:function(){},S.$&&S.$===(S.$._||"").$||(S.$=T),S["@"]&&!S.put&&r(S),!b.ask(S["@"],S))if(N&&(N.u=+new Date),S.put){h(S);return}else S.get&&t.on.get(S,T);N&&(N.uc=+new Date),j.to.next(S),N&&(N.ua=+new Date),!(S.nts||S.NTS)&&(S.out=_,b.on("out",S),N&&(N.ue=+new Date))}}}function h(S){if(!!S){var j=S._||"",m=j.root=((j.$=S.$||"")._||"").root;if(S["@"]&&j.faith&&!j.miss){S.out=_,m.on("out",S);return}j.latch=m.hatch,j.match=m.hatch=[];var b=S.put,T=j.DBG=S.DBG,D=+new Date;if(!(b["#"]&&b["."])){T&&(T.p=D),j["#"]=S["#"],j.msg=S,j.all=0,j.stun=1;var I=Object.keys(b);console.STAT&&console.STAT(D,((T||j).pk=+new Date)-D,"put sort");var N=0,P,J,L,U,C,M,H;(function W(R){if(P!=N){if(P=N,!(L=I[N])){console.STAT&&console.STAT(D,((T||j).pd=+new Date)-D,"put"),a(j);return}(U=b[L])?(H=U._)?L!==H["#"]?M=v+x(L)+"soul not same.":(C=H[">"])||(M=v+x(L)+"no state."):M=v+x(L)+"no meta.":M=v+x(L)+"no node.",J=Object.keys(U||{})}if(M){S.err=j.err=M,a(j);return}var z=0,B;for(R=R||0;R++<9&&(B=J[z++]);)if(B!=="_"){var F=U[B],Y=C[B];if(c===Y){M=v+x(B)+"on"+x(L)+"no state.";break}if(!l(F)){M=v+x(B)+"on"+x(L)+"bad "+typeof F+x(F);break}p(F,B,L,Y,S)}if((J=J.slice(z)).length){s(W);return}++N,J=null,W(R)})()}}}t.on.put=h;function p(S,j,m,b,T){var D=T._||"",I=D.root,N=I.graph,P,J=N[m]||w,L=e(J,j,1),U=J[j],C=D.DBG;(P=console.STAT)&&(!N[m]||!U)&&(P.has=(P.has||0)+1);var M=E();if(b>M){setTimeout(function(){p(S,j,m,b,T)},(P=b-M)>A?A:P),console.STAT&&console.STAT((C||D).Hf=+new Date,P,"future");return}if(!(b<L&&!D.miss)&&!(!D.faith&&b===L&&(S===U||O(S)<=O(U))&&!D.miss)){D.stun++;var H=T["#"]+D.all++,W={toString:function(){return H},_:D};W.toJSON=W.toString,C&&(C.ph=C.ph||+new Date),I.on("put",{"#":W,"@":T["@"],put:{"#":m,".":j,":":S,">":b},_:D})}}function g(S){var j;(j=(S._||"").DBG)&&(j.pa=+new Date,j.pm=j.pm||+new Date);var m=this,b=m.as,T=b.graph,D=S._,I=S.put,N=I["#"],P=I["."],J=I[":"],L=I[">"];S["#"];var U;(U=D.msg)&&(U=U.put)&&(U=U[N])&&y(U,P,L,J,N),T[N]=y(T[N],P,L,J,N),(U=(b.next||"")[N])&&U.on("in",S),a(D),m.to.next(S)}function a(S,j){var m;if(!S.stop&&!(!S.err&&0<--S.stun)&&(S.stop=1,!!(m=S.root))){var b=S.match;b.end=1,b===m.hatch&&(!(b=S.latch)||b.end?delete m.hatch:m.hatch=b),S.hatch&&S.hatch(),setTimeout.each(S.match,function(T){T&&T()}),!(!(j=S.msg)||S.err||j.err)&&(j.out=_,S.root.on("out",j))}}function r(S){var j=S["@"]||"",m;!(m=j._)||(m.acks=(m.acks||0)+1,(m.err=S.err)&&(S["@"]=m["#"],a(m)),!m.stop&&!m.crack&&(m.crack=m.match&&m.match.push(function(){n(m)})),n(m))}function n(S){!S||!S.root||S.stun||S.acks!==S.all||S.root.on("in",{"@":S["#"],err:S.err,ok:S.err?c:{"":1}})}var v="Error: Invalid graph!",x=function(S){return" '"+(""+S).slice(0,9)+"...' "},O=JSON.stringify,A=2147483647,E=t.state}(),function(){t.on.get=function(h,p){var g=p._,a=h.get,r=a["#"],n=g.graph[r],v=a["."],x=g.next||(g.next={});x[r];var O=h._||{},A=O.DBG=h.DBG;if(A&&(A.g=+new Date),!n)return g.on("get",h);if(v){if(typeof v!="string"||c===n[v])return g.on("get",h);n=y({},v,e(n,v),n[v],r)}n&&_(h,n),g.on("get",h)};function _(h,p){var g=+new Date,a=h._||{},r=a.DBG=h.DBG,n=h["#"],v=i(9),x=Object.keys(p||"").sort(),O=((p||"")._||"")["#"];x.length;var A=h.$._.root,E=p===A.graph[O];console.STAT&&console.STAT(g,((r||a).gk=+new Date)-g,"got keys"),p&&function S(){g=+new Date;for(var j=0,m,b={},T;j<9&&(m=x[j++]);)y(b,m,e(p,m),p[m],O);x=x.slice(j),(T={})[O]=b,b=T;var D;E&&(D=function(){},D.ram=D.faith=!0),T=x.length,console.STAT&&console.STAT(g,-(g-(g=+new Date)),"got copied some"),r&&(r.ga=+new Date),A.on("in",{"@":n,"#":v,put:b,"%":T?v=i(9):c,$:A.$,_:D,DBG:r}),console.STAT&&console.STAT(g,+new Date-g,"got in"),!!T&&setTimeout.turn(S)}(),p||A.on("in",{"@":h["#"]})}t.on.get.ack=_}(),function(){t.chain.opt=function(_){_=_||{};var h=this,p=h._,g=_.peers||_;return Object.plain(_)||(_={}),Object.plain(p.opt)||(p.opt=_),typeof g=="string"&&(g=[g]),g instanceof Array&&(Object.plain(p.opt.peers)||(p.opt.peers={}),g.forEach(function(a){var r={};r.id=r.url=a,p.opt.peers[a]=p.opt.peers[a]||r})),p.opt.peers=p.opt.peers||{},o(_,function a(r){var n=this[r];if(this&&this.hasOwnProperty(r)||typeof n=="string"||Object.empty(n)){this[r]=n;return}n&&n.constructor!==Object&&!(n instanceof Array)||o(n,a)}),t.on("opt",p),p.opt.uuid=p.opt.uuid||function(r){return t.state().toString(36).replace(".","")+String.random(r||12)},h}}();var o=function(_,h){Object.keys(_).forEach(h,_)},i=String.random,s=setTimeout.turn,l=t.valid,e=t.state.is,y=t.state.ify,c,w={},d;t.log=function(){return!t.log.off&&d.log.apply(d,arguments),[].slice.call(arguments).join(" ")},t.log.once=function(_,h,p){return(p=t.log.once)[_]=p[_]||0,p[_]++||t.log(h)},typeof window!="undefined"&&((window.GUN=window.Gun=t).window=window);try{typeof k!="undefined"&&(k.exports=t)}catch{}u.exports=t,(t.window||{}).console=(t.window||{}).console||{log:function(){}},(d=console).only=function(_,h){return d.only.i&&_===d.only.i&&d.only.i++&&(d.log.apply(d,arguments)||h)},t.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(f,"./root"),f(function(u){var t=f("./root");t.chain.back=function(s,l){var e;if(s=s||1,s===-1||s===1/0)return this._.root.$;if(s===1)return(this._.back||this._).$;var y=this,c=y._;if(typeof s=="string"&&(s=s.split(".")),s instanceof Array){var w=0,d=s.length,e=c;for(w;w<d;w++)e=(e||o)[s[w]];return i!==e?l?y:e:(e=c.back)?e.$.back(s,l):void 0}if(typeof s=="function"){for(var _,e={back:c};(e=e.back)&&i===(_=s(e,l)););return _}return typeof s=="number"?(c.back||c).$.back(s-1):this};var o={},i})(f,"./back"),f(function(u){var t=f("./root");t.chain.chain=function(a){var r=this,n=r._,v=new(a||r).constructor(r),x=v._,O;return x.root=O=n.root,x.id=++O.once,x.back=r._,x.on=t.on,x.on("in",t.on.in,x),x.on("out",t.on.out,x),v};function o(a){var r,n=this.as,v=n.back,x=n.root,O;if(a.$||(a.$=n.$),this.to.next(a),n.err){n.on("in",{put:n.put=c,$:n.$});return}if(r=a.get){if(x.pass&&(x.pass[n.id]=n),n.lex&&Object.keys(n.lex).forEach(function(A){O[A]=n.lex[A]},O=a.get=a.get||{}),r["#"]||n.soul){if(r["#"]=r["#"]||n.soul,a["#"]||(a["#"]=w(9)),v=x.$.get(r["#"])._,r=r["."]){if(_(v.put,r)&&(O=v.ask&&v.ask[r],(v.ask||(v.ask={}))[r]=v.$.get(r)._,v.on("in",{get:r,put:{"#":v.soul,".":r,":":v.put[r],">":p(x.graph[v.soul],r)}}),O))return}else{if(O=v.ask&&v.ask[""],(v.ask||(v.ask={}))[""]=v,c!==v.put&&(v.on("in",v),O))return;a.$=v.$}return x.ask(e,a),x.on("in",a)}if(r["."])return n.get?(a={get:{".":n.get},$:n.$},(v.ask||(v.ask={}))[n.get]=a.$._,v.on("out",a)):(a={get:n.lex?a.get:{},$:n.$},v.on("out",a));if((n.ask||(n.ask={}))[""]=n,n.get)return r["."]=n.get,(v.ask||(v.ask={}))[n.get]=a.$._,v.on("out",a)}return v.on("out",a)}t.on.out=o;function i(a,r){r=r||this.as;var n=r.root,v=a.$||(a.$=r.$),x=(v||"")._||y,O=a.put||"",A=O["#"],E=O["."],S=c!==O["="]?O["="]:O[":"],j=O[">"]||-1/0,m;if(c!==a.put&&(c===O["#"]||c===O["."]||c===O[":"]&&c===O["="]||c===O[">"])){if(!d(O)){if(!(A=((O||"")._||"")["#"])){console.log("chain not yet supported for",O,"...",a,r);return}return v=r.root.$.get(A),setTimeout.each(Object.keys(O).sort(),function(b){b=="_"||c===(j=p(O,b))||r.on("in",{$:v,put:{"#":A,".":b,"=":O[b],">":j},VIA:a})})}r.on("in",{$:x.back.$,put:{"#":A=x.back.soul,".":E=x.has||x.get,"=":O,">":p(x.back.put,E)},via:a});return}(a.seen||"")[r.id]||((a.seen||(a.seen=function(){}))[r.id]=r,r!==x&&(Object.keys(a).forEach(function(b){O[b]=a[b]},O={}),O.get=r.get||O.get,!r.soul&&!r.has?O.$$$=O.$$$||r.$:x.soul&&(O.$=r.$,O.$$=O.$$||x.$),a=O),l(a,r),(r.soul||a.$$)&&j>=p(n.graph[A],E)&&((O=n.$.get(A)._).put=g(O.put,E,j,S,A)),!x.soul&&j>=p(n.graph[A],E)&&(m=(n.$.get(A)._.next||"")[E])&&(m.put=S,typeof(O=d(S))=="string"&&(m.put=n.$.get(O)._.put||S)),this.to&&this.to.next(a),r.any&&setTimeout.each(Object.keys(r.any),function(b){(b=r.any[b])&&b(a)},0,99),r.echo&&setTimeout.each(Object.keys(r.echo),function(b){(b=r.echo[b])&&b.on("in",a)},0,99),((a.$$||"")._||x).soul&&(m=r.next)&&(m=m[E])&&(O={},Object.keys(a).forEach(function(b){O[b]=a[b]}),O.$=(a.$$||a.$).get(O.get=E),delete O.$$,delete O.$$$,m.on("in",O)),s(a,r))}t.on.in=i;function s(a,r){if(r=r||this.as||a.$._,!(a.$$&&this!==t.on)&&!(!a.put||r.soul)){var n=a.put||"",v=n["="]||n[":"],x,O=r.root,A=O.$.get(n["#"]).get(n["."])._;if(typeof(v=d(v))!="string"){this===t.on&&((A.echo||(A.echo={}))[r.id]=r);return}if(!((A.echo||(A.echo={}))[r.id]&&!(O.pass||"")[r.id])){if(x=O.pass){if(x[v+r.id])return;x[v+r.id]=1}(A.echo||(A.echo={}))[r.id]=r,r.has&&(r.link=v);var E=O.$.get(A.link=v)._;(E.echo||(E.echo={}))[A.id]=A;var x=r.ask||"";(x[""]||r.lex)&&E.on("out",{get:{"#":v}}),setTimeout.each(Object.keys(x),function(S,j){!S||!(j=x[S])||j.on("out",{get:{"#":v,".":S}})},0,99)}}}t.on.link=s;function l(a,r){var n=a.put||"",v=c!==n["="]?n["="]:n[":"],x=r.root,O,A;if(c===v){if(r.soul&&c!==r.put||(A=(a.$$||a.$||"")._||"",a["@"]&&(c!==A.put||c!==r.put)))return;(O=r.link||a.linked)&&delete(x.$.get(O)._.echo||"")[r.id],r.has&&(r.link=null),r.put=c,setTimeout.each(Object.keys(r.next||""),function(E,S){!(S=r.next[E])||(O&&delete(x.$.get(O).get(E)._.echo||"")[S.id],S.on("in",{get:E,put:c,$:S.$}))},0,99);return}r.soul||a.$$||(O=d(v),A=a.$._||"",!((O===A.link||r.has&&!A.link)&&!((x.pass||"")[r.id]&&typeof O!="string"))&&(delete(A.echo||"")[r.id],l({get:r.get,put:c,$:a.$,linked:a.linked=a.linked||A.link},r)))}t.on.unlink=l;function e(a,r){var n=this.as,v=n.$._;v.root;var x=n.get||"",O=(a.put||"")[x["#"]]||"";if(!a.put||typeof x["."]=="string"&&c===O[x["."]]){if(c!==v.put||!v.soul&&!v.has)return;v.ack=(v.ack||0)+1,v.on("in",{get:v.get,put:v.put=c,$:v.$,"@":a["@"]});return}(a._||{}).miss=1,t.on.put(a)}var y={},c,w=String.random,d=t.valid,_=function(a,r){return a&&Object.prototype.hasOwnProperty.call(a,r)},h=t.state,p=h.is,g=h.ify})(f,"./chain"),f(function(u){var t=f("./root");t.chain.get=function(c,w,d){var _,h;if(typeof c=="string"){if(c.length==0)return(_=this.chain())._.err={err:t.log("0 length key!",c)},w&&w.call(_,_._.err),_;var p=this,g=p._,a=g.next||l;(_=a[c])||(_=c&&o(c,p)),_=_&&_.$}else if(typeof c=="function"){let O=function(E,S,j){if(!O.stun&&!((N=n.pass)&&!N[v])){var m=E.$._,b=(E.$$||"")._,T=(b||m).put,D=!m.has&&!m.soul,I={},N;if((D||y===T)&&(T=y===((N=E.put)||"")["="]?y===(N||"")[":"]?N:N[":"]:N["="]),typeof(N=t.valid(T))=="string"&&(T=y===(N=n.$.get(N)._.put)?r.not?y:T:N),!(r.not&&y===T)){if(y===r.stun){if((N=n.stun)&&N.on&&(g.$.back(function(P){if(N.on(""+P.id,I={}),(I.run||0)<O.id)return I}),!I.run&&N.on(""+m.id,I={}),!I.run&&b&&N.on(""+b.id,I={}),O.id>I.run&&((!I.stun||I.stun.end)&&(I.stun=N.on("stun"),I.stun=I.stun&&I.stun.last),I.stun&&!I.stun.end))){(I.stun.add||(I.stun.add={}))[v]=function(){O(E,S,1)};return}if(y===T&&(j=0),(N=n.hatch)&&!N.end&&y===r.hatch&&!j){if(x[m.$._.id])return;x[m.$._.id]=1,N.push(function(){O(E,S,1)});return}x={}}if(n.pass){if(n.pass[v+m.id])return;n.pass[v+m.id]=1}if(r.on){r.ok.call(m.$,T,m.get,E,S||O);return}if(r.v2020){r.ok(E,S||O);return}Object.keys(E).forEach(function(P){N[P]=E[P]},N={}),E=N,E.put=T,r.ok.call(r.as,E,S||O)}}};if(w===!0)return i(this,c,w,d),this;_=this;var g=_._,r=w||{},n=g.root,v;r.at=g,r.ok=c;var x={};return O.at=g,(g.any||(g.any={}))[v=String.random(7)]=O,O.off=function(){O.stun=1,!!g.any&&delete g.any[v]},O.rid=s,O.id=r.run||++n.once,h=n.pass,(n.pass={})[v]=1,r.out=r.out||{get:{}},g.on("out",r.out),n.pass=h,_}else{if(typeof c=="number")return this.get(""+c,w,d);if(typeof(h=e(c))=="string")return this.get(h,w,d);(h=this.get.next)&&(_=h(this,c))}return _?(w&&typeof w=="function"&&_.get(w,d),_):((_=this.chain())._.err={err:t.log("Invalid get request!",c)},w&&w.call(_,_._.err),_)};function o(c,w){var d=w._,_=d.next,h=w.chain(),p=h._;return _||(_=d.next={}),_[p.get=c]=p,w===d.root.$?p.soul=c:(d.soul||d.has)&&(p.has=c),p}function i(c,w,d,_){var h=c._,p=0,g;return(g=h.soul||h.link)?w(g,_,h):h.jam?h.jam.push([w,_]):(h.jam=[[w,_]],c.get(function(r,n){if(!(y===r.put&&!h.root.opt.super&&(g=Object.keys(h.root.opt.peers).length)&&++p<=g)){n.rid(r);var v=(v=r.$)&&v._||{},x=0,O;for(g=h.jam,delete h.jam;O=g[x++];){var A=O[0];O=O[1],A&&A(v.link||v.soul||t.valid(r.put)||((r.put||{})._||{})["#"],O,r,n)}}},{out:{get:{".":!0}}}),c)}function s(c){var w=this.at||this.on;if(!c||w.soul||w.has)return this.off();if(!!(c=(c=(c=c.$||c)._||c).id)){w.map;var d;if((d=this.seen||(this.seen={}))[c])return!0;d[c]=!0}}var l={},e=t.valid,y})(f,"./get"),f(function(u){var t=f("./root");t.chain.put=function(d,_,h){var p=this,g=p._,a=g.root;h=h||{},h.root=g.root,h.run||(h.run=a.once),o(h,g.id),h.ack=h.ack||_,h.via=h.via||p,h.data=h.data||d,h.soul||(h.soul=g.soul||typeof _=="string"&&_);var r=h.state=h.state||t.state();return typeof d=="function"?(d(function(n){h.data=n,p.put(l,l,h)}),p):h.soul?(h.$=a.$.get(h.soul),h.todo=[{it:h.data,ref:h.$}],h.turn=h.turn||y,h.ran=h.ran||i,function n(){var v=h.todo,x=v.pop(),O=x.it;x.ref&&x.ref._.id;var A,E,S,j,m;if(o(h,x.ref),(j=x.todo)&&(E=j.pop(),O=O[E],j.length&&v.push(x)),E&&(v.path||(v.path=[])).push(E),!(A=c(O))&&!(m=t.is(O))){if(!Object.plain(O)){(h.ack||e).call(h,h.out={err:h.err=t.log("Invalid data: "+(O&&(j=O.constructor)&&j.name||typeof O)+" at "+(h.via.back(function(I){I.get&&j.push(I.get)},j=[])||j.join("."))+"."+(v.path||[]).join("."))}),h.ran(h);return}for(var b=h.seen||(h.seen=[]),T=b.length;T--;)if(O===(j=b[T]).it){A=O=j.link;break}}if(E&&A)x.node=w(x.node,E,r,O);else{let I=function(N,P){var J=S.link["#"];P&&(P.off(),P.rid(N));var L=J||N.soul||(j=(N.$$||N.$)._||"").soul||j.link||((j=j.put||"")._||"")["#"]||j["#"]||((j=N.put||"")&&N.$$?j["#"]:(j["="]||j[":"]||"")["#"]);if(!J&&o(h,N.$),!L&&!x.link["#"]){(x.wait||(x.wait=[])).push(function(){I(N,P)});return}L||(L=[],(N.$$||N.$).back(function(U){if(j=U.soul||U.link)return L.push(j);L.push(U.get)}),L=L.reverse().join("/")),S.link["#"]=L,!m&&(((h.graph||(h.graph={}))[L]=S.node||(S.node={_:{}}))._["#"]=L),delete h.wait[D],S.wait&&setTimeout.each(S.wait,function(U){U&&U()}),h.ran(h)};h.seen.push(S={it:O,link:{},todo:m?[]:Object.keys(O).sort().reverse(),path:(v.path||[]).slice(),up:x}),x.node=w(x.node,E,r,S.link),!m&&S.todo.length&&v.push(S);var D=h.seen.length;(h.wait||(h.wait={}))[D]="",j=(S.ref=m?O:E?x.ref.get(E):x.ref)._,(j=O&&(O._||"")["#"]||j.soul||j.link)?I({soul:j}):S.ref.get(I,{run:h.run,v2020:1,out:{get:{".":" "}}})}if(!v.length)return h.ran(h);h.turn(n)}(),p):(s(h),p)};function o(d,_){if(!!_){_=(_._||"").id||_;var h=d.root.stun||(d.root.stun={on:t.on}),p={},g;d.stun||(d.stun=h.on("stun",function(){})),(g=h.on(""+_))&&g.the.last.next(p),!(p.run>=d.run)&&h.on(""+_,function(a){if(d.stun.end){this.off(),this.to.next(a);return}a.run=a.run||d.run,a.stun=a.stun||d.stun})}}function i(d){if(d.err){i.end(d.stun,d.root);return}if(!(d.todo.length||d.end||!Object.empty(d.wait))){d.end=1;var _=d.$.back(-1)._,h=_.root,p=_.ask(function(n){h.on("ack",n),n.err&&t.log(n),++g>(d.acks||0)&&this.off(),!!d.ack&&d.ack(n,this)},d.opt),g=0,a=d.stun,r;(r=function(){!a||(i.end(a,h),setTimeout.each(Object.keys(a=a.add||""),function(n){(n=a[n])&&n()}))}).hatch=r,d.via._.on("out",{put:d.out=d.graph,opt:d.opt,"#":p,_:r})}}i.end=function(d,_){d.end=e,d.the.to===d&&d===d.the.last&&delete _.stun,d.off()};function s(d){var _=d.via._,h;d.via=d.via.back(function(p){if(p.soul||!p.get)return p.$;h=d.data,(d.data={})[p.get]=h}),(!d.via||!d.via._.soul)&&(d.via=_.root.$.get(((d.data||"")._||"")["#"]||_.$.back("opt.uuid")())),d.via.put(d.data,d.ack,d)}var l,e=function(){},y=setTimeout.turn,c=t.valid,w=t.state.ify})(f,"./put"),f(function(u){var t=f("./root");f("./chain"),f("./back"),f("./put"),f("./get"),u.exports=t})(f,"./index"),f(function(u){var t=f("./index");t.chain.on=function(s,l,e,y){var c=this,w=c._;w.root;var d;if(typeof s=="string")return l?(d=w.on(s,l,e||w,y),e&&e.$&&(e.subs||(e.subs=[])).push(d),c):w.on(s);var _=l;return(_=_===!0?{change:!0}:_||{}).not=1,_.on=1,c.get(s,_),c},t.chain.once=function(s,l){if(l=l||{},!s)return o(this);var e=this,y=e._,c=y.root;y.put;var w=String.random(7),d;return e.get(function(_,h,p,g){var a=this,r=a._,n=r.one||(r.one={});if(g.stun||n[w]==="")return;if((d=t.valid(_))===!0){v();return}if(typeof d=="string")return;clearTimeout((y.one||"")[w]),clearTimeout(n[w]),n[w]=setTimeout(v,l.wait||99);function v(){!r.has&&!r.soul&&(r={put:_,get:h}),i===(d=r.put)&&(d=((p.$$||"")._||"").put),!(typeof t.valid(d)=="string"&&(d=c.$.get(d)._.put,d===i))&&(g.stun||n[w]!==""&&(n[w]="",(y.soul||y.has)&&g.off(),s.call(a,d,r.get)))}},{on:1}),e};function o(s,l,e){return t.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(e=s.chain())._.nix=s.once(function(y,c){e._.on("in",this._)}),e._.lex=s._.lex,e}t.chain.off=function(){var s=this,l=s._,e,y=l.back;if(!!y)return l.ack=0,(e=y.next)&&e[l.get]&&delete e[l.get],(e=y.ask)&&delete e[l.get],(e=y.put)&&delete e[l.get],(e=l.soul)&&delete y.root.graph[e],(e=l.map)&&Object.keys(e).forEach(function(c,w){w=e[c],w.link&&y.root.$.get(w.link).off()}),(e=l.next)&&Object.keys(e).forEach(function(c,w){w=e[c],w.$.off()}),l.on("off",{}),s};var i})(f,"./on"),f(function(u){var t=f("./index"),o=t.chain.get.next;t.chain.get.next=function(e,y){var c;return Object.plain(y)?(c=((c=y["#"])||"")["="]||c)?e.get(c):((c=e.chain()._).lex=y,e.on("in",function(w){String.match(w.get||(w.put||"")["."],y["."]||y["#"]||y)&&c.on("in",w),this.to.next(w)}),c.$):(o||s)(e,y)},t.chain.map=function(e,y,c){var w=this,d=w._,_,h;return Object.plain(e)&&(_=e["."]?e:{".":e},e=l),e?(t.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),h=w.chain(),w.map().on(function(p,g,a,r){var n=(e||s).call(this,p,g,a,r);if(l!==n){if(p===n)return h._.on("in",a);if(t.is(n))return h._.on("in",n._);var v={};Object.keys(a.put).forEach(function(x){v[x]=a.put[x]},v),v["="]=n,h._.on("in",{get:g,put:v})}}),h):((h=d.each)||((d.each=h=w.chain())._.lex=_||h._.lex||d.lex,h._.nix=w.back("nix"),w.on("in",i,h._)),h)};function i(e){this.to.next(e);var y=this.as,c=e.$,w=c._,d=e.put,_;!w.soul&&!e.$$||(_=y.lex)&&!String.match(e.get||(d||"")["."],_["."]||_["#"]||_)||t.on.link(e,y)}var s=function(){},l})(f,"./map"),f(function(u){var t=f("./index");t.chain.set=function(o,i,s){var l=this,e=l.back(-1),y,c;return i=i||function(){},s=s||{},s.item=s.item||o,(y=((o||"")._||"")["#"])&&((o={})["#"]=y),typeof(c=t.valid(o))=="string"?l.get(y=c).put(o,i,s):t.is(o)?(l.put(function(w){o.get(function(d,_,h){if(!d)return i.call(l,{err:t.log('Only a node can be linked! Not "'+h.put+'"!')});(c={})[d]={"#":d},w(c)},!0)}),o):(Object.plain(o)&&(o=e.get(y=l.back("opt.uuid")()).put(o)),l.get(y||e.back("opt.uuid")(7)).put(o,i,s))}})(f,"./set"),f(function(u){f("./shim");function t(i){var s=function(){},l=i.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var e=setTimeout.turn||setTimeout,y=JSON.parseAsync||function(r,n,v){var x;try{n(x,JSON.parse(r,v))}catch(O){n(O)}},c=JSON.stringifyAsync||function(r,n,v,x){var O;try{n(O,JSON.stringify(r,v,x))}catch(A){n(A)}},w=i.dup,d=w.check,_=w.track,h=s.hear=function(r,n){if(!!r){if(l.max<=r.length)return s.say({dam:"!",err:"Message too big!"},n);s===this&&(h.d+=r.length||0,++h.c);var v=n.SH=+new Date,x=r[0],O;if(x==="["){y(r,function(A,E){if(A||!E)return s.say({dam:"!",err:"DAM JSON parse error."},n);console.STAT&&console.STAT(+new Date,E.length,"# on hear batch");var S=l.puff;(function j(){for(var m=+new Date,b=0,T;b<S&&(T=E[b++]);)h(T,n);E=E.slice(b),console.STAT&&console.STAT(m,+new Date-m,"hear loop"),p(n),!!E.length&&e(j,0)})()}),r="";return}if(x==="{"||(r["#"]||Object.plain(r))&&(O=r)){if(O)return h.one(O,n,v);y(r,function(A,E){if(A||!E)return s.say({dam:"!",err:"DAM JSON parse error."},n);h.one(E,n,v)});return}}};h.one=function(r,n,v){var x,O,A,E,S;if(r.DBG&&(r.DBG=S={DBG:r.DBG}),S&&(S.h=v),S&&(S.hp=+new Date),(x=r["#"])||(x=r["#"]=String.random(9)),!(A=d(x))&&(O=r["##"],!(O&&(A=r["@"]||r.get&&x)&&w.check(E=A+O)))){if((r._=function(){}).via=s.leap=n,(A=r["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(j){this[j]=1},r._.yo={}),A=r.dam){(A=s.hear[A])&&A(r,n,i),_(x);return}var v=+new Date;S&&(S.is=v),n.SI=x,i.on("in",s.last=r),S&&(S.hd=+new Date),console.STAT&&console.STAT(v,+new Date-v,r.get?"msg get":r.put?"msg put":"msg"),(A=_(x)).via=n,r.get&&(A.it=r),E&&_(E),s.leap=s.last=null}},h.c=h.d=0,function(){var r=0,n;s.hash=function(A,E){var S,j,m,b=+new Date;c(A.put,function T(D,I){var N=(j||(j=m=I||"")).slice(0,32768);if(S=String.hash(N,S),j=j.slice(32768),j){e(T,0);return}console.STAT&&console.STAT(b,+new Date-b,"say json+hash"),A._.$put=m,A["##"]=S,O(A,E),delete A._.$put},v)};function v(A,E){var S;return E instanceof Object?(Object.keys(E).sort().forEach(x,{to:S={},on:E}),S):E}function x(A){this.to[A]=this.on[A]}var O=s.say=function(A,E){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(A),!A)return!1;var j,m,b=A["@"],T=A._||(A._=function(){}),D=A.DBG,I=+new Date;if(T.y=T.y||I,E||D&&(D.y=I),(j=A["#"])||(j=A["#"]=String.random(9)),!n&&_(j),A.put&&(A.err||(w.s[j]||"").err))return!1;if(!A["##"]&&o!==A.put&&!T.via&&b){s.hash(A,E);return}if(!E&&b&&(E=(S=w.s[b])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=s.last)&&b===S["#"]&&s.leap),!E&&b)return w.s[b]?void 0:(console.STAT&&console.STAT(+new Date,++r,"total no peer to ack to"),!1);if(!E&&s.way)return s.way(A);if(D&&(D.yh=+new Date),!(m=T.raw)){s.raw(A,E);return}if(D&&(D.yr=+new Date),!E||!E.id){if(!Object.plain(E||l.peers))return!1;var I=+new Date;l.puff;var N=l.peers,P=Object.keys(E||l.peers||{});console.STAT&&console.STAT(I,+new Date-I,"peer keys"),function U(){var C=+new Date;n=1;var M=T.raw;T.raw=m;for(var H=0,W;H<9&&(W=(P||"")[H++]);)!(W=N[W])||O(A,W);T.raw=M,n=0,P=P.slice(H),console.STAT&&console.STAT(C,+new Date-C,"say loop"),!!P.length&&(e(U,0),b&&_(b))}();return}if(!E.wire&&s.wire&&s.wire(E),j!==E.last){if(E.last=j,E===T.via||(S=T.yo)&&(S[E.url]||S[E.pid]||S[E.id]))return!1;if(console.STAT&&console.STAT(I,((D||T).yp=+new Date)-(T.y||I),"say prep"),!n&&b&&_(b),E.batch){if(E.tail=(S=E.tail||0)+m.length,E.tail<=l.pack){E.batch+=(S?",":"")+m;return}p(E)}E.batch="[";var J=+new Date;setTimeout(function(){console.STAT&&console.STAT(J,+new Date-J,"0ms TO"),p(E)},l.gap),g(m,E),console.STAT&&b===E.SI&&console.STAT(I,+new Date-E.SH,"say ack")}};s.say.c=s.say.d=0,s.raw=function(A,E){if(!A)return"";var S=A._||{},j,m;if(m=S.raw)return m;if(typeof A=="string")return A;var b=A["##"],T=A["@"];if(b&&T){if(!S.via&&d(T+b))return!1;if((m=(w.s[T]||"").it)||(m=s.last)&&T===m["#"]){if(b===m["##"])return!1;m["##"]||(m["##"]=b)}}if(!A.dam){var D=0,I=[];m=l.peers;for(var N in m){var P=m[N];if(I.push(P.url||P.pid||P.id),++D>6)break}D>1&&(A["><"]=I.join())}if(j=S.$put){m={},Object.keys(A).forEach(function(L){m[L]=A[L]}),m.put=":])([:",c(m,function(L,U){if(!L){var C=+new Date;m=U.indexOf('"put":":])([:"'),J(o,U=U.slice(0,m+6)+j+U.slice(m+14)),console.STAT&&console.STAT(C,+new Date-C,"say slice")}});return}c(A,J);function J(L,U){L||(S.raw=U,O(A,E))}}}();function p(r){var n=r.batch,v=typeof n=="string";if(v&&(n+="]"),r.batch=r.tail=null,!!n&&!(v?3>n.length:!n.length)){if(!v)try{n=n.length===1?n[0]:JSON.stringify(n)}catch(x){return l.log("DAM JSON stringify error",x)}!n||g(n,r)}}function g(r,n){try{var v=n.wire;n.say?n.say(r):v.send&&v.send(r),s.say.d+=r.length||0,++s.say.c}catch{(n.queue=n.queue||[]).push(r)}}s.hi=function(r){var n=r.wire||{};r.id?l.peers[r.url||r.id]=r:(n=r.id=r.id||String.random(9),s.say({dam:"?",pid:i.opt.pid},l.peers[n]=r),delete w.s[r.last]),r.met=r.met||+new Date,n.hied||i.on(n.hied="hi",r),n=r.queue,r.queue=[],setTimeout.each(n||[],function(v){g(v,r)},0,9)},s.bye=function(r){i.on("bye",r);var n=+new Date;n=n-(r.met||n),s.bye.time=((s.bye.time||n)+n)/2},s.hear["!"]=function(r,n){l.log("Error:",r.err)},s.hear["?"]=function(r,n){r.pid&&(n.pid||(n.pid=r.pid),r["@"])||(s.say({dam:"?",pid:l.pid,"@":r["#"]},n),delete w.s[n.last])},i.on("create",function(r){r.opt.pid=r.opt.pid||String.random(9),this.to.next(r),r.on("out",s.say)}),i.on("bye",function(r,n){r=l.peers[r.id||r]||r,this.to.next(r),r.bye?r.bye():(n=r.wire)&&n.close&&n.close(),delete l.peers[r.id],r.wire=null});var a={};return i.on("bye",function(r,n){this.to.next(r),(n=console.STAT)&&(n.peers=(n.peers||0)-1),!!(n=r.url)&&(a[n]=!0,setTimeout(function(){delete a[n]},l.lack||9e3))}),i.on("hi",function(r,n){this.to.next(r),(n=console.STAT)&&(n.peers=(n.peers||0)+1),!(!(n=r.url)||!a[n])&&(delete a[n],!l.super&&setTimeout.each(Object.keys(i.next),function(v){i.next[v],n={},n[v]=i.graph[v],n=String.hash(n),s.say({"##":n,get:{"#":v}},r)}))}),s}var o;try{u.exports=t}catch{}})(f,"./mesh"),f(function(u){var t=f("../index");t.Mesh=f("./mesh"),t.on("opt",function(i){if(this.to.next(i),i.once)return;var s=i.opt;if(s.WebSocket===!1)return;var l=t.window||{},e=s.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!e)return;s.WebSocket=e;var y=s.mesh=s.mesh||t.Mesh(i);y.wire||s.wire,y.wire=s.wire=c;function c(h){try{if(!h||!h.url)return g&&g(h);var p=h.url.replace(/^http/,"ws"),g=h.wire=new s.WebSocket(p);return g.onclose=function(){s.mesh.bye(h),d(h)},g.onerror=function(a){d(h)},g.onopen=function(){s.mesh.hi(h)},g.onmessage=function(a){!a||s.mesh.hear(a.data||a,h)},g}catch{}}setTimeout(function(){!s.super&&i.on("out",{dam:"hi"})},1);var w=2*999;function d(h){clearTimeout(h.defer),!(_&&h.retry<=0)&&(h.retry=(h.retry||s.retry+1||60)-(-h.tried+(h.tried=+new Date)<w*4?1:0),h.defer=setTimeout(function p(){if(_&&_.hidden)return setTimeout(p,w);c(h)},w))}var _=""+o!=typeof document&&document});var o})(f,"./websocket"),f(function(u){if(typeof Gun!="undefined"){var t=function(){},o;try{o=(Gun.window||t).localStorage}catch{}o||(Gun.log("Warning: No localStorage exists to persist data to!"),o={setItem:function(i,s){this[i]=s},removeItem:function(i){delete this[i]},getItem:function(i){return this[i]}}),Gun.on("create",function i(s){this.to.next(s);var l=s.opt;s.graph;var e=[],y,c;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{y=i[l.prefix]=i[l.prefix]||JSON.parse(o.getItem(l.prefix))||{}}catch{y=i[l.prefix]={}}s.on("get",function(d){this.to.next(d);var _=d.get,h,p,g,a;!_||!(h=_["#"])||(p=y[h]||a,p&&(g=_["."])&&!Object.plain(g)&&(p=Gun.state.ify({},g,Gun.state.is(p,g),p[g],h)),Gun.on.get.ack(d,p))}),s.on("put",function(d){this.to.next(d);var _=d.put,h=_["#"],p=_["."];y[h]=Gun.state.ify(y[h],p,_[">"],_[":"],h),d["@"]||e.push(d["#"]),!c&&(c=setTimeout(w,l.wait||1))});function w(){var d,_=e;clearTimeout(c),c=!1,e=[];try{o.setItem(l.prefix,JSON.stringify(y))}catch(h){Gun.log((d=h||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),s.on("localStorage:error",{err:d,get:l.prefix,put:y})}!d&&!Object.empty(l.peers)||setTimeout.each(_,function(h){s.on("in",{"@":h,err:d,ok:0})})}})}})(f,"./localStorage")})(),function(){var f;if(""+f!=typeof Gun){var k=function(m){console.log("Warning! Deprecated internal utility will break in next version:",m)},u=Gun;u.fn=u.fn||{is:function(m){return k("fn"),!!m&&typeof m=="function"}},u.bi=u.bi||{is:function(m){return k("bi"),m instanceof Boolean||typeof m=="boolean"}},u.num=u.num||{is:function(m){return k("num"),!o(m)&&(m-parseFloat(m)+1>=0||m===1/0||m===-1/0)}},u.text=u.text||{is:function(m){return k("text"),typeof m=="string"}},u.text.ify=u.text.ify||function(m){return k("text.ify"),u.text.is(m)?m:typeof JSON!="undefined"?JSON.stringify(m):m&&m.toString?m.toString():m},u.text.random=u.text.random||function(m,b){k("text.random");var T="";for(m=m||24,b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";m>0;)T+=b.charAt(Math.floor(Math.random()*b.length)),m--;return T},u.text.match=u.text.match||function(m,b){var T,D;return k("text.match"),typeof m!="string"?!1:(typeof b=="string"&&(b={"=":b}),b=b||{},T=b["="]||b["*"]||b[">"]||b["<"],m===T?!0:D!==b["="]?!1:(T=b["*"]||b[">"]||b["<"],m.slice(0,(T||"").length)===T?!0:D!==b["*"]?!1:D!==b[">"]&&D!==b["<"]?m>=b[">"]&&m<=b["<"]:D!==b[">"]&&m>=b[">"]||D!==b["<"]&&m<=b["<"]))},u.text.hash=u.text.hash||function(m,b){if(k("text.hash"),typeof m=="string"){if(b=b||0,!m.length)return b;for(var T=0,D=m.length,I;T<D;++T)I=m.charCodeAt(T),b=(b<<5)-b+I,b|=0;return b}},u.list=u.list||{is:function(m){return k("list"),m instanceof Array}},u.list.slit=u.list.slit||Array.prototype.slice,u.list.sort=u.list.sort||function(m){return k("list.sort"),function(b,T){return!b||!T?0:(b=b[m],T=T[m],b<T?-1:b>T?1:0)}},u.list.map=u.list.map||function(m,b,T){return k("list.map"),e(m,b,T)},u.list.index=1,u.obj=u.boj||{is:function(m){return k("obj"),m?m instanceof Object&&m.constructor===Object||Object.prototype.toString.call(m).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},u.obj.put=u.obj.put||function(m,b,T){return k("obj.put"),(m||{})[b]=T,m},u.obj.has=u.obj.has||function(m,b){return k("obj.has"),m&&Object.prototype.hasOwnProperty.call(m,b)},u.obj.del=u.obj.del||function(m,b){if(k("obj.del"),!!m)return m[b]=null,delete m[b],m},u.obj.as=u.obj.as||function(m,b,T,D){return k("obj.as"),m[b]=m[b]||(D===T?{}:T)},u.obj.ify=u.obj.ify||function(m){if(k("obj.ify"),s(m))return m;try{m=JSON.parse(m)}catch{m={}}return m},function(){var m;function b(T,D){l(this,D)&&m!==this[D]||(this[D]=T)}u.obj.to=u.obj.to||function(T,D){return k("obj.to"),D=D||{},e(T,b,D),D}}(),u.obj.copy=u.obj.copy||function(m){return k("obj.copy"),m&&JSON.parse(JSON.stringify(m))},function(){function m(b,T){var D=this.n,I;if(!(D&&(T===D||s(D)&&l(D,T)))&&I!==T)return!0}u.obj.empty=u.obj.empty||function(b,T){return k("obj.empty"),b?!e(b,m,{n:T}):!0}}(),function(){function m(D,I){if(arguments.length===2){m.r=m.r||{},m.r[D]=I;return}m.r=m.r||[],m.r.push(D)}var b=Object.keys,T;Object.keys=Object.keys||function(D){return T(D,function(I,N,P){P(N)})},u.obj.map=T=u.obj.map||function(D,I,N){k("obj.map");var P,J=0,L,U,C,M,H=typeof I=="function";if(m.r=P,b&&s(D)&&(C=b(D),M=!0),N=N||{},o(D)||C)for(L=(C||D).length;J<L;J++){var W=J+u.list.index;if(H){if(U=M?I.call(N,D[C[J]],C[J],m):I.call(N,D[J],W,m),U!==P)return U}else if(I===D[M?C[J]:J])return C?C[J]:W}else for(J in D)if(H){if(l(D,J)&&(U=N?I.call(N,D[J],J,m):I(D[J],J,m),U!==P))return U}else if(I===D[J])return J;return H?m.r:u.list.index?0:-1}}(),u.time=u.time||{},u.time.is=u.time.is||function(m){return k("time"),m?m instanceof Date:+new Date().getTime()};var t=u.fn.is,o=u.list.is,i=u.obj,s=i.is,l=i.has,e=i.map,y={};y.is=function(m){return k("val.is"),m===f?!1:m===null?!0:m===1/0?!1:_(m)||w(m)||d(m)?!0:y.link.is(m)||!1},y.link=y.rel={_:"#"},function(){y.link.is=function(b){if(k("val.link.is"),b&&b[c]&&!b._&&s(b)){var T={};if(e(b,m,T),T.id)return T.id}return!1};function m(b,T){var D=this;if(D.id)return D.id=!1;if(T==c&&_(b))D.id=b;else return D.id=!1}}(),y.link.ify=function(m){return k("val.link.ify"),h({},c,m)},u.obj.has._=".";var c=y.link._,f,w=u.bi.is,d=u.num.is,_=u.text.is,i=u.obj,s=i.is,h=i.put,e=i.map;u.val=u.val||y;var p={_:"_"};p.soul=function(m,b){return k("node.soul"),m&&m._&&m._[b||n]},p.soul.ify=function(m,b){return k("node.soul.ify"),b=typeof b=="string"?{soul:b}:b||{},m=m||{},m._=m._||{},m._[n]=b.soul||m._[n]||r(),m},p.soul._=y.link._,function(){p.is=function(b,T,D){k("node.is");var I;return s(b)&&(I=p.soul(b))?!e(b,m,{as:D,cb:T,s:I,n:b}):!1};function m(b,T){if(T!==p._){if(!y.is(b))return!0;this.cb&&this.cb.call(this.as,b,T,this.n,this.s)}}}(),function(){p.ify=function(b,T,D){return k("node.ify"),T?typeof T=="string"?T={soul:T}:typeof T=="function"&&(T={map:T}):T={},T.map&&(T.node=T.map.call(D,b,f,T.node||{})),(T.node=p.soul.ify(T.node||{},T))&&e(b,m,{o:T,as:D}),T.node};function m(b,T){var D=this.o,I,N;if(D.map){I=D.map.call(this.as,b,""+T,D.node),N===I?g(D.node,T):D.node&&(D.node[T]=I);return}y.is(b)&&(D.node[T]=b)}}();var i=u.obj,s=i.is,g=i.del,e=i.map,a=u.text,r=a.random,n=p.soul._,f;u.node=u.node||p;var v=u.state;v.lex=function(){return k("state.lex"),v().toString(36).replace(".","")},v.to=function(m,b,T){k("state.to");var D=(m||{})[b];return s(D)&&(D=x(D)),v.ify(T,b,v.is(m,b),D,p.soul(m))},function(){v.map=function(b,T,D){k("state.map");var I,N=s(N=b||T)?N:null;return b=t(b=b||T)?b:null,N&&!b?(T=d(T)?T:v(),N[E]=N[E]||{},e(N,m,{o:N,s:T}),N):(D=D||s(T)?T:I,T=d(T)?T:v(),function(P,J,L,U){if(!b)return m.call({o:L,s:T},P,J),P;b.call(D||this||{},P,J,L,U),!(l(L,J)&&I===L[J])&&m.call({o:L,s:T},P,J)})};function m(b,T){E!==T&&v.ify(this.o,T,this.s)}}();var i=u.obj;i.as;var l=i.has,s=i.is,e=i.map,x=i.copy,O=u.num,d=O.is,A=u.fn,t=A.is,E=p._,f,S={};(function(){S.is=function(T,D,I,N){return k("graph.is"),!T||!s(T)||j(T)?!1:!e(T,m,{cb:D,fn:I,as:N})};function m(T,D){if(!T||D!==p.soul(T)||!p.is(T,this.fn,this.as))return!0;!this.cb||(b.n=T,b.as=this.as,this.cb.call(b.as,T,D,b))}function b(T){T&&p.is(b.n,T,b.as)}})(),function(){S.ify=function(N,P,J){k("graph.ify");var L={path:[],obj:N};return P?typeof P=="string"?P={soul:P}:typeof P=="function"&&(P.map=P):P={},typeof J=="string"&&(P.soul=P.soul||J,J=f),P.soul&&(L.link=y.link.ify(P.soul)),P.shell=(J||{}).shell,P.graph=P.graph||{},P.seen=P.seen||[],P.as=P.as||J,m(P,L),P.root=L.node,P.graph};function m(N,P){var J;return(J=I(N,P))?J:(P.env=N,P.soul=T,p.ify(P.obj,b,P)&&(P.link=P.link||y.link.ify(p.soul(P.node)),P.obj!==N.shell&&(N.graph[y.link.is(P.link)]=P.node)),P)}function b(N,P,J){var L=this,U=L.env,C,M;if(p._===P&&l(N,y.link._))return J._;if(!!(C=D(N,P,J,L,U))){if(P||(L.node=L.node||J||{},l(N,p._)&&p.soul(N)&&(L.node._=x(N._)),L.node=p.soul.ify(L.node,y.link.is(L.link)),L.link=L.link||y.link.ify(p.soul(L.node))),(M=U.map)&&(M.call(U.as||{},N,P,J,L),l(J,P))){if(N=J[P],f===N){g(J,P);return}if(!(C=D(N,P,J,L,U)))return}if(!P)return L.node;if(C===!0)return N;if(M=m(U,{obj:N,path:L.path.concat(P)}),!!M.node)return M.link}}function T(N){var P=this,J=y.link.is(P.link),L=P.env.graph;P.link=P.link||y.link.ify(N),P.link[y.link._]=N,P.node&&P.node[p._]&&(P.node[p._][y.link._]=N),l(L,J)&&(L[N]=L[J],g(L,J))}function D(N,P,J,L,U){var C;if(y.is(N))return!0;if(s(N))return 1;if(C=U.invalid)return N=C.call(U.as||{},N,P,J),D(N,P,J,L,U);U.err="Invalid value at '"+L.path.concat(P).join(".")+"'!",u.list.is(N)&&(U.err+=" Use `.set(item)` instead of an Array.")}function I(N,P){for(var J=N.seen,L=J.length,U;L--;)if(U=J[L],P.obj===U.obj)return U;J.push(P)}}(),S.node=function(m){k("graph.node");var b=p.soul(m);if(!!b)return h({},b,m)},function(){S.to=function(b,T,D){if(k("graph.to"),!!b){var I={};return D=D||{seen:{}},e(b[T],m,{obj:I,graph:b,opt:D}),I}};function m(b,T){var D,I;if(p._===T){if(j(b,y.link._))return;this.obj[T]=x(b);return}if(!(D=y.link.is(b))){this.obj[T]=b;return}if(I=this.opt.seen[D]){this.obj[T]=I;return}this.obj[T]=this.opt.seen[D]=S.to(this.graph,D,this.opt)}}();var t=u.fn.is,i=u.obj,s=i.is,g=i.del,l=i.has,j=i.empty,h=i.put,e=i.map,x=i.copy,f;u.graph=u.graph||S}}()})(we);var Ee=we.exports,tt={exports:{}};(function($){(function(){function f(u,t){return t?et(u):u.slice?f[o(u)]:function(i,s){u(i={exports:{}}),f[o(s)]=i.exports};function o(i){return i.split("/").slice(-1).toString().replace(".js","")}}var k=$;f(function(u){typeof window!="undefined"&&(u.window=window);var t=u.window||u,o,i=t.SEA||{};(i.window=u.window)&&(i.window.SEA=i);try{o+""!=typeof k&&(k.exports=i)}catch{}u.exports=i})(f,"./root"),f(function(u){var t=f("./root");try{t.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(f,"./https"),f(function(u){var t;if(t+""==typeof btoa){if(t+""==typeof Buffer)try{se.Buffer=f("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}se.btoa=function(o){return Buffer.from(o,"binary").toString("base64")},se.atob=function(o){return Buffer.from(o,"base64").toString("binary")}}})(f,"./base64"),f(function(u){f("./base64");function t(){}Object.assign(t,{from:Array.from}),t.prototype=Object.create(Array.prototype),t.prototype.toString=function(o,i,s){o=o||"utf8",i=i||0;const l=this.length;if(o==="hex"){const e=new Uint8Array(this);return[...Array((s&&s+1||l)-i).keys()].map(y=>e[y+i].toString(16).padStart(2,"0")).join("")}if(o==="utf8")return Array.from({length:(s||l)-i},(e,y)=>String.fromCharCode(this[y+i])).join("");if(o==="base64")return btoa(this)},u.exports=t})(f,"./array"),f(function(u){f("./base64");var t=f("./array");function o(...i){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),o.from(...i)}o.prototype=Object.create(Array.prototype),Object.assign(o,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const i=arguments[0];let s;if(typeof i=="string"){const e=arguments[1]||"utf8";if(e==="hex"){const y=i.match(/([\da-fA-F]{2})/g).map(c=>parseInt(c,16));if(!y||!y.length)throw new TypeError("Invalid first argument for type 'hex'.");s=t.from(y)}else if(e==="utf8"||e==="binary"){const y=i.length,c=new Uint16Array(y);Array.from({length:y},(w,d)=>c[d]=i.charCodeAt(d)),s=t.from(c)}else if(e==="base64"){const y=atob(i),c=y.length,w=new Uint8Array(c);Array.from({length:c},(d,_)=>w[_]=y.charCodeAt(_)),s=t.from(w)}else e==="binary"?s=t.from(i):console.info("SafeBuffer.from unknown encoding: "+e);return s}if(i.byteLength,i.byteLength?i.byteLength:i.length){let e;return i instanceof ArrayBuffer&&(e=new Uint8Array(i)),t.from(e||i)}},alloc(i,s=0){return t.from(new Uint8Array(Array.from({length:i},()=>s)))},allocUnsafe(i){return t.from(new Uint8Array(Array.from({length:i})))},concat(i){if(!Array.isArray(i))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return t.from(i.reduce((s,l)=>s.concat(Array.from(l)),[]))}}),o.prototype.from=o.from,o.prototype.toString=t.prototype.toString,u.exports=o})(f,"./buffer"),f(function(u){const t=f("./root"),o={Buffer:f("./buffer")};var i={},s;if(JSON.parseAsync=JSON.parseAsync||function(e,y,c){var w;try{y(w,JSON.parse(e,c))}catch(d){y(d)}},JSON.stringifyAsync=JSON.stringifyAsync||function(e,y,c,w){var d;try{y(d,JSON.stringify(e,c,w))}catch(_){y(_)}},o.parse=function(e,y){return new Promise(function(c,w){JSON.parseAsync(e,function(d,_){d?w(d):c(_)},y)})},o.stringify=function(e,y,c){return new Promise(function(w,d){JSON.stringifyAsync(e,function(_,h){_?d(_):w(h)},y,c)})},t.window&&(o.crypto=window.crypto||window.msCrypto,o.subtle=(o.crypto||i).subtle||(o.crypto||i).webkitSubtle,o.TextEncoder=window.TextEncoder,o.TextDecoder=window.TextDecoder,o.random=e=>o.Buffer.from(o.crypto.getRandomValues(new Uint8Array(o.Buffer.alloc(e))))),!o.TextDecoder){const{TextEncoder:e,TextDecoder:y}=f((s+""==typeof k?".":"")+"./lib/text-encoding",1);o.TextDecoder=y,o.TextEncoder=e}if(!o.crypto)try{var l=f("crypto",1);Object.assign(o,{crypto:l,random:y=>o.Buffer.from(l.randomBytes(y))});const{Crypto:e}=f("@peculiar/webcrypto",1);o.ossl=o.subtle=new e({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}u.exports=o})(f,"./shim"),f(function(u){var t=f("./root"),o=f("./shim"),i={};i.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},i.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},i.ecdh={name:"ECDH",namedCurve:"P-256"},i.jwk=function(s,l){s=s.split(".");var e=s[0],y=s[1],c={kty:"EC",crv:"P-256",x:e,y,ext:!0};return c.key_ops=l?["sign"]:["verify"],l&&(c.d=l),c},i.keyToJwk=function(s){const e=s.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:e,ext:!1,alg:"A256GCM"}},i.recall={validity:12*60*60,hook:function(s){return s}},i.check=function(s){return typeof s=="string"&&s.slice(0,4)==="SEA{"},i.parse=async function(l){try{var e=typeof l=="string";return e&&l.slice(0,4)==="SEA{"&&(l=l.slice(3)),e?await o.parse(l):l}catch{}return l},t.opt=i,u.exports=i})(f,"./settings"),f(function(u){var t=f("./shim");u.exports=async function(o,i){var s=typeof o=="string"?o:await t.stringify(o),l=await t.subtle.digest({name:i||"SHA-256"},new t.TextEncoder().encode(s));return t.Buffer.from(l)}})(f,"./sha256"),f(function(u){const t=f("./shim"),o=t.subtle,i=t.ossl?t.ossl:o,s=l=>i.digest({name:"SHA-1"},new ArrayBuffer(l));u.exports=s})(f,"./sha1"),f(function(u){var t=f("./root"),o=f("./shim"),i=f("./settings"),s=f("./sha256"),l;t.work=t.work||(async(e,y,c,w)=>{try{var d=(y||{}).epub||y;if(w=w||{},d instanceof Function&&(c=d,d=l),e=typeof e=="string"?e:await o.stringify(e),(w.name||"").toLowerCase().slice(0,3)==="sha"){var _=o.Buffer.from(await s(e,w.name),"binary").toString(w.encode||"base64");if(c)try{c(_)}catch(a){console.log(a)}return _}d=d||o.random(9);var h=await(o.ossl||o.subtle).importKey("raw",new o.TextEncoder().encode(e),{name:w.name||"PBKDF2"},!1,["deriveBits"]),p=await(o.ossl||o.subtle).deriveBits({name:w.name||"PBKDF2",iterations:w.iterations||i.pbkdf2.iter,salt:new o.TextEncoder().encode(w.salt||d),hash:w.hash||i.pbkdf2.hash},h,w.length||i.pbkdf2.ks*8);e=o.random(e.length);var g=o.Buffer.from(p,"binary").toString(w.encode||"base64");if(c)try{c(g)}catch(a){console.log(a)}return g}catch(a){if(console.log(a),t.err=a,t.throw)throw a;c&&c();return}}),u.exports=t.work})(f,"./work"),f(function(u){var t=f("./root"),o=f("./shim");f("./settings"),t.name=t.name||(async(i,s)=>{try{if(i)try{i()}catch(l){console.log(l)}return}catch(l){if(console.log(l),t.err=l,t.throw)throw l;i&&i();return}}),t.pair=t.pair||(async(i,s)=>{try{var l=o.ossl||o.subtle,e=await o.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async w=>{var d={};d.priv=(await o.subtle.exportKey("jwk",w.privateKey)).d;var _=await o.subtle.exportKey("jwk",w.publicKey);return d.pub=_.x+"."+_.y,d});try{var y=await l.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async w=>{var d={};d.epriv=(await l.exportKey("jwk",w.privateKey)).d;var _=await l.exportKey("jwk",w.publicKey);return d.epub=_.x+"."+_.y,d})}catch(w){if(t.window)throw w;if(w=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw w}y=y||{};var c={pub:e.pub,priv:e.priv,epub:y.epub,epriv:y.epriv};if(i)try{i(c)}catch(w){console.log(w)}return c}catch(w){if(console.log(w),t.err=w,t.throw)throw w;i&&i();return}}),u.exports=t.pair})(f,"./pair"),f(function(u){var t=f("./root"),o=f("./shim"),i=f("./settings"),s=f("./sha256"),l;t.sign=t.sign||(async(e,y,c,w)=>{try{if(w=w||{},!(y||w).priv){if(!t.I)throw"No signing key.";y=await t.I(null,{what:e,how:"sign",why:w.why})}if(l===e)throw"`undefined` not allowed.";var d=await i.parse(e),_=w.check=w.check||d;if(t.verify&&(t.opt.check(_)||_&&_.s&&_.m)&&l!==await t.verify(_,y)){var n=await i.parse(_);if(w.raw||(n="SEA"+await o.stringify(n)),c)try{c(n)}catch(x){console.log(x)}return n}var h=y.pub,p=y.priv,g=i.jwk(h,p),a=await s(d),r=await(o.ossl||o.subtle).importKey("jwk",g,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(v=>(o.ossl||o.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},v,new Uint8Array(a))),n={m:d,s:o.Buffer.from(r,"binary").toString(w.encode||"base64")};if(w.raw||(n="SEA"+await o.stringify(n)),c)try{c(n)}catch(v){console.log(v)}return n}catch(v){if(console.log(v),t.err=v,t.throw)throw v;c&&c();return}}),u.exports=t.sign})(f,"./sign"),f(function(u){var t=f("./root"),o=f("./shim"),i=f("./settings"),s=f("./sha256"),l;t.verify=t.verify||(async(c,w,d,_)=>{try{var h=await i.parse(c);if(w===!1){var p=await i.parse(h.m);if(d)try{d(p)}catch(E){console.log(E)}return p}_=_||{};var g=w.pub||w,a=t.opt.slow_leak?await t.opt.slow_leak(g):await(o.ossl||o.subtle).importKey("jwk",i.jwk(g),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),r=await s(h.m),n,v,x,O;try{if(n=o.Buffer.from(h.s,_.encode||"base64"),v=new Uint8Array(n),x=await(o.ossl||o.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},a,v,new Uint8Array(r)),!x)throw"Signature did not match."}catch{if(t.opt.fallback)return await t.opt.fall_verify(c,w,d,_)}var A=x?await i.parse(h.m):l;if(d)try{d(A)}catch(E){console.log(E)}return A}catch(E){if(console.log(E),t.err=E,t.throw)throw E;d&&d();return}}),u.exports=t.verify;var e={};t.opt.slow_leak=c=>{if(e[c])return e[c];var w=i.jwk(c);return e[c]=(o.ossl||o.subtle).importKey("jwk",w,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),e[c]};var y=t.opt;t.opt.fall_verify=async function(c,w,d,_,h){if(h===t.opt.fallback)throw"Signature did not match";h=h||1;var p=c||"";c=t.opt.unpack(c)||c;var g=await i.parse(c),a=w.pub||w,r=await t.opt.slow_leak(a),n=h<=t.opt.fallback?o.Buffer.from(await o.subtle.digest({name:"SHA-256"},new o.TextEncoder().encode(await i.parse(g.m)))):await s(g.m),v,x,O;try{if(v=o.Buffer.from(g.s,_.encode||"base64"),x=new Uint8Array(v),O=await(o.ossl||o.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,x,new Uint8Array(n)),!O)throw"Signature did not match."}catch{try{v=o.Buffer.from(g.s,"utf8"),x=new Uint8Array(v),O=await(o.ossl||o.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,x,new Uint8Array(n))}catch{if(!O)throw"Signature did not match."}}var A=O?await i.parse(g.m):l;if(y.fall_soul=p["#"],y.fall_key=p["."],y.fall_val=c,y.fall_state=p[">"],d)try{d(A)}catch(E){console.log(E)}return A},t.opt.fallback=2})(f,"./verify"),f(function(u){var t=f("./shim"),o=f("./settings"),i=f("./sha256");const s=async(l,e,y)=>{const c=l+(e||t.random(8)).toString("utf8"),w=t.Buffer.from(await i(c),"binary"),d=o.keyToJwk(w);return await t.subtle.importKey("jwk",d,{name:"AES-GCM"},!1,["encrypt","decrypt"])};u.exports=s})(f,"./aeskey"),f(function(u){var t=f("./root"),o=f("./shim");f("./settings");var i=f("./aeskey"),s;t.encrypt=t.encrypt||(async(l,e,y,c)=>{try{c=c||{};var w=(e||c).epriv||e;if(s===l)throw"`undefined` not allowed.";if(!w){if(!t.I)throw"No encryption key.";e=await t.I(null,{what:l,how:"encrypt",why:c.why}),w=e.epriv||e}var d=typeof l=="string"?l:await o.stringify(l),_={s:o.random(9),iv:o.random(15)},h=await i(w,_.s,c).then(g=>o.subtle.encrypt({name:c.name||"AES-GCM",iv:new Uint8Array(_.iv)},g,new o.TextEncoder().encode(d))),p={ct:o.Buffer.from(h,"binary").toString(c.encode||"base64"),iv:_.iv.toString(c.encode||"base64"),s:_.s.toString(c.encode||"base64")};if(c.raw||(p="SEA"+await o.stringify(p)),y)try{y(p)}catch(g){console.log(g)}return p}catch(g){if(console.log(g),t.err=g,t.throw)throw g;y&&y();return}}),u.exports=t.encrypt})(f,"./encrypt"),f(function(u){var t=f("./root"),o=f("./shim"),i=f("./settings"),s=f("./aeskey");t.decrypt=t.decrypt||(async(l,e,y,c)=>{try{c=c||{};var w=(e||c).epriv||e;if(!w){if(!t.I)throw"No decryption key.";e=await t.I(null,{what:l,how:"decrypt",why:c.why}),w=e.epriv||e}var d=await i.parse(l),_,h,p;try{_=o.Buffer.from(d.s,c.encode||"base64"),h=o.Buffer.from(d.iv,c.encode||"base64"),p=o.Buffer.from(d.ct,c.encode||"base64");var g=await s(w,_,c).then(r=>o.subtle.decrypt({name:c.name||"AES-GCM",iv:new Uint8Array(h),tagLength:128},r,new Uint8Array(p)))}catch{if(c.encode==="utf8")throw"Could not decrypt";if(t.opt.fallback)return c.encode="utf8",await t.decrypt(l,e,y,c)}var a=await i.parse(new o.TextDecoder("utf8").decode(g));if(y)try{y(a)}catch(r){console.log(r)}return a}catch(r){if(console.log(r),t.err=r,t.throw)throw r;y&&y();return}}),u.exports=t.decrypt})(f,"./decrypt"),f(function(u){var t=f("./root"),o=f("./shim");f("./settings"),t.secret=t.secret||(async(s,l,e,y)=>{try{if(y=y||{},!l||!l.epriv||!l.epub){if(!t.I)throw"No secret mix.";l=await t.I(null,{what:s,how:"secret",why:y.why})}var c=s.epub||s,w=l.epub,d=l.epriv,_=o.ossl||o.subtle,h=i(c),p=Object.assign({public:await _.importKey(...h,!0,[])},{name:"ECDH",namedCurve:"P-256"}),g=i(w,d),a=await _.importKey(...g,!1,["deriveBits"]).then(async n=>{var v=await _.deriveBits(p,n,256),x=new Uint8Array(v),O=await _.importKey("raw",x,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return _.exportKey("jwk",O).then(({k:A})=>A)}),r=a;if(e)try{e(r)}catch(n){console.log(n)}return r}catch(n){if(console.log(n),t.err=n,t.throw)throw n;e&&e();return}});var i=(s,l)=>{var[e,y]=s.split("."),c=l?{d:l}:{};return["jwk",Object.assign(c,{x:e,y,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};u.exports=t.secret})(f,"./secret"),f(function(u){var t=f("./root");t.certify=t.certify||(async(o,i={},s,l,e={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),o=(()=>{var r=[];if(o){if((typeof o=="string"||Array.isArray(o))&&o.indexOf("*")>-1)return"*";if(typeof o=="string")return o;if(Array.isArray(o)){if(o.length===1&&o[0])return typeof o[0]=="object"&&o[0].pub?o[0].pub:typeof o[0]=="string"?o[0]:null;o.map(n=>{typeof n=="string"?r.push(n):typeof n=="object"&&n.pub&&r.push(n.pub)})}return typeof o=="object"&&o.pub?o.pub:r.length>0?r:null}})(),!o)return console.log("No certificant found.");const c=e.expiry&&(typeof e.expiry=="number"||typeof e.expiry=="string")?parseFloat(e.expiry):null,w=(i||{}).read?i.read:null,d=(i||{}).write?i.write:typeof i=="string"||Array.isArray(i)||i["+"]||i["#"]||i["."]||i["="]||i["*"]||i[">"]||i["<"]?i:null,_=(e||{}).block||(e||{}).blacklist||(e||{}).ban||{},h=_.read&&(typeof _.read=="string"||(_.read||{})["#"])?_.read:null,p=typeof _=="string"?_:_.write&&(typeof _.write=="string"||_.write["#"])?_.write:null;if(!w&&!d)return console.log("No policy found.");const g=JSON.stringify(Ae(Ae(Ae(Ae(Ae({c:o},c?{e:c}:{}),w?{r:w}:{}),d?{w:d}:{}),h?{rb:h}:{}),p?{wb:p}:{}));var y=await t.sign(g,s,null,{raw:1});if(e.raw||(y="SEA"+JSON.stringify(y)),l)try{l(y)}catch(r){console.log(r)}return y}catch(c){if(t.err=c,t.throw)throw c;l&&l();return}}),u.exports=t.certify})(f,"./certify"),f(function(u){var t=f("./shim"),o=f("./root");o.work=f("./work"),o.sign=f("./sign"),o.verify=f("./verify"),o.encrypt=f("./encrypt"),o.decrypt=f("./decrypt"),o.certify=f("./certify"),o.random=o.random||t.random,o.Buffer=o.Buffer||f("./buffer"),o.keyid=o.keyid||(async i=>{try{const s=t.Buffer.concat(i.replace(/-/g,"+").replace(/_/g,"/").split(".").map(c=>t.Buffer.from(c,"base64"))),l=t.Buffer.concat([t.Buffer.from([153,s.length/256,s.length%256]),s]),e=await sha1hash(l),y=t.Buffer.from(e,"binary");return y.toString("hex",y.length-8)}catch(s){throw console.log(s),s}}),((o.window||{}).GUN||{}).SEA=o,u.exports=o})(f,"./sea"),f(function(u){var t=f("./sea"),o,i;t.window?o=t.window.GUN||{chain:{}}:o=f((i+""==typeof k?".":"")+"./gun",1),t.GUN=o;function s(e){this._={$:this}}s.prototype=function(){function e(){}return e.prototype=o.chain,new e}(),s.prototype.constructor=s,o.chain.user=function(e){var y=this,c=y.back(-1),w;if(e)return e=t.opt.pub((e._||"")["#"])||e,c.get("~"+e);if(w=c.back("user"))return w;var c=c._,d=c,_=d.opt.uuid||l;return(d=(w=d.user=y.chain(new s))._).opt={},d.opt.uuid=function(h){var p=_(),g=c.user;return!g||!(g=g.is)||!(g=g.pub)||(p="~"+g+"/"+p,h&&h.call&&h(null,p)),p},w};function l(){return o.state().toString(36).replace(".","")}o.User=s,s.GUN=o,s.SEA=o.SEA=t,u.exports=s})(f,"./user"),f(function(u){var t,o=""+t!=typeof window?window.Gun||{chain:{}}:f((""+t==typeof k?".":"")+"./gun",1);o.chain.then=function(i,s){var l=this,e=new Promise(function(y,c){l.once(y,s)});return i?e.then(i):e}})(f,"./then"),f(function(u){var t=f("./user"),o=t.SEA,i=t.GUN,s=function(){};t.prototype.create=function(...l){var e=typeof l[0]=="object"&&(l[0].pub||l[0].epub)?l[0]:typeof l[1]=="object"&&(l[1].pub||l[1].epub)?l[1]:null,y=e&&(e.pub||e.epub)?e.pub:typeof l[0]=="string"?l[0]:null,c=e&&(e.pub||e.epub)?e:y&&typeof l[1]=="string"?l[1]:null,w=l.filter(r=>typeof r=="function")[0]||null,d=l&&l.length>1&&typeof l[l.length-1]=="object"?l[l.length-1]:{},_=this,h=_._,p=_.back(-1);if(w=w||s,d=d||{},d.check!==!1){var g;if(y||(g="No user."),(c||"").length<8&&(g="Password too short!"),g)return w({err:i.log(g)}),_}if(h.ing)return(w||s)({err:i.log("User is already being created or authenticated!"),wait:!0}),_;h.ing=!0;var a={};return a.a=function(r){if(a.pubs=r,r&&!d.already){var n={err:i.log("User already created!")};h.ing=!1,(w||s)(n),_.leave();return}a.salt=String.random(64),o.work(c,a.salt,a.b)},a.b=function(r){a.proof=r,e?a.c(e):o.pair(a.c)},a.c=function(r){var n;a.pair=r||{},(n=h.root.user)&&(n._.sea=r,n.is={pub:r.pub,epub:r.epub,alias:y}),a.data={pub:r.pub},a.d()},a.d=function(){a.data.alias=y,a.e()},a.e=function(){a.data.epub=a.pair.epub,o.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},a.proof,a.f,{raw:1})},a.f=function(r){a.data.auth=JSON.stringify({ek:r,s:a.salt}),a.g(a.data.auth)},a.g=function(r){var n;a.data.auth=a.data.auth||r,p.get(n="~"+a.pair.pub).put(a.data).on(a.h);var v={};v[n]={"#":n},p.get("~@"+y).put(v).get(n).on(a.i)},a.h=function(r,n,v,x){x.off(),a.h.ok=1,a.i()},a.i=function(r,n,v,x){x&&(a.i.ok=1,x.off()),!(!a.h.ok||!a.i.ok)&&(h.ing=!1,w({ok:0,pub:a.pair.pub}),s===w&&(e?_.auth(e):_.auth(y,c)))},p.get("~@"+y).once(a.a),_},t.prototype.leave=function(l,e){var y=this,c=y.back(-1)._.user;if(c&&(delete c.is,delete c._.is,delete c._.sea),o.window)try{var w={};w=window.sessionStorage,delete w.recall,delete w.pair}catch{}return y}})(f,"./create"),f(function(u){var t=f("./user"),o=t.SEA,i=t.GUN,s=function(){};t.prototype.auth=function(...e){var y=typeof e[0]=="object"&&(e[0].pub||e[0].epub)?e[0]:typeof e[1]=="object"&&(e[1].pub||e[1].epub)?e[1]:null,c=!y&&typeof e[0]=="string"?e[0]:null,w=c&&typeof e[1]=="string"?e[1]:null,d=e.filter(n=>typeof n=="function")[0]||null,_=e&&e.length>1&&typeof e[e.length-1]=="object"?e[e.length-1]:{},h=this,p=h._,g=h.back(-1);if(p.ing)return(d||s)({err:i.log("User is already being created or authenticated!"),wait:!0}),h;p.ing=!0;var a={},r;return a.a=function(n){if(!n)return a.b();if(!n.pub){var v=[];return Object.keys(n).forEach(function(x){x!="_"&&v.push(n[x])}),a.b(v)}if(a.name)return a.f(n);a.c((a.data=n).auth)},a.b=function(n){var v=(a.list=(a.list||[]).concat(n||[])).shift();if(r===v)return a.name?a.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):a.err("Wrong user or password.");g.get(v).once(a.a)},a.c=function(n){if(r===n)return a.b();if(typeof n=="string")return a.c(l(n));o.work(w,(a.auth=n).s,a.d,a.enc)},a.d=function(n){o.decrypt(a.auth.ek,n,a.e,a.enc)},a.e=function(n){if(r===n)return a.enc?(a.enc=null,a.b()):(a.enc={encode:"utf8"},a.c(a.auth));a.half=n,a.f(a.data)},a.f=function(n){var v=a.half||{},x=a.data||{};a.g(a.lol={pub:n.pub||x.pub,epub:n.epub||x.epub,priv:n.priv||v.priv,epriv:n.epriv||v.epriv})},a.g=function(n){if(!n||!n.pub||!n.epub)return a.b();a.pair=n;var v=g._.user,x=v._;x.tag;var O=x.opt;x=v._=g.get("~"+n.pub)._,x.opt=O,v.is={pub:n.pub,epub:n.epub,alias:c||n.pub},x.sea=a.pair,p.ing=!1;try{w&&r==(l(p.root.graph["~"+n.pub].auth)||"")[":"]&&(_.shuffle=_.change=w)}catch{}if(_.change?a.z():(d||s)(x),o.window&&(h.back("user")._.opt||_).remember)try{var A={};A=window.sessionStorage,A.recall=!0,A.pair=JSON.stringify(n)}catch{}try{g._.tag.auth?g._.on("auth",x):setTimeout(function(){g._.on("auth",x)},1)}catch(E){i.log("Your 'auth' callback crashed with:",E)}},a.z=function(){a.salt=String.random(64),o.work(_.change,a.salt,a.y)},a.y=function(n){o.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},n,a.x,{raw:1})},a.x=function(n){a.w(JSON.stringify({ek:n,s:a.salt}))},a.w=function(n){if(_.shuffle){console.log("migrate core account from UTF8 & shuffle");var v={};Object.keys(a.data).forEach(function(x){v[x]=a.data[x]}),delete v._,v.auth=n,g.get("~"+a.pair.pub).put(v)}g.get("~"+a.pair.pub).get("auth").put(n,d||s)},a.err=function(n){var v={err:i.log(n||"User cannot be found!")};p.ing=!1,(d||s)(v)},a.plugin=function(n){if(!(a.name=n))return a.err();var v=[n];n[0]!=="~"&&(v[1]="~"+n,v[2]="~@"+n),a.b(v)},y?a.g(y):c?g.get("~@"+c).once(a.a):!c&&!w&&o.name(a.plugin),h};function l(e){if(typeof e!="string")return e;try{e=JSON.parse(e)}catch{e={}}return e}})(f,"./auth"),f(function(u){var t=f("./user"),o=t.SEA;t.GUN,t.prototype.recall=function(i,s){var l=this,e=l.back(-1);if(i=i||{},i&&i.sessionStorage){if(o.window)try{var y={};y=window.sessionStorage,y&&(e._.opt.remember=!0,(l.back("user")._.opt||i).remember=!0,(y.recall||y.pair)&&e.user().auth(JSON.parse(y.pair),s))}catch{}return l}return l}})(f,"./recall"),f(function(u){var t=f("./user"),o=t.SEA,i=t.GUN,s=function(){};t.prototype.pair=function(){var l=this,e;try{e=new Proxy({DANGER:"\u2620"},{get:function(y,c,w){if(!(!l.is||!(l._||"").sea))return l._.sea[c]}})}catch{}return e},t.prototype.delete=async function(l,e,y){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var c=this;c.back(-1);var w=c.back("user");try{w.auth(l,e,function(d){var _=(w.is||{}).pub;w.map().once(function(){this.put(null)}),w.leave(),(y||s)({ok:0})})}catch(d){i.log("User.delete failed! Error:",d)}return c},t.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const l=this.back(-1);try{return await authRecall(l),l._.user._}catch{const y="No session!";throw i.log(y),{err:y}}},t.prototype.trust=async function(l){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),i.is(l)&&l.get("pub").get((e,y)=>{console.log(e,y)}),l.get("trust").get(path).put(theirPubkey)},t.prototype.grant=function(l,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,c=y.back(-1).user(),w=c._.sea,d="";return y.back(function(_){_.is||(d+=_.get||"")}),async function(){var _,h=await c.get("grant").get(w.pub).get(d).then();h=await o.decrypt(h,w),h||(h=o.random(16).toString(),_=await o.encrypt(h,w),c.get("grant").get(w.pub).get(d).put(_));var p=l.get("pub").then(),g=l.get("epub").then();p=await p,g=await g;var a=await o.secret(g,w);_=await o.encrypt(h,a),c.get("grant").get(p).get(d).put(_,e)}(),y},t.prototype.secret=function(l,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,c=y.back(-1).user(),w=c.pair(),d="";return y.back(function(_){_.is||(d+=_.get||"")}),async function(){var _,h=await c.get("trust").get(w.pub).get(d).then();h=await o.decrypt(h,w),h||(h=o.random(16).toString(),_=await o.encrypt(h,w),c.get("trust").get(w.pub).get(d).put(_)),_=await o.encrypt(l,h),y.put(_,e)}(),y},u.exports=t})(f,"./share"),f(function(u){var t=f("./sea"),o=f("./settings"),i=function(){},s,l=""+s!=typeof window?window.Gun||{on:i}:f((""+s==typeof k?".":"")+"./gun",1);l.on("opt",function(h){h.sea||(h.sea={own:{}},h.on("put",e,h)),this.to.next(h)});function e(h){var p=this,g=p.as,a=h.put,r=a["#"],n=a["."],v=a[":"],x=a[">"],O=h["#"],A;if(!(!r||!n)){if((h._||"").faith&&(g.opt||"").faith&&typeof h._=="function"){t.opt.pack(a,function(S){t.verify(S,!1,function(j){a["="]=t.opt.unpack(j),p.to.next(h)})});return}var E=function(S){g.on("in",{"@":O,err:h.err=S})};if((h._||"").DBG&&((h._||"").DBG.c=+new Date),0<=r.indexOf("<?")&&(A=parseFloat(r.split("<?")[1]||""),A&&x<l.state()-A*1e3)){(A=h._)&&A.stun&&A.stun--;return}if(r==="~@"){e.alias(p,h,v,n,r,g,E);return}if(r.slice(0,2)==="~@"){e.pubs(p,h,v,n,r,g,E);return}if(A=t.opt.pub(r)){e.pub(p,h,v,n,r,g,E,g.user||"",A);return}if(0<=r.indexOf("#")){e.hash(p,h,v,n,r,g,E);return}e.any(p,h,v,n,r,g,E,g.user||"")}}e.hash=function(h,p,g,a,r,n,v){t.work(g,null,function(x){if(x&&x===a.split("#").slice(-1)[0])return h.to.next(p);v("Data hash not same as hash!")},{name:"SHA-256"})},e.alias=function(h,p,g,a,r,n,v){if(!g)return v("Data must exist!");if("~@"+a===c(g))return h.to.next(p);v("Alias not same!")},e.pubs=function(h,p,g,a,r,n,v){if(!g)return v("Alias must exist!");if(a===c(g))return h.to.next(p);v("Alias not same!")},e.pub=async function(h,p,g,a,r,n,v,x,O){var A;const E=await o.parse(g)||{},S=(j,m,b)=>{if(j.m&&j.s&&m&&O)return t.verify(j,O,T=>{if(s!==T&&s!==T.e&&p.put[">"]&&p.put[">"]>parseFloat(T.e))return v("Certificate expired.");if(s!==T&&T.c&&T.w&&(T.c===m||T.c.indexOf("*")>-1)){let I=r.indexOf("/")>-1?r.replace(r.substring(0,r.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const N=Array.isArray(T.w)?T.w:typeof T.w=="object"||typeof T.w=="string"?[T.w]:[];for(const P of N)if(String.match(I,P["#"])&&String.match(a,P["."])||!P["."]&&String.match(I,P["#"])||!P["#"]&&String.match(a,P["."])||String.match(I?I+"/"+a:a,P["#"]||P)){if(P["+"]&&P["+"].indexOf("*")>-1&&I&&I.indexOf(m)==-1&&a.indexOf(m)==-1)return v(`Path "${I}" or key "${a}" must contain string "${m}".`);if(T.wb&&(typeof T.wb=="string"||(T.wb||{})["#"])){var D=h.as.root.$.back(-1);return typeof T.wb=="string"&&T.wb.slice(0,1)!=="~"&&(D=D.get("~"+O)),D.get(T.wb).get(m).once(J=>J&&(J===1||J===!0)?v(`Certificant ${m} blocked.`):b(T))}return b(T)}return v("Certificate verification fail.")}})};if(a==="pub"&&"~"+O===r)return g===O?h.to.next(p):v("Account not same!");if((A=x.is)&&A.pub&&!E["*"]&&!E["+"]&&(O===A.pub||O!==A.pub&&((p._.msg||{}).opt||{}).cert)){t.opt.pack(p.put,j=>{t.sign(j,x._.sea,async function(m){if(s===m)return v(t.err||"Signature fail.");if(p.put[":"]={":":A=t.opt.unpack(m.m),"~":m.s},p.put["="]=A,O===x.is.pub){(A=c(g))&&((n.sea.own[A]=n.sea.own[A]||{})[O]=1),JSON.stringifyAsync(p.put[":"],function(b,T){return b?v(b||"Stringify error."):(p.put[":"]=T,h.to.next(p))});return}if(O!==x.is.pub&&((p._.msg||{}).opt||{}).cert){const b=await o.parse(p._.msg.opt.cert);b&&b.m&&b.s&&S(b,x.is.pub,T=>{p.put[":"]["+"]=b,p.put[":"]["*"]=x.is.pub,JSON.stringifyAsync(p.put[":"],function(D,I){return D?v(D||"Stringify error."):(p.put[":"]=I,h.to.next(p))})})}},{raw:1})});return}t.opt.pack(p.put,j=>{t.verify(j,E["*"]||O,function(m){var b;if(m=t.opt.unpack(m),s===m)return v("Unverified data.");if((b=c(m))&&O===t.opt.pub(b)&&((n.sea.own[b]=n.sea.own[b]||{})[O]=1),E["+"]&&E["+"].m&&E["+"].s&&E["*"])S(E["+"],E["*"],T=>(p.put["="]=m,h.to.next(p)));else return p.put["="]=m,h.to.next(p)})})},e.any=function(h,p,g,a,r,n,v,x){if(n.opt.secure)return v("Soul missing public key at '"+a+"'.");n.on("secure",function(O){if(this.off(),!n.opt.secure)return h.to.next(O);v("Data cannot be changed.")}).on.on("secure",p)};var y=l.valid,c=function(h,p){return typeof(p=y(h))=="string"&&p};(l.state||"").ify;var w=/[^\w_-]/;t.opt.pub=function(h){if(!!h&&(h=h.split("~"),!(!h||!(h=h[1]))&&(h=h.split(w).slice(0,2),!(!h||h.length!=2)&&(h[0]||"")[0]!=="@")))return h=h.slice(0,2).join("."),h},t.opt.stringy=function(h){},t.opt.pack=function(h,p,g,a,r){var n,v;if(t.opt.check(h))return p(h);h&&h["#"]&&h["."]&&h[">"]&&(n=h[":"],v=1),JSON.parseAsync(v?n:h,function(x,O){var A=s!==(O||"")[":"]&&(O||"")["~"];if(!A){p(h);return}p({m:{"#":r||h["#"],".":g||h["."],":":(O||"")[":"],">":h[">"]||l.state.is(a,g)},s:A})})};var d=t.opt;t.opt.unpack=function(h,p,g){var a;if(s!==h){if(h&&s!==(a=h[":"]))return a;if(p=p||d.fall_key,!g&&d.fall_val&&(g={},g[p]=d.fall_val),!(!p||!g)){if(h===g[p]||!t.opt.check(g[p]))return h;var r=g&&g._&&g._["#"]||d.fall_soul,n=l.state.is(g,p)||d.fall_state;if(h&&h.length===4&&r===h[0]&&p===h[1]&&_(n)===_(h[3]))return h[2];if(n<t.opt.shuffle_attack)return h}}},t.opt.shuffle_attack=15463296e5;var _=Math.floor})(f,"./index")})()})(tt);var ge=tt.exports,nt=typeof window!="undefined"?window.Gun:we.exports;nt.chain.promise=function($){var f=this,$=$||function(k){return k};return new Promise(function(k,u){f.once(function(t,o){k({put:t,get:o,gun:this})})}).then($)};nt.chain.then=function($){var f=this,k=new Promise((u,t)=>{f.once(function(o,i){u(o,i)})});return $?k.then($):k};var rt={exports:{}};(function(){function $(){var o=function(i,s,l){if(o.unit=0,!l&&u!==s&&(o.last=""+i<o.last?o.last:""+i,delete(o.$||{})[t]),l=l||o.$||(o.$={}),!i&&Object.keys(l).length)return l;i=""+i;for(var e=0,y=i.length-1,c=i[e],w,d;!(w=l[c])&&e<y;)c+=i[++e];if(w)if(e==y){if(u===s)return u===(d=w[""])?w:(o.unit=1)&&d;w[""]=s}else return u!==s&&delete w[t],o(i.slice(++e),s,w||(w={}));else{if(!f(l,function(_,h){var p=0,g="";if((h||"").length)for(;h[p]==i[p];)g+=h[p++];if(g){if(u===s)return p<=y?void 0:((d||(d={}))[h.slice(p)]=_,_);var a={};if(a[h.slice(p)]=_,p=i.slice(p),p===""?a[""]=s:(a[p]={})[""]=s,l[g]=a,$.debug&&""+g=="undefined"){console.log(0,g);debugger}return delete l[h],!0}})){if(u===s)return;if((l[c]||(l[c]={}))[""]=s,$.debug&&""+c=="undefined"){console.log(1,c);debugger}}if(u===s)return d}};return o}if($.map=function o(i,s,l,e){e=e||[];var y=typeof i=="function"?i.$||{}:i;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!y){if(typeof y=="string"){if($.debug)throw["BUG:",i,s,l,e];return}var c=(y[t]||k).sort||(y[t]=function A(){return A.sort=Object.keys(y).sort(),A}()).sort,w;l=l===!0?{branch:!0}:l||{},(w=l.reverse)&&(c=c.slice(0).reverse());for(var d=l.start,_=l.end,h="\uFFFF",p=0,g=c.length;p<g;p++){var a=c[p],r=y[a],n,v,x;if(!(!r||a===""||t===a)&&(v=e.slice(0),v.push(a),x=v.join(""),!(u!==d&&x<(d||"").slice(0,x.length))&&!(u!==_&&(_||h)<x))){if(w&&(n=o(r,s,l,v),u!==n))return n;if(u!==(n=r[""])){var O=1;if(u!==d&&x<(d||"")&&(O=0),u!==_&&x>(_||h)&&(O=0),O&&(n=s(n,x,a,e),u!==n))return n}else if(l.branch&&(n=s(u,x,a,e),u!==n))return n;if(e=v,!w&&(n=o(r,s,l,e),u!==n))return n;e.pop()}}}},typeof window!="undefined")window.Radix=$;else try{rt.exports=$}catch{}var f=$.object=function(o,i,s){for(var l in o)if(!!o.hasOwnProperty(l)&&(s=i(o[l],l))!==u)return s},k={},u,t=String.fromCharCode(24)})();var it={exports:{}},Zt={exports:{}};(function($){(function(){var f={},k,u=setTimeout.turn||typeof setImmediate!=""+k&&setImmediate||setTimeout;f.parseAsync=function(o,i,s,l){if(typeof o!="string"){try{i(k,JSON.parse(o))}catch(c){i(c)}return}var e={i:0,text:o,done:i,l:o.length,up:[]};l=l||1024*32,y();function y(){for(var c=e.text,w=e.i,d=e.l,_=0,h=e.w,p,g;_++<l;){var a=c[w++];if(w>d){e.end=!0;break}if(h)w=c.indexOf('"',w-1),a=c[w],g=c[w-1]=="\\",p=p||g,a=='"'&&!g&&(h=k,g=e.s,e.a?(g=c.slice(e.sl,w),(p||1+g.indexOf("\\u"))&&(g=JSON.parse('"'+g+'"')),e.at instanceof Array?e.at.push(e.s=g):(e.at||(e.end=_=l,g=k),(e.at||{})[e.s]=e.s=g)):(e.s=c.slice(e.sl,w),(p||1+e.s.indexOf("\\u"))&&(e.s=JSON.parse('"'+e.s+'"'))),e.a=p=k),++w;else switch(a){case'"':e.sl=w,h=!0;break;case":":e.ai=w,e.a=!0;break;case",":(e.a||e.at instanceof Array)&&(g=c.slice(e.ai,w-1))&&k!==(g=t(g))&&(e.at instanceof Array?e.at.push(g):e.at[e.s]=g),e.a=k,e.at instanceof Array&&(e.a=!0,e.ai=w);break;case"{":e.up.push(e.at||(e.at={})),e.at instanceof Array?e.at.push(e.at={}):k!==(g=e.s)&&(e.at[g]=e.at={}),e.a=k;break;case"}":e.a&&(g=c.slice(e.ai,w-1))&&k!==(g=t(g))&&(e.at instanceof Array?e.at.push(g):(e.at||(e.end=_=l,g=k),(e.at||{})[e.s]=g)),e.a=k,e.at=e.up.pop();break;case"[":k!==(g=e.s)?(e.up.push(e.at),e.at[g]=e.at=[]):e.at||e.up.push(e.at=[]),e.a=!0,e.ai=w;break;case"]":e.a&&(g=c.slice(e.ai,w-1))&&k!==(g=t(g))&&(e.at instanceof Array?e.at.push(g):e.at[e.s]=g),e.a=k,e.at=e.up.pop();break}}if(e.s=k,e.i=w,e.w=h,e.end){if(g=e.at,k===g)try{g=JSON.parse(o)}catch(r){return e.done(r)}e.done(k,g)}else u(y)}};function t(o){var i=parseFloat(o);if(!isNaN(i))return i;if(o=o.trim(),o=="true")return!0;if(o=="false")return!1;if(o=="null")return null}f.stringifyAsync=function(o,i,s,l,e){e=e||{},e.text=e.text||"",e.up=[e.at={d:o}],e.done=i,e.i=0;var y=0;c();function c(){var w=e.at,d=w.d,_="",h;switch(w.i&&w.i-w.j>0&&(_+=","),k!==(h=w.k)&&(_+=JSON.stringify(h)+":"),typeof d){case"boolean":_+=""+d;break;case"string":_+=JSON.stringify(d);break;case"number":_+=d;break;case"object":if(!d){_+="null";break}if(d instanceof Array){_+="[",w={i:-1,as:d,up:w,j:0},w.l=d.length,e.up.push(e.at=w);break}if(typeof(d||"").toJSON!="function"){_+="{",w={i:-1,ok:Object.keys(d).sort(),as:d,up:w,j:0},w.l=w.ok.length,e.up.push(e.at=w);break}if(h=d.toJSON()){_+=h;break}case"function":if(w.as instanceof Array){_+="null";break}default:_="",w.j++}for(e.text+=_;1+w.i>=w.l;)e.text+=w.ok?"}":"]",w=e.at=w.up;if(++w.i<w.l){if((h=w.ok)?w.d=w.as[w.k=h[w.i]]:w.d=w.as[w.i],++y<9)return c();y=0,u(c);return}e.done(k,e.text)}},typeof window!=""+k&&(window.YSON=f);try{""+k!="object"&&($.exports=f)}catch{}typeof JSON!=""+k&&(JSON.parseAsync=f.parseAsync,JSON.stringifyAsync=f.stringifyAsync)})()})(Zt);(function(){function $(u){u=u||{},u.log=u.log||console.log,u.file=String(u.file||"radata");var t=($.has||($.has={}))[u.file];if(t)return t;u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.until=u.until||u.wait||250,u.batch=u.batch||10*1e3,u.chunk=u.chunk||1024*1024*1,u.code=u.code||{},u.code.from=u.code.from||"!",u.jsonify=!0;function o(p){return encodeURIComponent(p).replace(/\*/g,"%2A")}function i(p){return e!==p&&(!p||typeof p!="object")}var s=""+e==typeof setImmediate?setTimeout:setImmediate,l=setTimeout.turn||s,e,y=k.object,c=0;if(!u.store)return u.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!u.store.put)return u.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!u.store.get)return u.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");!u.store.list;var w=JSON.parseAsync||function(p,g,a){var r;try{g(r,JSON.parse(p,a))}catch(n){g(n)}},d=function(p,g,a,r,n){if(typeof g=="function"){var v=a||{};a=g,d.read(p,a,v,n||r);return}d.save(p,g,a,r,n)};d.save=function(p,g,a,r,n){var v={key:p},x,O;v.find=function(A){var E;if(v.file=A||(A=u.code.from),n&&(n=n[A]=n[A]||{}),n&&(n.sf=n.sf||+new Date),E=d.disk[A]){v.mix(e,E);return}d.parse(A,v.mix,e,n)},v.mix=function(A,E){if(n&&(n.sml=+new Date),n&&(n.sm=n.sm||+new Date),v.err=A||v.err){a(A);return}var S=v.file=(E||"").file||v.file,j;if(!E&&S!==u.code.from){d.find.bad(S),d.save(p,g,a,r);return}if((E=d.disk[S]||(d.disk[S]=E||k())).file||(E.file=S),u.compare&&(g=u.compare(E(p),g,p,S),e===g)){a(A,-1);return}if((v.disk=E)(p,g),r&&((j=(j=E.tags||(E.tags={}))[r]||(j[r]=d.tags[r]||(d.tags[r]={})))[S]||(j[S]=d.one[r]||(d.one[r]=a)),a=null),n&&(n.st=n.st||+new Date),E.Q){a&&E.Q.push(a);return}E.Q=a?[a]:[],E.to=setTimeout(v.write,u.until)},v.write=function(){n&&(n.sto=n.sto||+new Date);var A=x=v.file,E=v.disk;O=v.q=E.Q,v.tags=E.tags,delete E.Q,delete d.disk[A],delete E.tags,d.write(A,E,v.ack,e,n)},v.ack=function(A,E){n&&(n.sa=n.sa||+new Date),n&&(n.sal=O.length);var S,j;for(var m in d.tags)if(!!d.tags.hasOwnProperty(m)){var b=d.tags[m];if(!((j=d.disk[x])&&(j=j.tags)&&j[b])){S=b[x],delete b[x];var T;for(var D in b)if(b.hasOwnProperty(D)){T=!0;break}T||(delete d.tags[b],S&&S(A,E))}}!O&&(O="");for(var I=O.length,N=0,P=+new Date;N<I;N++)(S=O[N])&&S(A,E);console.STAT&&console.STAT(P,+new Date-P,"rad acks",o(v.file)),console.STAT&&console.STAT(P,O.length,"rad acks #",o(v.file))},a||(a=function(A,E){}),d.find(p,v.find)},d.disk={},d.one={},d.tags={};var _=0;d.write=function(p,g,a,r,n){if(!g){a("No radix!");return}r=typeof r=="object"?r:{force:r};var v=function(){},x,O;if(v.text="",v.file=p=g.file||(g.file=p),!p){a("What file?");return}if(v.write=function(){var A=g.raw=v.text;d.disk[p=g.file||v.file||p]=g;var E=+new Date;n&&(n.wd=E),d.find.add(p,function(j){if(n&&(n.wa=+new Date),j){a(j);return}u.store.put(o(p),A,function(b,T){n&&(n.wp=+new Date),console.STAT&&console.STAT(E,c=+new Date-E,"wrote disk",JSON.stringify(p),++_,"total all writes."),a(b,T||1),g.Q||delete d.disk[p]})})},v.split=function(){var A=+new Date;n&&(n.wf=A),v.text="",v.count||(v.count=0,k.map(g,function(){v.count++})),n&&(n.wfc=v.count),v.limit=Math.ceil(v.count/2);var E=v.count;return v.count=0,n&&(n.wf1=+new Date),v.sub=k(),k.map(g,v.slice,{reverse:1}),n&&(n.wf2=+new Date),d.write(v.end,v.sub,v.both,r),n&&(n.wf3=+new Date),v.hub=k(),k.map(g,v.stop),n&&(n.wf4=+new Date),d.write(g.file,v.hub,v.both,r),n&&(n.wf5=+new Date),console.STAT&&console.STAT(A,+new Date-A,"rad split",o(g.file),E),!0},v.slice=function(A,E){if(v.sub(v.end=E,A),v.limit<=++v.count)return!0},v.stop=function(A,E){if(E>=v.end)return!0;v.hub(E,A)},v.both=function(A,E){if(n&&(n.wfd=+new Date),O){a(A||O);return}if(x){a(A,E);return}x=!0,O=A},v.each=function(A,E,S,j){if(e!==A&&v.count++,u.max<=(A||"").length)return a("Data too big!"),!0;var m=$.encode(j.length)+"#"+$.encode(S)+(e===A?"":":"+$.encode(A))+`
`;if(u.chunk<v.text.length+m.length&&1<v.count&&!r.force)return v.split();v.text+=m},u.jsonify){d.write.jsonify(v,g,a,r,n);return}k.map(g,v.each,!0)||v.write()},d.write.jsonify=function(p,g,a,r,n){var v,x=+new Date;n&&(n.w=x);try{v=JSON.stringify(g.$)}catch{a("Cannot radisk!");return}if(n&&(n.ws=+new Date),console.STAT&&console.STAT(x,+new Date-x,"rad stringified JSON"),u.chunk<v.length&&!r.force){var O=0;if(k.map(g,function(){if(O++)return!0}),O>1)return p.split()}p.text=v,p.write()},d.range=function(p,g){if(!(!p||!g)){if(e===g.start&&e===g.end||i(p))return p;var a=k();return k.map(p,function(r,n){a(n,r)},g),a("")}},function(){d.read=function(p,g,a,r){a=a||{};var n={key:p};n.find=function(v){var x;if(n.file=v||(v=u.code.from),r&&(r=r[v]=r[v]||{}),r&&(r.rf=r.rf||+new Date),x=d.disk[n.file=v]){n.check(e,x);return}d.parse(v,n.check,e,r)},n.get=function(v,x,O){if(r&&(r.rgl=+new Date),r&&(r.rg=r.rg||+new Date),n.err=v||n.err){g(v);return}var A=n.file=(x||"").file||n.file;if(!x&&A!==u.code.from){d.find.bad(A),d.read(p,g,a);return}if(x=d.disk[A]||(d.disk[A]=x),!x){g(A===u.code.from?e:"No file!");return}x.file||(x.file=A);var E=d.range(x(p),a);if(r&&(r.rr=+new Date),a.unit=x.unit,a.chunks=(a.chunks||0)+1,a.parsed=(a.parsed||0)+((O||"").parsed||a.chunks*u.chunk),a.more=1,a.next=e,k.map(d.list,function(b,T){if(!(!b||A===T))return a.next=T,1},a.reverse?{reverse:1,end:A}:{start:A}),r&&(r.rl=+new Date),a.next||(a.more=0),a.next&&(!a.reverse&&(p<a.next&&a.next.indexOf(p)!=0||e!==a.end&&(a.end||"\uFFFF")<a.next)&&(a.more=0),a.reverse&&(p>a.next&&p.indexOf(a.next)!=0||e!==a.start&&(a.start||"")>a.next&&A<=a.start)&&(a.more=0)),!a.more){g(n.err,E,a);return}if(E&&g(n.err,E,a),!(a.parsed>=a.limit)){var S=+new Date;r&&(r.rm=S);var j=a.next;s(function(){console.STAT&&console.STAT(S,+new Date-S,"rad more"),d.parse(j,n.check)},0)}},n.check=function(v,x,O){if(n.get(v,x,O),!(!x||x.check)){x.check=1;var A=+new Date;(O||(O={})).file||(O.file=n.file),k.map(x,function(E,S){d.find(S,function(j){if((j||(j=u.code.from))!==O.file){var m=(""+Math.random()).slice(-3);l(function(){d.save(S,E,function b(T,D){if(T){d.save(S,E,b);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",m,o(S),o(O.file),o(j))})},0)}})}),console.STAT&&console.STAT(A,+new Date-A,"rad check")}},d.find(p||(a.reverse?a.end||"":a.start||""),n.find)}}(),function(){var p=0,g={},a=String.fromCharCode(31);d.parse=function(r,n,v,x){var O;if(!r)return n();if(O=g[r]){O.push(n);return}O=g[r]=[n];var A=function(){},E={file:r};(A.disk=k()).file=r,A.read=function(j,m){if(x&&(x.rpg=+new Date),console.STAT&&console.STAT(S,+new Date-S,"read disk",JSON.stringify(r),++p,"total all parses."),(A.err=j)||(A.not=!m)){delete g[r],A.map(O,A.ack);return}if(typeof m!="string"){try{u.max<=m.length?A.err="Chunk too big!":m=m.toString()}catch(b){A.err=b}if(A.err){delete g[r],A.map(O,A.ack);return}}if(E.parsed=m.length,x&&(x.rpl=E.parsed),x&&(x.rpa=O.length),S=+new Date,!(u.jsonify||m[0]==="{")){A.radec(j,m);return}w(m,function(b,T){if(!b){delete g[r],A.disk.$=T,console.STAT&&(c=+new Date-S)>9&&console.STAT(S,c,"rad parsed JSON"),x&&(x.rpd=+new Date),A.map(O,A.ack);return}if(m[0]==="{"){delete g[r],A.err="JSON error!",A.map(O,A.ack);return}A.radec(b,m)})},A.map=function(){if(!(!O||!O.length)){for(var j=+new Date,m=A.err,b=A.not?e:A.disk,T=0,D;T<9&&(D=O[T++]);)D(m,b,E);console.STAT&&console.STAT(j,+new Date-j,"rad packs",o(r)),console.STAT&&console.STAT(j,T,"rad packs #",o(r)),!!(O=O.slice(T)).length&&l(A.map,0)}},A.ack=function(j){if(!!j){if(A.err||A.not){j(A.err,e,E);return}j(e,A.disk,E)}},A.radec=function(j,m){delete g[r],S=+new Date;var b=A.split(m),T=[],D,I,N;if(!b||b[1]!==0){A.err="File '"+r+"' does not have root radix! ",A.map(O,A.ack);return}for(;b;)I=N=e,D=b[1],b=A.split(b[2])||"",b[0]=="#"&&(I=b[1],T=T.slice(0,D),D<=T.length&&T.push(I)),b=A.split(b[2])||"",b[0]!=`
`&&((b[0]=="="||b[0]==":")&&(N=b[1]),e!==I&&e!==N&&A.disk(T.join(""),N),b=A.split(b[2]));console.STAT&&console.STAT(S,+new Date-S,"parsed RAD"),A.map(O,A.ack)},A.split=function(j){if(!!j){var m=[],b={},T=-1,D="";if(T=j.indexOf(a),!!j[T])return D=j.slice(0,T),m[0]=D,m[1]=$.decode(j.slice(T),b),m[2]=j.slice(T+b.i),m}},d.disk&&(v||(v=(d.disk[r]||"").raw));var S=+new Date;if(x&&(x.rp=S),v)return l(function(){A.read(e,v)},0);u.store.get(o(r),A.read)}}(),function(){var p,g=String.fromCharCode(28),a;d.find=function(v,x){if(!p){if(a){a.push([v,x]);return}a=[[v,x]],d.parse(g,r);return}k.map(d.list=p,function(O,A){if(!!O)return x(A)||!0},{reverse:1,end:v})||x(u.code.from)},d.find.add=function(v,x){var O=p(v);if(O||v===g){x(e,1);return}p(v,1),x.found=(x.found||0)+1,d.write(g,p,function(A,E){if(A){x(A);return}x.found=(x.found||0)-1,x.found===0&&x(e,1)},!0)},d.find.bad=function(v,x){p(v,0),d.write(g,p,x||h)};function r(v,x){if(v){u.log("list",v),setTimeout(function(){d.parse(g,r)},1e3);return}if(x){n(x);return}if(p=p||x||k(),!u.store.list){n(p);return}u.store.list(function(O){if(!O){n(p);return}d.find.add(O,h)})}function n(v,x){p=p||v,p.file=g,x=a,a=null,y(x,function(O){d.find(O[0],O[1])})}}();try{!f.window&&require("./radmigtmp")(d)}catch{}var h=function(){},e;return $.has[u.file]=d,d}if(function(){var u=String.fromCharCode(31);$.encode=function(t,o,i){i=i||u;var s=i,l;if(typeof t=="string"){for(var e=t.indexOf(i);e!=-1;)s+=i,e=t.indexOf(i,e+1);return s+'"'+t+i}else{if(t&&t["#"]&&Object.keys(t).length==1)return s+"#"+l+s;if(typeof t=="number")return s+"+"+(t||0)+s;if(t===null)return s+" "+s;if(t===!0)return s+"+"+s;if(t===!1)return s+"-"+s}},$.decode=function(t,o,i){i=i||u;var s="",l=-1,e=0,y,c;if(i===t[0]){for(;i===t[++l];)++e;for(c=t[y=e]||!0;--e>=0;)l=t.indexOf(i,l+1);if(l==-1&&(l=t.length),s=t.slice(y+1,l),o&&(o.i=l+1),c==='"')return s;if(c==="#")return{"#":s};if(c==="+")return s.length===0?!0:parseFloat(s);if(c===" ")return null;if(c==="-")return!1}}}(),typeof window!="undefined"){var f=window.Gun,k=window.Radix;window.Radisk=$}else{var f=we.exports,k=rt.exports;try{it.exports=$}catch{}}$.Radix=k})();var fe=typeof window!="undefined"?window.Gun:we.exports;fe.on("create",function($){fe.TESTING&&($.opt.file="radatatest"),this.to.next($);var f=$.opt,k;if(!(f.rad===!1||f.radisk===!1)&&!(k+""!=typeof process&&""+(process.env||"").RAD=="false")){var u=fe.window&&fe.window.Radisk||it.exports,t=u.Radix,o=u(f),i=String.fromCharCode(27),s=0;$.on("put",function(e){if(this.to.next(e),!(e._||"").rad){var y=e["#"],c=e.put,w=c["#"],d=c["."],_=c[":"],h=c[">"],p=(e._||"").DBG;p&&(p.sp=p.sp||+new Date);var g=(e._||"").RPS||((e._||"").RPS=+new Date);o(w+i+d,{":":_,">":h},function(a,r){if(p&&(p.spd=p.spd||+new Date),console.STAT&&console.STAT(g,+new Date-g,"put"),a){$.on("in",{"@":y,err:a,DBG:p});return}$.on("in",{"@":y,ok:r,DBG:p})},!1,p&&(p.r=p.r||{})),p&&(p.sps=p.sps||+new Date)}}),$.on("get",function(e){this.to.next(e);var y=e._||"",c=y.DBG=e.DBG;c&&(c.sg=+new Date);var w=e["#"],d=e.get,_=e.get["#"],h=e.get["."]||"",p={},g,a,r,n;if(typeof _=="string"?a=_:_&&(k!==(r=_["*"])&&(p.limit=n=1),k!==_[">"]&&(p.start=_[">"]),k!==_["<"]&&(p.end=_["<"]),a=n?""+r:r||_["="],n=null),a&&!p.limit&&(typeof h=="string"?a=a+i+(p.atom=h):h&&(k!==h[">"]&&(p.start=h[">"],p.limit=1),k!==h["<"]&&(p.end=h["<"],p.limit=1),k!==(r=h["*"])&&(p.limit=n=1),a&&(a=a+i+(n?""+(r||""):r||(p.atom=h["="]||""))))),((r=d["%"])||p.limit)&&(p.limit=r<=(p.pack||1e3*100)?r:1),(h["-"]||(_||{})["-"]||d["-"])&&(p.reverse=!0),(r=($.next||"")[_])&&r.put){if(p.atom){if(r=(r.next||"")[p.atom],r&&r.rad)return}else if(r&&r.rad)return}var v=fe.state(),x=+new Date,O=0;c&&(c.sgm=x),o(a||"",function(E,S,j){c&&(c.sgr=+new Date),c&&(c.sgi=j);try{f.store.stats.get.time[l%50]=+new Date-x,++l,f.store.stats.get.count++,E&&(f.store.stats.get.err=E)}catch{}console.STAT&&console.STAT(x,+new Date-x,"got",JSON.stringify(a)),x=+new Date,j=j||"";var m,b;if(j.unit&&S&&k!==(m=S[":"])&&k!==(b=S[">"])){var T=a.split(i),D=T[0],I=T[1];(g=g||{})[D]=fe.state.ify(g[D],I,b,m,D),$.$.get(D).get(I)._.rad=v}else S&&(typeof S!="string"&&(p.atom?S=k:t.map(S,A,p)),!g&&S&&A(S,""),!p.atom&&!h&typeof _=="string"&&!p.limit&&!p.more&&($.$.get(_)._.rad=v));c&&(c.sgp=+new Date),console.STAT&&(s=+new Date-x)>9&&(console.STAT(x,s,"got prep time"),console.STAT(x,O,"got prep #")),O=0,x=+new Date;var N=function(){};N.faith=!0,N.rad=d,$.on("in",{"@":w,put:g,"%":j.more?1:k,err:E||k,_:N,DBG:c}),console.STAT&&(s=+new Date-x)>9&&console.STAT(x,s,"got emit",Object.keys(g||{}).length),g=k},p,c&&(c.r=c.r||{})),c&&(c.sgd=+new Date),console.STAT&&(s=+new Date-x)>9&&console.STAT(x,s,"get call");function A(E,S,j,m){if(O++,!!E){S=(a+S).split(i);var b=S.slice(0,1)[0];if(S=S.slice(-1)[0],p.limit&&p.limit<=p.count)return!0;var T,D,I=b,N=S;if(typeof E!="string"){T=E[":"],D=E[">"],(g=g||{})[I]=fe.state.ify(g[I],N,D,T,I),p.count=(p.count||0)+((T||"").length||9);return}p.count=(p.count||0)+E.length;var P=E.lastIndexOf(">"),J=u.decode(E.slice(P+1),null,i);E=u.decode(E.slice(0,P),null,i),(g=g||{})[b]=fe.state.ify(g[b],S,J,E,b)}}}),fe.valid,(f.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}});var en={exports:{}};(function(){function $(k){k=k||{},k.file=String(k.file||"radata");var u=$[k.file],t=null,o;if(u)return console.log("Warning: reusing same IndexedDB store and options as 1st."),$[k.file];u=$[k.file]=function(){};try{k.indexedDB=k.indexedDB||$.indexedDB||indexedDB}catch{}try{if(!k.indexedDB||location.protocol=="file:"){var i=u.d||(u.d={});return u.put=function(s,l,e){i[s]=l,setTimeout(function(){e(null,1)},250)},u.get=function(s,l){setTimeout(function(){l(null,i[s]||o)},5)},console.log("Warning: No indexedDB exists to persist data to!"),u}}catch{}return u.start=function(){var s=indexedDB.open(k.file,1);s.onupgradeneeded=function(l){l.target.result.createObjectStore(k.file)},s.onsuccess=function(){t=s.result},s.onerror=function(l){console.log(l||1)}},u.start(),u.put=function(s,l,e){if(!t){setTimeout(function(){u.put(s,l,e)},1);return}var y=t.transaction([k.file],"readwrite"),c=y.objectStore(k.file),w=c.put(l,""+s);w.onsuccess=c.onsuccess=y.onsuccess=function(){e(null,1)},w.onabort=c.onabort=y.onabort=function(d){e(d||"put.tx.abort")},w.onerror=c.onerror=y.onerror=function(d){e(d||"put.tx.error")}},u.get=function(s,l){if(!t){setTimeout(function(){u.get(s,l)},9);return}var e=t.transaction([k.file],"readonly"),y=e.objectStore(k.file),c=y.get(""+s);c.onsuccess=function(){l(null,c.result)},c.onabort=function(w){l(w||4)},c.onerror=function(w){l(w||5)}},setInterval(function(){t&&t.close(),t=null,u.start()},1e3*15),u}if(typeof window!="undefined")($.window=window).RindexedDB=$,$.indexedDB=window.indexedDB;else try{en.exports=$}catch{}try{var f=$.window.Gun||require("../gun");f.on("create",function(k){this.to.next(k),k.opt.store=k.opt.store||$(k.opt)})}catch{}})();(function(){var $=typeof window!="undefined"?window.Gun:we.exports;$.on("create",function(f){})})();const Ue=["https://etogun.glitch.me/gun"],ee=Ee({peers:Ue,localStorage:!1});Ee({peers:Ue,localStorage:!1});Ee.node.soul;Ee.text.random;function tn($,f,k){var u=new Blob([$],{type:f}),t=document.createElement("a");t.download=k,t.href=URL.createObjectURL(u),t.dataset.downloadurl=[f,t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(function(){URL.revokeObjectURL(t.href)},1500)}const Z=le({initiated:!1,is:null,pub:he(()=>{var $;return($=Z==null?void 0:Z.is)==null?void 0:$.pub}),name:"",profile:{name:"no name"},pulse:0,pulser:null,blink:!1,user:ee.user(),init(){Z.initiated||(Z.is=ee.user().is,Z.pulser&&clearInterval(Z.pulser),Z.pulser=setInterval(()=>{ee.user().get("pulse").put(Date.now())},1e3),Z.loadProfile(),Z.initiated=!0)},loadProfile(){ee.user().get("pulse").on($=>{Z.blink=!Z.blink,Z.pulse=$}).back().get("profile").map().on(($,f)=>{Z.profile[f]=$})},updateProfile($,f){f!==void 0&&ee.user().get("profile").get($).put(f)},find($,f){ee.get("~@"+$).once(k=>{f(k)})},logout(){var $;let f=!!(($=Z.is)==null?void 0:$.pub);Z.initiated=!1,clearInterval(Z.pulser),ee.user().leave(),setTimeout(()=>{var k;f&&!((k=ee.user()._)==null?void 0:k.sea)&&(Z.is=null,Z.profile={},console.info("User logged out"))},500)},async auth($){(!$||!$.pub||!$.priv)&&($=await ge.pair(),console.log("new account created")),ee.user().auth($,async()=>{console.log("account is authenticated")})},async hasPass($){return await ee.get(`~${$}`).get("pass").get("pair").then()},async logWithPass($,f){let k=await ee.get(`~${$}`).get("pass").get("pair").then();await ge.decrypt(k,f)},isMine($){if(!!$)return $.slice(1,88)==user.pub},downloadPair(){let $=ee.user()._.sea;$=JSON.stringify($),tn($,"application/json",Z.profile.name+".json")}});function nn(){return ee.user().recall({sessionStorage:!0},()=>{console.log("user recalled"),Z.init()}),ee.on("auth",()=>{console.log("user authenticated"),Z.init()}),Z}function rn(){const $=le({input:"",show:!1,min:5,enc:{pass:"",pair:""},dec:{pass:"",pair:""},set(){on($.input),$.input=""}});return Ge(()=>{ee.user().get("enc").map().on((f,k)=>{$.enc[k]=f})}),bt(async()=>{if(!$.show){$.dec={};return}$.enc.pass&&($.dec.pass=await ge.decrypt($.enc.pass,ee.user()._.sea)),$.enc.pair&&($.dec.pair=await ge.decrypt($.enc.pair,$.dec.pass))}),{pass:$}}async function on($){let f=await ge.encrypt(ee.user()._.sea,$),k=await ge.encrypt($,ee.user()._.sea);ee.user().get("enc").get("pair").put(f),ee.user().get("enc").get("pass").put(k)}var _e=1e3,me=_e*60,be=me*60,ye=be*24,an=ye*7,un=ye*365.25,sn=function($,f){f=f||{};var k=typeof $;if(k==="string"&&$.length>0)return fn($);if(k==="number"&&isFinite($))return f.long?ln($):cn($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function fn($){if($=String($),!($.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!!f){var k=parseFloat(f[1]),u=(f[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return k*un;case"weeks":case"week":case"w":return k*an;case"days":case"day":case"d":return k*ye;case"hours":case"hour":case"hrs":case"hr":case"h":return k*be;case"minutes":case"minute":case"mins":case"min":case"m":return k*me;case"seconds":case"second":case"secs":case"sec":case"s":return k*_e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function cn($){var f=Math.abs($);return f>=ye?Math.round($/ye)+"d":f>=be?Math.round($/be)+"h":f>=me?Math.round($/me)+"m":f>=_e?Math.round($/_e)+"s":$+"ms"}function ln($){var f=Math.abs($);return f>=ye?De($,f,ye,"day"):f>=be?De($,f,be,"hour"):f>=me?De($,f,me,"minute"):f>=_e?De($,f,_e,"second"):$+" ms"}function De($,f,k,u){var t=f>=k*1.5;return Math.round($/k)+" "+u+(t?"s":"")}function hn($=new URL(Ue[0]).hostname){const f=le({pulse:0,host:$,started:0,pulse:0,lag:0,diff:he(()=>f.pulse-f.started),age:he(()=>sn(f.diff)),status:"offline",blink:!1});return xe(()=>f.pulse,(k,u)=>{f.blink=!f.blink,f.lag=k-u-500}),ee.get($).map().on((k,u)=>{f[u]=k}),f}let pn;const ot=le({title:"",db:pn});function dn($){return ot.db=ee.get($),ot}function vn($){return kt()?(xt($),!0):!1}const at=typeof window!="undefined",yn=$=>typeof $=="string",Je=()=>{};function ut($){var f;const k=G($);return(f=k==null?void 0:k.$el)!=null?f:k}const Ce=at?window:void 0;function ie(...$){let f,k,u,t;if(yn($[0])?([k,u,t]=$,f=Ce):[f,k,u,t]=$,!f)return Je;let o=Je;const i=xe(()=>G(f),l=>{o(),!!l&&(l.addEventListener(k,u,t),o=()=>{l.removeEventListener(k,u,t),o=Je})},{immediate:!0,flush:"post"}),s=()=>{i(),o()};return vn(s),s}function wn($={}){const{touch:f=!0,resetOnTouchEnds:k=!1,initialValue:u={x:0,y:0},window:t=Ce}=$,o=re(u.x),i=re(u.y),s=re(null),l=c=>{o.value=c.pageX,i.value=c.pageY,s.value="mouse"},e=()=>{o.value=u.x,i.value=u.y},y=c=>{c.touches.length>0&&(o.value=c.touches[0].clientX,i.value=c.touches[0].clientY,s.value="touch")};return t&&(ie(t,"mousemove",l,{passive:!0}),ie(t,"dragover",l,{passive:!0}),f&&(ie(t,"touchstart",y,{passive:!0}),ie(t,"touchmove",y,{passive:!0}),k&&ie(t,"touchend",e,{passive:!0}))),{x:o,y:i,sourceType:s}}function gn($,f={}){const{handleOutside:k=!0,window:u=Ce}=f,{x:t,y:o,sourceType:i}=wn(f),s=re($!=null?$:u==null?void 0:u.document.body),l=re(0),e=re(0),y=re(0),c=re(0),w=re(0),d=re(0),_=re(!1);let h=()=>{};return u&&(h=xe([s,t,o],()=>{const p=ut(s);if(!p)return;const{left:g,top:a,width:r,height:n}=p.getBoundingClientRect();y.value=g+u.pageXOffset,c.value=a+u.pageYOffset,w.value=n,d.value=r;const v=t.value-y.value,x=o.value-c.value;_.value=v<0||x<0||v>d.value||x>w.value,(k||!_.value)&&(l.value=v,e.value=x)},{immediate:!0})),{x:t,y:o,sourceType:i,elementX:l,elementY:e,elementPositionX:y,elementPositionY:c,elementHeight:w,elementWidth:d,isOutside:_,stop:h}}function _n($={}){const{touch:f=!0,drag:k=!0,initialValue:u=!1,window:t=Ce}=$,o=re(u),i=re(null);if(!t)return{pressed:o,sourceType:i};const s=y=>()=>{o.value=!0,i.value=y},l=()=>{o.value=!1,i.value=null},e=he(()=>ut($.target)||t);return ie(e,"mousedown",s("mouse"),{passive:!0}),ie(t,"mouseleave",l,{passive:!0}),ie(t,"mouseup",l,{passive:!0}),k&&(ie(e,"dragstart",s("mouse"),{passive:!0}),ie(t,"drop",l,{passive:!0}),ie(t,"dragend",l,{passive:!0})),f&&(ie(e,"touchstart",s("touch"),{passive:!0}),ie(t,"touchend",l,{passive:!0}),ie(t,"touchcancel",l,{passive:!0})),{pressed:o,sourceType:i}}var st;(function($){$.UP="UP",$.RIGHT="RIGHT",$.DOWN="DOWN",$.LEFT="LEFT",$.NONE="NONE"})(st||(st={}));var ft,ct;at&&(window==null?void 0:window.navigator)&&((ft=window==null?void 0:window.navigator)==null?void 0:ft.platform)&&/iP(ad|hone|od)/.test((ct=window==null?void 0:window.navigator)==null?void 0:ct.platform);function mn(){const $=re(null),f=re(null),{pressed:k}=_n(),u=le({x:0,y:0,normX:0,normY:0,pressed:k,inside:!1});Ge(()=>{$.value.addEventListener("mousemove",t);const{isOutside:o}=gn(f);xe(o,i=>{u.inside=!i})});function t(o,i=$.value,s=f.value){if(!i)return;var l=i.createSVGPoint();l.x=o.clientX,l.y=o.clientY;let e=l.matrixTransform(i.getScreenCTM().inverse());if(s){let y=s.getBBox();u.x=e.x<y.width?e.x<0?0:e.x:y.width,u.y=e.y<y.height?e.y<0?0:e.y:y.height,u.normY=1-u.y/y.height,u.normX=u.x/y.width}else u.x=e.x,u.y=e.y}return{svg:$,area:f,mouse:u}}var lt={};(function($){var f=se&&se.__extends||function(){var U=function(C,M){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,W){H.__proto__=W}||function(H,W){for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(H[R]=W[R])},U(C,M)};return function(C,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");U(C,M);function H(){this.constructor=C}C.prototype=M===null?Object.create(M):(H.prototype=M.prototype,new H)}}(),k=se&&se.__classPrivateFieldSet||function(U,C,M){if(!C.has(U))throw new TypeError("attempted to set private field on non-instance");return C.set(U,M),M},u=se&&se.__classPrivateFieldGet||function(U,C){if(!C.has(U))throw new TypeError("attempted to get private field on non-instance");return C.get(U)},t,o,i,s,l,e,y,c,w,d,_,h,p,g,a,r,n,v,x,O,A,E;$.__esModule=!0,$.default=void 0;var S=function(U){var C=131,M=137,H=0;U+="x";for(var W=Math.floor(9007199254740991/M),R=0;R<U.length;R++)H>W&&(H=Math.floor(H/M)),H=H*C+U.charCodeAt(R);return H},j="0123456789abcdef".split(""),m=[-2147483648,8388608,32768,128],b=[24,16,8,0],T=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],D=[],I=function(){function U(C,M){C===void 0&&(C=!1),M===void 0&&(M=!1),t.set(this,void 0),o.set(this,void 0),i.set(this,void 0),s.set(this,void 0),l.set(this,void 0),e.set(this,void 0),y.set(this,void 0),c.set(this,void 0),w.set(this,void 0),d.set(this,void 0),_.set(this,void 0),h.set(this,void 0),p.set(this,void 0),g.set(this,void 0),a.set(this,void 0),r.set(this,void 0),n.set(this,0),v.set(this,void 0),this.init(C,M)}return U.prototype.init=function(C,M){M?(D[0]=D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0,k(this,o,D)):k(this,o,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),C?(k(this,e,3238371032),k(this,y,914150663),k(this,c,812702999),k(this,w,4144912697),k(this,d,4290775857),k(this,_,1750603025),k(this,h,1694076839),k(this,p,3204075428)):(k(this,e,1779033703),k(this,y,3144134277),k(this,c,1013904242),k(this,w,2773480762),k(this,d,1359893119),k(this,_,2600822924),k(this,h,528734635),k(this,p,1541459225)),k(this,t,k(this,v,k(this,i,k(this,a,0)))),k(this,s,k(this,g,!1)),k(this,l,!0),k(this,r,C)},U.prototype.update=function(C){if(u(this,s))return this;var M;C instanceof ArrayBuffer?M=new Uint8Array(C):M=C;for(var H=0,W=M.length,R=u(this,o);H<W;){var z=void 0;if(u(this,g)&&(k(this,g,!1),R[0]=u(this,t),R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0),typeof M!="string")for(z=u(this,v);H<W&&z<64;++H)R[z>>2]|=M[H]<<b[z++&3];else for(z=u(this,v);H<W&&z<64;++H){var B=M.charCodeAt(H);B<128?R[z>>2]|=B<<b[z++&3]:B<2048?(R[z>>2]|=(192|B>>6)<<b[z++&3],R[z>>2]|=(128|B&63)<<b[z++&3]):B<55296||B>=57344?(R[z>>2]|=(224|B>>12)<<b[z++&3],R[z>>2]|=(128|B>>6&63)<<b[z++&3],R[z>>2]|=(128|B&63)<<b[z++&3]):(B=65536+((B&1023)<<10|M.charCodeAt(++H)&1023),R[z>>2]|=(240|B>>18)<<b[z++&3],R[z>>2]|=(128|B>>12&63)<<b[z++&3],R[z>>2]|=(128|B>>6&63)<<b[z++&3],R[z>>2]|=(128|B&63)<<b[z++&3])}k(this,n,z),k(this,i,u(this,i)+(z-u(this,v))),z>=64?(k(this,t,R[16]),k(this,v,z-64),this.hash(),k(this,g,!0)):k(this,v,z)}return u(this,i)>4294967295&&(k(this,a,u(this,a)+(u(this,i)/4294967296<<0)),k(this,i,u(this,i)%4294967296)),this},U.prototype.finalize=function(){if(!u(this,s)){k(this,s,!0);var C=u(this,o),M=u(this,n);C[16]=u(this,t),C[M>>2]|=m[M&3],k(this,t,C[16]),M>=56&&(u(this,g)||this.hash(),C[0]=u(this,t),C[16]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=0),C[14]=u(this,a)<<3|u(this,i)>>>29,C[15]=u(this,i)<<3,this.hash()}},U.prototype.hash=function(){for(var C=u(this,e),M=u(this,y),H=u(this,c),W=u(this,w),R=u(this,d),z=u(this,_),B=u(this,h),F=u(this,p),Y=u(this,o),te,Q,oe,V,ae,ce,ke,Pe,Me,Te,de=16;de<64;++de)V=Y[de-15],te=(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3,V=Y[de-2],Q=(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10,Y[de]=Y[de-16]+te+Y[de-7]+Q<<0;Te=M&H;for(var ue=0;ue<64;ue+=4)u(this,l)?(u(this,r)?(ke=300032,V=Y[0]-1413257819,F=V-150054599<<0,W=V+24177077<<0):(ke=704751109,V=Y[0]-210244248,F=V-1521486534<<0,W=V+143694565<<0),k(this,l,!1)):(te=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),Q=(R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7),ke=C&M,oe=ke^C&H^Te,ce=R&z^~R&B,V=F+Q+ce+T[ue]+Y[ue],ae=te+oe,F=W+V<<0,W=V+ae<<0),te=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),Q=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),Pe=W&C,oe=Pe^W&M^ke,ce=F&R^~F&z,V=B+Q+ce+T[ue+1]+Y[ue+1],ae=te+oe,B=H+V<<0,H=V+ae<<0,te=(H>>>2|H<<30)^(H>>>13|H<<19)^(H>>>22|H<<10),Q=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),Me=H&W,oe=Me^H&C^Pe,ce=B&F^~B&R,V=z+Q+ce+T[ue+2]+Y[ue+2],ae=te+oe,z=M+V<<0,M=V+ae<<0,te=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),Q=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),Te=M&H,oe=Te^M&W^Me,ce=z&B^~z&F,V=R+Q+ce+T[ue+3]+Y[ue+3],ae=te+oe,R=C+V<<0,C=V+ae<<0;k(this,e,u(this,e)+C<<0),k(this,y,u(this,y)+M<<0),k(this,c,u(this,c)+H<<0),k(this,w,u(this,w)+W<<0),k(this,d,u(this,d)+R<<0),k(this,_,u(this,_)+z<<0),k(this,h,u(this,h)+B<<0),k(this,p,u(this,p)+F<<0)},U.prototype.hex=function(){this.finalize();var C=u(this,e),M=u(this,y),H=u(this,c),W=u(this,w),R=u(this,d),z=u(this,_),B=u(this,h),F=u(this,p),Y=j[C>>28&15]+j[C>>24&15]+j[C>>20&15]+j[C>>16&15]+j[C>>12&15]+j[C>>8&15]+j[C>>4&15]+j[C&15]+j[M>>28&15]+j[M>>24&15]+j[M>>20&15]+j[M>>16&15]+j[M>>12&15]+j[M>>8&15]+j[M>>4&15]+j[M&15]+j[H>>28&15]+j[H>>24&15]+j[H>>20&15]+j[H>>16&15]+j[H>>12&15]+j[H>>8&15]+j[H>>4&15]+j[H&15]+j[W>>28&15]+j[W>>24&15]+j[W>>20&15]+j[W>>16&15]+j[W>>12&15]+j[W>>8&15]+j[W>>4&15]+j[W&15]+j[R>>28&15]+j[R>>24&15]+j[R>>20&15]+j[R>>16&15]+j[R>>12&15]+j[R>>8&15]+j[R>>4&15]+j[R&15]+j[z>>28&15]+j[z>>24&15]+j[z>>20&15]+j[z>>16&15]+j[z>>12&15]+j[z>>8&15]+j[z>>4&15]+j[z&15]+j[B>>28&15]+j[B>>24&15]+j[B>>20&15]+j[B>>16&15]+j[B>>12&15]+j[B>>8&15]+j[B>>4&15]+j[B&15];return u(this,r)||(Y+=j[F>>28&15]+j[F>>24&15]+j[F>>20&15]+j[F>>16&15]+j[F>>12&15]+j[F>>8&15]+j[F>>4&15]+j[F&15]),Y},U.prototype.toString=function(){return this.hex()},U.prototype.digest=function(){this.finalize();var C=u(this,e),M=u(this,y),H=u(this,c),W=u(this,w),R=u(this,d),z=u(this,_),B=u(this,h),F=u(this,p),Y=[C>>24&255,C>>16&255,C>>8&255,C&255,M>>24&255,M>>16&255,M>>8&255,M&255,H>>24&255,H>>16&255,H>>8&255,H&255,W>>24&255,W>>16&255,W>>8&255,W&255,R>>24&255,R>>16&255,R>>8&255,R&255,z>>24&255,z>>16&255,z>>8&255,z&255,B>>24&255,B>>16&255,B>>8&255,B&255];return u(this,r)||Y.push(F>>24&255,F>>16&255,F>>8&255,F&255),Y},U.prototype.array=function(){return this.digest()},U.prototype.arrayBuffer=function(){this.finalize();var C=new ArrayBuffer(u(this,r)?28:32),M=new DataView(C);return M.setUint32(0,u(this,e)),M.setUint32(4,u(this,y)),M.setUint32(8,u(this,c)),M.setUint32(12,u(this,w)),M.setUint32(16,u(this,d)),M.setUint32(20,u(this,_)),M.setUint32(24,u(this,h)),u(this,r)||M.setUint32(28,u(this,p)),C},U}();t=new WeakMap,o=new WeakMap,i=new WeakMap,s=new WeakMap,l=new WeakMap,e=new WeakMap,y=new WeakMap,c=new WeakMap,w=new WeakMap,d=new WeakMap,_=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakMap,v=new WeakMap,function(U){f(C,U);function C(M,H,W){H===void 0&&(H=!1),W===void 0&&(W=!1);var R=U.call(this,H,W)||this;x.set(R,void 0),O.set(R,void 0),A.set(R,void 0),E.set(R,void 0);var z;if(typeof M=="string"){for(var B=[],F=M.length,Y=0,te=0;te<F;++te){var Q=M.charCodeAt(te);Q<128?B[Y++]=Q:Q<2048?(B[Y++]=192|Q>>6,B[Y++]=128|Q&63):Q<55296||Q>=57344?(B[Y++]=224|Q>>12,B[Y++]=128|Q>>6&63,B[Y++]=128|Q&63):(Q=65536+((Q&1023)<<10|M.charCodeAt(++te)&1023),B[Y++]=240|Q>>18,B[Y++]=128|Q>>12&63,B[Y++]=128|Q>>6&63,B[Y++]=128|Q&63)}z=B}else M instanceof ArrayBuffer?z=new Uint8Array(M):z=M;z.length>64&&(z=new I(H,!0).update(z).array());for(var oe=[],V=[],te=0;te<64;++te){var ae=z[te]||0;oe[te]=92^ae,V[te]=54^ae}return R.update(V),k(R,A,oe),k(R,x,!0),k(R,O,H),k(R,E,W),R}return C.prototype.finalize=function(){if(U.prototype.finalize.call(this),u(this,x)){k(this,x,!1);var M=this.array();U.prototype.init.call(this,u(this,O),u(this,E)),this.update(u(this,A)),this.update(M),U.prototype.finalize.call(this)}},C}(I),x=new WeakMap,O=new WeakMap,A=new WeakMap,E=new WeakMap;function N(U){var C=new I;return C.update(U),parseInt(C.hex().substring(0,8),16)}var P=function(U){var C="#";return U.forEach(function(M){M<16&&(C+=0),C+=M.toString(16)}),C},J=function(U,C,M){U/=360;var H=M<.5?M*(1+C):M+C-M*C,W=2*M-H;return[U+1/3,U,U-1/3].map(function(R){return R<0&&R++,R>1&&R--,R<1/6?R=W+(H-W)*6*R:R<.5?R=H:R<2/3?R=W+(H-W)*6*(2/3-R):R=W,Math.round(R*255)})},L=function(){function U(C){C===void 0&&(C={});var M=[C.lightness,C.saturation].map(function(R){return R=R!==void 0?R:[.35,.5,.65],Array.isArray(R)?R.concat():[R]}),H=M[0],W=M[1];this.L=H,this.S=W,typeof C.hue=="number"&&(C.hue={min:C.hue,max:C.hue}),typeof C.hue=="object"&&!Array.isArray(C.hue)&&(C.hue=[C.hue]),typeof C.hue=="undefined"&&(C.hue=[]),this.hueRanges=C.hue.map(function(R){return{min:typeof R.min=="undefined"?0:R.min,max:typeof R.max=="undefined"?360:R.max}}),this.hash=N,typeof C.hash=="function"&&(this.hash=C.hash),C.hash==="bkdr"&&(this.hash=S)}return U.prototype.hsl=function(C){var M,H,W,R=this.hash(C),z=727;if(this.hueRanges.length){var B=this.hueRanges[R%this.hueRanges.length];M=R/this.hueRanges.length%z*(B.max-B.min)/z+B.min}else M=R%359;return R=Math.ceil(R/360),H=this.S[R%this.S.length],R=Math.ceil(R/this.S.length),W=this.L[R%this.L.length],[M,H,W]},U.prototype.rgb=function(C){var M=this.hsl(C);return J.apply(this,M)},U.prototype.hex=function(C){var M=this.rgb(C);return P(M)},U}();$.default=L})(lt);var Ne=Qt(lt);const ht={light:new Ne({saturation:[.05,.08,.12],lightness:[.85,.87,.9]}),regular:new Ne({saturation:[.1,.5,.7],lightness:[.3,.5,.7]}),deep:new Ne({saturation:[.5,.7,.9],lightness:[.5,.7,.9]}),dark:new Ne({saturation:[.02,.05,.08],lightness:[.18,.2,.3]})};le({title:"",author:"",profile:{},guests:[]});const bn={class:"flex flex-col items-center"},kn=["transform"],xn=X("circle",{fill:"red",r:"4"},null,-1),Sn=[xn],An={class:"players"},Tn=["transform"],$n=["fill"],jn={setup($){const f=dn("testSpace"),{svg:k,area:u,mouse:t}=mn(),o=le({num:null,x:he(()=>t.normX),y:he(()=>1-t.normY)}),i=le({next:0,max:10,list:{}});f.db.get("playersNext").on(l=>i.next=l),f.db.get("players").map().on((l,e)=>{l!=null&&(i.list[e]=ze({},l))});async function s(){if(!Z.is)return;o.num=i.next%i.max;const l=f.db.get("players").get(o.num);xe(t,y=>{l.put({x:y.normX,y:1-y.normY})});let e={pub:Z.pub,pulse:Date.now(),x:t.normX,y:1-t.normY};l.put(e),f.db.get("playersNext").put(o.num+1)}return(l,e)=>(q(),K("div",bn,[(q(),K("svg",{onClick:e[0]||(e[0]=y=>s()),ref:(y,c)=>{c.svg=y,Ve(k)&&(k.value=y)},version:"1.1",baseProfile:"full",viewBox:"0 0 1000 500",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner , sans-serif","text-anchor":"middle","dominant-baseline":"middle"},[X("rect",{ref:(y,c)=>{c.area=y,Ve(u)&&(u.value=y)},x:"2",y:"0",width:"1000",height:"1000",fill:"none","stroke-width":"0"},null,512),X("g",{class:"me",transform:`translate(${G(o).x*1e3} ${G(o).y*1e3})`},Sn,8,kn),X("g",An,[(q(!0),K($e,null,Ie(G(i).list,y=>(q(),K("g",{class:"player",key:y,transform:`translate(${y.x*1e3} ${y.y*1e3})`},[X("circle",{r:"10",fill:G(ht).deep.hex(y.pub)},null,8,$n)],8,Tn))),128))])],512))]))}};function On($,f){return q(),K("p",null,"ROOM ")}const En={};var Dn=Se(En,[["render",On]]);const Cn=["innerHTML"],Nn={props:{data:String},setup($){const f=$,k=he(()=>{if(!!f.data)return St(f.data,{margin:4})});return(u,t)=>(q(),K("div",{class:"min-w-16 flex-1",innerHTML:G(k)},null,8,Cn))}},Pn={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Mn=X("path",{d:"M16 8C7.664 8 1.25 15.344 1.25 15.344L.656 16l.594.656s5.848 6.668 13.625 7.282c.371.046.742.062 1.125.062s.754-.016 1.125-.063c7.777-.613 13.625-7.28 13.625-7.28l.594-.657l-.594-.656S24.336 8 16 8zm0 2c2.203 0 4.234.602 6 1.406c.637 1.055 1 2.27 1 3.594a6.995 6.995 0 0 1-6.219 6.969c-.02.004-.043-.004-.062 0c-.239.011-.477.031-.719.031c-.266 0-.523-.016-.781-.031A6.995 6.995 0 0 1 9 15c0-1.305.352-2.52.969-3.563h-.031C11.717 10.617 13.773 10 16 10zm0 2a3 3 0 1 0 .002 6.002A3 3 0 0 0 16 12zm-8.75.938A9.006 9.006 0 0 0 7 15c0 1.754.5 3.395 1.375 4.781A23.196 23.196 0 0 1 3.531 16a23.93 23.93 0 0 1 3.719-3.063zm17.5 0A23.93 23.93 0 0 1 28.469 16a23.196 23.196 0 0 1-4.844 3.781A8.929 8.929 0 0 0 25 15c0-.715-.094-1.398-.25-2.063z",fill:"currentColor"},null,-1),In=[Mn];function Rn($,f){return q(),K("svg",Pn,In)}var Un={name:"la-eye",render:Rn};const Jn={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Hn=X("path",{d:"M28.281 6.281L11 23.563L3.719 16.28L2.28 17.72l8 8l.719.687l.719-.687l18-18z",fill:"currentColor"},null,-1),Ln=[Hn];function zn($,f){return q(),K("svg",Jn,Ln)}var Wn={name:"la-check",render:zn};const Bn={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Fn=X("path",{d:"M17.7 17l6.198 8.398L21.5 27L16 18.3L10.5 27l-2.3-1.602L14.397 17l-9.296-2.398L6 12l9.102 3.2L14.5 5h3L17 15.2l9-3.2l.8 2.7z",fill:"currentColor"},null,-1),qn=[Fn];function Gn($,f){return q(),K("svg",Bn,qn)}var pt={name:"la-asterisk",render:Gn};const Vn={class:"flex flex-col"},Kn={key:0,class:"flex flex-wrap items-center p-4 bg-light-900"},Yn=["placeholder"],Xn={class:"flex p-2"},Qn=X("span",null,"Password is set",-1),Zn=X("div",{class:"ml-2"},"Show",-1),er={key:1,class:"text-center text-2xl"},tr={setup($){const{pass:f}=rn();return(k,u)=>{const t=pt,o=Wn,i=Un;return q(),K("div",Vn,[G(f).enc.pair?(q(),K("div",Kn,[ne(t,{class:"mr-4"}),At(X("input",{"onUpdate:modelValue":u[0]||(u[0]=s=>G(f).input=s),type:"password",placeholder:`${G(f).min} characters or more`},null,8,Yn),[[Tt,G(f).input]]),G(f).input.length>=G(f).min?(q(),K("button",{key:0,class:"p-2 mx-2 bg-light-100 rounded shadow cursor-pointer",onClick:u[1]||(u[1]=s=>G(f).set())},"Set")):pe("",!0),X("div",Xn,[ne(o,{class:"mr-2 text-green-600"}),Qn]),X("div",{class:"flex items-center p-2 mx-2 cursor-pointer bg-light-100 rounded shadow",onClick:u[2]||(u[2]=s=>G(f).show=!G(f).show)},[ne(i),Zn]),G(f).show?(q(),K("div",er,ve(G(f).dec.pass),1)):pe("",!0)])):pe("",!0)])}}},nr={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},rr=X("path",{d:"M6 3v26h20V9.594l-.281-.313l-6-6L19.406 3zm2 2h10v6h6v16H8zm12 1.438L22.563 9H20zM16 13l-2 12h2l2-12zm-3.781 2.375l-2.5 3l-.531.625l.53.625l2.5 3l1.563-1.25L11.812 19l1.97-2.375zm7.562 0l-1.562 1.25L20.187 19l-1.968 2.375l1.562 1.25l2.5-3l.532-.625l-.532-.625z",fill:"currentColor"},null,-1),ir=[rr];function or($,f){return q(),K("svg",nr,ir)}var ar={name:"la-file-code",render:or};const ur={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},sr=X("path",{d:"M5 5v8h2v2h2v-2h4V5zm8 8v2h2v2h-4v2H5v8h8v-8h6v-2h-2v-2h4v-2h2v2h2v-2h2V5h-8v8zm12 2v2h2v-2zm0 2h-2v2h2zm0 2v2h2v-2zm0 2h-2v-2h-2v2h-5v6h2v-4h4v2h2v-2h1zm-3 4h-2v2h2zm1-8v-2h-2v2zm-12 0v-2H9v2zm-4-2H5v2h2zm8-10v4h-1v2h1v1h2V9h1V7h-1V5zM7 7h4v4H7zm14 0h4v4h-4zM8 8v2h2V8zm14 0v2h2V8zM7 21h4v4H7zm1 1v2h2v-2zm17 3v2h2v-2z",fill:"currentColor"},null,-1),fr=[sr];function cr($,f){return q(),K("svg",ur,fr)}var lr={name:"la-qrcode",render:cr};const hr={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},pr=X("path",{d:"M20 3c-4.945 0-9 4.055-9 9c0 .52.086.977.156 1.438L3.281 21.28L3 21.594V29h7v-3h3v-3h3v-2.969c1.18.578 2.555.969 4 .969c4.945 0 9-4.055 9-9s-4.055-9-9-9zm0 2c3.855 0 7 3.145 7 7s-3.145 7-7 7a7.356 7.356 0 0 1-3.406-.875l-.25-.125H14v3h-3v3H8v3H5v-4.563l7.906-7.937l.375-.344l-.094-.531C13.086 13.023 13 12.488 13 12c0-3.855 3.145-7 7-7zm2 3a1.999 1.999 0 1 0 0 4a1.999 1.999 0 1 0 0-4z",fill:"currentColor"},null,-1),dr=[pr];function vr($,f){return q(),K("svg",hr,dr)}var yr={name:"la-key",render:vr};const wr={class:"flex flex-col items-stretch"},gr={class:"flex flex-wrap p-2 items-center"},_r={key:0,class:"flex w-full justify-center mt-4"},mr=["value"],br={setup($){const f=re("pass");function k(u){f.value!=u?f.value=u:f.value=null}return(u,t)=>{const o=pt,i=yr,s=lr,l=ar,e=tr,y=Nn;return q(),K("div",wr,[X("div",gr,[X("button",{onClick:t[0]||(t[0]=c=>k("pass")),class:qe({active:f.value=="pass"})},[ne(o)],2),X("button",{onClick:t[1]||(t[1]=c=>k("key"))},[ne(i)]),X("button",{onClick:t[2]||(t[2]=c=>k("qr"))},[ne(s)]),X("button",{onClick:t[3]||(t[3]=c=>{G(Z).downloadPair(),f.value=null})},[ne(l)])]),f.value?(q(),K("div",_r,[ne($t,{name:"fade"},{default:Oe(()=>[f.value=="pass"?(q(),je(e,{class:"flex-1",key:"pass"})):pe("",!0),f.value=="key"?(q(),K("textarea",{class:"p-2 text-sm flex-1",rows:"6",value:JSON.stringify(G(Z).user._.sea),key:"text"},null,8,mr)):pe("",!0),f.value=="qr"?(q(),je(y,{key:"qr",data:JSON.stringify(G(Z).user._.sea)},null,8,["data"])):pe("",!0)]),_:1})])):pe("",!0)])}}};var kr=Se(br,[["__scopeId","data-v-1281c630"]]);const dt={props:{blink:Boolean},setup($){return(f,k)=>(q(),K("div",{class:"p-1 m-1 rounded-full transition-all duration-300 ease-in-out",style:Ke({backgroundColor:$.blink?"white":"black"})},null,4))}},xr={class:"flex flex-col"},Sr={class:"ml-2 text-xs"},Ar={class:"flex flex-col"},Tr={class:"mr-2 font-bold"},$r={class:"text-md"},jr={class:"flex flex-wrap"},Or={setup($){const f=nn();return(k,u)=>(q(),K("div",xr,[G(f).is?(q(),K("div",{key:0,class:"p-4 flex",style:Ke({backgroundColor:G(ht).deep.hex(G(f).pub)})},[ne(dt,{blink:G(f).blink},null,8,["blink"]),X("div",Sr,ve(G(f).pub),1)],4)):pe("",!0),X("div",Ar,[(q(!0),K($e,null,Ie(G(f).profile,(t,o)=>(q(),K("div",{class:"p-2 flex",key:t},[X("div",Tr,ve(o),1),X("div",$r,ve(t),1)]))),128))]),X("div",jr,[G(f).is?(q(),K("button",{key:1,class:"button",onClick:u[1]||(u[1]=t=>G(f).logout())},"Logout")):(q(),K("button",{key:0,class:"button",onClick:u[0]||(u[0]=t=>G(f).auth())},"Auth"))])]))}},Er={class:"flex items-center px-4"},Dr={class:"p-4"},Cr={setup($){const f=hn();return he(()=>(f.pulse/1e3%60).toFixed(2)),(k,u)=>(q(),K("div",Er,[ne(dt,{blink:G(f).blink},null,8,["blink"]),X("div",Dr,"Server is "+ve(G(f).status)+" for "+ve(G(f).age),1)]))}},Nr=$=>(Be("data-v-7c2335c9"),$=$(),Fe(),$),Pr={class:"p-4"},Mr=Nr(()=>X("div",{class:"font-bold text-3xl"},"@gun-vue demo",-1));function Ir($,f){const k=Cr,u=Or,t=kr,o=Dn,i=jn;return q(),K("div",Pr,[Mr,ne(k,{class:"card"}),ne(u,{class:"card"}),ne(t,{class:"card"}),ne(o,{class:"card"}),ne(i,{class:"card"})])}const Rr={};var Ur=Se(Rr,[["render",Ir],["__scopeId","data-v-7c2335c9"]]);const Jr=[{name:"index",path:"/",component:Ur,props:!0},{name:"routes",path:"/routes",component:()=>Re(()=>Promise.resolve().then(function(){return Rt}),void 0),props:!0},{name:"account",path:"/account",component:()=>Re(()=>import("./index.bef22026.js"),["assets/index.bef22026.js","assets/vendor.a19d8be6.js"]),props:!0},{name:"space",path:"/space",component:()=>Re(()=>import("./index.5dcaeb4e.js"),["assets/index.5dcaeb4e.js","assets/vendor.a19d8be6.js"]),props:!0}],Hr=jt({history:Ot(),routes:Jr}),Lr=Et(qt);Lr.use(Hr).mount("#app");export{Or as _,Se as a,jn as b};
