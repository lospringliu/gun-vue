import{o as Q,c as X,a as z,r as bt,F as _t,b as Bt,d as tt,w as lt,e as Gt,t as St,n as Wt,p as qt,f as Lt,g as ft,h as kt,i as Vt,T as Qt,j as Yt,k as Zt,u as xt,l as Xt,m as zt,q as te,s as ee,v as ne,x as re,y as ie}from"./vendor.ce457e9e.js";const oe=function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))m(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&m(o)}).observe(document,{childList:!0,subtree:!0});function O(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerpolicy&&(u.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?u.credentials="include":i.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function m(i){if(i.ep)return;i.ep=!0;const u=O(i);fetch(i.href,u)}};oe();const ue={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},ae=z("path",{"fill-rule":"evenodd",d:"M16 4C9.371 4 4 9.371 4 16c0 5.3 3.438 9.8 8.207 11.387c.602.11.82-.258.82-.578c0-.286-.011-1.04-.015-2.04c-3.34.723-4.043-1.609-4.043-1.609c-.547-1.387-1.332-1.758-1.332-1.758c-1.09-.742.082-.726.082-.726c1.203.086 1.836 1.234 1.836 1.234c1.07 1.836 2.808 1.305 3.492 1c.11-.777.422-1.305.762-1.605c-2.664-.301-5.465-1.332-5.465-5.93c0-1.313.469-2.383 1.234-3.223c-.121-.3-.535-1.523.117-3.175c0 0 1.008-.32 3.301 1.23A11.487 11.487 0 0 1 16 9.805c1.02.004 2.047.136 3.004.402c2.293-1.55 3.297-1.23 3.297-1.23c.656 1.652.246 2.875.12 3.175c.77.84 1.231 1.91 1.231 3.223c0 4.61-2.804 5.621-5.476 5.922c.43.367.812 1.101.812 2.219c0 1.605-.011 2.898-.011 3.293c0 .32.214.695.824.578C24.566 25.797 28 21.3 28 16c0-6.629-5.371-12-12-12z",fill:"currentColor"},null,-1),fe=[ae];function se(I,_){return Q(),X("svg",ue,fe)}var ce={name:"la-github",render:se};var le=(I,_)=>{const O=I.__vccOpts||I;for(const[m,i]of _)O[m]=i;return O};const pe=I=>(qt("data-v-5fd3239a"),I=I(),Lt(),I),he={class:"flex flex-wrap items-center"},de=pe(()=>z("div",{class:"flex-1"},null,-1)),ye={class:"text-2xl m-2",href:"https://github.com/defucc/gun-vue",target:"_blank"},ve={setup(I){const _={"/":"Home","/players/":"Players","/game/":"Game","/account/":"Account"};return(O,m)=>{const i=bt("router-link"),u=ce;return Q(),X("div",he,[(Q(),X(_t,null,Bt(_,(o,a)=>tt(i,{class:Wt(["p-2",{active:O.$route.path==a}]),key:o,to:a},{default:lt(()=>[Gt(St(o),1)]),_:2},1032,["to","class"])),64)),de,z("a",ye,[tt(u)])])}}};var we=le(ve,[["__scopeId","data-v-5fd3239a"]]),ge=Object.defineProperty,At=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Tt=(I,_,O)=>_ in I?ge(I,_,{enumerable:!0,configurable:!0,writable:!0,value:O}):I[_]=O,ut=(I,_)=>{for(var O in _||(_={}))me.call(_,O)&&Tt(I,O,_[O]);if(At)for(var O of At(_))be.call(_,O)&&Tt(I,O,_[O]);return I},pt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function jt(I){throw new Error('Could not dynamically require "'+I+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nt={exports:{}};(function(I){(function(){function _(m,i){return i?jt(m):m.slice?_[u(m)]:function(o,a){m(o={exports:{}}),_[u(a)]=o.exports};function u(o){return o.split("/").slice(-1).toString().replace(".js","")}}var O=I;_(function(m){String.random=function(u,o){var a="";for(u=u||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";u-- >0;)a+=o.charAt(Math.floor(Math.random()*o.length));return a},String.match=function(u,o){var a,l;return typeof u!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},a=o["="]||o["*"]||o[">"]||o["<"],u===a?!0:l!==o["="]?!1:(a=o["*"]||o[">"],u.slice(0,(a||"").length)===a?!0:l!==o["*"]?!1:l!==o[">"]&&l!==o["<"]?u>=o[">"]&&u<=o["<"]:l!==o[">"]&&u>=o[">"]||l!==o["<"]&&u<=o["<"]))},String.hash=function(u,o){if(typeof u=="string"){if(o=o||0,!u.length)return o;for(var a=0,l=u.length,t;a<l;++a)t=u.charCodeAt(a),o=(o<<5)-o+t,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(u){return u?u instanceof Object&&u.constructor===Object||Object.prototype.toString.call(u).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(u,o){for(var a in u)if(i.call(u,a)&&(!o||o.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(u){var o=[];for(var a in u)i.call(u,a)&&o.push(a);return o},function(){var u,o=setTimeout,a=0,l=0,t=typeof setImmediate!=""+u&&setImmediate||o;o.poll=o.poll||function(y){if(1>=+new Date-a&&l++<3333){y();return}t(function(){a=+new Date,y()},l=0)}}(),function(){var u=setTimeout,o=u.turn=u.turn||function(d){a.push(d)==1&&l(s)},a=o.s=[],l=u.poll,t=0,y,s=function(){(y=a[t++])&&y(),(t==a.length||t==99)&&(a=o.s=a.slice(t),t=0),a.length&&l(s)}}(),function(){var u,o=setTimeout,a=o.turn;(o.each=o.each||function(l,t,y,s){s=s||9,function d(p,g,f){if(g=(p=(l||[]).splice(0,s)).length){for(var c=0;c<g&&u===(f=t(p[c]));c++);if(u===f){a(d);return}}y&&y(f)}()})()}()})(_,"./shim"),_(function(m){m.exports=function i(u,o,a){if(!u)return{to:i};var l,t=typeof o=="function",u=(this.tag||(this.tag={}))[u]||t&&(this.tag[u]={tag:u,to:i._={next:function(s){var d;(d=this.to)&&d.next(s)}}});if(t){var y={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:u,on:this,as:a};return(y.back=u.last||u).to=y,u.last=y}return(u=u.to)&&l!==o&&u.next(o),u}})(_,"./onto"),_(function(m){_("./shim"),m.exports=function(i){return i===void 0?!1:i===null?!0:i===1/0||i!==i?!1:typeof i=="string"||typeof i=="boolean"||typeof i=="number"?!0:i&&typeof(i["#"]||0)=="string"&&Object.empty(i,["#"])?i["#"]:!1}})(_,"./valid"),_(function(m){_("./shim");function i(){var y=+new Date;return l<y?(o=0,l=y+i.drift):l=y+(o+=1)/a+i.drift}i.drift=0;var u=-1/0,o=0,a=999,l=u,t;i.is=function(y,s,d){var p=s&&y&&y._&&y._[">"]||d;if(!!p)return typeof(p=p[s])=="number"?p:u},i.ify=function(y,s,d,p,g){(y=y||{})._=y._||{},g&&(y._["#"]=g);var f=y._[">"]||(y._[">"]={});return t!==s&&s!=="_"&&(typeof d=="number"&&(f[s]=d),t!==p&&(y[s]=p)),y},m.exports=i})(_,"./state"),_(function(m){_("./shim");function i(u){var o={s:{}},a=o.s;u=u||{max:999,age:1e3*9},o.check=function(t){return a[t]?l(t):!1};var l=o.track=function(t){var y=a[t]||(a[t]={});return y.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,u.age+9)),y};return o.drop=function(t){o.to=null,o.now=+new Date;var y=Object.keys(a);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(y,function(s){var d=a[s];d&&(t||u.age)>o.now-d.was||delete a[s]},0,99)},o}m.exports=i})(_,"./dup"),_(function(m){_("./onto"),m.exports=function(o,a){if(!!this.on){var l=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var y=o["#"]||o,t=(this.tag||"")[y];return t?(a&&(t=this.on(y,a),clearTimeout(t.err),t.err=setTimeout(function(){t.off()},l)),!0):void 0}var y=a&&a["#"]||i(9);if(!o)return y;var s=this.on(y,o,a);return s.err=s.err||setTimeout(function(){s.off(),s.next({err:"Error: No ACK yet.",lack:!0})},l),y}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(_,"./ask"),_(function(m){function i(g){return g instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:g}):new i(g)}i.is=function(g){return g instanceof i||g&&g._&&g===g._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},_("./shim"),i.valid=_("./valid"),i.state=_("./state"),i.on=_("./onto"),i.dup=_("./dup"),i.ask=_("./ask"),function(){i.create=function(S){S.root=S.root||S,S.graph=S.graph||{},S.on=S.on||i.on,S.ask=S.ask||i.ask,S.dup=S.dup||i.dup();var $=S.$.opt(S.opt);return S.once||(S.on("in",g,S),S.on("out",g,S),S.on("put",v,S),i.on("create",S),S.on("create",S)),S.once=1,$};function g(S){if(!!S){if(S.out===g){this.to.next(S);return}var $=this,w=$.as,b=w.at||w,A=b.$,E=b.dup,C,D=S.DBG;if((C=S["#"])||(C=S["#"]=o(9)),!E.check(C)){if(E.track(C),C=S._,S._=typeof C=="function"?C:function(){},S.$&&S.$===(S.$._||"").$||(S.$=A),S["@"]&&!S.put&&n(S),!b.ask(S["@"],S))if(D&&(D.u=+new Date),S.put){f(S);return}else S.get&&i.on.get(S,A);D&&(D.uc=+new Date),$.to.next(S),D&&(D.ua=+new Date),!(S.nts||S.NTS)&&(S.out=g,b.on("out",S),D&&(D.ue=+new Date))}}}function f(S){if(!!S){var $=S._||"",w=$.root=(($.$=S.$||"")._||"").root;if(S["@"]&&$.faith&&!$.miss){S.out=g,w.on("out",S);return}$.latch=w.hatch,$.match=w.hatch=[];var b=S.put,A=$.DBG=S.DBG,E=+new Date;if(!(b["#"]&&b["."])){A&&(A.p=E),$["#"]=S["#"],$.msg=S,$.all=0,$.stun=1;var C=Object.keys(b);console.STAT&&console.STAT(E,((A||$).pk=+new Date)-E,"put sort");var D=0,N,P,J,U,R,M,F;(function H(L){if(N!=D){if(N=D,!(J=C[D])){console.STAT&&console.STAT(E,((A||$).pd=+new Date)-E,"put"),r($);return}(U=b[J])?(F=U._)?J!==F["#"]?M=h+x(J)+"soul not same.":(R=F[">"])||(M=h+x(J)+"no state."):M=h+x(J)+"no meta.":M=h+x(J)+"no node.",P=Object.keys(U||{})}if(M){S.err=$.err=M,r($);return}var it=0,B;for(L=L||0;L++<9&&(B=P[it++]);)if(B!=="_"){var V=U[B],ot=R[B];if(s===ot){M=h+x(B)+"on"+x(J)+"no state.";break}if(!l(V)){M=h+x(B)+"on"+x(J)+"bad "+typeof V+x(V);break}c(V,B,J,ot,S)}if((P=P.slice(it)).length){a(H);return}++D,P=null,H(L)})()}}}i.on.put=f;function c(S,$,w,b,A){var E=A._||"",C=E.root,D=C.graph,N,P=D[w]||d,J=t(P,$,1),U=P[$],R=E.DBG;(N=console.STAT)&&(!D[w]||!U)&&(N.has=(N.has||0)+1);var M=j();if(b>M){setTimeout(function(){c(S,$,w,b,A)},(N=b-M)>k?k:N),console.STAT&&console.STAT((R||E).Hf=+new Date,N,"future");return}if(!(b<J&&!E.miss)&&!(!E.faith&&b===J&&(S===U||T(S)<=T(U))&&!E.miss)){E.stun++;var F=A["#"]+E.all++,H={toString:function(){return F},_:E};H.toJSON=H.toString,R&&(R.ph=R.ph||+new Date),C.on("put",{"#":H,"@":A["@"],put:{"#":w,".":$,":":S,">":b},_:E})}}function v(S){var $;($=(S._||"").DBG)&&($.pa=+new Date,$.pm=$.pm||+new Date);var w=this,b=w.as,A=b.graph,E=S._,C=S.put,D=C["#"],N=C["."],P=C[":"],J=C[">"];S["#"];var U;(U=E.msg)&&(U=U.put)&&(U=U[D])&&y(U,N,J,P,D),A[D]=y(A[D],N,J,P,D),(U=(b.next||"")[D])&&U.on("in",S),r(E),w.to.next(S)}function r(S,$){var w;if(!S.stop&&!(!S.err&&0<--S.stun)&&(S.stop=1,!!(w=S.root))){var b=S.match;b.end=1,b===w.hatch&&(!(b=S.latch)||b.end?delete w.hatch:w.hatch=b),S.hatch&&S.hatch(),setTimeout.each(S.match,function(A){A&&A()}),!(!($=S.msg)||S.err||$.err)&&($.out=g,S.root.on("out",$))}}function n(S){var $=S["@"]||"",w;!(w=$._)||(w.acks=(w.acks||0)+1,(w.err=S.err)&&(S["@"]=w["#"],r(w)),!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){e(w)})),e(w))}function e(S){!S||!S.root||S.stun||S.acks!==S.all||S.root.on("in",{"@":S["#"],err:S.err,ok:S.err?s:{"":1}})}var h="Error: Invalid graph!",x=function(S){return" '"+(""+S).slice(0,9)+"...' "},T=JSON.stringify,k=2147483647,j=i.state}(),function(){i.on.get=function(f,c){var v=c._,r=f.get,n=r["#"],e=v.graph[n],h=r["."],x=v.next||(v.next={});x[n];var T=f._||{},k=T.DBG=f.DBG;if(k&&(k.g=+new Date),!e)return v.on("get",f);if(h){if(typeof h!="string"||s===e[h])return v.on("get",f);e=y({},h,t(e,h),e[h],n)}e&&g(f,e),v.on("get",f)};function g(f,c){var v=+new Date,r=f._||{},n=r.DBG=f.DBG,e=f["#"],h=o(9),x=Object.keys(c||"").sort(),T=((c||"")._||"")["#"];x.length;var k=f.$._.root,j=c===k.graph[T];console.STAT&&console.STAT(v,((n||r).gk=+new Date)-v,"got keys"),c&&function S(){v=+new Date;for(var $=0,w,b={},A;$<9&&(w=x[$++]);)y(b,w,t(c,w),c[w],T);x=x.slice($),(A={})[T]=b,b=A;var E;j&&(E=function(){},E.ram=E.faith=!0),A=x.length,console.STAT&&console.STAT(v,-(v-(v=+new Date)),"got copied some"),n&&(n.ga=+new Date),k.on("in",{"@":e,"#":h,put:b,"%":A?h=o(9):s,$:k.$,_:E,DBG:n}),console.STAT&&console.STAT(v,+new Date-v,"got in"),!!A&&setTimeout.turn(S)}(),c||k.on("in",{"@":f["#"]})}i.on.get.ack=g}(),function(){i.chain.opt=function(g){g=g||{};var f=this,c=f._,v=g.peers||g;return Object.plain(g)||(g={}),Object.plain(c.opt)||(c.opt=g),typeof v=="string"&&(v=[v]),v instanceof Array&&(Object.plain(c.opt.peers)||(c.opt.peers={}),v.forEach(function(r){var n={};n.id=n.url=r,c.opt.peers[r]=c.opt.peers[r]||n})),c.opt.peers=c.opt.peers||{},u(g,function r(n){var e=this[n];if(this&&this.hasOwnProperty(n)||typeof e=="string"||Object.empty(e)){this[n]=e;return}e&&e.constructor!==Object&&!(e instanceof Array)||u(e,r)}),i.on("opt",c),c.opt.uuid=c.opt.uuid||function(n){return i.state().toString(36).replace(".","")+String.random(n||12)},f}}();var u=function(g,f){Object.keys(g).forEach(f,g)},o=String.random,a=setTimeout.turn,l=i.valid,t=i.state.is,y=i.state.ify,s,d={},p;i.log=function(){return!i.log.off&&p.log.apply(p,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(g,f,c){return(c=i.log.once)[g]=c[g]||0,c[g]++||i.log(f)},typeof window!="undefined"&&((window.GUN=window.Gun=i).window=window);try{typeof O!="undefined"&&(O.exports=i)}catch{}m.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(p=console).only=function(g,f){return p.only.i&&g===p.only.i&&p.only.i++&&(p.log.apply(p,arguments)||f)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(_,"./root"),_(function(m){var i=_("./root");i.chain.back=function(a,l){var t;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var y=this,s=y._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var d=0,p=a.length,t=s;for(d;d<p;d++)t=(t||u)[a[d]];return o!==t?l?y:t:(t=s.back)?t.$.back(a,l):void 0}if(typeof a=="function"){for(var g,t={back:s};(t=t.back)&&o===(g=a(t,l)););return g}return typeof a=="number"?(s.back||s).$.back(a-1):this};var u={},o})(_,"./back"),_(function(m){var i=_("./root");i.chain.chain=function(r){var n=this,e=n._,h=new(r||n).constructor(n),x=h._,T;return x.root=T=e.root,x.id=++T.once,x.back=n._,x.on=i.on,x.on("in",i.on.in,x),x.on("out",i.on.out,x),h};function u(r){var n,e=this.as,h=e.back,x=e.root,T;if(r.$||(r.$=e.$),this.to.next(r),e.err){e.on("in",{put:e.put=s,$:e.$});return}if(n=r.get){if(x.pass&&(x.pass[e.id]=e),e.lex&&Object.keys(e.lex).forEach(function(k){T[k]=e.lex[k]},T=r.get=r.get||{}),n["#"]||e.soul){if(n["#"]=n["#"]||e.soul,r["#"]||(r["#"]=d(9)),h=x.$.get(n["#"])._,n=n["."]){if(g(h.put,n)&&(T=h.ask&&h.ask[n],(h.ask||(h.ask={}))[n]=h.$.get(n)._,h.on("in",{get:n,put:{"#":h.soul,".":n,":":h.put[n],">":c(x.graph[h.soul],n)}}),T))return}else{if(T=h.ask&&h.ask[""],(h.ask||(h.ask={}))[""]=h,s!==h.put&&(h.on("in",h),T))return;r.$=h.$}return x.ask(t,r),x.on("in",r)}if(n["."])return e.get?(r={get:{".":e.get},$:e.$},(h.ask||(h.ask={}))[e.get]=r.$._,h.on("out",r)):(r={get:e.lex?r.get:{},$:e.$},h.on("out",r));if((e.ask||(e.ask={}))[""]=e,e.get)return n["."]=e.get,(h.ask||(h.ask={}))[e.get]=r.$._,h.on("out",r)}return h.on("out",r)}i.on.out=u;function o(r,n){n=n||this.as;var e=n.root,h=r.$||(r.$=n.$),x=(h||"")._||y,T=r.put||"",k=T["#"],j=T["."],S=s!==T["="]?T["="]:T[":"],$=T[">"]||-1/0,w;if(s!==r.put&&(s===T["#"]||s===T["."]||s===T[":"]&&s===T["="]||s===T[">"])){if(!p(T)){if(!(k=((T||"")._||"")["#"])){console.log("chain not yet supported for",T,"...",r,n);return}return h=n.root.$.get(k),setTimeout.each(Object.keys(T).sort(),function(b){b=="_"||s===($=c(T,b))||n.on("in",{$:h,put:{"#":k,".":b,"=":T[b],">":$},VIA:r})})}n.on("in",{$:x.back.$,put:{"#":k=x.back.soul,".":j=x.has||x.get,"=":T,">":c(x.back.put,j)},via:r});return}(r.seen||"")[n.id]||((r.seen||(r.seen=function(){}))[n.id]=n,n!==x&&(Object.keys(r).forEach(function(b){T[b]=r[b]},T={}),T.get=n.get||T.get,!n.soul&&!n.has?T.$$$=T.$$$||n.$:x.soul&&(T.$=n.$,T.$$=T.$$||x.$),r=T),l(r,n),(n.soul||r.$$)&&$>=c(e.graph[k],j)&&((T=e.$.get(k)._).put=v(T.put,j,$,S,k)),!x.soul&&$>=c(e.graph[k],j)&&(w=(e.$.get(k)._.next||"")[j])&&(w.put=S,typeof(T=p(S))=="string"&&(w.put=e.$.get(T)._.put||S)),this.to&&this.to.next(r),n.any&&setTimeout.each(Object.keys(n.any),function(b){(b=n.any[b])&&b(r)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(b){(b=n.echo[b])&&b.on("in",r)},0,99),((r.$$||"")._||x).soul&&(w=n.next)&&(w=w[j])&&(T={},Object.keys(r).forEach(function(b){T[b]=r[b]}),T.$=(r.$$||r.$).get(T.get=j),delete T.$$,delete T.$$$,w.on("in",T)),a(r,n))}i.on.in=o;function a(r,n){if(n=n||this.as||r.$._,!(r.$$&&this!==i.on)&&!(!r.put||n.soul)){var e=r.put||"",h=e["="]||e[":"],x,T=n.root,k=T.$.get(e["#"]).get(e["."])._;if(typeof(h=p(h))!="string"){this===i.on&&((k.echo||(k.echo={}))[n.id]=n);return}if(!((k.echo||(k.echo={}))[n.id]&&!(T.pass||"")[n.id])){if(x=T.pass){if(x[h+n.id])return;x[h+n.id]=1}(k.echo||(k.echo={}))[n.id]=n,n.has&&(n.link=h);var j=T.$.get(k.link=h)._;(j.echo||(j.echo={}))[k.id]=k;var x=n.ask||"";(x[""]||n.lex)&&j.on("out",{get:{"#":h}}),setTimeout.each(Object.keys(x),function(S,$){!S||!($=x[S])||$.on("out",{get:{"#":h,".":S}})},0,99)}}}i.on.link=a;function l(r,n){var e=r.put||"",h=s!==e["="]?e["="]:e[":"],x=n.root,T,k;if(s===h){if(n.soul&&s!==n.put||(k=(r.$$||r.$||"")._||"",r["@"]&&(s!==k.put||s!==n.put)))return;(T=n.link||r.linked)&&delete(x.$.get(T)._.echo||"")[n.id],n.has&&(n.link=null),n.put=s,setTimeout.each(Object.keys(n.next||""),function(j,S){!(S=n.next[j])||(T&&delete(x.$.get(T).get(j)._.echo||"")[S.id],S.on("in",{get:j,put:s,$:S.$}))},0,99);return}n.soul||r.$$||(T=p(h),k=r.$._||"",!((T===k.link||n.has&&!k.link)&&!((x.pass||"")[n.id]&&typeof T!="string"))&&(delete(k.echo||"")[n.id],l({get:n.get,put:s,$:r.$,linked:r.linked=r.linked||k.link},n)))}i.on.unlink=l;function t(r,n){var e=this.as,h=e.$._;h.root;var x=e.get||"",T=(r.put||"")[x["#"]]||"";if(!r.put||typeof x["."]=="string"&&s===T[x["."]]){if(s!==h.put||!h.soul&&!h.has)return;h.ack=(h.ack||0)+1,h.on("in",{get:h.get,put:h.put=s,$:h.$,"@":r["@"]});return}(r._||{}).miss=1,i.on.put(r)}var y={},s,d=String.random,p=i.valid,g=function(r,n){return r&&Object.prototype.hasOwnProperty.call(r,n)},f=i.state,c=f.is,v=f.ify})(_,"./chain"),_(function(m){var i=_("./root");i.chain.get=function(s,d,p){var g,f;if(typeof s=="string"){if(s.length==0)return(g=this.chain())._.err={err:i.log("0 length key!",s)},d&&d.call(g,g._.err),g;var c=this,v=c._,r=v.next||l;(g=r[s])||(g=s&&u(s,c)),g=g&&g.$}else if(typeof s=="function"){let T=function(j,S,$){if(!T.stun&&!((D=e.pass)&&!D[h])){var w=j.$._,b=(j.$$||"")._,A=(b||w).put,E=!w.has&&!w.soul,C={},D;if((E||y===A)&&(A=y===((D=j.put)||"")["="]?y===(D||"")[":"]?D:D[":"]:D["="]),typeof(D=i.valid(A))=="string"&&(A=y===(D=e.$.get(D)._.put)?n.not?y:A:D),!(n.not&&y===A)){if(y===n.stun){if((D=e.stun)&&D.on&&(v.$.back(function(N){if(D.on(""+N.id,C={}),(C.run||0)<T.id)return C}),!C.run&&D.on(""+w.id,C={}),!C.run&&b&&D.on(""+b.id,C={}),T.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=D.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[h]=function(){T(j,S,1)};return}if(y===A&&($=0),(D=e.hatch)&&!D.end&&y===n.hatch&&!$){if(x[w.$._.id])return;x[w.$._.id]=1,D.push(function(){T(j,S,1)});return}x={}}if(e.pass){if(e.pass[h+w.id])return;e.pass[h+w.id]=1}if(n.on){n.ok.call(w.$,A,w.get,j,S||T);return}if(n.v2020){n.ok(j,S||T);return}Object.keys(j).forEach(function(N){D[N]=j[N]},D={}),j=D,j.put=A,n.ok.call(n.as,j,S||T)}}};if(d===!0)return o(this,s,d,p),this;g=this;var v=g._,n=d||{},e=v.root,h;n.at=v,n.ok=s;var x={};return T.at=v,(v.any||(v.any={}))[h=String.random(7)]=T,T.off=function(){T.stun=1,!!v.any&&delete v.any[h]},T.rid=a,T.id=n.run||++e.once,f=e.pass,(e.pass={})[h]=1,n.out=n.out||{get:{}},v.on("out",n.out),e.pass=f,g}else{if(typeof s=="number")return this.get(""+s,d,p);if(typeof(f=t(s))=="string")return this.get(f,d,p);(f=this.get.next)&&(g=f(this,s))}return g?(d&&typeof d=="function"&&g.get(d,p),g):((g=this.chain())._.err={err:i.log("Invalid get request!",s)},d&&d.call(g,g._.err),g)};function u(s,d){var p=d._,g=p.next,f=d.chain(),c=f._;return g||(g=p.next={}),g[c.get=s]=c,d===p.root.$?c.soul=s:(p.soul||p.has)&&(c.has=s),c}function o(s,d,p,g){var f=s._,c=0,v;return(v=f.soul||f.link)?d(v,g,f):f.jam?f.jam.push([d,g]):(f.jam=[[d,g]],s.get(function(n,e){if(!(y===n.put&&!f.root.opt.super&&(v=Object.keys(f.root.opt.peers).length)&&++c<=v)){e.rid(n);var h=(h=n.$)&&h._||{},x=0,T;for(v=f.jam,delete f.jam;T=v[x++];){var k=T[0];T=T[1],k&&k(h.link||h.soul||i.valid(n.put)||((n.put||{})._||{})["#"],T,n,e)}}},{out:{get:{".":!0}}}),s)}function a(s){var d=this.at||this.on;if(!s||d.soul||d.has)return this.off();if(!!(s=(s=(s=s.$||s)._||s).id)){d.map;var p;if((p=this.seen||(this.seen={}))[s])return!0;p[s]=!0}}var l={},t=i.valid,y})(_,"./get"),_(function(m){var i=_("./root");i.chain.put=function(p,g,f){var c=this,v=c._,r=v.root;f=f||{},f.root=v.root,f.run||(f.run=r.once),u(f,v.id),f.ack=f.ack||g,f.via=f.via||c,f.data=f.data||p,f.soul||(f.soul=v.soul||typeof g=="string"&&g);var n=f.state=f.state||i.state();return typeof p=="function"?(p(function(e){f.data=e,c.put(l,l,f)}),c):f.soul?(f.$=r.$.get(f.soul),f.todo=[{it:f.data,ref:f.$}],f.turn=f.turn||y,f.ran=f.ran||o,function e(){var h=f.todo,x=h.pop(),T=x.it;x.ref&&x.ref._.id;var k,j,S,$,w;if(u(f,x.ref),($=x.todo)&&(j=$.pop(),T=T[j],$.length&&h.push(x)),j&&(h.path||(h.path=[])).push(j),!(k=s(T))&&!(w=i.is(T))){if(!Object.plain(T)){(f.ack||t).call(f,f.out={err:f.err=i.log("Invalid data: "+(T&&($=T.constructor)&&$.name||typeof T)+" at "+(f.via.back(function(C){C.get&&$.push(C.get)},$=[])||$.join("."))+"."+(h.path||[]).join("."))}),f.ran(f);return}for(var b=f.seen||(f.seen=[]),A=b.length;A--;)if(T===($=b[A]).it){k=T=$.link;break}}if(j&&k)x.node=d(x.node,j,n,T);else{let C=function(D,N){var P=S.link["#"];N&&(N.off(),N.rid(D));var J=P||D.soul||($=(D.$$||D.$)._||"").soul||$.link||(($=$.put||"")._||"")["#"]||$["#"]||(($=D.put||"")&&D.$$?$["#"]:($["="]||$[":"]||"")["#"]);if(!P&&u(f,D.$),!J&&!x.link["#"]){(x.wait||(x.wait=[])).push(function(){C(D,N)});return}J||(J=[],(D.$$||D.$).back(function(U){if($=U.soul||U.link)return J.push($);J.push(U.get)}),J=J.reverse().join("/")),S.link["#"]=J,!w&&(((f.graph||(f.graph={}))[J]=S.node||(S.node={_:{}}))._["#"]=J),delete f.wait[E],S.wait&&setTimeout.each(S.wait,function(U){U&&U()}),f.ran(f)};f.seen.push(S={it:T,link:{},todo:w?[]:Object.keys(T).sort().reverse(),path:(h.path||[]).slice(),up:x}),x.node=d(x.node,j,n,S.link),!w&&S.todo.length&&h.push(S);var E=f.seen.length;(f.wait||(f.wait={}))[E]="",$=(S.ref=w?T:j?x.ref.get(j):x.ref)._,($=T&&(T._||"")["#"]||$.soul||$.link)?C({soul:$}):S.ref.get(C,{run:f.run,v2020:1,out:{get:{".":" "}}})}if(!h.length)return f.ran(f);f.turn(e)}(),c):(a(f),c)};function u(p,g){if(!!g){g=(g._||"").id||g;var f=p.root.stun||(p.root.stun={on:i.on}),c={},v;p.stun||(p.stun=f.on("stun",function(){})),(v=f.on(""+g))&&v.the.last.next(c),!(c.run>=p.run)&&f.on(""+g,function(r){if(p.stun.end){this.off(),this.to.next(r);return}r.run=r.run||p.run,r.stun=r.stun||p.stun})}}function o(p){if(p.err){o.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,f=g.root,c=g.ask(function(e){f.on("ack",e),e.err&&i.log(e),++v>(p.acks||0)&&this.off(),!!p.ack&&p.ack(e,this)},p.opt),v=0,r=p.stun,n;(n=function(){!r||(o.end(r,f),setTimeout.each(Object.keys(r=r.add||""),function(e){(e=r[e])&&e()}))}).hatch=n,p.via._.on("out",{put:p.out=p.graph,opt:p.opt,"#":c,_:n})}}o.end=function(p,g){p.end=t,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()};function a(p){var g=p.via._,f;p.via=p.via.back(function(c){if(c.soul||!c.get)return c.$;f=p.data,(p.data={})[c.get]=f}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}var l,t=function(){},y=setTimeout.turn,s=i.valid,d=i.state.ify})(_,"./put"),_(function(m){var i=_("./root");_("./chain"),_("./back"),_("./put"),_("./get"),m.exports=i})(_,"./index"),_(function(m){var i=_("./index");i.chain.on=function(a,l,t,y){var s=this,d=s._;d.root;var p;if(typeof a=="string")return l?(p=d.on(a,l,t||d,y),t&&t.$&&(t.subs||(t.subs=[])).push(p),s):d.on(a);var g=l;return(g=g===!0?{change:!0}:g||{}).not=1,g.on=1,s.get(a,g),s},i.chain.once=function(a,l){if(l=l||{},!a)return u(this);var t=this,y=t._,s=y.root;y.put;var d=String.random(7),p;return t.get(function(g,f,c,v){var r=this,n=r._,e=n.one||(n.one={});if(v.stun||e[d]==="")return;if((p=i.valid(g))===!0){h();return}if(typeof p=="string")return;clearTimeout((y.one||"")[d]),clearTimeout(e[d]),e[d]=setTimeout(h,l.wait||99);function h(){!n.has&&!n.soul&&(n={put:g,get:f}),o===(p=n.put)&&(p=((c.$$||"")._||"").put),!(typeof i.valid(p)=="string"&&(p=s.$.get(p)._.put,p===o))&&(v.stun||e[d]!==""&&(e[d]="",(y.soul||y.has)&&v.off(),a.call(r,p,n.get)))}},{on:1}),t};function u(a,l,t){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(t=a.chain())._.nix=a.once(function(y,s){t._.on("in",this._)}),t._.lex=a._.lex,t}i.chain.off=function(){var a=this,l=a._,t,y=l.back;if(!!y)return l.ack=0,(t=y.next)&&t[l.get]&&delete t[l.get],(t=y.ask)&&delete t[l.get],(t=y.put)&&delete t[l.get],(t=l.soul)&&delete y.root.graph[t],(t=l.map)&&Object.keys(t).forEach(function(s,d){d=t[s],d.link&&y.root.$.get(d.link).off()}),(t=l.next)&&Object.keys(t).forEach(function(s,d){d=t[s],d.$.off()}),l.on("off",{}),a};var o})(_,"./on"),_(function(m){var i=_("./index"),u=i.chain.get.next;i.chain.get.next=function(t,y){var s;return Object.plain(y)?(s=((s=y["#"])||"")["="]||s)?t.get(s):((s=t.chain()._).lex=y,t.on("in",function(d){String.match(d.get||(d.put||"")["."],y["."]||y["#"]||y)&&s.on("in",d),this.to.next(d)}),s.$):(u||a)(t,y)},i.chain.map=function(t,y,s){var d=this,p=d._,g,f;return Object.plain(t)&&(g=t["."]?t:{".":t},t=l),t?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),f=d.chain(),d.map().on(function(c,v,r,n){var e=(t||a).call(this,c,v,r,n);if(l!==e){if(c===e)return f._.on("in",r);if(i.is(e))return f._.on("in",e._);var h={};Object.keys(r.put).forEach(function(x){h[x]=r.put[x]},h),h["="]=e,f._.on("in",{get:v,put:h})}}),f):((f=p.each)||((p.each=f=d.chain())._.lex=g||f._.lex||p.lex,f._.nix=d.back("nix"),d.on("in",o,f._)),f)};function o(t){this.to.next(t);var y=this.as,s=t.$,d=s._,p=t.put,g;!d.soul&&!t.$$||(g=y.lex)&&!String.match(t.get||(p||"")["."],g["."]||g["#"]||g)||i.on.link(t,y)}var a=function(){},l})(_,"./map"),_(function(m){var i=_("./index");i.chain.set=function(u,o,a){var l=this,t=l.back(-1),y,s;return o=o||function(){},a=a||{},a.item=a.item||u,(y=((u||"")._||"")["#"])&&((u={})["#"]=y),typeof(s=i.valid(u))=="string"?l.get(y=s).put(u,o,a):i.is(u)?(l.put(function(d){u.get(function(p,g,f){if(!p)return o.call(l,{err:i.log('Only a node can be linked! Not "'+f.put+'"!')});(s={})[p]={"#":p},d(s)},!0)}),u):(Object.plain(u)&&(u=t.get(y=l.back("opt.uuid")()).put(u)),l.get(y||t.back("opt.uuid")(7)).put(u,o,a))}})(_,"./set"),_(function(m){_("./shim");function i(o){var a=function(){},l=o.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var t=setTimeout.turn||setTimeout,y=JSON.parseAsync||function(n,e,h){var x;try{e(x,JSON.parse(n,h))}catch(T){e(T)}},s=JSON.stringifyAsync||function(n,e,h,x){var T;try{e(T,JSON.stringify(n,h,x))}catch(k){e(k)}},d=o.dup,p=d.check,g=d.track,f=a.hear=function(n,e){if(!!n){if(l.max<=n.length)return a.say({dam:"!",err:"Message too big!"},e);a===this&&(f.d+=n.length||0,++f.c);var h=e.SH=+new Date,x=n[0],T;if(x==="["){y(n,function(k,j){if(k||!j)return a.say({dam:"!",err:"DAM JSON parse error."},e);console.STAT&&console.STAT(+new Date,j.length,"# on hear batch");var S=l.puff;(function $(){for(var w=+new Date,b=0,A;b<S&&(A=j[b++]);)f(A,e);j=j.slice(b),console.STAT&&console.STAT(w,+new Date-w,"hear loop"),c(e),!!j.length&&t($,0)})()}),n="";return}if(x==="{"||(n["#"]||Object.plain(n))&&(T=n)){if(T)return f.one(T,e,h);y(n,function(k,j){if(k||!j)return a.say({dam:"!",err:"DAM JSON parse error."},e);f.one(j,e,h)});return}}};f.one=function(n,e,h){var x,T,k,j,S;if(n.DBG&&(n.DBG=S={DBG:n.DBG}),S&&(S.h=h),S&&(S.hp=+new Date),(x=n["#"])||(x=n["#"]=String.random(9)),!(k=p(x))&&(T=n["##"],!(T&&(k=n["@"]||n.get&&x)&&d.check(j=k+T)))){if((n._=function(){}).via=a.leap=e,(k=n["><"])&&typeof k=="string"&&k.slice(0,99).split(",").forEach(function($){this[$]=1},n._.yo={}),k=n.dam){(k=a.hear[k])&&k(n,e,o),g(x);return}var h=+new Date;S&&(S.is=h),e.SI=x,o.on("in",a.last=n),S&&(S.hd=+new Date),console.STAT&&console.STAT(h,+new Date-h,n.get?"msg get":n.put?"msg put":"msg"),(k=g(x)).via=e,n.get&&(k.it=n),j&&g(j),a.leap=a.last=null}},f.c=f.d=0,function(){var n=0,e;a.hash=function(k,j){var S,$,w,b=+new Date;s(k.put,function A(E,C){var D=($||($=w=C||"")).slice(0,32768);if(S=String.hash(D,S),$=$.slice(32768),$){t(A,0);return}console.STAT&&console.STAT(b,+new Date-b,"say json+hash"),k._.$put=w,k["##"]=S,T(k,j),delete k._.$put},h)};function h(k,j){var S;return j instanceof Object?(Object.keys(j).sort().forEach(x,{to:S={},on:j}),S):j}function x(k){this.to[k]=this.on[k]}var T=a.say=function(k,j){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(k),!k)return!1;var $,w,b=k["@"],A=k._||(k._=function(){}),E=k.DBG,C=+new Date;if(A.y=A.y||C,j||E&&(E.y=C),($=k["#"])||($=k["#"]=String.random(9)),!e&&g($),k.put&&(k.err||(d.s[$]||"").err))return!1;if(!k["##"]&&u!==k.put&&!A.via&&b){a.hash(k,j);return}if(!j&&b&&(j=(S=d.s[b])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=a.last)&&b===S["#"]&&a.leap),!j&&b)return d.s[b]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!j&&a.way)return a.way(k);if(E&&(E.yh=+new Date),!(w=A.raw)){a.raw(k,j);return}if(E&&(E.yr=+new Date),!j||!j.id){if(!Object.plain(j||l.peers))return!1;var C=+new Date;l.puff;var D=l.peers,N=Object.keys(j||l.peers||{});console.STAT&&console.STAT(C,+new Date-C,"peer keys"),function U(){var R=+new Date;e=1;var M=A.raw;A.raw=w;for(var F=0,H;F<9&&(H=(N||"")[F++]);)!(H=D[H])||T(k,H);A.raw=M,e=0,N=N.slice(F),console.STAT&&console.STAT(R,+new Date-R,"say loop"),!!N.length&&(t(U,0),b&&g(b))}();return}if(!j.wire&&a.wire&&a.wire(j),$!==j.last){if(j.last=$,j===A.via||(S=A.yo)&&(S[j.url]||S[j.pid]||S[j.id]))return!1;if(console.STAT&&console.STAT(C,((E||A).yp=+new Date)-(A.y||C),"say prep"),!e&&b&&g(b),j.batch){if(j.tail=(S=j.tail||0)+w.length,j.tail<=l.pack){j.batch+=(S?",":"")+w;return}c(j)}j.batch="[";var P=+new Date;setTimeout(function(){console.STAT&&console.STAT(P,+new Date-P,"0ms TO"),c(j)},l.gap),v(w,j),console.STAT&&b===j.SI&&console.STAT(C,+new Date-j.SH,"say ack")}};a.say.c=a.say.d=0,a.raw=function(k,j){if(!k)return"";var S=k._||{},$,w;if(w=S.raw)return w;if(typeof k=="string")return k;var b=k["##"],A=k["@"];if(b&&A){if(!S.via&&p(A+b))return!1;if((w=(d.s[A]||"").it)||(w=a.last)&&A===w["#"]){if(b===w["##"])return!1;w["##"]||(w["##"]=b)}}if(!k.dam){var E=0,C=[];w=l.peers;for(var D in w){var N=w[D];if(C.push(N.url||N.pid||N.id),++E>6)break}E>1&&(k["><"]=C.join())}if($=S.$put){w={},Object.keys(k).forEach(function(J){w[J]=k[J]}),w.put=":])([:",s(w,function(J,U){if(!J){var R=+new Date;w=U.indexOf('"put":":])([:"'),P(u,U=U.slice(0,w+6)+$+U.slice(w+14)),console.STAT&&console.STAT(R,+new Date-R,"say slice")}});return}s(k,P);function P(J,U){J||(S.raw=U,T(k,j))}}}();function c(n){var e=n.batch,h=typeof e=="string";if(h&&(e+="]"),n.batch=n.tail=null,!!e&&!(h?3>e.length:!e.length)){if(!h)try{e=e.length===1?e[0]:JSON.stringify(e)}catch(x){return l.log("DAM JSON stringify error",x)}!e||v(e,n)}}function v(n,e){try{var h=e.wire;e.say?e.say(n):h.send&&h.send(n),a.say.d+=n.length||0,++a.say.c}catch{(e.queue=e.queue||[]).push(n)}}a.hi=function(n){var e=n.wire||{};n.id?l.peers[n.url||n.id]=n:(e=n.id=n.id||String.random(9),a.say({dam:"?",pid:o.opt.pid},l.peers[e]=n),delete d.s[n.last]),n.met=n.met||+new Date,e.hied||o.on(e.hied="hi",n),e=n.queue,n.queue=[],setTimeout.each(e||[],function(h){v(h,n)},0,9)},a.bye=function(n){o.on("bye",n);var e=+new Date;e=e-(n.met||e),a.bye.time=((a.bye.time||e)+e)/2},a.hear["!"]=function(n,e){l.log("Error:",n.err)},a.hear["?"]=function(n,e){n.pid&&(e.pid||(e.pid=n.pid),n["@"])||(a.say({dam:"?",pid:l.pid,"@":n["#"]},e),delete d.s[e.last])},o.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",a.say)}),o.on("bye",function(n,e){n=l.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(e=n.wire)&&e.close&&e.close(),delete l.peers[n.id],n.wire=null});var r={};return o.on("bye",function(n,e){this.to.next(n),(e=console.STAT)&&(e.peers=(e.peers||0)-1),!!(e=n.url)&&(r[e]=!0,setTimeout(function(){delete r[e]},l.lack||9e3))}),o.on("hi",function(n,e){this.to.next(n),(e=console.STAT)&&(e.peers=(e.peers||0)+1),!(!(e=n.url)||!r[e])&&(delete r[e],!l.super&&setTimeout.each(Object.keys(o.next),function(h){o.next[h],e={},e[h]=o.graph[h],e=String.hash(e),a.say({"##":e,get:{"#":h}},n)}))}),a}var u;try{m.exports=i}catch{}})(_,"./mesh"),_(function(m){var i=_("../index");i.Mesh=_("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var a=o.opt;if(a.WebSocket===!1)return;var l=i.window||{},t=a.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!t)return;a.WebSocket=t;var y=a.mesh=a.mesh||i.Mesh(o);y.wire||a.wire,y.wire=a.wire=s;function s(f){try{if(!f||!f.url)return v&&v(f);var c=f.url.replace(/^http/,"ws"),v=f.wire=new a.WebSocket(c);return v.onclose=function(){a.mesh.bye(f),p(f)},v.onerror=function(r){p(f)},v.onopen=function(){a.mesh.hi(f)},v.onmessage=function(r){!r||a.mesh.hear(r.data||r,f)},v}catch{}}setTimeout(function(){!a.super&&o.on("out",{dam:"hi"})},1);var d=2*999;function p(f){clearTimeout(f.defer),!(g&&f.retry<=0)&&(f.retry=(f.retry||a.retry+1||60)-(-f.tried+(f.tried=+new Date)<d*4?1:0),f.defer=setTimeout(function c(){if(g&&g.hidden)return setTimeout(c,d);s(f)},d))}var g=""+u!=typeof document&&document});var u})(_,"./websocket"),_(function(m){if(typeof Gun!="undefined"){var i=function(){},u;try{u=(Gun.window||i).localStorage}catch{}u||(Gun.log("Warning: No localStorage exists to persist data to!"),u={setItem:function(o,a){this[o]=a},removeItem:function(o){delete this[o]},getItem:function(o){return this[o]}}),Gun.on("create",function o(a){this.to.next(a);var l=a.opt;a.graph;var t=[],y,s;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{y=o[l.prefix]=o[l.prefix]||JSON.parse(u.getItem(l.prefix))||{}}catch{y=o[l.prefix]={}}a.on("get",function(p){this.to.next(p);var g=p.get,f,c,v,r;!g||!(f=g["#"])||(c=y[f]||r,c&&(v=g["."])&&!Object.plain(v)&&(c=Gun.state.ify({},v,Gun.state.is(c,v),c[v],f)),Gun.on.get.ack(p,c))}),a.on("put",function(p){this.to.next(p);var g=p.put,f=g["#"],c=g["."];y[f]=Gun.state.ify(y[f],c,g[">"],g[":"],f),p["@"]||t.push(p["#"]),!s&&(s=setTimeout(d,l.wait||1))});function d(){var p,g=t;clearTimeout(s),s=!1,t=[];try{u.setItem(l.prefix,JSON.stringify(y))}catch(f){Gun.log((p=f||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),a.on("localStorage:error",{err:p,get:l.prefix,put:y})}!p&&!Object.empty(l.peers)||setTimeout.each(g,function(f){a.on("in",{"@":f,err:p,ok:0})})}})}})(_,"./localStorage")})(),function(){var _;if(""+_!=typeof Gun){var O=function(w){console.log("Warning! Deprecated internal utility will break in next version:",w)},m=Gun;m.fn=m.fn||{is:function(w){return O("fn"),!!w&&typeof w=="function"}},m.bi=m.bi||{is:function(w){return O("bi"),w instanceof Boolean||typeof w=="boolean"}},m.num=m.num||{is:function(w){return O("num"),!u(w)&&(w-parseFloat(w)+1>=0||w===1/0||w===-1/0)}},m.text=m.text||{is:function(w){return O("text"),typeof w=="string"}},m.text.ify=m.text.ify||function(w){return O("text.ify"),m.text.is(w)?w:typeof JSON!="undefined"?JSON.stringify(w):w&&w.toString?w.toString():w},m.text.random=m.text.random||function(w,b){O("text.random");var A="";for(w=w||24,b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";w>0;)A+=b.charAt(Math.floor(Math.random()*b.length)),w--;return A},m.text.match=m.text.match||function(w,b){var A,E;return O("text.match"),typeof w!="string"?!1:(typeof b=="string"&&(b={"=":b}),b=b||{},A=b["="]||b["*"]||b[">"]||b["<"],w===A?!0:E!==b["="]?!1:(A=b["*"]||b[">"]||b["<"],w.slice(0,(A||"").length)===A?!0:E!==b["*"]?!1:E!==b[">"]&&E!==b["<"]?w>=b[">"]&&w<=b["<"]:E!==b[">"]&&w>=b[">"]||E!==b["<"]&&w<=b["<"]))},m.text.hash=m.text.hash||function(w,b){if(O("text.hash"),typeof w=="string"){if(b=b||0,!w.length)return b;for(var A=0,E=w.length,C;A<E;++A)C=w.charCodeAt(A),b=(b<<5)-b+C,b|=0;return b}},m.list=m.list||{is:function(w){return O("list"),w instanceof Array}},m.list.slit=m.list.slit||Array.prototype.slice,m.list.sort=m.list.sort||function(w){return O("list.sort"),function(b,A){return!b||!A?0:(b=b[w],A=A[w],b<A?-1:b>A?1:0)}},m.list.map=m.list.map||function(w,b,A){return O("list.map"),t(w,b,A)},m.list.index=1,m.obj=m.boj||{is:function(w){return O("obj"),w?w instanceof Object&&w.constructor===Object||Object.prototype.toString.call(w).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},m.obj.put=m.obj.put||function(w,b,A){return O("obj.put"),(w||{})[b]=A,w},m.obj.has=m.obj.has||function(w,b){return O("obj.has"),w&&Object.prototype.hasOwnProperty.call(w,b)},m.obj.del=m.obj.del||function(w,b){if(O("obj.del"),!!w)return w[b]=null,delete w[b],w},m.obj.as=m.obj.as||function(w,b,A,E){return O("obj.as"),w[b]=w[b]||(E===A?{}:A)},m.obj.ify=m.obj.ify||function(w){if(O("obj.ify"),a(w))return w;try{w=JSON.parse(w)}catch{w={}}return w},function(){var w;function b(A,E){l(this,E)&&w!==this[E]||(this[E]=A)}m.obj.to=m.obj.to||function(A,E){return O("obj.to"),E=E||{},t(A,b,E),E}}(),m.obj.copy=m.obj.copy||function(w){return O("obj.copy"),w&&JSON.parse(JSON.stringify(w))},function(){function w(b,A){var E=this.n,C;if(!(E&&(A===E||a(E)&&l(E,A)))&&C!==A)return!0}m.obj.empty=m.obj.empty||function(b,A){return O("obj.empty"),b?!t(b,w,{n:A}):!0}}(),function(){function w(E,C){if(arguments.length===2){w.r=w.r||{},w.r[E]=C;return}w.r=w.r||[],w.r.push(E)}var b=Object.keys,A;Object.keys=Object.keys||function(E){return A(E,function(C,D,N){N(D)})},m.obj.map=A=m.obj.map||function(E,C,D){O("obj.map");var N,P=0,J,U,R,M,F=typeof C=="function";if(w.r=N,b&&a(E)&&(R=b(E),M=!0),D=D||{},u(E)||R)for(J=(R||E).length;P<J;P++){var H=P+m.list.index;if(F){if(U=M?C.call(D,E[R[P]],R[P],w):C.call(D,E[P],H,w),U!==N)return U}else if(C===E[M?R[P]:P])return R?R[P]:H}else for(P in E)if(F){if(l(E,P)&&(U=D?C.call(D,E[P],P,w):C(E[P],P,w),U!==N))return U}else if(C===E[P])return P;return F?w.r:m.list.index?0:-1}}(),m.time=m.time||{},m.time.is=m.time.is||function(w){return O("time"),w?w instanceof Date:+new Date().getTime()};var i=m.fn.is,u=m.list.is,o=m.obj,a=o.is,l=o.has,t=o.map,y={};y.is=function(w){return O("val.is"),w===_?!1:w===null?!0:w===1/0?!1:g(w)||d(w)||p(w)?!0:y.link.is(w)||!1},y.link=y.rel={_:"#"},function(){y.link.is=function(b){if(O("val.link.is"),b&&b[s]&&!b._&&a(b)){var A={};if(t(b,w,A),A.id)return A.id}return!1};function w(b,A){var E=this;if(E.id)return E.id=!1;if(A==s&&g(b))E.id=b;else return E.id=!1}}(),y.link.ify=function(w){return O("val.link.ify"),f({},s,w)},m.obj.has._=".";var s=y.link._,_,d=m.bi.is,p=m.num.is,g=m.text.is,o=m.obj,a=o.is,f=o.put,t=o.map;m.val=m.val||y;var c={_:"_"};c.soul=function(w,b){return O("node.soul"),w&&w._&&w._[b||e]},c.soul.ify=function(w,b){return O("node.soul.ify"),b=typeof b=="string"?{soul:b}:b||{},w=w||{},w._=w._||{},w._[e]=b.soul||w._[e]||n(),w},c.soul._=y.link._,function(){c.is=function(b,A,E){O("node.is");var C;return a(b)&&(C=c.soul(b))?!t(b,w,{as:E,cb:A,s:C,n:b}):!1};function w(b,A){if(A!==c._){if(!y.is(b))return!0;this.cb&&this.cb.call(this.as,b,A,this.n,this.s)}}}(),function(){c.ify=function(b,A,E){return O("node.ify"),A?typeof A=="string"?A={soul:A}:typeof A=="function"&&(A={map:A}):A={},A.map&&(A.node=A.map.call(E,b,_,A.node||{})),(A.node=c.soul.ify(A.node||{},A))&&t(b,w,{o:A,as:E}),A.node};function w(b,A){var E=this.o,C,D;if(E.map){C=E.map.call(this.as,b,""+A,E.node),D===C?v(E.node,A):E.node&&(E.node[A]=C);return}y.is(b)&&(E.node[A]=b)}}();var o=m.obj,a=o.is,v=o.del,t=o.map,r=m.text,n=r.random,e=c.soul._,_;m.node=m.node||c;var h=m.state;h.lex=function(){return O("state.lex"),h().toString(36).replace(".","")},h.to=function(w,b,A){O("state.to");var E=(w||{})[b];return a(E)&&(E=x(E)),h.ify(A,b,h.is(w,b),E,c.soul(w))},function(){h.map=function(b,A,E){O("state.map");var C,D=a(D=b||A)?D:null;return b=i(b=b||A)?b:null,D&&!b?(A=p(A)?A:h(),D[j]=D[j]||{},t(D,w,{o:D,s:A}),D):(E=E||a(A)?A:C,A=p(A)?A:h(),function(N,P,J,U){if(!b)return w.call({o:J,s:A},N,P),N;b.call(E||this||{},N,P,J,U),!(l(J,P)&&C===J[P])&&w.call({o:J,s:A},N,P)})};function w(b,A){j!==A&&h.ify(this.o,A,this.s)}}();var o=m.obj;o.as;var l=o.has,a=o.is,t=o.map,x=o.copy,T=m.num,p=T.is,k=m.fn,i=k.is,j=c._,_,S={};(function(){S.is=function(A,E,C,D){return O("graph.is"),!A||!a(A)||$(A)?!1:!t(A,w,{cb:E,fn:C,as:D})};function w(A,E){if(!A||E!==c.soul(A)||!c.is(A,this.fn,this.as))return!0;!this.cb||(b.n=A,b.as=this.as,this.cb.call(b.as,A,E,b))}function b(A){A&&c.is(b.n,A,b.as)}})(),function(){S.ify=function(D,N,P){O("graph.ify");var J={path:[],obj:D};return N?typeof N=="string"?N={soul:N}:typeof N=="function"&&(N.map=N):N={},typeof P=="string"&&(N.soul=N.soul||P,P=_),N.soul&&(J.link=y.link.ify(N.soul)),N.shell=(P||{}).shell,N.graph=N.graph||{},N.seen=N.seen||[],N.as=N.as||P,w(N,J),N.root=J.node,N.graph};function w(D,N){var P;return(P=C(D,N))?P:(N.env=D,N.soul=A,c.ify(N.obj,b,N)&&(N.link=N.link||y.link.ify(c.soul(N.node)),N.obj!==D.shell&&(D.graph[y.link.is(N.link)]=N.node)),N)}function b(D,N,P){var J=this,U=J.env,R,M;if(c._===N&&l(D,y.link._))return P._;if(!!(R=E(D,N,P,J,U))){if(N||(J.node=J.node||P||{},l(D,c._)&&c.soul(D)&&(J.node._=x(D._)),J.node=c.soul.ify(J.node,y.link.is(J.link)),J.link=J.link||y.link.ify(c.soul(J.node))),(M=U.map)&&(M.call(U.as||{},D,N,P,J),l(P,N))){if(D=P[N],_===D){v(P,N);return}if(!(R=E(D,N,P,J,U)))return}if(!N)return J.node;if(R===!0)return D;if(M=w(U,{obj:D,path:J.path.concat(N)}),!!M.node)return M.link}}function A(D){var N=this,P=y.link.is(N.link),J=N.env.graph;N.link=N.link||y.link.ify(D),N.link[y.link._]=D,N.node&&N.node[c._]&&(N.node[c._][y.link._]=D),l(J,P)&&(J[D]=J[P],v(J,P))}function E(D,N,P,J,U){var R;if(y.is(D))return!0;if(a(D))return 1;if(R=U.invalid)return D=R.call(U.as||{},D,N,P),E(D,N,P,J,U);U.err="Invalid value at '"+J.path.concat(N).join(".")+"'!",m.list.is(D)&&(U.err+=" Use `.set(item)` instead of an Array.")}function C(D,N){for(var P=D.seen,J=P.length,U;J--;)if(U=P[J],N.obj===U.obj)return U;P.push(N)}}(),S.node=function(w){O("graph.node");var b=c.soul(w);if(!!b)return f({},b,w)},function(){S.to=function(b,A,E){if(O("graph.to"),!!b){var C={};return E=E||{seen:{}},t(b[A],w,{obj:C,graph:b,opt:E}),C}};function w(b,A){var E,C;if(c._===A){if($(b,y.link._))return;this.obj[A]=x(b);return}if(!(E=y.link.is(b))){this.obj[A]=b;return}if(C=this.opt.seen[E]){this.obj[A]=C;return}this.obj[A]=this.opt.seen[E]=S.to(this.graph,E,this.opt)}}();var i=m.fn.is,o=m.obj,a=o.is,v=o.del,l=o.has,$=o.empty,f=o.put,t=o.map,x=o.copy,_;m.graph=m.graph||S}}()})(nt);var Ot=nt.exports,$t={exports:{}};(function(I){(function(){function _(m,i){return i?jt(m):m.slice?_[u(m)]:function(o,a){m(o={exports:{}}),_[u(a)]=o.exports};function u(o){return o.split("/").slice(-1).toString().replace(".js","")}}var O=I;_(function(m){typeof window!="undefined"&&(m.window=window);var i=m.window||m,u,o=i.SEA||{};(o.window=m.window)&&(o.window.SEA=o);try{u+""!=typeof O&&(O.exports=o)}catch{}m.exports=o})(_,"./root"),_(function(m){var i=_("./root");try{i.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(_,"./https"),_(function(m){var i;if(i+""==typeof btoa){if(i+""==typeof Buffer)try{pt.Buffer=_("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}pt.btoa=function(u){return Buffer.from(u,"binary").toString("base64")},pt.atob=function(u){return Buffer.from(u,"base64").toString("binary")}}})(_,"./base64"),_(function(m){_("./base64");function i(){}Object.assign(i,{from:Array.from}),i.prototype=Object.create(Array.prototype),i.prototype.toString=function(u,o,a){u=u||"utf8",o=o||0;const l=this.length;if(u==="hex"){const t=new Uint8Array(this);return[...Array((a&&a+1||l)-o).keys()].map(y=>t[y+o].toString(16).padStart(2,"0")).join("")}if(u==="utf8")return Array.from({length:(a||l)-o},(t,y)=>String.fromCharCode(this[y+o])).join("");if(u==="base64")return btoa(this)},m.exports=i})(_,"./array"),_(function(m){_("./base64");var i=_("./array");function u(...o){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),u.from(...o)}u.prototype=Object.create(Array.prototype),Object.assign(u,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const o=arguments[0];let a;if(typeof o=="string"){const t=arguments[1]||"utf8";if(t==="hex"){const y=o.match(/([\da-fA-F]{2})/g).map(s=>parseInt(s,16));if(!y||!y.length)throw new TypeError("Invalid first argument for type 'hex'.");a=i.from(y)}else if(t==="utf8"||t==="binary"){const y=o.length,s=new Uint16Array(y);Array.from({length:y},(d,p)=>s[p]=o.charCodeAt(p)),a=i.from(s)}else if(t==="base64"){const y=atob(o),s=y.length,d=new Uint8Array(s);Array.from({length:s},(p,g)=>d[g]=y.charCodeAt(g)),a=i.from(d)}else t==="binary"?a=i.from(o):console.info("SafeBuffer.from unknown encoding: "+t);return a}if(o.byteLength,o.byteLength?o.byteLength:o.length){let t;return o instanceof ArrayBuffer&&(t=new Uint8Array(o)),i.from(t||o)}},alloc(o,a=0){return i.from(new Uint8Array(Array.from({length:o},()=>a)))},allocUnsafe(o){return i.from(new Uint8Array(Array.from({length:o})))},concat(o){if(!Array.isArray(o))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return i.from(o.reduce((a,l)=>a.concat(Array.from(l)),[]))}}),u.prototype.from=u.from,u.prototype.toString=i.prototype.toString,m.exports=u})(_,"./buffer"),_(function(m){const i=_("./root"),u={Buffer:_("./buffer")};var o={},a;if(JSON.parseAsync=JSON.parseAsync||function(t,y,s){var d;try{y(d,JSON.parse(t,s))}catch(p){y(p)}},JSON.stringifyAsync=JSON.stringifyAsync||function(t,y,s,d){var p;try{y(p,JSON.stringify(t,s,d))}catch(g){y(g)}},u.parse=function(t,y){return new Promise(function(s,d){JSON.parseAsync(t,function(p,g){p?d(p):s(g)},y)})},u.stringify=function(t,y,s){return new Promise(function(d,p){JSON.stringifyAsync(t,function(g,f){g?p(g):d(f)},y,s)})},i.window&&(u.crypto=window.crypto||window.msCrypto,u.subtle=(u.crypto||o).subtle||(u.crypto||o).webkitSubtle,u.TextEncoder=window.TextEncoder,u.TextDecoder=window.TextDecoder,u.random=t=>u.Buffer.from(u.crypto.getRandomValues(new Uint8Array(u.Buffer.alloc(t))))),!u.TextDecoder){const{TextEncoder:t,TextDecoder:y}=_((a+""==typeof O?".":"")+"./lib/text-encoding",1);u.TextDecoder=y,u.TextEncoder=t}if(!u.crypto)try{var l=_("crypto",1);Object.assign(u,{crypto:l,random:y=>u.Buffer.from(l.randomBytes(y))});const{Crypto:t}=_("@peculiar/webcrypto",1);u.ossl=u.subtle=new t({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}m.exports=u})(_,"./shim"),_(function(m){var i=_("./root"),u=_("./shim"),o={};o.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},o.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},o.ecdh={name:"ECDH",namedCurve:"P-256"},o.jwk=function(a,l){a=a.split(".");var t=a[0],y=a[1],s={kty:"EC",crv:"P-256",x:t,y,ext:!0};return s.key_ops=l?["sign"]:["verify"],l&&(s.d=l),s},o.keyToJwk=function(a){const t=a.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:t,ext:!1,alg:"A256GCM"}},o.recall={validity:12*60*60,hook:function(a){return a}},o.check=function(a){return typeof a=="string"&&a.slice(0,4)==="SEA{"},o.parse=async function(l){try{var t=typeof l=="string";return t&&l.slice(0,4)==="SEA{"&&(l=l.slice(3)),t?await u.parse(l):l}catch{}return l},i.opt=o,m.exports=o})(_,"./settings"),_(function(m){var i=_("./shim");m.exports=async function(u,o){var a=typeof u=="string"?u:await i.stringify(u),l=await i.subtle.digest({name:o||"SHA-256"},new i.TextEncoder().encode(a));return i.Buffer.from(l)}})(_,"./sha256"),_(function(m){const i=_("./shim"),u=i.subtle,o=i.ossl?i.ossl:u,a=l=>o.digest({name:"SHA-1"},new ArrayBuffer(l));m.exports=a})(_,"./sha1"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./sha256"),l;i.work=i.work||(async(t,y,s,d)=>{try{var p=(y||{}).epub||y;if(d=d||{},p instanceof Function&&(s=p,p=l),t=typeof t=="string"?t:await u.stringify(t),(d.name||"").toLowerCase().slice(0,3)==="sha"){var g=u.Buffer.from(await a(t,d.name),"binary").toString(d.encode||"base64");if(s)try{s(g)}catch(r){console.log(r)}return g}p=p||u.random(9);var f=await(u.ossl||u.subtle).importKey("raw",new u.TextEncoder().encode(t),{name:d.name||"PBKDF2"},!1,["deriveBits"]),c=await(u.ossl||u.subtle).deriveBits({name:d.name||"PBKDF2",iterations:d.iterations||o.pbkdf2.iter,salt:new u.TextEncoder().encode(d.salt||p),hash:d.hash||o.pbkdf2.hash},f,d.length||o.pbkdf2.ks*8);t=u.random(t.length);var v=u.Buffer.from(c,"binary").toString(d.encode||"base64");if(s)try{s(v)}catch(r){console.log(r)}return v}catch(r){if(console.log(r),i.err=r,i.throw)throw r;s&&s();return}}),m.exports=i.work})(_,"./work"),_(function(m){var i=_("./root"),u=_("./shim");_("./settings"),i.name=i.name||(async(o,a)=>{try{if(o)try{o()}catch(l){console.log(l)}return}catch(l){if(console.log(l),i.err=l,i.throw)throw l;o&&o();return}}),i.pair=i.pair||(async(o,a)=>{try{var l=u.ossl||u.subtle,t=await u.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async d=>{var p={};p.priv=(await u.subtle.exportKey("jwk",d.privateKey)).d;var g=await u.subtle.exportKey("jwk",d.publicKey);return p.pub=g.x+"."+g.y,p});try{var y=await l.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async d=>{var p={};p.epriv=(await l.exportKey("jwk",d.privateKey)).d;var g=await l.exportKey("jwk",d.publicKey);return p.epub=g.x+"."+g.y,p})}catch(d){if(i.window)throw d;if(d=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw d}y=y||{};var s={pub:t.pub,priv:t.priv,epub:y.epub,epriv:y.epriv};if(o)try{o(s)}catch(d){console.log(d)}return s}catch(d){if(console.log(d),i.err=d,i.throw)throw d;o&&o();return}}),m.exports=i.pair})(_,"./pair"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./sha256"),l;i.sign=i.sign||(async(t,y,s,d)=>{try{if(d=d||{},!(y||d).priv){if(!i.I)throw"No signing key.";y=await i.I(null,{what:t,how:"sign",why:d.why})}if(l===t)throw"`undefined` not allowed.";var p=await o.parse(t),g=d.check=d.check||p;if(i.verify&&(i.opt.check(g)||g&&g.s&&g.m)&&l!==await i.verify(g,y)){var e=await o.parse(g);if(d.raw||(e="SEA"+await u.stringify(e)),s)try{s(e)}catch(x){console.log(x)}return e}var f=y.pub,c=y.priv,v=o.jwk(f,c),r=await a(p),n=await(u.ossl||u.subtle).importKey("jwk",v,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(h=>(u.ossl||u.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},h,new Uint8Array(r))),e={m:p,s:u.Buffer.from(n,"binary").toString(d.encode||"base64")};if(d.raw||(e="SEA"+await u.stringify(e)),s)try{s(e)}catch(h){console.log(h)}return e}catch(h){if(console.log(h),i.err=h,i.throw)throw h;s&&s();return}}),m.exports=i.sign})(_,"./sign"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./sha256"),l;i.verify=i.verify||(async(s,d,p,g)=>{try{var f=await o.parse(s);if(d===!1){var c=await o.parse(f.m);if(p)try{p(c)}catch(j){console.log(j)}return c}g=g||{};var v=d.pub||d,r=i.opt.slow_leak?await i.opt.slow_leak(v):await(u.ossl||u.subtle).importKey("jwk",o.jwk(v),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await a(f.m),e,h,x,T;try{if(e=u.Buffer.from(f.s,g.encode||"base64"),h=new Uint8Array(e),x=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,h,new Uint8Array(n)),!x)throw"Signature did not match."}catch{if(i.opt.fallback)return await i.opt.fall_verify(s,d,p,g)}var k=x?await o.parse(f.m):l;if(p)try{p(k)}catch(j){console.log(j)}return k}catch(j){if(console.log(j),i.err=j,i.throw)throw j;p&&p();return}}),m.exports=i.verify;var t={};i.opt.slow_leak=s=>{if(t[s])return t[s];var d=o.jwk(s);return t[s]=(u.ossl||u.subtle).importKey("jwk",d,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),t[s]};var y=i.opt;i.opt.fall_verify=async function(s,d,p,g,f){if(f===i.opt.fallback)throw"Signature did not match";f=f||1;var c=s||"";s=i.opt.unpack(s)||s;var v=await o.parse(s),r=d.pub||d,n=await i.opt.slow_leak(r),e=f<=i.opt.fallback?u.Buffer.from(await u.subtle.digest({name:"SHA-256"},new u.TextEncoder().encode(await o.parse(v.m)))):await a(v.m),h,x,T;try{if(h=u.Buffer.from(v.s,g.encode||"base64"),x=new Uint8Array(h),T=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,x,new Uint8Array(e)),!T)throw"Signature did not match."}catch{try{h=u.Buffer.from(v.s,"utf8"),x=new Uint8Array(h),T=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,x,new Uint8Array(e))}catch{if(!T)throw"Signature did not match."}}var k=T?await o.parse(v.m):l;if(y.fall_soul=c["#"],y.fall_key=c["."],y.fall_val=s,y.fall_state=c[">"],p)try{p(k)}catch(j){console.log(j)}return k},i.opt.fallback=2})(_,"./verify"),_(function(m){var i=_("./shim"),u=_("./settings"),o=_("./sha256");const a=async(l,t,y)=>{const s=l+(t||i.random(8)).toString("utf8"),d=i.Buffer.from(await o(s),"binary"),p=u.keyToJwk(d);return await i.subtle.importKey("jwk",p,{name:"AES-GCM"},!1,["encrypt","decrypt"])};m.exports=a})(_,"./aeskey"),_(function(m){var i=_("./root"),u=_("./shim");_("./settings");var o=_("./aeskey"),a;i.encrypt=i.encrypt||(async(l,t,y,s)=>{try{s=s||{};var d=(t||s).epriv||t;if(a===l)throw"`undefined` not allowed.";if(!d){if(!i.I)throw"No encryption key.";t=await i.I(null,{what:l,how:"encrypt",why:s.why}),d=t.epriv||t}var p=typeof l=="string"?l:await u.stringify(l),g={s:u.random(9),iv:u.random(15)},f=await o(d,g.s,s).then(v=>u.subtle.encrypt({name:s.name||"AES-GCM",iv:new Uint8Array(g.iv)},v,new u.TextEncoder().encode(p))),c={ct:u.Buffer.from(f,"binary").toString(s.encode||"base64"),iv:g.iv.toString(s.encode||"base64"),s:g.s.toString(s.encode||"base64")};if(s.raw||(c="SEA"+await u.stringify(c)),y)try{y(c)}catch(v){console.log(v)}return c}catch(v){if(console.log(v),i.err=v,i.throw)throw v;y&&y();return}}),m.exports=i.encrypt})(_,"./encrypt"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./aeskey");i.decrypt=i.decrypt||(async(l,t,y,s)=>{try{s=s||{};var d=(t||s).epriv||t;if(!d){if(!i.I)throw"No decryption key.";t=await i.I(null,{what:l,how:"decrypt",why:s.why}),d=t.epriv||t}var p=await o.parse(l),g,f,c;try{g=u.Buffer.from(p.s,s.encode||"base64"),f=u.Buffer.from(p.iv,s.encode||"base64"),c=u.Buffer.from(p.ct,s.encode||"base64");var v=await a(d,g,s).then(n=>u.subtle.decrypt({name:s.name||"AES-GCM",iv:new Uint8Array(f),tagLength:128},n,new Uint8Array(c)))}catch{if(s.encode==="utf8")throw"Could not decrypt";if(i.opt.fallback)return s.encode="utf8",await i.decrypt(l,t,y,s)}var r=await o.parse(new u.TextDecoder("utf8").decode(v));if(y)try{y(r)}catch(n){console.log(n)}return r}catch(n){if(console.log(n),i.err=n,i.throw)throw n;y&&y();return}}),m.exports=i.decrypt})(_,"./decrypt"),_(function(m){var i=_("./root"),u=_("./shim");_("./settings"),i.secret=i.secret||(async(a,l,t,y)=>{try{if(y=y||{},!l||!l.epriv||!l.epub){if(!i.I)throw"No secret mix.";l=await i.I(null,{what:a,how:"secret",why:y.why})}var s=a.epub||a,d=l.epub,p=l.epriv,g=u.ossl||u.subtle,f=o(s),c=Object.assign({public:await g.importKey(...f,!0,[])},{name:"ECDH",namedCurve:"P-256"}),v=o(d,p),r=await g.importKey(...v,!1,["deriveBits"]).then(async e=>{var h=await g.deriveBits(c,e,256),x=new Uint8Array(h),T=await g.importKey("raw",x,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return g.exportKey("jwk",T).then(({k})=>k)}),n=r;if(t)try{t(n)}catch(e){console.log(e)}return n}catch(e){if(console.log(e),i.err=e,i.throw)throw e;t&&t();return}});var o=(a,l)=>{var[t,y]=a.split("."),s=l?{d:l}:{};return["jwk",Object.assign(s,{x:t,y,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};m.exports=i.secret})(_,"./secret"),_(function(m){var i=_("./root");i.certify=i.certify||(async(u,o={},a,l,t={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),u=(()=>{var n=[];if(u){if((typeof u=="string"||Array.isArray(u))&&u.indexOf("*")>-1)return"*";if(typeof u=="string")return u;if(Array.isArray(u)){if(u.length===1&&u[0])return typeof u[0]=="object"&&u[0].pub?u[0].pub:typeof u[0]=="string"?u[0]:null;u.map(e=>{typeof e=="string"?n.push(e):typeof e=="object"&&e.pub&&n.push(e.pub)})}return typeof u=="object"&&u.pub?u.pub:n.length>0?n:null}})(),!u)return console.log("No certificant found.");const s=t.expiry&&(typeof t.expiry=="number"||typeof t.expiry=="string")?parseFloat(t.expiry):null,d=(o||{}).read?o.read:null,p=(o||{}).write?o.write:typeof o=="string"||Array.isArray(o)||o["+"]||o["#"]||o["."]||o["="]||o["*"]||o[">"]||o["<"]?o:null,g=(t||{}).block||(t||{}).blacklist||(t||{}).ban||{},f=g.read&&(typeof g.read=="string"||(g.read||{})["#"])?g.read:null,c=typeof g=="string"?g:g.write&&(typeof g.write=="string"||g.write["#"])?g.write:null;if(!d&&!p)return console.log("No policy found.");const v=JSON.stringify(ut(ut(ut(ut(ut({c:u},s?{e:s}:{}),d?{r:d}:{}),p?{w:p}:{}),f?{rb:f}:{}),c?{wb:c}:{}));var y=await i.sign(v,a,null,{raw:1});if(t.raw||(y="SEA"+JSON.stringify(y)),l)try{l(y)}catch(n){console.log(n)}return y}catch(s){if(i.err=s,i.throw)throw s;l&&l();return}}),m.exports=i.certify})(_,"./certify"),_(function(m){var i=_("./shim"),u=_("./root");u.work=_("./work"),u.sign=_("./sign"),u.verify=_("./verify"),u.encrypt=_("./encrypt"),u.decrypt=_("./decrypt"),u.certify=_("./certify"),u.random=u.random||i.random,u.Buffer=u.Buffer||_("./buffer"),u.keyid=u.keyid||(async o=>{try{const a=i.Buffer.concat(o.replace(/-/g,"+").replace(/_/g,"/").split(".").map(s=>i.Buffer.from(s,"base64"))),l=i.Buffer.concat([i.Buffer.from([153,a.length/256,a.length%256]),a]),t=await sha1hash(l),y=i.Buffer.from(t,"binary");return y.toString("hex",y.length-8)}catch(a){throw console.log(a),a}}),((u.window||{}).GUN||{}).SEA=u,m.exports=u})(_,"./sea"),_(function(m){var i=_("./sea"),u,o;i.window?u=i.window.GUN||{chain:{}}:u=_((o+""==typeof O?".":"")+"./gun",1),i.GUN=u;function a(t){this._={$:this}}a.prototype=function(){function t(){}return t.prototype=u.chain,new t}(),a.prototype.constructor=a,u.chain.user=function(t){var y=this,s=y.back(-1),d;if(t)return t=i.opt.pub((t._||"")["#"])||t,s.get("~"+t);if(d=s.back("user"))return d;var s=s._,p=s,g=p.opt.uuid||l;return(p=(d=p.user=y.chain(new a))._).opt={},p.opt.uuid=function(f){var c=g(),v=s.user;return!v||!(v=v.is)||!(v=v.pub)||(c="~"+v+"/"+c,f&&f.call&&f(null,c)),c},d};function l(){return u.state().toString(36).replace(".","")}u.User=a,a.GUN=u,a.SEA=u.SEA=i,m.exports=a})(_,"./user"),_(function(m){var i,u=""+i!=typeof window?window.Gun||{chain:{}}:_((""+i==typeof O?".":"")+"./gun",1);u.chain.then=function(o,a){var l=this,t=new Promise(function(y,s){l.once(y,a)});return o?t.then(o):t}})(_,"./then"),_(function(m){var i=_("./user"),u=i.SEA,o=i.GUN,a=function(){};i.prototype.create=function(...l){var t=typeof l[0]=="object"&&(l[0].pub||l[0].epub)?l[0]:typeof l[1]=="object"&&(l[1].pub||l[1].epub)?l[1]:null,y=t&&(t.pub||t.epub)?t.pub:typeof l[0]=="string"?l[0]:null,s=t&&(t.pub||t.epub)?t:y&&typeof l[1]=="string"?l[1]:null,d=l.filter(n=>typeof n=="function")[0]||null,p=l&&l.length>1&&typeof l[l.length-1]=="object"?l[l.length-1]:{},g=this,f=g._,c=g.back(-1);if(d=d||a,p=p||{},p.check!==!1){var v;if(y||(v="No user."),(s||"").length<8&&(v="Password too short!"),v)return d({err:o.log(v)}),g}if(f.ing)return(d||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),g;f.ing=!0;var r={};return r.a=function(n){if(r.pubs=n,n&&!p.already){var e={err:o.log("User already created!")};f.ing=!1,(d||a)(e),g.leave();return}r.salt=String.random(64),u.work(s,r.salt,r.b)},r.b=function(n){r.proof=n,t?r.c(t):u.pair(r.c)},r.c=function(n){var e;r.pair=n||{},(e=f.root.user)&&(e._.sea=n,e.is={pub:n.pub,epub:n.epub,alias:y}),r.data={pub:n.pub},r.d()},r.d=function(){r.data.alias=y,r.e()},r.e=function(){r.data.epub=r.pair.epub,u.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},r.proof,r.f,{raw:1})},r.f=function(n){r.data.auth=JSON.stringify({ek:n,s:r.salt}),r.g(r.data.auth)},r.g=function(n){var e;r.data.auth=r.data.auth||n,c.get(e="~"+r.pair.pub).put(r.data).on(r.h);var h={};h[e]={"#":e},c.get("~@"+y).put(h).get(e).on(r.i)},r.h=function(n,e,h,x){x.off(),r.h.ok=1,r.i()},r.i=function(n,e,h,x){x&&(r.i.ok=1,x.off()),!(!r.h.ok||!r.i.ok)&&(f.ing=!1,d({ok:0,pub:r.pair.pub}),a===d&&(t?g.auth(t):g.auth(y,s)))},c.get("~@"+y).once(r.a),g},i.prototype.leave=function(l,t){var y=this,s=y.back(-1)._.user;if(s&&(delete s.is,delete s._.is,delete s._.sea),u.window)try{var d={};d=window.sessionStorage,delete d.recall,delete d.pair}catch{}return y}})(_,"./create"),_(function(m){var i=_("./user"),u=i.SEA,o=i.GUN,a=function(){};i.prototype.auth=function(...t){var y=typeof t[0]=="object"&&(t[0].pub||t[0].epub)?t[0]:typeof t[1]=="object"&&(t[1].pub||t[1].epub)?t[1]:null,s=!y&&typeof t[0]=="string"?t[0]:null,d=s&&typeof t[1]=="string"?t[1]:null,p=t.filter(e=>typeof e=="function")[0]||null,g=t&&t.length>1&&typeof t[t.length-1]=="object"?t[t.length-1]:{},f=this,c=f._,v=f.back(-1);if(c.ing)return(p||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),f;c.ing=!0;var r={},n;return r.a=function(e){if(!e)return r.b();if(!e.pub){var h=[];return Object.keys(e).forEach(function(x){x!="_"&&h.push(e[x])}),r.b(h)}if(r.name)return r.f(e);r.c((r.data=e).auth)},r.b=function(e){var h=(r.list=(r.list||[]).concat(e||[])).shift();if(n===h)return r.name?r.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):r.err("Wrong user or password.");v.get(h).once(r.a)},r.c=function(e){if(n===e)return r.b();if(typeof e=="string")return r.c(l(e));u.work(d,(r.auth=e).s,r.d,r.enc)},r.d=function(e){u.decrypt(r.auth.ek,e,r.e,r.enc)},r.e=function(e){if(n===e)return r.enc?(r.enc=null,r.b()):(r.enc={encode:"utf8"},r.c(r.auth));r.half=e,r.f(r.data)},r.f=function(e){var h=r.half||{},x=r.data||{};r.g(r.lol={pub:e.pub||x.pub,epub:e.epub||x.epub,priv:e.priv||h.priv,epriv:e.epriv||h.epriv})},r.g=function(e){if(!e||!e.pub||!e.epub)return r.b();r.pair=e;var h=v._.user,x=h._;x.tag;var T=x.opt;x=h._=v.get("~"+e.pub)._,x.opt=T,h.is={pub:e.pub,epub:e.epub,alias:s||e.pub},x.sea=r.pair,c.ing=!1;try{d&&n==(l(c.root.graph["~"+e.pub].auth)||"")[":"]&&(g.shuffle=g.change=d)}catch{}if(g.change?r.z():(p||a)(x),u.window&&(f.back("user")._.opt||g).remember)try{var k={};k=window.sessionStorage,k.recall=!0,k.pair=JSON.stringify(e)}catch{}try{v._.tag.auth?v._.on("auth",x):setTimeout(function(){v._.on("auth",x)},1)}catch(j){o.log("Your 'auth' callback crashed with:",j)}},r.z=function(){r.salt=String.random(64),u.work(g.change,r.salt,r.y)},r.y=function(e){u.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},e,r.x,{raw:1})},r.x=function(e){r.w(JSON.stringify({ek:e,s:r.salt}))},r.w=function(e){if(g.shuffle){console.log("migrate core account from UTF8 & shuffle");var h={};Object.keys(r.data).forEach(function(x){h[x]=r.data[x]}),delete h._,h.auth=e,v.get("~"+r.pair.pub).put(h)}v.get("~"+r.pair.pub).get("auth").put(e,p||a)},r.err=function(e){var h={err:o.log(e||"User cannot be found!")};c.ing=!1,(p||a)(h)},r.plugin=function(e){if(!(r.name=e))return r.err();var h=[e];e[0]!=="~"&&(h[1]="~"+e,h[2]="~@"+e),r.b(h)},y?r.g(y):s?v.get("~@"+s).once(r.a):!s&&!d&&u.name(r.plugin),f};function l(t){if(typeof t!="string")return t;try{t=JSON.parse(t)}catch{t={}}return t}})(_,"./auth"),_(function(m){var i=_("./user"),u=i.SEA;i.GUN,i.prototype.recall=function(o,a){var l=this,t=l.back(-1);if(o=o||{},o&&o.sessionStorage){if(u.window)try{var y={};y=window.sessionStorage,y&&(t._.opt.remember=!0,(l.back("user")._.opt||o).remember=!0,(y.recall||y.pair)&&t.user().auth(JSON.parse(y.pair),a))}catch{}return l}return l}})(_,"./recall"),_(function(m){var i=_("./user"),u=i.SEA,o=i.GUN,a=function(){};i.prototype.pair=function(){var l=this,t;try{t=new Proxy({DANGER:"\u2620"},{get:function(y,s,d){if(!(!l.is||!(l._||"").sea))return l._.sea[s]}})}catch{}return t},i.prototype.delete=async function(l,t,y){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var s=this;s.back(-1);var d=s.back("user");try{d.auth(l,t,function(p){var g=(d.is||{}).pub;d.map().once(function(){this.put(null)}),d.leave(),(y||a)({ok:0})})}catch(p){o.log("User.delete failed! Error:",p)}return s},i.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const l=this.back(-1);try{return await authRecall(l),l._.user._}catch{const y="No session!";throw o.log(y),{err:y}}},i.prototype.trust=async function(l){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(l)&&l.get("pub").get((t,y)=>{console.log(t,y)}),l.get("trust").get(path).put(theirPubkey)},i.prototype.grant=function(l,t){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,s=y.back(-1).user(),d=s._.sea,p="";return y.back(function(g){g.is||(p+=g.get||"")}),async function(){var g,f=await s.get("grant").get(d.pub).get(p).then();f=await u.decrypt(f,d),f||(f=u.random(16).toString(),g=await u.encrypt(f,d),s.get("grant").get(d.pub).get(p).put(g));var c=l.get("pub").then(),v=l.get("epub").then();c=await c,v=await v;var r=await u.secret(v,d);g=await u.encrypt(f,r),s.get("grant").get(c).get(p).put(g,t)}(),y},i.prototype.secret=function(l,t){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,s=y.back(-1).user(),d=s.pair(),p="";return y.back(function(g){g.is||(p+=g.get||"")}),async function(){var g,f=await s.get("trust").get(d.pub).get(p).then();f=await u.decrypt(f,d),f||(f=u.random(16).toString(),g=await u.encrypt(f,d),s.get("trust").get(d.pub).get(p).put(g)),g=await u.encrypt(l,f),y.put(g,t)}(),y},m.exports=i})(_,"./share"),_(function(m){var i=_("./sea"),u=_("./settings"),o=function(){},a,l=""+a!=typeof window?window.Gun||{on:o}:_((""+a==typeof O?".":"")+"./gun",1);l.on("opt",function(f){f.sea||(f.sea={own:{}},f.on("put",t,f)),this.to.next(f)});function t(f){var c=this,v=c.as,r=f.put,n=r["#"],e=r["."],h=r[":"],x=r[">"],T=f["#"],k;if(!(!n||!e)){if((f._||"").faith&&(v.opt||"").faith&&typeof f._=="function"){i.opt.pack(r,function(S){i.verify(S,!1,function($){r["="]=i.opt.unpack($),c.to.next(f)})});return}var j=function(S){v.on("in",{"@":T,err:f.err=S})};if((f._||"").DBG&&((f._||"").DBG.c=+new Date),0<=n.indexOf("<?")&&(k=parseFloat(n.split("<?")[1]||""),k&&x<l.state()-k*1e3)){(k=f._)&&k.stun&&k.stun--;return}if(n==="~@"){t.alias(c,f,h,e,n,v,j);return}if(n.slice(0,2)==="~@"){t.pubs(c,f,h,e,n,v,j);return}if(k=i.opt.pub(n)){t.pub(c,f,h,e,n,v,j,v.user||"",k);return}if(0<=n.indexOf("#")){t.hash(c,f,h,e,n,v,j);return}t.any(c,f,h,e,n,v,j,v.user||"")}}t.hash=function(f,c,v,r,n,e,h){i.work(v,null,function(x){if(x&&x===r.split("#").slice(-1)[0])return f.to.next(c);h("Data hash not same as hash!")},{name:"SHA-256"})},t.alias=function(f,c,v,r,n,e,h){if(!v)return h("Data must exist!");if("~@"+r===s(v))return f.to.next(c);h("Alias not same!")},t.pubs=function(f,c,v,r,n,e,h){if(!v)return h("Alias must exist!");if(r===s(v))return f.to.next(c);h("Alias not same!")},t.pub=async function(f,c,v,r,n,e,h,x,T){var k;const j=await u.parse(v)||{},S=($,w,b)=>{if($.m&&$.s&&w&&T)return i.verify($,T,A=>{if(a!==A&&a!==A.e&&c.put[">"]&&c.put[">"]>parseFloat(A.e))return h("Certificate expired.");if(a!==A&&A.c&&A.w&&(A.c===w||A.c.indexOf("*")>-1)){let C=n.indexOf("/")>-1?n.replace(n.substring(0,n.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const D=Array.isArray(A.w)?A.w:typeof A.w=="object"||typeof A.w=="string"?[A.w]:[];for(const N of D)if(String.match(C,N["#"])&&String.match(r,N["."])||!N["."]&&String.match(C,N["#"])||!N["#"]&&String.match(r,N["."])||String.match(C?C+"/"+r:r,N["#"]||N)){if(N["+"]&&N["+"].indexOf("*")>-1&&C&&C.indexOf(w)==-1&&r.indexOf(w)==-1)return h(`Path "${C}" or key "${r}" must contain string "${w}".`);if(A.wb&&(typeof A.wb=="string"||(A.wb||{})["#"])){var E=f.as.root.$.back(-1);return typeof A.wb=="string"&&A.wb.slice(0,1)!=="~"&&(E=E.get("~"+T)),E.get(A.wb).get(w).once(P=>P&&(P===1||P===!0)?h(`Certificant ${w} blocked.`):b(A))}return b(A)}return h("Certificate verification fail.")}})};if(r==="pub"&&"~"+T===n)return v===T?f.to.next(c):h("Account not same!");if((k=x.is)&&k.pub&&!j["*"]&&!j["+"]&&(T===k.pub||T!==k.pub&&((c._.msg||{}).opt||{}).cert)){i.opt.pack(c.put,$=>{i.sign($,x._.sea,async function(w){if(a===w)return h(i.err||"Signature fail.");if(c.put[":"]={":":k=i.opt.unpack(w.m),"~":w.s},c.put["="]=k,T===x.is.pub){(k=s(v))&&((e.sea.own[k]=e.sea.own[k]||{})[T]=1),JSON.stringifyAsync(c.put[":"],function(b,A){return b?h(b||"Stringify error."):(c.put[":"]=A,f.to.next(c))});return}if(T!==x.is.pub&&((c._.msg||{}).opt||{}).cert){const b=await u.parse(c._.msg.opt.cert);b&&b.m&&b.s&&S(b,x.is.pub,A=>{c.put[":"]["+"]=b,c.put[":"]["*"]=x.is.pub,JSON.stringifyAsync(c.put[":"],function(E,C){return E?h(E||"Stringify error."):(c.put[":"]=C,f.to.next(c))})})}},{raw:1})});return}i.opt.pack(c.put,$=>{i.verify($,j["*"]||T,function(w){var b;if(w=i.opt.unpack(w),a===w)return h("Unverified data.");if((b=s(w))&&T===i.opt.pub(b)&&((e.sea.own[b]=e.sea.own[b]||{})[T]=1),j["+"]&&j["+"].m&&j["+"].s&&j["*"])S(j["+"],j["*"],A=>(c.put["="]=w,f.to.next(c)));else return c.put["="]=w,f.to.next(c)})})},t.any=function(f,c,v,r,n,e,h,x){if(e.opt.secure)return h("Soul missing public key at '"+r+"'.");e.on("secure",function(T){if(this.off(),!e.opt.secure)return f.to.next(T);h("Data cannot be changed.")}).on.on("secure",c)};var y=l.valid,s=function(f,c){return typeof(c=y(f))=="string"&&c};(l.state||"").ify;var d=/[^\w_-]/;i.opt.pub=function(f){if(!!f&&(f=f.split("~"),!(!f||!(f=f[1]))&&(f=f.split(d).slice(0,2),!(!f||f.length!=2)&&(f[0]||"")[0]!=="@")))return f=f.slice(0,2).join("."),f},i.opt.stringy=function(f){},i.opt.pack=function(f,c,v,r,n){var e,h;if(i.opt.check(f))return c(f);f&&f["#"]&&f["."]&&f[">"]&&(e=f[":"],h=1),JSON.parseAsync(h?e:f,function(x,T){var k=a!==(T||"")[":"]&&(T||"")["~"];if(!k){c(f);return}c({m:{"#":n||f["#"],".":v||f["."],":":(T||"")[":"],">":f[">"]||l.state.is(r,v)},s:k})})};var p=i.opt;i.opt.unpack=function(f,c,v){var r;if(a!==f){if(f&&a!==(r=f[":"]))return r;if(c=c||p.fall_key,!v&&p.fall_val&&(v={},v[c]=p.fall_val),!(!c||!v)){if(f===v[c]||!i.opt.check(v[c]))return f;var n=v&&v._&&v._["#"]||p.fall_soul,e=l.state.is(v,c)||p.fall_state;if(f&&f.length===4&&n===f[0]&&c===f[1]&&g(e)===g(f[3]))return f[2];if(e<i.opt.shuffle_attack)return f}}},i.opt.shuffle_attack=15463296e5;var g=Math.floor})(_,"./index")})()})($t);var ht=$t.exports,Et=typeof window!="undefined"?window.Gun:nt.exports;Et.chain.promise=function(I){var _=this,I=I||function(O){return O};return new Promise(function(O,m){_.once(function(i,u){O({put:i,get:u,gun:this})})}).then(I)};Et.chain.then=function(I){var _=this,O=new Promise((m,i)=>{_.once(function(u,o){m(u,o)})});return I?O.then(I):O};var Dt={exports:{}};(function(){function I(){var u=function(o,a,l){if(u.unit=0,!l&&m!==a&&(u.last=""+o<u.last?u.last:""+o,delete(u.$||{})[i]),l=l||u.$||(u.$={}),!o&&Object.keys(l).length)return l;o=""+o;for(var t=0,y=o.length-1,s=o[t],d,p;!(d=l[s])&&t<y;)s+=o[++t];if(d)if(t==y){if(m===a)return m===(p=d[""])?d:(u.unit=1)&&p;d[""]=a}else return m!==a&&delete d[i],u(o.slice(++t),a,d||(d={}));else{if(!_(l,function(g,f){var c=0,v="";if((f||"").length)for(;f[c]==o[c];)v+=f[c++];if(v){if(m===a)return c<=y?void 0:((p||(p={}))[f.slice(c)]=g,g);var r={};if(r[f.slice(c)]=g,c=o.slice(c),c===""?r[""]=a:(r[c]={})[""]=a,l[v]=r,I.debug&&""+v=="undefined"){console.log(0,v);debugger}return delete l[f],!0}})){if(m===a)return;if((l[s]||(l[s]={}))[""]=a,I.debug&&""+s=="undefined"){console.log(1,s);debugger}}if(m===a)return p}};return u}if(I.map=function u(o,a,l,t){t=t||[];var y=typeof o=="function"?o.$||{}:o;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!y){if(typeof y=="string"){if(I.debug)throw["BUG:",o,a,l,t];return}var s=(y[i]||O).sort||(y[i]=function k(){return k.sort=Object.keys(y).sort(),k}()).sort,d;l=l===!0?{branch:!0}:l||{},(d=l.reverse)&&(s=s.slice(0).reverse());for(var p=l.start,g=l.end,f="\uFFFF",c=0,v=s.length;c<v;c++){var r=s[c],n=y[r],e,h,x;if(!(!n||r===""||i===r)&&(h=t.slice(0),h.push(r),x=h.join(""),!(m!==p&&x<(p||"").slice(0,x.length))&&!(m!==g&&(g||f)<x))){if(d&&(e=u(n,a,l,h),m!==e))return e;if(m!==(e=n[""])){var T=1;if(m!==p&&x<(p||"")&&(T=0),m!==g&&x>(g||f)&&(T=0),T&&(e=a(e,x,r,t),m!==e))return e}else if(l.branch&&(e=a(m,x,r,t),m!==e))return e;if(t=h,!d&&(e=u(n,a,l,t),m!==e))return e;t.pop()}}}},typeof window!="undefined")window.Radix=I;else try{Dt.exports=I}catch{}var _=I.object=function(u,o,a){for(var l in u)if(!!u.hasOwnProperty(l)&&(a=o(u[l],l))!==m)return a},O={},m,i=String.fromCharCode(24)})();var Nt={exports:{}},_e={exports:{}};(function(I){(function(){var _={},O,m=setTimeout.turn||typeof setImmediate!=""+O&&setImmediate||setTimeout;_.parseAsync=function(u,o,a,l){if(typeof u!="string"){try{o(O,JSON.parse(u))}catch(s){o(s)}return}var t={i:0,text:u,done:o,l:u.length,up:[]};l=l||1024*32,y();function y(){for(var s=t.text,d=t.i,p=t.l,g=0,f=t.w,c,v;g++<l;){var r=s[d++];if(d>p){t.end=!0;break}if(f)d=s.indexOf('"',d-1),r=s[d],v=s[d-1]=="\\",c=c||v,r=='"'&&!v&&(f=O,v=t.s,t.a?(v=s.slice(t.sl,d),(c||1+v.indexOf("\\u"))&&(v=JSON.parse('"'+v+'"')),t.at instanceof Array?t.at.push(t.s=v):(t.at||(t.end=g=l,v=O),(t.at||{})[t.s]=t.s=v)):(t.s=s.slice(t.sl,d),(c||1+t.s.indexOf("\\u"))&&(t.s=JSON.parse('"'+t.s+'"'))),t.a=c=O),++d;else switch(r){case'"':t.sl=d,f=!0;break;case":":t.ai=d,t.a=!0;break;case",":(t.a||t.at instanceof Array)&&(v=s.slice(t.ai,d-1))&&O!==(v=i(v))&&(t.at instanceof Array?t.at.push(v):t.at[t.s]=v),t.a=O,t.at instanceof Array&&(t.a=!0,t.ai=d);break;case"{":t.up.push(t.at||(t.at={})),t.at instanceof Array?t.at.push(t.at={}):O!==(v=t.s)&&(t.at[v]=t.at={}),t.a=O;break;case"}":t.a&&(v=s.slice(t.ai,d-1))&&O!==(v=i(v))&&(t.at instanceof Array?t.at.push(v):(t.at||(t.end=g=l,v=O),(t.at||{})[t.s]=v)),t.a=O,t.at=t.up.pop();break;case"[":O!==(v=t.s)?(t.up.push(t.at),t.at[v]=t.at=[]):t.at||t.up.push(t.at=[]),t.a=!0,t.ai=d;break;case"]":t.a&&(v=s.slice(t.ai,d-1))&&O!==(v=i(v))&&(t.at instanceof Array?t.at.push(v):t.at[t.s]=v),t.a=O,t.at=t.up.pop();break}}if(t.s=O,t.i=d,t.w=f,t.end){if(v=t.at,O===v)try{v=JSON.parse(u)}catch(n){return t.done(n)}t.done(O,v)}else m(y)}};function i(u){var o=parseFloat(u);if(!isNaN(o))return o;if(u=u.trim(),u=="true")return!0;if(u=="false")return!1;if(u=="null")return null}_.stringifyAsync=function(u,o,a,l,t){t=t||{},t.text=t.text||"",t.up=[t.at={d:u}],t.done=o,t.i=0;var y=0;s();function s(){var d=t.at,p=d.d,g="",f;switch(d.i&&d.i-d.j>0&&(g+=","),O!==(f=d.k)&&(g+=JSON.stringify(f)+":"),typeof p){case"boolean":g+=""+p;break;case"string":g+=JSON.stringify(p);break;case"number":g+=p;break;case"object":if(!p){g+="null";break}if(p instanceof Array){g+="[",d={i:-1,as:p,up:d,j:0},d.l=p.length,t.up.push(t.at=d);break}if(typeof(p||"").toJSON!="function"){g+="{",d={i:-1,ok:Object.keys(p).sort(),as:p,up:d,j:0},d.l=d.ok.length,t.up.push(t.at=d);break}if(f=p.toJSON()){g+=f;break}case"function":if(d.as instanceof Array){g+="null";break}default:g="",d.j++}for(t.text+=g;1+d.i>=d.l;)t.text+=d.ok?"}":"]",d=t.at=d.up;if(++d.i<d.l){if((f=d.ok)?d.d=d.as[d.k=f[d.i]]:d.d=d.as[d.i],++y<9)return s();y=0,m(s);return}t.done(O,t.text)}},typeof window!=""+O&&(window.YSON=_);try{""+O!="object"&&(I.exports=_)}catch{}typeof JSON!=""+O&&(JSON.parseAsync=_.parseAsync,JSON.stringifyAsync=_.stringifyAsync)})()})(_e);(function(){function I(m){m=m||{},m.log=m.log||console.log,m.file=String(m.file||"radata");var i=(I.has||(I.has={}))[m.file];if(i)return i;m.max=m.max||(m.memory?m.memory*999*999:3e8)*.3,m.until=m.until||m.wait||250,m.batch=m.batch||10*1e3,m.chunk=m.chunk||1024*1024*1,m.code=m.code||{},m.code.from=m.code.from||"!",m.jsonify=!0;function u(c){return encodeURIComponent(c).replace(/\*/g,"%2A")}function o(c){return t!==c&&(!c||typeof c!="object")}var a=""+t==typeof setImmediate?setTimeout:setImmediate,l=setTimeout.turn||a,t,y=O.object,s=0;if(!m.store)return m.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!m.store.put)return m.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!m.store.get)return m.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");!m.store.list;var d=JSON.parseAsync||function(c,v,r){var n;try{v(n,JSON.parse(c,r))}catch(e){v(e)}},p=function(c,v,r,n,e){if(typeof v=="function"){var h=r||{};r=v,p.read(c,r,h,e||n);return}p.save(c,v,r,n,e)};p.save=function(c,v,r,n,e){var h={key:c},x,T;h.find=function(k){var j;if(h.file=k||(k=m.code.from),e&&(e=e[k]=e[k]||{}),e&&(e.sf=e.sf||+new Date),j=p.disk[k]){h.mix(t,j);return}p.parse(k,h.mix,t,e)},h.mix=function(k,j){if(e&&(e.sml=+new Date),e&&(e.sm=e.sm||+new Date),h.err=k||h.err){r(k);return}var S=h.file=(j||"").file||h.file,$;if(!j&&S!==m.code.from){p.find.bad(S),p.save(c,v,r,n);return}if((j=p.disk[S]||(p.disk[S]=j||O())).file||(j.file=S),m.compare&&(v=m.compare(j(c),v,c,S),t===v)){r(k,-1);return}if((h.disk=j)(c,v),n&&(($=($=j.tags||(j.tags={}))[n]||($[n]=p.tags[n]||(p.tags[n]={})))[S]||($[S]=p.one[n]||(p.one[n]=r)),r=null),e&&(e.st=e.st||+new Date),j.Q){r&&j.Q.push(r);return}j.Q=r?[r]:[],j.to=setTimeout(h.write,m.until)},h.write=function(){e&&(e.sto=e.sto||+new Date);var k=x=h.file,j=h.disk;T=h.q=j.Q,h.tags=j.tags,delete j.Q,delete p.disk[k],delete j.tags,p.write(k,j,h.ack,t,e)},h.ack=function(k,j){e&&(e.sa=e.sa||+new Date),e&&(e.sal=T.length);var S,$;for(var w in p.tags)if(!!p.tags.hasOwnProperty(w)){var b=p.tags[w];if(!(($=p.disk[x])&&($=$.tags)&&$[b])){S=b[x],delete b[x];var A;for(var E in b)if(b.hasOwnProperty(E)){A=!0;break}A||(delete p.tags[b],S&&S(k,j))}}!T&&(T="");for(var C=T.length,D=0,N=+new Date;D<C;D++)(S=T[D])&&S(k,j);console.STAT&&console.STAT(N,+new Date-N,"rad acks",u(h.file)),console.STAT&&console.STAT(N,T.length,"rad acks #",u(h.file))},r||(r=function(k,j){}),p.find(c,h.find)},p.disk={},p.one={},p.tags={};var g=0;p.write=function(c,v,r,n,e){if(!v){r("No radix!");return}n=typeof n=="object"?n:{force:n};var h=function(){},x,T;if(h.text="",h.file=c=v.file||(v.file=c),!c){r("What file?");return}if(h.write=function(){var k=v.raw=h.text;p.disk[c=v.file||h.file||c]=v;var j=+new Date;e&&(e.wd=j),p.find.add(c,function($){if(e&&(e.wa=+new Date),$){r($);return}m.store.put(u(c),k,function(b,A){e&&(e.wp=+new Date),console.STAT&&console.STAT(j,s=+new Date-j,"wrote disk",JSON.stringify(c),++g,"total all writes."),r(b,A||1),v.Q||delete p.disk[c]})})},h.split=function(){var k=+new Date;e&&(e.wf=k),h.text="",h.count||(h.count=0,O.map(v,function(){h.count++})),e&&(e.wfc=h.count),h.limit=Math.ceil(h.count/2);var j=h.count;return h.count=0,e&&(e.wf1=+new Date),h.sub=O(),O.map(v,h.slice,{reverse:1}),e&&(e.wf2=+new Date),p.write(h.end,h.sub,h.both,n),e&&(e.wf3=+new Date),h.hub=O(),O.map(v,h.stop),e&&(e.wf4=+new Date),p.write(v.file,h.hub,h.both,n),e&&(e.wf5=+new Date),console.STAT&&console.STAT(k,+new Date-k,"rad split",u(v.file),j),!0},h.slice=function(k,j){if(h.sub(h.end=j,k),h.limit<=++h.count)return!0},h.stop=function(k,j){if(j>=h.end)return!0;h.hub(j,k)},h.both=function(k,j){if(e&&(e.wfd=+new Date),T){r(k||T);return}if(x){r(k,j);return}x=!0,T=k},h.each=function(k,j,S,$){if(t!==k&&h.count++,m.max<=(k||"").length)return r("Data too big!"),!0;var w=I.encode($.length)+"#"+I.encode(S)+(t===k?"":":"+I.encode(k))+`
`;if(m.chunk<h.text.length+w.length&&1<h.count&&!n.force)return h.split();h.text+=w},m.jsonify){p.write.jsonify(h,v,r,n,e);return}O.map(v,h.each,!0)||h.write()},p.write.jsonify=function(c,v,r,n,e){var h,x=+new Date;e&&(e.w=x);try{h=JSON.stringify(v.$)}catch{r("Cannot radisk!");return}if(e&&(e.ws=+new Date),console.STAT&&console.STAT(x,+new Date-x,"rad stringified JSON"),m.chunk<h.length&&!n.force){var T=0;if(O.map(v,function(){if(T++)return!0}),T>1)return c.split()}c.text=h,c.write()},p.range=function(c,v){if(!(!c||!v)){if(t===v.start&&t===v.end||o(c))return c;var r=O();return O.map(c,function(n,e){r(e,n)},v),r("")}},function(){p.read=function(c,v,r,n){r=r||{};var e={key:c};e.find=function(h){var x;if(e.file=h||(h=m.code.from),n&&(n=n[h]=n[h]||{}),n&&(n.rf=n.rf||+new Date),x=p.disk[e.file=h]){e.check(t,x);return}p.parse(h,e.check,t,n)},e.get=function(h,x,T){if(n&&(n.rgl=+new Date),n&&(n.rg=n.rg||+new Date),e.err=h||e.err){v(h);return}var k=e.file=(x||"").file||e.file;if(!x&&k!==m.code.from){p.find.bad(k),p.read(c,v,r);return}if(x=p.disk[k]||(p.disk[k]=x),!x){v(k===m.code.from?t:"No file!");return}x.file||(x.file=k);var j=p.range(x(c),r);if(n&&(n.rr=+new Date),r.unit=x.unit,r.chunks=(r.chunks||0)+1,r.parsed=(r.parsed||0)+((T||"").parsed||r.chunks*m.chunk),r.more=1,r.next=t,O.map(p.list,function(b,A){if(!(!b||k===A))return r.next=A,1},r.reverse?{reverse:1,end:k}:{start:k}),n&&(n.rl=+new Date),r.next||(r.more=0),r.next&&(!r.reverse&&(c<r.next&&r.next.indexOf(c)!=0||t!==r.end&&(r.end||"\uFFFF")<r.next)&&(r.more=0),r.reverse&&(c>r.next&&c.indexOf(r.next)!=0||t!==r.start&&(r.start||"")>r.next&&k<=r.start)&&(r.more=0)),!r.more){v(e.err,j,r);return}if(j&&v(e.err,j,r),!(r.parsed>=r.limit)){var S=+new Date;n&&(n.rm=S);var $=r.next;a(function(){console.STAT&&console.STAT(S,+new Date-S,"rad more"),p.parse($,e.check)},0)}},e.check=function(h,x,T){if(e.get(h,x,T),!(!x||x.check)){x.check=1;var k=+new Date;(T||(T={})).file||(T.file=e.file),O.map(x,function(j,S){p.find(S,function($){if(($||($=m.code.from))!==T.file){var w=(""+Math.random()).slice(-3);l(function(){p.save(S,j,function b(A,E){if(A){p.save(S,j,b);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",w,u(S),u(T.file),u($))})},0)}})}),console.STAT&&console.STAT(k,+new Date-k,"rad check")}},p.find(c||(r.reverse?r.end||"":r.start||""),e.find)}}(),function(){var c=0,v={},r=String.fromCharCode(31);p.parse=function(n,e,h,x){var T;if(!n)return e();if(T=v[n]){T.push(e);return}T=v[n]=[e];var k=function(){},j={file:n};(k.disk=O()).file=n,k.read=function($,w){if(x&&(x.rpg=+new Date),console.STAT&&console.STAT(S,+new Date-S,"read disk",JSON.stringify(n),++c,"total all parses."),(k.err=$)||(k.not=!w)){delete v[n],k.map(T,k.ack);return}if(typeof w!="string"){try{m.max<=w.length?k.err="Chunk too big!":w=w.toString()}catch(b){k.err=b}if(k.err){delete v[n],k.map(T,k.ack);return}}if(j.parsed=w.length,x&&(x.rpl=j.parsed),x&&(x.rpa=T.length),S=+new Date,!(m.jsonify||w[0]==="{")){k.radec($,w);return}d(w,function(b,A){if(!b){delete v[n],k.disk.$=A,console.STAT&&(s=+new Date-S)>9&&console.STAT(S,s,"rad parsed JSON"),x&&(x.rpd=+new Date),k.map(T,k.ack);return}if(w[0]==="{"){delete v[n],k.err="JSON error!",k.map(T,k.ack);return}k.radec(b,w)})},k.map=function(){if(!(!T||!T.length)){for(var $=+new Date,w=k.err,b=k.not?t:k.disk,A=0,E;A<9&&(E=T[A++]);)E(w,b,j);console.STAT&&console.STAT($,+new Date-$,"rad packs",u(n)),console.STAT&&console.STAT($,A,"rad packs #",u(n)),!!(T=T.slice(A)).length&&l(k.map,0)}},k.ack=function($){if(!!$){if(k.err||k.not){$(k.err,t,j);return}$(t,k.disk,j)}},k.radec=function($,w){delete v[n],S=+new Date;var b=k.split(w),A=[],E,C,D;if(!b||b[1]!==0){k.err="File '"+n+"' does not have root radix! ",k.map(T,k.ack);return}for(;b;)C=D=t,E=b[1],b=k.split(b[2])||"",b[0]=="#"&&(C=b[1],A=A.slice(0,E),E<=A.length&&A.push(C)),b=k.split(b[2])||"",b[0]!=`
`&&((b[0]=="="||b[0]==":")&&(D=b[1]),t!==C&&t!==D&&k.disk(A.join(""),D),b=k.split(b[2]));console.STAT&&console.STAT(S,+new Date-S,"parsed RAD"),k.map(T,k.ack)},k.split=function($){if(!!$){var w=[],b={},A=-1,E="";if(A=$.indexOf(r),!!$[A])return E=$.slice(0,A),w[0]=E,w[1]=I.decode($.slice(A),b),w[2]=$.slice(A+b.i),w}},p.disk&&(h||(h=(p.disk[n]||"").raw));var S=+new Date;if(x&&(x.rp=S),h)return l(function(){k.read(t,h)},0);m.store.get(u(n),k.read)}}(),function(){var c,v=String.fromCharCode(28),r;p.find=function(h,x){if(!c){if(r){r.push([h,x]);return}r=[[h,x]],p.parse(v,n);return}O.map(p.list=c,function(T,k){if(!!T)return x(k)||!0},{reverse:1,end:h})||x(m.code.from)},p.find.add=function(h,x){var T=c(h);if(T||h===v){x(t,1);return}c(h,1),x.found=(x.found||0)+1,p.write(v,c,function(k,j){if(k){x(k);return}x.found=(x.found||0)-1,x.found===0&&x(t,1)},!0)},p.find.bad=function(h,x){c(h,0),p.write(v,c,x||f)};function n(h,x){if(h){m.log("list",h),setTimeout(function(){p.parse(v,n)},1e3);return}if(x){e(x);return}if(c=c||x||O(),!m.store.list){e(c);return}m.store.list(function(T){if(!T){e(c);return}p.find.add(T,f)})}function e(h,x){c=c||h,c.file=v,x=r,r=null,y(x,function(T){p.find(T[0],T[1])})}}();try{!_.window&&require("./radmigtmp")(p)}catch{}var f=function(){},t;return I.has[m.file]=p,p}if(function(){var m=String.fromCharCode(31);I.encode=function(i,u,o){o=o||m;var a=o,l;if(typeof i=="string"){for(var t=i.indexOf(o);t!=-1;)a+=o,t=i.indexOf(o,t+1);return a+'"'+i+o}else{if(i&&i["#"]&&Object.keys(i).length==1)return a+"#"+l+a;if(typeof i=="number")return a+"+"+(i||0)+a;if(i===null)return a+" "+a;if(i===!0)return a+"+"+a;if(i===!1)return a+"-"+a}},I.decode=function(i,u,o){o=o||m;var a="",l=-1,t=0,y,s;if(o===i[0]){for(;o===i[++l];)++t;for(s=i[y=t]||!0;--t>=0;)l=i.indexOf(o,l+1);if(l==-1&&(l=i.length),a=i.slice(y+1,l),u&&(u.i=l+1),s==='"')return a;if(s==="#")return{"#":a};if(s==="+")return a.length===0?!0:parseFloat(a);if(s===" ")return null;if(s==="-")return!1}}}(),typeof window!="undefined"){var _=window.Gun,O=window.Radix;window.Radisk=I}else{var _=nt.exports,O=Dt.exports;try{Nt.exports=I}catch{}}I.Radix=O})();var Y=typeof window!="undefined"?window.Gun:nt.exports;Y.on("create",function(I){Y.TESTING&&(I.opt.file="radatatest"),this.to.next(I);var _=I.opt,O;if(!(_.rad===!1||_.radisk===!1)&&!(O+""!=typeof process&&""+(process.env||"").RAD=="false")){var m=Y.window&&Y.window.Radisk||Nt.exports,i=m.Radix,u=m(_),o=String.fromCharCode(27),a=0;I.on("put",function(t){if(this.to.next(t),!(t._||"").rad){var y=t["#"],s=t.put,d=s["#"],p=s["."],g=s[":"],f=s[">"],c=(t._||"").DBG;c&&(c.sp=c.sp||+new Date);var v=(t._||"").RPS||((t._||"").RPS=+new Date);u(d+o+p,{":":g,">":f},function(r,n){if(c&&(c.spd=c.spd||+new Date),console.STAT&&console.STAT(v,+new Date-v,"put"),r){I.on("in",{"@":y,err:r,DBG:c});return}I.on("in",{"@":y,ok:n,DBG:c})},!1,c&&(c.r=c.r||{})),c&&(c.sps=c.sps||+new Date)}}),I.on("get",function(t){this.to.next(t);var y=t._||"",s=y.DBG=t.DBG;s&&(s.sg=+new Date);var d=t["#"],p=t.get,g=t.get["#"],f=t.get["."]||"",c={},v,r,n,e;if(typeof g=="string"?r=g:g&&(O!==(n=g["*"])&&(c.limit=e=1),O!==g[">"]&&(c.start=g[">"]),O!==g["<"]&&(c.end=g["<"]),r=e?""+n:n||g["="],e=null),r&&!c.limit&&(typeof f=="string"?r=r+o+(c.atom=f):f&&(O!==f[">"]&&(c.start=f[">"],c.limit=1),O!==f["<"]&&(c.end=f["<"],c.limit=1),O!==(n=f["*"])&&(c.limit=e=1),r&&(r=r+o+(e?""+(n||""):n||(c.atom=f["="]||""))))),((n=p["%"])||c.limit)&&(c.limit=n<=(c.pack||1e3*100)?n:1),(f["-"]||(g||{})["-"]||p["-"])&&(c.reverse=!0),(n=(I.next||"")[g])&&n.put){if(c.atom){if(n=(n.next||"")[c.atom],n&&n.rad)return}else if(n&&n.rad)return}var h=Y.state(),x=+new Date,T=0;s&&(s.sgm=x),u(r||"",function(j,S,$){s&&(s.sgr=+new Date),s&&(s.sgi=$);try{_.store.stats.get.time[l%50]=+new Date-x,++l,_.store.stats.get.count++,j&&(_.store.stats.get.err=j)}catch{}console.STAT&&console.STAT(x,+new Date-x,"got",JSON.stringify(r)),x=+new Date,$=$||"";var w,b;if($.unit&&S&&O!==(w=S[":"])&&O!==(b=S[">"])){var A=r.split(o),E=A[0],C=A[1];(v=v||{})[E]=Y.state.ify(v[E],C,b,w,E),I.$.get(E).get(C)._.rad=h}else S&&(typeof S!="string"&&(c.atom?S=O:i.map(S,k,c)),!v&&S&&k(S,""),!c.atom&&!f&typeof g=="string"&&!c.limit&&!c.more&&(I.$.get(g)._.rad=h));s&&(s.sgp=+new Date),console.STAT&&(a=+new Date-x)>9&&(console.STAT(x,a,"got prep time"),console.STAT(x,T,"got prep #")),T=0,x=+new Date;var D=function(){};D.faith=!0,D.rad=p,I.on("in",{"@":d,put:v,"%":$.more?1:O,err:j||O,_:D,DBG:s}),console.STAT&&(a=+new Date-x)>9&&console.STAT(x,a,"got emit",Object.keys(v||{}).length),v=O},c,s&&(s.r=s.r||{})),s&&(s.sgd=+new Date),console.STAT&&(a=+new Date-x)>9&&console.STAT(x,a,"get call");function k(j,S,$,w){if(T++,!!j){S=(r+S).split(o);var b=S.slice(0,1)[0];if(S=S.slice(-1)[0],c.limit&&c.limit<=c.count)return!0;var A,E,C=b,D=S;if(typeof j!="string"){A=j[":"],E=j[">"],(v=v||{})[C]=Y.state.ify(v[C],D,E,A,C),c.count=(c.count||0)+((A||"").length||9);return}c.count=(c.count||0)+j.length;var N=j.lastIndexOf(">"),P=m.decode(j.slice(N+1),null,o);j=m.decode(j.slice(0,N),null,o),(v=v||{})[b]=Y.state.ify(v[b],S,P,j,b)}}}),Y.valid,(_.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}});var Se={exports:{}};(function(){function I(O){O=O||{},O.file=String(O.file||"radata");var m=I[O.file],i=null,u;if(m)return console.log("Warning: reusing same IndexedDB store and options as 1st."),I[O.file];m=I[O.file]=function(){};try{O.indexedDB=O.indexedDB||I.indexedDB||indexedDB}catch{}try{if(!O.indexedDB||location.protocol=="file:"){var o=m.d||(m.d={});return m.put=function(a,l,t){o[a]=l,setTimeout(function(){t(null,1)},250)},m.get=function(a,l){setTimeout(function(){l(null,o[a]||u)},5)},console.log("Warning: No indexedDB exists to persist data to!"),m}}catch{}return m.start=function(){var a=indexedDB.open(O.file,1);a.onupgradeneeded=function(l){l.target.result.createObjectStore(O.file)},a.onsuccess=function(){i=a.result},a.onerror=function(l){console.log(l||1)}},m.start(),m.put=function(a,l,t){if(!i){setTimeout(function(){m.put(a,l,t)},1);return}var y=i.transaction([O.file],"readwrite"),s=y.objectStore(O.file),d=s.put(l,""+a);d.onsuccess=s.onsuccess=y.onsuccess=function(){t(null,1)},d.onabort=s.onabort=y.onabort=function(p){t(p||"put.tx.abort")},d.onerror=s.onerror=y.onerror=function(p){t(p||"put.tx.error")}},m.get=function(a,l){if(!i){setTimeout(function(){m.get(a,l)},9);return}var t=i.transaction([O.file],"readonly"),y=t.objectStore(O.file),s=y.get(""+a);s.onsuccess=function(){l(null,s.result)},s.onabort=function(d){l(d||4)},s.onerror=function(d){l(d||5)}},setInterval(function(){i&&i.close(),i=null,m.start()},1e3*15),m}if(typeof window!="undefined")(I.window=window).RindexedDB=I,I.indexedDB=window.indexedDB;else try{Se.exports=I}catch{}try{var _=I.window.Gun||require("../gun");_.on("create",function(O){this.to.next(O),O.opt.store=O.opt.store||I(O.opt)})}catch{}})();(function(){var I=typeof window!="undefined"?window.Gun:nt.exports;I.on("create",function(_){})})();let K,dt;Ot.node.soul;const st=ft({pulse:0,peers:null,path:null});function ke(I="gunvue",_=["https://etogun.glitch.me/gun"],O=!1){return K=Ot({peers:_,localStorage:!1}),dt=K.get(I),O&&(window.gun=K,window.sea=ht),st.peers=_,st.path=I,dt.get("relay").get("pulse").on(m=>{st.pulse=m}),{gun:K,db:dt,relay:st}}const G=ft({is:null,pub:kt(()=>{var I;return(I=G.is)==null?void 0:I.pub}),profile:{},pair:null,name:null,presence:null,graph(){return K.user()},async generate(){G.pair=await ht.pair()},init(){G.is=K.user().is,G.presence=setInterval(()=>{K.user().get("presence").put(Date.now())},1500),K.user().get("profile").map().on((I,_)=>{G.profile[_]=I})},logout(){var I;let _=!!((I=G.is)==null?void 0:I.pub);K.user().leave(),clearInterval(G.presence),setTimeout(()=>{var O;_&&!((O=K.user()._)==null?void 0:O.sea)&&(G.is=null,G.profile={},console.info("User logged out"))},500)},auth(I=G.pair){if(!I)return console.log("No pair to auth");K.user().auth(I,async()=>{})},async hasPass(I){return await K.get(`~${I}`).get("pass").get("pair").then()},async logWithPass(I,_){let O=await K.get(`~${I}`).get("pass").get("pair").then();await ht.decrypt(O,_)}});function tn(){return Vt(G.profile,I=>{for(let _ in I)K.user().get("profile").get(_).put(I[_])}),K.user().recall({sessionStorage:!0},()=>{G.init()}),K.on("auth",()=>{G.init()}),{account:G}}const xe={setup(I){return ke(),(_,O)=>{const m=we,i=bt("router-view");return Q(),X(_t,null,[tt(m),tt(i,null,{default:lt(({Component:u})=>[tt(Qt,{name:"fade"},{default:lt(()=>[(Q(),Yt(Zt(u)))]),_:2},1024)]),_:1})],64)}}};const Ae="modulepreload",Ct={},Te="./",yt=function(_,O){return!O||O.length===0?_():Promise.all(O.map(m=>{if(m=`${Te}${m}`,m in Ct)return;Ct[m]=!0;const i=m.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${u}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Ae,i||(o.as="script",o.crossOrigin=""),o.href=m,document.head.appendChild(o),i)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",l)})})).then(()=>_())},je={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Oe=z("path",{d:"M16 4C9.383 4 4 9.383 4 16s5.383 12 12 12s12-5.383 12-12S22.617 4 16 4zm0 2c5.535 0 10 4.465 10 10s-4.465 10-10 10S6 21.535 6 16S10.465 6 16 6zm-1 2v9h7v-2h-5V8z",fill:"currentColor"},null,-1),$e=[Oe];function Ee(I,_){return Q(),X("svg",je,$e)}var De={name:"la-clock",render:Ee},Ne=Object.defineProperty,It=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Pt=(I,_,O)=>_ in I?Ne(I,_,{enumerable:!0,configurable:!0,writable:!0,value:O}):I[_]=O,at=(I,_)=>{for(var O in _||(_={}))Ce.call(_,O)&&Pt(I,O,_[O]);if(It)for(var O of It(_))Ie.call(_,O)&&Pt(I,O,_[O]);return I},vt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Jt(I){throw new Error('Could not dynamically require "'+I+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rt={exports:{}};(function(I){(function(){function _(m,i){return i?Jt(m):m.slice?_[u(m)]:function(o,a){m(o={exports:{}}),_[u(a)]=o.exports};function u(o){return o.split("/").slice(-1).toString().replace(".js","")}}var O=I;_(function(m){String.random=function(u,o){var a="";for(u=u||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";u-- >0;)a+=o.charAt(Math.floor(Math.random()*o.length));return a},String.match=function(u,o){var a,l;return typeof u!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},a=o["="]||o["*"]||o[">"]||o["<"],u===a?!0:l!==o["="]?!1:(a=o["*"]||o[">"],u.slice(0,(a||"").length)===a?!0:l!==o["*"]?!1:l!==o[">"]&&l!==o["<"]?u>=o[">"]&&u<=o["<"]:l!==o[">"]&&u>=o[">"]||l!==o["<"]&&u<=o["<"]))},String.hash=function(u,o){if(typeof u=="string"){if(o=o||0,!u.length)return o;for(var a=0,l=u.length,t;a<l;++a)t=u.charCodeAt(a),o=(o<<5)-o+t,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(u){return u?u instanceof Object&&u.constructor===Object||Object.prototype.toString.call(u).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(u,o){for(var a in u)if(i.call(u,a)&&(!o||o.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(u){var o=[];for(var a in u)i.call(u,a)&&o.push(a);return o},function(){var u,o=setTimeout,a=0,l=0,t=typeof setImmediate!=""+u&&setImmediate||o;o.poll=o.poll||function(y){if(1>=+new Date-a&&l++<3333){y();return}t(function(){a=+new Date,y()},l=0)}}(),function(){var u=setTimeout,o=u.turn=u.turn||function(d){a.push(d)==1&&l(s)},a=o.s=[],l=u.poll,t=0,y,s=function(){(y=a[t++])&&y(),(t==a.length||t==99)&&(a=o.s=a.slice(t),t=0),a.length&&l(s)}}(),function(){var u,o=setTimeout,a=o.turn;(o.each=o.each||function(l,t,y,s){s=s||9,function d(p,g,f){if(g=(p=(l||[]).splice(0,s)).length){for(var c=0;c<g&&u===(f=t(p[c]));c++);if(u===f){a(d);return}}y&&y(f)}()})()}()})(_,"./shim"),_(function(m){m.exports=function i(u,o,a){if(!u)return{to:i};var l,t=typeof o=="function",u=(this.tag||(this.tag={}))[u]||t&&(this.tag[u]={tag:u,to:i._={next:function(s){var d;(d=this.to)&&d.next(s)}}});if(t){var y={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:u,on:this,as:a};return(y.back=u.last||u).to=y,u.last=y}return(u=u.to)&&l!==o&&u.next(o),u}})(_,"./onto"),_(function(m){_("./shim"),m.exports=function(i){return i===void 0?!1:i===null?!0:i===1/0||i!==i?!1:typeof i=="string"||typeof i=="boolean"||typeof i=="number"?!0:i&&typeof(i["#"]||0)=="string"&&Object.empty(i,["#"])?i["#"]:!1}})(_,"./valid"),_(function(m){_("./shim");function i(){var y=+new Date;return l<y?(o=0,l=y+i.drift):l=y+(o+=1)/a+i.drift}i.drift=0;var u=-1/0,o=0,a=999,l=u,t;i.is=function(y,s,d){var p=s&&y&&y._&&y._[">"]||d;if(!!p)return typeof(p=p[s])=="number"?p:u},i.ify=function(y,s,d,p,g){(y=y||{})._=y._||{},g&&(y._["#"]=g);var f=y._[">"]||(y._[">"]={});return t!==s&&s!=="_"&&(typeof d=="number"&&(f[s]=d),t!==p&&(y[s]=p)),y},m.exports=i})(_,"./state"),_(function(m){_("./shim");function i(u){var o={s:{}},a=o.s;u=u||{max:999,age:1e3*9},o.check=function(t){return a[t]?l(t):!1};var l=o.track=function(t){var y=a[t]||(a[t]={});return y.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,u.age+9)),y};return o.drop=function(t){o.to=null,o.now=+new Date;var y=Object.keys(a);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(y,function(s){var d=a[s];d&&(t||u.age)>o.now-d.was||delete a[s]},0,99)},o}m.exports=i})(_,"./dup"),_(function(m){_("./onto"),m.exports=function(o,a){if(!!this.on){var l=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var y=o["#"]||o,t=(this.tag||"")[y];return t?(a&&(t=this.on(y,a),clearTimeout(t.err),t.err=setTimeout(function(){t.off()},l)),!0):void 0}var y=a&&a["#"]||i(9);if(!o)return y;var s=this.on(y,o,a);return s.err=s.err||setTimeout(function(){s.off(),s.next({err:"Error: No ACK yet.",lack:!0})},l),y}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(_,"./ask"),_(function(m){function i(g){return g instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:g}):new i(g)}i.is=function(g){return g instanceof i||g&&g._&&g===g._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},_("./shim"),i.valid=_("./valid"),i.state=_("./state"),i.on=_("./onto"),i.dup=_("./dup"),i.ask=_("./ask"),function(){i.create=function(S){S.root=S.root||S,S.graph=S.graph||{},S.on=S.on||i.on,S.ask=S.ask||i.ask,S.dup=S.dup||i.dup();var $=S.$.opt(S.opt);return S.once||(S.on("in",g,S),S.on("out",g,S),S.on("put",v,S),i.on("create",S),S.on("create",S)),S.once=1,$};function g(S){if(!!S){if(S.out===g){this.to.next(S);return}var $=this,w=$.as,b=w.at||w,A=b.$,E=b.dup,C,D=S.DBG;if((C=S["#"])||(C=S["#"]=o(9)),!E.check(C)){if(E.track(C),C=S._,S._=typeof C=="function"?C:function(){},S.$&&S.$===(S.$._||"").$||(S.$=A),S["@"]&&!S.put&&n(S),!b.ask(S["@"],S))if(D&&(D.u=+new Date),S.put){f(S);return}else S.get&&i.on.get(S,A);D&&(D.uc=+new Date),$.to.next(S),D&&(D.ua=+new Date),!(S.nts||S.NTS)&&(S.out=g,b.on("out",S),D&&(D.ue=+new Date))}}}function f(S){if(!!S){var $=S._||"",w=$.root=(($.$=S.$||"")._||"").root;if(S["@"]&&$.faith&&!$.miss){S.out=g,w.on("out",S);return}$.latch=w.hatch,$.match=w.hatch=[];var b=S.put,A=$.DBG=S.DBG,E=+new Date;if(!(b["#"]&&b["."])){A&&(A.p=E),$["#"]=S["#"],$.msg=S,$.all=0,$.stun=1;var C=Object.keys(b);console.STAT&&console.STAT(E,((A||$).pk=+new Date)-E,"put sort");var D=0,N,P,J,U,R,M,F;(function H(L){if(N!=D){if(N=D,!(J=C[D])){console.STAT&&console.STAT(E,((A||$).pd=+new Date)-E,"put"),r($);return}(U=b[J])?(F=U._)?J!==F["#"]?M=h+x(J)+"soul not same.":(R=F[">"])||(M=h+x(J)+"no state."):M=h+x(J)+"no meta.":M=h+x(J)+"no node.",P=Object.keys(U||{})}if(M){S.err=$.err=M,r($);return}var it=0,B;for(L=L||0;L++<9&&(B=P[it++]);)if(B!=="_"){var V=U[B],ot=R[B];if(s===ot){M=h+x(B)+"on"+x(J)+"no state.";break}if(!l(V)){M=h+x(B)+"on"+x(J)+"bad "+typeof V+x(V);break}c(V,B,J,ot,S)}if((P=P.slice(it)).length){a(H);return}++D,P=null,H(L)})()}}}i.on.put=f;function c(S,$,w,b,A){var E=A._||"",C=E.root,D=C.graph,N,P=D[w]||d,J=t(P,$,1),U=P[$],R=E.DBG;(N=console.STAT)&&(!D[w]||!U)&&(N.has=(N.has||0)+1);var M=j();if(b>M){setTimeout(function(){c(S,$,w,b,A)},(N=b-M)>k?k:N),console.STAT&&console.STAT((R||E).Hf=+new Date,N,"future");return}if(!(b<J&&!E.miss)&&!(!E.faith&&b===J&&(S===U||T(S)<=T(U))&&!E.miss)){E.stun++;var F=A["#"]+E.all++,H={toString:function(){return F},_:E};H.toJSON=H.toString,R&&(R.ph=R.ph||+new Date),C.on("put",{"#":H,"@":A["@"],put:{"#":w,".":$,":":S,">":b},_:E})}}function v(S){var $;($=(S._||"").DBG)&&($.pa=+new Date,$.pm=$.pm||+new Date);var w=this,b=w.as,A=b.graph,E=S._,C=S.put,D=C["#"],N=C["."],P=C[":"],J=C[">"];S["#"];var U;(U=E.msg)&&(U=U.put)&&(U=U[D])&&y(U,N,J,P,D),A[D]=y(A[D],N,J,P,D),(U=(b.next||"")[D])&&U.on("in",S),r(E),w.to.next(S)}function r(S,$){var w;if(!S.stop&&!(!S.err&&0<--S.stun)&&(S.stop=1,!!(w=S.root))){var b=S.match;b.end=1,b===w.hatch&&(!(b=S.latch)||b.end?delete w.hatch:w.hatch=b),S.hatch&&S.hatch(),setTimeout.each(S.match,function(A){A&&A()}),!(!($=S.msg)||S.err||$.err)&&($.out=g,S.root.on("out",$))}}function n(S){var $=S["@"]||"",w;!(w=$._)||(w.acks=(w.acks||0)+1,(w.err=S.err)&&(S["@"]=w["#"],r(w)),!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){e(w)})),e(w))}function e(S){!S||!S.root||S.stun||S.acks!==S.all||S.root.on("in",{"@":S["#"],err:S.err,ok:S.err?s:{"":1}})}var h="Error: Invalid graph!",x=function(S){return" '"+(""+S).slice(0,9)+"...' "},T=JSON.stringify,k=2147483647,j=i.state}(),function(){i.on.get=function(f,c){var v=c._,r=f.get,n=r["#"],e=v.graph[n],h=r["."],x=v.next||(v.next={});x[n];var T=f._||{},k=T.DBG=f.DBG;if(k&&(k.g=+new Date),!e)return v.on("get",f);if(h){if(typeof h!="string"||s===e[h])return v.on("get",f);e=y({},h,t(e,h),e[h],n)}e&&g(f,e),v.on("get",f)};function g(f,c){var v=+new Date,r=f._||{},n=r.DBG=f.DBG,e=f["#"],h=o(9),x=Object.keys(c||"").sort(),T=((c||"")._||"")["#"];x.length;var k=f.$._.root,j=c===k.graph[T];console.STAT&&console.STAT(v,((n||r).gk=+new Date)-v,"got keys"),c&&function S(){v=+new Date;for(var $=0,w,b={},A;$<9&&(w=x[$++]);)y(b,w,t(c,w),c[w],T);x=x.slice($),(A={})[T]=b,b=A;var E;j&&(E=function(){},E.ram=E.faith=!0),A=x.length,console.STAT&&console.STAT(v,-(v-(v=+new Date)),"got copied some"),n&&(n.ga=+new Date),k.on("in",{"@":e,"#":h,put:b,"%":A?h=o(9):s,$:k.$,_:E,DBG:n}),console.STAT&&console.STAT(v,+new Date-v,"got in"),!!A&&setTimeout.turn(S)}(),c||k.on("in",{"@":f["#"]})}i.on.get.ack=g}(),function(){i.chain.opt=function(g){g=g||{};var f=this,c=f._,v=g.peers||g;return Object.plain(g)||(g={}),Object.plain(c.opt)||(c.opt=g),typeof v=="string"&&(v=[v]),v instanceof Array&&(Object.plain(c.opt.peers)||(c.opt.peers={}),v.forEach(function(r){var n={};n.id=n.url=r,c.opt.peers[r]=c.opt.peers[r]||n})),c.opt.peers=c.opt.peers||{},u(g,function r(n){var e=this[n];if(this&&this.hasOwnProperty(n)||typeof e=="string"||Object.empty(e)){this[n]=e;return}e&&e.constructor!==Object&&!(e instanceof Array)||u(e,r)}),i.on("opt",c),c.opt.uuid=c.opt.uuid||function(n){return i.state().toString(36).replace(".","")+String.random(n||12)},f}}();var u=function(g,f){Object.keys(g).forEach(f,g)},o=String.random,a=setTimeout.turn,l=i.valid,t=i.state.is,y=i.state.ify,s,d={},p;i.log=function(){return!i.log.off&&p.log.apply(p,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(g,f,c){return(c=i.log.once)[g]=c[g]||0,c[g]++||i.log(f)},typeof window!="undefined"&&((window.GUN=window.Gun=i).window=window);try{typeof O!="undefined"&&(O.exports=i)}catch{}m.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(p=console).only=function(g,f){return p.only.i&&g===p.only.i&&p.only.i++&&(p.log.apply(p,arguments)||f)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(_,"./root"),_(function(m){var i=_("./root");i.chain.back=function(a,l){var t;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var y=this,s=y._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var d=0,p=a.length,t=s;for(d;d<p;d++)t=(t||u)[a[d]];return o!==t?l?y:t:(t=s.back)?t.$.back(a,l):void 0}if(typeof a=="function"){for(var g,t={back:s};(t=t.back)&&o===(g=a(t,l)););return g}return typeof a=="number"?(s.back||s).$.back(a-1):this};var u={},o})(_,"./back"),_(function(m){var i=_("./root");i.chain.chain=function(r){var n=this,e=n._,h=new(r||n).constructor(n),x=h._,T;return x.root=T=e.root,x.id=++T.once,x.back=n._,x.on=i.on,x.on("in",i.on.in,x),x.on("out",i.on.out,x),h};function u(r){var n,e=this.as,h=e.back,x=e.root,T;if(r.$||(r.$=e.$),this.to.next(r),e.err){e.on("in",{put:e.put=s,$:e.$});return}if(n=r.get){if(x.pass&&(x.pass[e.id]=e),e.lex&&Object.keys(e.lex).forEach(function(k){T[k]=e.lex[k]},T=r.get=r.get||{}),n["#"]||e.soul){if(n["#"]=n["#"]||e.soul,r["#"]||(r["#"]=d(9)),h=x.$.get(n["#"])._,n=n["."]){if(g(h.put,n)&&(T=h.ask&&h.ask[n],(h.ask||(h.ask={}))[n]=h.$.get(n)._,h.on("in",{get:n,put:{"#":h.soul,".":n,":":h.put[n],">":c(x.graph[h.soul],n)}}),T))return}else{if(T=h.ask&&h.ask[""],(h.ask||(h.ask={}))[""]=h,s!==h.put&&(h.on("in",h),T))return;r.$=h.$}return x.ask(t,r),x.on("in",r)}if(n["."])return e.get?(r={get:{".":e.get},$:e.$},(h.ask||(h.ask={}))[e.get]=r.$._,h.on("out",r)):(r={get:e.lex?r.get:{},$:e.$},h.on("out",r));if((e.ask||(e.ask={}))[""]=e,e.get)return n["."]=e.get,(h.ask||(h.ask={}))[e.get]=r.$._,h.on("out",r)}return h.on("out",r)}i.on.out=u;function o(r,n){n=n||this.as;var e=n.root,h=r.$||(r.$=n.$),x=(h||"")._||y,T=r.put||"",k=T["#"],j=T["."],S=s!==T["="]?T["="]:T[":"],$=T[">"]||-1/0,w;if(s!==r.put&&(s===T["#"]||s===T["."]||s===T[":"]&&s===T["="]||s===T[">"])){if(!p(T)){if(!(k=((T||"")._||"")["#"])){console.log("chain not yet supported for",T,"...",r,n);return}return h=n.root.$.get(k),setTimeout.each(Object.keys(T).sort(),function(b){b=="_"||s===($=c(T,b))||n.on("in",{$:h,put:{"#":k,".":b,"=":T[b],">":$},VIA:r})})}n.on("in",{$:x.back.$,put:{"#":k=x.back.soul,".":j=x.has||x.get,"=":T,">":c(x.back.put,j)},via:r});return}(r.seen||"")[n.id]||((r.seen||(r.seen=function(){}))[n.id]=n,n!==x&&(Object.keys(r).forEach(function(b){T[b]=r[b]},T={}),T.get=n.get||T.get,!n.soul&&!n.has?T.$$$=T.$$$||n.$:x.soul&&(T.$=n.$,T.$$=T.$$||x.$),r=T),l(r,n),(n.soul||r.$$)&&$>=c(e.graph[k],j)&&((T=e.$.get(k)._).put=v(T.put,j,$,S,k)),!x.soul&&$>=c(e.graph[k],j)&&(w=(e.$.get(k)._.next||"")[j])&&(w.put=S,typeof(T=p(S))=="string"&&(w.put=e.$.get(T)._.put||S)),this.to&&this.to.next(r),n.any&&setTimeout.each(Object.keys(n.any),function(b){(b=n.any[b])&&b(r)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(b){(b=n.echo[b])&&b.on("in",r)},0,99),((r.$$||"")._||x).soul&&(w=n.next)&&(w=w[j])&&(T={},Object.keys(r).forEach(function(b){T[b]=r[b]}),T.$=(r.$$||r.$).get(T.get=j),delete T.$$,delete T.$$$,w.on("in",T)),a(r,n))}i.on.in=o;function a(r,n){if(n=n||this.as||r.$._,!(r.$$&&this!==i.on)&&!(!r.put||n.soul)){var e=r.put||"",h=e["="]||e[":"],x,T=n.root,k=T.$.get(e["#"]).get(e["."])._;if(typeof(h=p(h))!="string"){this===i.on&&((k.echo||(k.echo={}))[n.id]=n);return}if(!((k.echo||(k.echo={}))[n.id]&&!(T.pass||"")[n.id])){if(x=T.pass){if(x[h+n.id])return;x[h+n.id]=1}(k.echo||(k.echo={}))[n.id]=n,n.has&&(n.link=h);var j=T.$.get(k.link=h)._;(j.echo||(j.echo={}))[k.id]=k;var x=n.ask||"";(x[""]||n.lex)&&j.on("out",{get:{"#":h}}),setTimeout.each(Object.keys(x),function(S,$){!S||!($=x[S])||$.on("out",{get:{"#":h,".":S}})},0,99)}}}i.on.link=a;function l(r,n){var e=r.put||"",h=s!==e["="]?e["="]:e[":"],x=n.root,T,k;if(s===h){if(n.soul&&s!==n.put||(k=(r.$$||r.$||"")._||"",r["@"]&&(s!==k.put||s!==n.put)))return;(T=n.link||r.linked)&&delete(x.$.get(T)._.echo||"")[n.id],n.has&&(n.link=null),n.put=s,setTimeout.each(Object.keys(n.next||""),function(j,S){!(S=n.next[j])||(T&&delete(x.$.get(T).get(j)._.echo||"")[S.id],S.on("in",{get:j,put:s,$:S.$}))},0,99);return}n.soul||r.$$||(T=p(h),k=r.$._||"",!((T===k.link||n.has&&!k.link)&&!((x.pass||"")[n.id]&&typeof T!="string"))&&(delete(k.echo||"")[n.id],l({get:n.get,put:s,$:r.$,linked:r.linked=r.linked||k.link},n)))}i.on.unlink=l;function t(r,n){var e=this.as,h=e.$._;h.root;var x=e.get||"",T=(r.put||"")[x["#"]]||"";if(!r.put||typeof x["."]=="string"&&s===T[x["."]]){if(s!==h.put||!h.soul&&!h.has)return;h.ack=(h.ack||0)+1,h.on("in",{get:h.get,put:h.put=s,$:h.$,"@":r["@"]});return}(r._||{}).miss=1,i.on.put(r)}var y={},s,d=String.random,p=i.valid,g=function(r,n){return r&&Object.prototype.hasOwnProperty.call(r,n)},f=i.state,c=f.is,v=f.ify})(_,"./chain"),_(function(m){var i=_("./root");i.chain.get=function(s,d,p){var g,f;if(typeof s=="string"){if(s.length==0)return(g=this.chain())._.err={err:i.log("0 length key!",s)},d&&d.call(g,g._.err),g;var c=this,v=c._,r=v.next||l;(g=r[s])||(g=s&&u(s,c)),g=g&&g.$}else if(typeof s=="function"){let T=function(j,S,$){if(!T.stun&&!((D=e.pass)&&!D[h])){var w=j.$._,b=(j.$$||"")._,A=(b||w).put,E=!w.has&&!w.soul,C={},D;if((E||y===A)&&(A=y===((D=j.put)||"")["="]?y===(D||"")[":"]?D:D[":"]:D["="]),typeof(D=i.valid(A))=="string"&&(A=y===(D=e.$.get(D)._.put)?n.not?y:A:D),!(n.not&&y===A)){if(y===n.stun){if((D=e.stun)&&D.on&&(v.$.back(function(N){if(D.on(""+N.id,C={}),(C.run||0)<T.id)return C}),!C.run&&D.on(""+w.id,C={}),!C.run&&b&&D.on(""+b.id,C={}),T.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=D.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[h]=function(){T(j,S,1)};return}if(y===A&&($=0),(D=e.hatch)&&!D.end&&y===n.hatch&&!$){if(x[w.$._.id])return;x[w.$._.id]=1,D.push(function(){T(j,S,1)});return}x={}}if(e.pass){if(e.pass[h+w.id])return;e.pass[h+w.id]=1}if(n.on){n.ok.call(w.$,A,w.get,j,S||T);return}if(n.v2020){n.ok(j,S||T);return}Object.keys(j).forEach(function(N){D[N]=j[N]},D={}),j=D,j.put=A,n.ok.call(n.as,j,S||T)}}};if(d===!0)return o(this,s,d,p),this;g=this;var v=g._,n=d||{},e=v.root,h;n.at=v,n.ok=s;var x={};return T.at=v,(v.any||(v.any={}))[h=String.random(7)]=T,T.off=function(){T.stun=1,!!v.any&&delete v.any[h]},T.rid=a,T.id=n.run||++e.once,f=e.pass,(e.pass={})[h]=1,n.out=n.out||{get:{}},v.on("out",n.out),e.pass=f,g}else{if(typeof s=="number")return this.get(""+s,d,p);if(typeof(f=t(s))=="string")return this.get(f,d,p);(f=this.get.next)&&(g=f(this,s))}return g?(d&&typeof d=="function"&&g.get(d,p),g):((g=this.chain())._.err={err:i.log("Invalid get request!",s)},d&&d.call(g,g._.err),g)};function u(s,d){var p=d._,g=p.next,f=d.chain(),c=f._;return g||(g=p.next={}),g[c.get=s]=c,d===p.root.$?c.soul=s:(p.soul||p.has)&&(c.has=s),c}function o(s,d,p,g){var f=s._,c=0,v;return(v=f.soul||f.link)?d(v,g,f):f.jam?f.jam.push([d,g]):(f.jam=[[d,g]],s.get(function(n,e){if(!(y===n.put&&!f.root.opt.super&&(v=Object.keys(f.root.opt.peers).length)&&++c<=v)){e.rid(n);var h=(h=n.$)&&h._||{},x=0,T;for(v=f.jam,delete f.jam;T=v[x++];){var k=T[0];T=T[1],k&&k(h.link||h.soul||i.valid(n.put)||((n.put||{})._||{})["#"],T,n,e)}}},{out:{get:{".":!0}}}),s)}function a(s){var d=this.at||this.on;if(!s||d.soul||d.has)return this.off();if(!!(s=(s=(s=s.$||s)._||s).id)){d.map;var p;if((p=this.seen||(this.seen={}))[s])return!0;p[s]=!0}}var l={},t=i.valid,y})(_,"./get"),_(function(m){var i=_("./root");i.chain.put=function(p,g,f){var c=this,v=c._,r=v.root;f=f||{},f.root=v.root,f.run||(f.run=r.once),u(f,v.id),f.ack=f.ack||g,f.via=f.via||c,f.data=f.data||p,f.soul||(f.soul=v.soul||typeof g=="string"&&g);var n=f.state=f.state||i.state();return typeof p=="function"?(p(function(e){f.data=e,c.put(l,l,f)}),c):f.soul?(f.$=r.$.get(f.soul),f.todo=[{it:f.data,ref:f.$}],f.turn=f.turn||y,f.ran=f.ran||o,function e(){var h=f.todo,x=h.pop(),T=x.it;x.ref&&x.ref._.id;var k,j,S,$,w;if(u(f,x.ref),($=x.todo)&&(j=$.pop(),T=T[j],$.length&&h.push(x)),j&&(h.path||(h.path=[])).push(j),!(k=s(T))&&!(w=i.is(T))){if(!Object.plain(T)){(f.ack||t).call(f,f.out={err:f.err=i.log("Invalid data: "+(T&&($=T.constructor)&&$.name||typeof T)+" at "+(f.via.back(function(C){C.get&&$.push(C.get)},$=[])||$.join("."))+"."+(h.path||[]).join("."))}),f.ran(f);return}for(var b=f.seen||(f.seen=[]),A=b.length;A--;)if(T===($=b[A]).it){k=T=$.link;break}}if(j&&k)x.node=d(x.node,j,n,T);else{let C=function(D,N){var P=S.link["#"];N&&(N.off(),N.rid(D));var J=P||D.soul||($=(D.$$||D.$)._||"").soul||$.link||(($=$.put||"")._||"")["#"]||$["#"]||(($=D.put||"")&&D.$$?$["#"]:($["="]||$[":"]||"")["#"]);if(!P&&u(f,D.$),!J&&!x.link["#"]){(x.wait||(x.wait=[])).push(function(){C(D,N)});return}J||(J=[],(D.$$||D.$).back(function(U){if($=U.soul||U.link)return J.push($);J.push(U.get)}),J=J.reverse().join("/")),S.link["#"]=J,!w&&(((f.graph||(f.graph={}))[J]=S.node||(S.node={_:{}}))._["#"]=J),delete f.wait[E],S.wait&&setTimeout.each(S.wait,function(U){U&&U()}),f.ran(f)};f.seen.push(S={it:T,link:{},todo:w?[]:Object.keys(T).sort().reverse(),path:(h.path||[]).slice(),up:x}),x.node=d(x.node,j,n,S.link),!w&&S.todo.length&&h.push(S);var E=f.seen.length;(f.wait||(f.wait={}))[E]="",$=(S.ref=w?T:j?x.ref.get(j):x.ref)._,($=T&&(T._||"")["#"]||$.soul||$.link)?C({soul:$}):S.ref.get(C,{run:f.run,v2020:1,out:{get:{".":" "}}})}if(!h.length)return f.ran(f);f.turn(e)}(),c):(a(f),c)};function u(p,g){if(!!g){g=(g._||"").id||g;var f=p.root.stun||(p.root.stun={on:i.on}),c={},v;p.stun||(p.stun=f.on("stun",function(){})),(v=f.on(""+g))&&v.the.last.next(c),!(c.run>=p.run)&&f.on(""+g,function(r){if(p.stun.end){this.off(),this.to.next(r);return}r.run=r.run||p.run,r.stun=r.stun||p.stun})}}function o(p){if(p.err){o.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,f=g.root,c=g.ask(function(e){f.on("ack",e),e.err&&i.log(e),++v>(p.acks||0)&&this.off(),!!p.ack&&p.ack(e,this)},p.opt),v=0,r=p.stun,n;(n=function(){!r||(o.end(r,f),setTimeout.each(Object.keys(r=r.add||""),function(e){(e=r[e])&&e()}))}).hatch=n,p.via._.on("out",{put:p.out=p.graph,opt:p.opt,"#":c,_:n})}}o.end=function(p,g){p.end=t,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()};function a(p){var g=p.via._,f;p.via=p.via.back(function(c){if(c.soul||!c.get)return c.$;f=p.data,(p.data={})[c.get]=f}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}var l,t=function(){},y=setTimeout.turn,s=i.valid,d=i.state.ify})(_,"./put"),_(function(m){var i=_("./root");_("./chain"),_("./back"),_("./put"),_("./get"),m.exports=i})(_,"./index"),_(function(m){var i=_("./index");i.chain.on=function(a,l,t,y){var s=this,d=s._;d.root;var p;if(typeof a=="string")return l?(p=d.on(a,l,t||d,y),t&&t.$&&(t.subs||(t.subs=[])).push(p),s):d.on(a);var g=l;return(g=g===!0?{change:!0}:g||{}).not=1,g.on=1,s.get(a,g),s},i.chain.once=function(a,l){if(l=l||{},!a)return u(this);var t=this,y=t._,s=y.root;y.put;var d=String.random(7),p;return t.get(function(g,f,c,v){var r=this,n=r._,e=n.one||(n.one={});if(v.stun||e[d]==="")return;if((p=i.valid(g))===!0){h();return}if(typeof p=="string")return;clearTimeout((y.one||"")[d]),clearTimeout(e[d]),e[d]=setTimeout(h,l.wait||99);function h(){!n.has&&!n.soul&&(n={put:g,get:f}),o===(p=n.put)&&(p=((c.$$||"")._||"").put),!(typeof i.valid(p)=="string"&&(p=s.$.get(p)._.put,p===o))&&(v.stun||e[d]!==""&&(e[d]="",(y.soul||y.has)&&v.off(),a.call(r,p,n.get)))}},{on:1}),t};function u(a,l,t){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(t=a.chain())._.nix=a.once(function(y,s){t._.on("in",this._)}),t._.lex=a._.lex,t}i.chain.off=function(){var a=this,l=a._,t,y=l.back;if(!!y)return l.ack=0,(t=y.next)&&t[l.get]&&delete t[l.get],(t=y.ask)&&delete t[l.get],(t=y.put)&&delete t[l.get],(t=l.soul)&&delete y.root.graph[t],(t=l.map)&&Object.keys(t).forEach(function(s,d){d=t[s],d.link&&y.root.$.get(d.link).off()}),(t=l.next)&&Object.keys(t).forEach(function(s,d){d=t[s],d.$.off()}),l.on("off",{}),a};var o})(_,"./on"),_(function(m){var i=_("./index"),u=i.chain.get.next;i.chain.get.next=function(t,y){var s;return Object.plain(y)?(s=((s=y["#"])||"")["="]||s)?t.get(s):((s=t.chain()._).lex=y,t.on("in",function(d){String.match(d.get||(d.put||"")["."],y["."]||y["#"]||y)&&s.on("in",d),this.to.next(d)}),s.$):(u||a)(t,y)},i.chain.map=function(t,y,s){var d=this,p=d._,g,f;return Object.plain(t)&&(g=t["."]?t:{".":t},t=l),t?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),f=d.chain(),d.map().on(function(c,v,r,n){var e=(t||a).call(this,c,v,r,n);if(l!==e){if(c===e)return f._.on("in",r);if(i.is(e))return f._.on("in",e._);var h={};Object.keys(r.put).forEach(function(x){h[x]=r.put[x]},h),h["="]=e,f._.on("in",{get:v,put:h})}}),f):((f=p.each)||((p.each=f=d.chain())._.lex=g||f._.lex||p.lex,f._.nix=d.back("nix"),d.on("in",o,f._)),f)};function o(t){this.to.next(t);var y=this.as,s=t.$,d=s._,p=t.put,g;!d.soul&&!t.$$||(g=y.lex)&&!String.match(t.get||(p||"")["."],g["."]||g["#"]||g)||i.on.link(t,y)}var a=function(){},l})(_,"./map"),_(function(m){var i=_("./index");i.chain.set=function(u,o,a){var l=this,t=l.back(-1),y,s;return o=o||function(){},a=a||{},a.item=a.item||u,(y=((u||"")._||"")["#"])&&((u={})["#"]=y),typeof(s=i.valid(u))=="string"?l.get(y=s).put(u,o,a):i.is(u)?(l.put(function(d){u.get(function(p,g,f){if(!p)return o.call(l,{err:i.log('Only a node can be linked! Not "'+f.put+'"!')});(s={})[p]={"#":p},d(s)},!0)}),u):(Object.plain(u)&&(u=t.get(y=l.back("opt.uuid")()).put(u)),l.get(y||t.back("opt.uuid")(7)).put(u,o,a))}})(_,"./set"),_(function(m){_("./shim");function i(o){var a=function(){},l=o.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var t=setTimeout.turn||setTimeout,y=JSON.parseAsync||function(n,e,h){var x;try{e(x,JSON.parse(n,h))}catch(T){e(T)}},s=JSON.stringifyAsync||function(n,e,h,x){var T;try{e(T,JSON.stringify(n,h,x))}catch(k){e(k)}},d=o.dup,p=d.check,g=d.track,f=a.hear=function(n,e){if(!!n){if(l.max<=n.length)return a.say({dam:"!",err:"Message too big!"},e);a===this&&(f.d+=n.length||0,++f.c);var h=e.SH=+new Date,x=n[0],T;if(x==="["){y(n,function(k,j){if(k||!j)return a.say({dam:"!",err:"DAM JSON parse error."},e);console.STAT&&console.STAT(+new Date,j.length,"# on hear batch");var S=l.puff;(function $(){for(var w=+new Date,b=0,A;b<S&&(A=j[b++]);)f(A,e);j=j.slice(b),console.STAT&&console.STAT(w,+new Date-w,"hear loop"),c(e),!!j.length&&t($,0)})()}),n="";return}if(x==="{"||(n["#"]||Object.plain(n))&&(T=n)){if(T)return f.one(T,e,h);y(n,function(k,j){if(k||!j)return a.say({dam:"!",err:"DAM JSON parse error."},e);f.one(j,e,h)});return}}};f.one=function(n,e,h){var x,T,k,j,S;if(n.DBG&&(n.DBG=S={DBG:n.DBG}),S&&(S.h=h),S&&(S.hp=+new Date),(x=n["#"])||(x=n["#"]=String.random(9)),!(k=p(x))&&(T=n["##"],!(T&&(k=n["@"]||n.get&&x)&&d.check(j=k+T)))){if((n._=function(){}).via=a.leap=e,(k=n["><"])&&typeof k=="string"&&k.slice(0,99).split(",").forEach(function($){this[$]=1},n._.yo={}),k=n.dam){(k=a.hear[k])&&k(n,e,o),g(x);return}var h=+new Date;S&&(S.is=h),e.SI=x,o.on("in",a.last=n),S&&(S.hd=+new Date),console.STAT&&console.STAT(h,+new Date-h,n.get?"msg get":n.put?"msg put":"msg"),(k=g(x)).via=e,n.get&&(k.it=n),j&&g(j),a.leap=a.last=null}},f.c=f.d=0,function(){var n=0,e;a.hash=function(k,j){var S,$,w,b=+new Date;s(k.put,function A(E,C){var D=($||($=w=C||"")).slice(0,32768);if(S=String.hash(D,S),$=$.slice(32768),$){t(A,0);return}console.STAT&&console.STAT(b,+new Date-b,"say json+hash"),k._.$put=w,k["##"]=S,T(k,j),delete k._.$put},h)};function h(k,j){var S;return j instanceof Object?(Object.keys(j).sort().forEach(x,{to:S={},on:j}),S):j}function x(k){this.to[k]=this.on[k]}var T=a.say=function(k,j){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(k),!k)return!1;var $,w,b=k["@"],A=k._||(k._=function(){}),E=k.DBG,C=+new Date;if(A.y=A.y||C,j||E&&(E.y=C),($=k["#"])||($=k["#"]=String.random(9)),!e&&g($),k.put&&(k.err||(d.s[$]||"").err))return!1;if(!k["##"]&&u!==k.put&&!A.via&&b){a.hash(k,j);return}if(!j&&b&&(j=(S=d.s[b])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=a.last)&&b===S["#"]&&a.leap),!j&&b)return d.s[b]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!j&&a.way)return a.way(k);if(E&&(E.yh=+new Date),!(w=A.raw)){a.raw(k,j);return}if(E&&(E.yr=+new Date),!j||!j.id){if(!Object.plain(j||l.peers))return!1;var C=+new Date;l.puff;var D=l.peers,N=Object.keys(j||l.peers||{});console.STAT&&console.STAT(C,+new Date-C,"peer keys"),function U(){var R=+new Date;e=1;var M=A.raw;A.raw=w;for(var F=0,H;F<9&&(H=(N||"")[F++]);)!(H=D[H])||T(k,H);A.raw=M,e=0,N=N.slice(F),console.STAT&&console.STAT(R,+new Date-R,"say loop"),!!N.length&&(t(U,0),b&&g(b))}();return}if(!j.wire&&a.wire&&a.wire(j),$!==j.last){if(j.last=$,j===A.via||(S=A.yo)&&(S[j.url]||S[j.pid]||S[j.id]))return!1;if(console.STAT&&console.STAT(C,((E||A).yp=+new Date)-(A.y||C),"say prep"),!e&&b&&g(b),j.batch){if(j.tail=(S=j.tail||0)+w.length,j.tail<=l.pack){j.batch+=(S?",":"")+w;return}c(j)}j.batch="[";var P=+new Date;setTimeout(function(){console.STAT&&console.STAT(P,+new Date-P,"0ms TO"),c(j)},l.gap),v(w,j),console.STAT&&b===j.SI&&console.STAT(C,+new Date-j.SH,"say ack")}};a.say.c=a.say.d=0,a.raw=function(k,j){if(!k)return"";var S=k._||{},$,w;if(w=S.raw)return w;if(typeof k=="string")return k;var b=k["##"],A=k["@"];if(b&&A){if(!S.via&&p(A+b))return!1;if((w=(d.s[A]||"").it)||(w=a.last)&&A===w["#"]){if(b===w["##"])return!1;w["##"]||(w["##"]=b)}}if(!k.dam){var E=0,C=[];w=l.peers;for(var D in w){var N=w[D];if(C.push(N.url||N.pid||N.id),++E>6)break}E>1&&(k["><"]=C.join())}if($=S.$put){w={},Object.keys(k).forEach(function(J){w[J]=k[J]}),w.put=":])([:",s(w,function(J,U){if(!J){var R=+new Date;w=U.indexOf('"put":":])([:"'),P(u,U=U.slice(0,w+6)+$+U.slice(w+14)),console.STAT&&console.STAT(R,+new Date-R,"say slice")}});return}s(k,P);function P(J,U){J||(S.raw=U,T(k,j))}}}();function c(n){var e=n.batch,h=typeof e=="string";if(h&&(e+="]"),n.batch=n.tail=null,!!e&&!(h?3>e.length:!e.length)){if(!h)try{e=e.length===1?e[0]:JSON.stringify(e)}catch(x){return l.log("DAM JSON stringify error",x)}!e||v(e,n)}}function v(n,e){try{var h=e.wire;e.say?e.say(n):h.send&&h.send(n),a.say.d+=n.length||0,++a.say.c}catch{(e.queue=e.queue||[]).push(n)}}a.hi=function(n){var e=n.wire||{};n.id?l.peers[n.url||n.id]=n:(e=n.id=n.id||String.random(9),a.say({dam:"?",pid:o.opt.pid},l.peers[e]=n),delete d.s[n.last]),n.met=n.met||+new Date,e.hied||o.on(e.hied="hi",n),e=n.queue,n.queue=[],setTimeout.each(e||[],function(h){v(h,n)},0,9)},a.bye=function(n){o.on("bye",n);var e=+new Date;e=e-(n.met||e),a.bye.time=((a.bye.time||e)+e)/2},a.hear["!"]=function(n,e){l.log("Error:",n.err)},a.hear["?"]=function(n,e){n.pid&&(e.pid||(e.pid=n.pid),n["@"])||(a.say({dam:"?",pid:l.pid,"@":n["#"]},e),delete d.s[e.last])},o.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",a.say)}),o.on("bye",function(n,e){n=l.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(e=n.wire)&&e.close&&e.close(),delete l.peers[n.id],n.wire=null});var r={};return o.on("bye",function(n,e){this.to.next(n),(e=console.STAT)&&(e.peers=(e.peers||0)-1),!!(e=n.url)&&(r[e]=!0,setTimeout(function(){delete r[e]},l.lack||9e3))}),o.on("hi",function(n,e){this.to.next(n),(e=console.STAT)&&(e.peers=(e.peers||0)+1),!(!(e=n.url)||!r[e])&&(delete r[e],!l.super&&setTimeout.each(Object.keys(o.next),function(h){o.next[h],e={},e[h]=o.graph[h],e=String.hash(e),a.say({"##":e,get:{"#":h}},n)}))}),a}var u;try{m.exports=i}catch{}})(_,"./mesh"),_(function(m){var i=_("../index");i.Mesh=_("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var a=o.opt;if(a.WebSocket===!1)return;var l=i.window||{},t=a.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!t)return;a.WebSocket=t;var y=a.mesh=a.mesh||i.Mesh(o);y.wire||a.wire,y.wire=a.wire=s;function s(f){try{if(!f||!f.url)return v&&v(f);var c=f.url.replace(/^http/,"ws"),v=f.wire=new a.WebSocket(c);return v.onclose=function(){a.mesh.bye(f),p(f)},v.onerror=function(r){p(f)},v.onopen=function(){a.mesh.hi(f)},v.onmessage=function(r){!r||a.mesh.hear(r.data||r,f)},v}catch{}}setTimeout(function(){!a.super&&o.on("out",{dam:"hi"})},1);var d=2*999;function p(f){clearTimeout(f.defer),!(g&&f.retry<=0)&&(f.retry=(f.retry||a.retry+1||60)-(-f.tried+(f.tried=+new Date)<d*4?1:0),f.defer=setTimeout(function c(){if(g&&g.hidden)return setTimeout(c,d);s(f)},d))}var g=""+u!=typeof document&&document});var u})(_,"./websocket"),_(function(m){if(typeof Gun!="undefined"){var i=function(){},u;try{u=(Gun.window||i).localStorage}catch{}u||(Gun.log("Warning: No localStorage exists to persist data to!"),u={setItem:function(o,a){this[o]=a},removeItem:function(o){delete this[o]},getItem:function(o){return this[o]}}),Gun.on("create",function o(a){this.to.next(a);var l=a.opt;a.graph;var t=[],y,s;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{y=o[l.prefix]=o[l.prefix]||JSON.parse(u.getItem(l.prefix))||{}}catch{y=o[l.prefix]={}}a.on("get",function(p){this.to.next(p);var g=p.get,f,c,v,r;!g||!(f=g["#"])||(c=y[f]||r,c&&(v=g["."])&&!Object.plain(v)&&(c=Gun.state.ify({},v,Gun.state.is(c,v),c[v],f)),Gun.on.get.ack(p,c))}),a.on("put",function(p){this.to.next(p);var g=p.put,f=g["#"],c=g["."];y[f]=Gun.state.ify(y[f],c,g[">"],g[":"],f),p["@"]||t.push(p["#"]),!s&&(s=setTimeout(d,l.wait||1))});function d(){var p,g=t;clearTimeout(s),s=!1,t=[];try{u.setItem(l.prefix,JSON.stringify(y))}catch(f){Gun.log((p=f||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),a.on("localStorage:error",{err:p,get:l.prefix,put:y})}!p&&!Object.empty(l.peers)||setTimeout.each(g,function(f){a.on("in",{"@":f,err:p,ok:0})})}})}})(_,"./localStorage")})(),function(){var _;if(""+_!=typeof Gun){var O=function(w){console.log("Warning! Deprecated internal utility will break in next version:",w)},m=Gun;m.fn=m.fn||{is:function(w){return O("fn"),!!w&&typeof w=="function"}},m.bi=m.bi||{is:function(w){return O("bi"),w instanceof Boolean||typeof w=="boolean"}},m.num=m.num||{is:function(w){return O("num"),!u(w)&&(w-parseFloat(w)+1>=0||w===1/0||w===-1/0)}},m.text=m.text||{is:function(w){return O("text"),typeof w=="string"}},m.text.ify=m.text.ify||function(w){return O("text.ify"),m.text.is(w)?w:typeof JSON!="undefined"?JSON.stringify(w):w&&w.toString?w.toString():w},m.text.random=m.text.random||function(w,b){O("text.random");var A="";for(w=w||24,b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";w>0;)A+=b.charAt(Math.floor(Math.random()*b.length)),w--;return A},m.text.match=m.text.match||function(w,b){var A,E;return O("text.match"),typeof w!="string"?!1:(typeof b=="string"&&(b={"=":b}),b=b||{},A=b["="]||b["*"]||b[">"]||b["<"],w===A?!0:E!==b["="]?!1:(A=b["*"]||b[">"]||b["<"],w.slice(0,(A||"").length)===A?!0:E!==b["*"]?!1:E!==b[">"]&&E!==b["<"]?w>=b[">"]&&w<=b["<"]:E!==b[">"]&&w>=b[">"]||E!==b["<"]&&w<=b["<"]))},m.text.hash=m.text.hash||function(w,b){if(O("text.hash"),typeof w=="string"){if(b=b||0,!w.length)return b;for(var A=0,E=w.length,C;A<E;++A)C=w.charCodeAt(A),b=(b<<5)-b+C,b|=0;return b}},m.list=m.list||{is:function(w){return O("list"),w instanceof Array}},m.list.slit=m.list.slit||Array.prototype.slice,m.list.sort=m.list.sort||function(w){return O("list.sort"),function(b,A){return!b||!A?0:(b=b[w],A=A[w],b<A?-1:b>A?1:0)}},m.list.map=m.list.map||function(w,b,A){return O("list.map"),t(w,b,A)},m.list.index=1,m.obj=m.boj||{is:function(w){return O("obj"),w?w instanceof Object&&w.constructor===Object||Object.prototype.toString.call(w).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},m.obj.put=m.obj.put||function(w,b,A){return O("obj.put"),(w||{})[b]=A,w},m.obj.has=m.obj.has||function(w,b){return O("obj.has"),w&&Object.prototype.hasOwnProperty.call(w,b)},m.obj.del=m.obj.del||function(w,b){if(O("obj.del"),!!w)return w[b]=null,delete w[b],w},m.obj.as=m.obj.as||function(w,b,A,E){return O("obj.as"),w[b]=w[b]||(E===A?{}:A)},m.obj.ify=m.obj.ify||function(w){if(O("obj.ify"),a(w))return w;try{w=JSON.parse(w)}catch{w={}}return w},function(){var w;function b(A,E){l(this,E)&&w!==this[E]||(this[E]=A)}m.obj.to=m.obj.to||function(A,E){return O("obj.to"),E=E||{},t(A,b,E),E}}(),m.obj.copy=m.obj.copy||function(w){return O("obj.copy"),w&&JSON.parse(JSON.stringify(w))},function(){function w(b,A){var E=this.n,C;if(!(E&&(A===E||a(E)&&l(E,A)))&&C!==A)return!0}m.obj.empty=m.obj.empty||function(b,A){return O("obj.empty"),b?!t(b,w,{n:A}):!0}}(),function(){function w(E,C){if(arguments.length===2){w.r=w.r||{},w.r[E]=C;return}w.r=w.r||[],w.r.push(E)}var b=Object.keys,A;Object.keys=Object.keys||function(E){return A(E,function(C,D,N){N(D)})},m.obj.map=A=m.obj.map||function(E,C,D){O("obj.map");var N,P=0,J,U,R,M,F=typeof C=="function";if(w.r=N,b&&a(E)&&(R=b(E),M=!0),D=D||{},u(E)||R)for(J=(R||E).length;P<J;P++){var H=P+m.list.index;if(F){if(U=M?C.call(D,E[R[P]],R[P],w):C.call(D,E[P],H,w),U!==N)return U}else if(C===E[M?R[P]:P])return R?R[P]:H}else for(P in E)if(F){if(l(E,P)&&(U=D?C.call(D,E[P],P,w):C(E[P],P,w),U!==N))return U}else if(C===E[P])return P;return F?w.r:m.list.index?0:-1}}(),m.time=m.time||{},m.time.is=m.time.is||function(w){return O("time"),w?w instanceof Date:+new Date().getTime()};var i=m.fn.is,u=m.list.is,o=m.obj,a=o.is,l=o.has,t=o.map,y={};y.is=function(w){return O("val.is"),w===_?!1:w===null?!0:w===1/0?!1:g(w)||d(w)||p(w)?!0:y.link.is(w)||!1},y.link=y.rel={_:"#"},function(){y.link.is=function(b){if(O("val.link.is"),b&&b[s]&&!b._&&a(b)){var A={};if(t(b,w,A),A.id)return A.id}return!1};function w(b,A){var E=this;if(E.id)return E.id=!1;if(A==s&&g(b))E.id=b;else return E.id=!1}}(),y.link.ify=function(w){return O("val.link.ify"),f({},s,w)},m.obj.has._=".";var s=y.link._,_,d=m.bi.is,p=m.num.is,g=m.text.is,o=m.obj,a=o.is,f=o.put,t=o.map;m.val=m.val||y;var c={_:"_"};c.soul=function(w,b){return O("node.soul"),w&&w._&&w._[b||e]},c.soul.ify=function(w,b){return O("node.soul.ify"),b=typeof b=="string"?{soul:b}:b||{},w=w||{},w._=w._||{},w._[e]=b.soul||w._[e]||n(),w},c.soul._=y.link._,function(){c.is=function(b,A,E){O("node.is");var C;return a(b)&&(C=c.soul(b))?!t(b,w,{as:E,cb:A,s:C,n:b}):!1};function w(b,A){if(A!==c._){if(!y.is(b))return!0;this.cb&&this.cb.call(this.as,b,A,this.n,this.s)}}}(),function(){c.ify=function(b,A,E){return O("node.ify"),A?typeof A=="string"?A={soul:A}:typeof A=="function"&&(A={map:A}):A={},A.map&&(A.node=A.map.call(E,b,_,A.node||{})),(A.node=c.soul.ify(A.node||{},A))&&t(b,w,{o:A,as:E}),A.node};function w(b,A){var E=this.o,C,D;if(E.map){C=E.map.call(this.as,b,""+A,E.node),D===C?v(E.node,A):E.node&&(E.node[A]=C);return}y.is(b)&&(E.node[A]=b)}}();var o=m.obj,a=o.is,v=o.del,t=o.map,r=m.text,n=r.random,e=c.soul._,_;m.node=m.node||c;var h=m.state;h.lex=function(){return O("state.lex"),h().toString(36).replace(".","")},h.to=function(w,b,A){O("state.to");var E=(w||{})[b];return a(E)&&(E=x(E)),h.ify(A,b,h.is(w,b),E,c.soul(w))},function(){h.map=function(b,A,E){O("state.map");var C,D=a(D=b||A)?D:null;return b=i(b=b||A)?b:null,D&&!b?(A=p(A)?A:h(),D[j]=D[j]||{},t(D,w,{o:D,s:A}),D):(E=E||a(A)?A:C,A=p(A)?A:h(),function(N,P,J,U){if(!b)return w.call({o:J,s:A},N,P),N;b.call(E||this||{},N,P,J,U),!(l(J,P)&&C===J[P])&&w.call({o:J,s:A},N,P)})};function w(b,A){j!==A&&h.ify(this.o,A,this.s)}}();var o=m.obj;o.as;var l=o.has,a=o.is,t=o.map,x=o.copy,T=m.num,p=T.is,k=m.fn,i=k.is,j=c._,_,S={};(function(){S.is=function(A,E,C,D){return O("graph.is"),!A||!a(A)||$(A)?!1:!t(A,w,{cb:E,fn:C,as:D})};function w(A,E){if(!A||E!==c.soul(A)||!c.is(A,this.fn,this.as))return!0;!this.cb||(b.n=A,b.as=this.as,this.cb.call(b.as,A,E,b))}function b(A){A&&c.is(b.n,A,b.as)}})(),function(){S.ify=function(D,N,P){O("graph.ify");var J={path:[],obj:D};return N?typeof N=="string"?N={soul:N}:typeof N=="function"&&(N.map=N):N={},typeof P=="string"&&(N.soul=N.soul||P,P=_),N.soul&&(J.link=y.link.ify(N.soul)),N.shell=(P||{}).shell,N.graph=N.graph||{},N.seen=N.seen||[],N.as=N.as||P,w(N,J),N.root=J.node,N.graph};function w(D,N){var P;return(P=C(D,N))?P:(N.env=D,N.soul=A,c.ify(N.obj,b,N)&&(N.link=N.link||y.link.ify(c.soul(N.node)),N.obj!==D.shell&&(D.graph[y.link.is(N.link)]=N.node)),N)}function b(D,N,P){var J=this,U=J.env,R,M;if(c._===N&&l(D,y.link._))return P._;if(!!(R=E(D,N,P,J,U))){if(N||(J.node=J.node||P||{},l(D,c._)&&c.soul(D)&&(J.node._=x(D._)),J.node=c.soul.ify(J.node,y.link.is(J.link)),J.link=J.link||y.link.ify(c.soul(J.node))),(M=U.map)&&(M.call(U.as||{},D,N,P,J),l(P,N))){if(D=P[N],_===D){v(P,N);return}if(!(R=E(D,N,P,J,U)))return}if(!N)return J.node;if(R===!0)return D;if(M=w(U,{obj:D,path:J.path.concat(N)}),!!M.node)return M.link}}function A(D){var N=this,P=y.link.is(N.link),J=N.env.graph;N.link=N.link||y.link.ify(D),N.link[y.link._]=D,N.node&&N.node[c._]&&(N.node[c._][y.link._]=D),l(J,P)&&(J[D]=J[P],v(J,P))}function E(D,N,P,J,U){var R;if(y.is(D))return!0;if(a(D))return 1;if(R=U.invalid)return D=R.call(U.as||{},D,N,P),E(D,N,P,J,U);U.err="Invalid value at '"+J.path.concat(N).join(".")+"'!",m.list.is(D)&&(U.err+=" Use `.set(item)` instead of an Array.")}function C(D,N){for(var P=D.seen,J=P.length,U;J--;)if(U=P[J],N.obj===U.obj)return U;P.push(N)}}(),S.node=function(w){O("graph.node");var b=c.soul(w);if(!!b)return f({},b,w)},function(){S.to=function(b,A,E){if(O("graph.to"),!!b){var C={};return E=E||{seen:{}},t(b[A],w,{obj:C,graph:b,opt:E}),C}};function w(b,A){var E,C;if(c._===A){if($(b,y.link._))return;this.obj[A]=x(b);return}if(!(E=y.link.is(b))){this.obj[A]=b;return}if(C=this.opt.seen[E]){this.obj[A]=C;return}this.obj[A]=this.opt.seen[E]=S.to(this.graph,E,this.opt)}}();var i=m.fn.is,o=m.obj,a=o.is,v=o.del,l=o.has,$=o.empty,f=o.put,t=o.map,x=o.copy,_;m.graph=m.graph||S}}()})(rt);var Ut=rt.exports,Rt={exports:{}};(function(I){(function(){function _(m,i){return i?Jt(m):m.slice?_[u(m)]:function(o,a){m(o={exports:{}}),_[u(a)]=o.exports};function u(o){return o.split("/").slice(-1).toString().replace(".js","")}}var O=I;_(function(m){typeof window!="undefined"&&(m.window=window);var i=m.window||m,u,o=i.SEA||{};(o.window=m.window)&&(o.window.SEA=o);try{u+""!=typeof O&&(O.exports=o)}catch{}m.exports=o})(_,"./root"),_(function(m){var i=_("./root");try{i.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(_,"./https"),_(function(m){var i;if(i+""==typeof btoa){if(i+""==typeof Buffer)try{vt.Buffer=_("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}vt.btoa=function(u){return Buffer.from(u,"binary").toString("base64")},vt.atob=function(u){return Buffer.from(u,"base64").toString("binary")}}})(_,"./base64"),_(function(m){_("./base64");function i(){}Object.assign(i,{from:Array.from}),i.prototype=Object.create(Array.prototype),i.prototype.toString=function(u,o,a){u=u||"utf8",o=o||0;const l=this.length;if(u==="hex"){const t=new Uint8Array(this);return[...Array((a&&a+1||l)-o).keys()].map(y=>t[y+o].toString(16).padStart(2,"0")).join("")}if(u==="utf8")return Array.from({length:(a||l)-o},(t,y)=>String.fromCharCode(this[y+o])).join("");if(u==="base64")return btoa(this)},m.exports=i})(_,"./array"),_(function(m){_("./base64");var i=_("./array");function u(...o){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),u.from(...o)}u.prototype=Object.create(Array.prototype),Object.assign(u,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const o=arguments[0];let a;if(typeof o=="string"){const t=arguments[1]||"utf8";if(t==="hex"){const y=o.match(/([\da-fA-F]{2})/g).map(s=>parseInt(s,16));if(!y||!y.length)throw new TypeError("Invalid first argument for type 'hex'.");a=i.from(y)}else if(t==="utf8"||t==="binary"){const y=o.length,s=new Uint16Array(y);Array.from({length:y},(d,p)=>s[p]=o.charCodeAt(p)),a=i.from(s)}else if(t==="base64"){const y=atob(o),s=y.length,d=new Uint8Array(s);Array.from({length:s},(p,g)=>d[g]=y.charCodeAt(g)),a=i.from(d)}else t==="binary"?a=i.from(o):console.info("SafeBuffer.from unknown encoding: "+t);return a}if(o.byteLength,o.byteLength?o.byteLength:o.length){let t;return o instanceof ArrayBuffer&&(t=new Uint8Array(o)),i.from(t||o)}},alloc(o,a=0){return i.from(new Uint8Array(Array.from({length:o},()=>a)))},allocUnsafe(o){return i.from(new Uint8Array(Array.from({length:o})))},concat(o){if(!Array.isArray(o))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return i.from(o.reduce((a,l)=>a.concat(Array.from(l)),[]))}}),u.prototype.from=u.from,u.prototype.toString=i.prototype.toString,m.exports=u})(_,"./buffer"),_(function(m){const i=_("./root"),u={Buffer:_("./buffer")};var o={},a;if(JSON.parseAsync=JSON.parseAsync||function(t,y,s){var d;try{y(d,JSON.parse(t,s))}catch(p){y(p)}},JSON.stringifyAsync=JSON.stringifyAsync||function(t,y,s,d){var p;try{y(p,JSON.stringify(t,s,d))}catch(g){y(g)}},u.parse=function(t,y){return new Promise(function(s,d){JSON.parseAsync(t,function(p,g){p?d(p):s(g)},y)})},u.stringify=function(t,y,s){return new Promise(function(d,p){JSON.stringifyAsync(t,function(g,f){g?p(g):d(f)},y,s)})},i.window&&(u.crypto=window.crypto||window.msCrypto,u.subtle=(u.crypto||o).subtle||(u.crypto||o).webkitSubtle,u.TextEncoder=window.TextEncoder,u.TextDecoder=window.TextDecoder,u.random=t=>u.Buffer.from(u.crypto.getRandomValues(new Uint8Array(u.Buffer.alloc(t))))),!u.TextDecoder){const{TextEncoder:t,TextDecoder:y}=_((a+""==typeof O?".":"")+"./lib/text-encoding",1);u.TextDecoder=y,u.TextEncoder=t}if(!u.crypto)try{var l=_("crypto",1);Object.assign(u,{crypto:l,random:y=>u.Buffer.from(l.randomBytes(y))});const{Crypto:t}=_("@peculiar/webcrypto",1);u.ossl=u.subtle=new t({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}m.exports=u})(_,"./shim"),_(function(m){var i=_("./root"),u=_("./shim"),o={};o.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},o.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},o.ecdh={name:"ECDH",namedCurve:"P-256"},o.jwk=function(a,l){a=a.split(".");var t=a[0],y=a[1],s={kty:"EC",crv:"P-256",x:t,y,ext:!0};return s.key_ops=l?["sign"]:["verify"],l&&(s.d=l),s},o.keyToJwk=function(a){const t=a.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:t,ext:!1,alg:"A256GCM"}},o.recall={validity:12*60*60,hook:function(a){return a}},o.check=function(a){return typeof a=="string"&&a.slice(0,4)==="SEA{"},o.parse=async function(l){try{var t=typeof l=="string";return t&&l.slice(0,4)==="SEA{"&&(l=l.slice(3)),t?await u.parse(l):l}catch{}return l},i.opt=o,m.exports=o})(_,"./settings"),_(function(m){var i=_("./shim");m.exports=async function(u,o){var a=typeof u=="string"?u:await i.stringify(u),l=await i.subtle.digest({name:o||"SHA-256"},new i.TextEncoder().encode(a));return i.Buffer.from(l)}})(_,"./sha256"),_(function(m){const i=_("./shim"),u=i.subtle,o=i.ossl?i.ossl:u,a=l=>o.digest({name:"SHA-1"},new ArrayBuffer(l));m.exports=a})(_,"./sha1"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./sha256"),l;i.work=i.work||(async(t,y,s,d)=>{try{var p=(y||{}).epub||y;if(d=d||{},p instanceof Function&&(s=p,p=l),t=typeof t=="string"?t:await u.stringify(t),(d.name||"").toLowerCase().slice(0,3)==="sha"){var g=u.Buffer.from(await a(t,d.name),"binary").toString(d.encode||"base64");if(s)try{s(g)}catch(r){console.log(r)}return g}p=p||u.random(9);var f=await(u.ossl||u.subtle).importKey("raw",new u.TextEncoder().encode(t),{name:d.name||"PBKDF2"},!1,["deriveBits"]),c=await(u.ossl||u.subtle).deriveBits({name:d.name||"PBKDF2",iterations:d.iterations||o.pbkdf2.iter,salt:new u.TextEncoder().encode(d.salt||p),hash:d.hash||o.pbkdf2.hash},f,d.length||o.pbkdf2.ks*8);t=u.random(t.length);var v=u.Buffer.from(c,"binary").toString(d.encode||"base64");if(s)try{s(v)}catch(r){console.log(r)}return v}catch(r){if(console.log(r),i.err=r,i.throw)throw r;s&&s();return}}),m.exports=i.work})(_,"./work"),_(function(m){var i=_("./root"),u=_("./shim");_("./settings"),i.name=i.name||(async(o,a)=>{try{if(o)try{o()}catch(l){console.log(l)}return}catch(l){if(console.log(l),i.err=l,i.throw)throw l;o&&o();return}}),i.pair=i.pair||(async(o,a)=>{try{var l=u.ossl||u.subtle,t=await u.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async d=>{var p={};p.priv=(await u.subtle.exportKey("jwk",d.privateKey)).d;var g=await u.subtle.exportKey("jwk",d.publicKey);return p.pub=g.x+"."+g.y,p});try{var y=await l.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async d=>{var p={};p.epriv=(await l.exportKey("jwk",d.privateKey)).d;var g=await l.exportKey("jwk",d.publicKey);return p.epub=g.x+"."+g.y,p})}catch(d){if(i.window)throw d;if(d=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw d}y=y||{};var s={pub:t.pub,priv:t.priv,epub:y.epub,epriv:y.epriv};if(o)try{o(s)}catch(d){console.log(d)}return s}catch(d){if(console.log(d),i.err=d,i.throw)throw d;o&&o();return}}),m.exports=i.pair})(_,"./pair"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./sha256"),l;i.sign=i.sign||(async(t,y,s,d)=>{try{if(d=d||{},!(y||d).priv){if(!i.I)throw"No signing key.";y=await i.I(null,{what:t,how:"sign",why:d.why})}if(l===t)throw"`undefined` not allowed.";var p=await o.parse(t),g=d.check=d.check||p;if(i.verify&&(i.opt.check(g)||g&&g.s&&g.m)&&l!==await i.verify(g,y)){var e=await o.parse(g);if(d.raw||(e="SEA"+await u.stringify(e)),s)try{s(e)}catch(x){console.log(x)}return e}var f=y.pub,c=y.priv,v=o.jwk(f,c),r=await a(p),n=await(u.ossl||u.subtle).importKey("jwk",v,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(h=>(u.ossl||u.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},h,new Uint8Array(r))),e={m:p,s:u.Buffer.from(n,"binary").toString(d.encode||"base64")};if(d.raw||(e="SEA"+await u.stringify(e)),s)try{s(e)}catch(h){console.log(h)}return e}catch(h){if(console.log(h),i.err=h,i.throw)throw h;s&&s();return}}),m.exports=i.sign})(_,"./sign"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./sha256"),l;i.verify=i.verify||(async(s,d,p,g)=>{try{var f=await o.parse(s);if(d===!1){var c=await o.parse(f.m);if(p)try{p(c)}catch(j){console.log(j)}return c}g=g||{};var v=d.pub||d,r=i.opt.slow_leak?await i.opt.slow_leak(v):await(u.ossl||u.subtle).importKey("jwk",o.jwk(v),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await a(f.m),e,h,x,T;try{if(e=u.Buffer.from(f.s,g.encode||"base64"),h=new Uint8Array(e),x=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,h,new Uint8Array(n)),!x)throw"Signature did not match."}catch{if(i.opt.fallback)return await i.opt.fall_verify(s,d,p,g)}var k=x?await o.parse(f.m):l;if(p)try{p(k)}catch(j){console.log(j)}return k}catch(j){if(console.log(j),i.err=j,i.throw)throw j;p&&p();return}}),m.exports=i.verify;var t={};i.opt.slow_leak=s=>{if(t[s])return t[s];var d=o.jwk(s);return t[s]=(u.ossl||u.subtle).importKey("jwk",d,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),t[s]};var y=i.opt;i.opt.fall_verify=async function(s,d,p,g,f){if(f===i.opt.fallback)throw"Signature did not match";f=f||1;var c=s||"";s=i.opt.unpack(s)||s;var v=await o.parse(s),r=d.pub||d,n=await i.opt.slow_leak(r),e=f<=i.opt.fallback?u.Buffer.from(await u.subtle.digest({name:"SHA-256"},new u.TextEncoder().encode(await o.parse(v.m)))):await a(v.m),h,x,T;try{if(h=u.Buffer.from(v.s,g.encode||"base64"),x=new Uint8Array(h),T=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,x,new Uint8Array(e)),!T)throw"Signature did not match."}catch{try{h=u.Buffer.from(v.s,"utf8"),x=new Uint8Array(h),T=await(u.ossl||u.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,x,new Uint8Array(e))}catch{if(!T)throw"Signature did not match."}}var k=T?await o.parse(v.m):l;if(y.fall_soul=c["#"],y.fall_key=c["."],y.fall_val=s,y.fall_state=c[">"],p)try{p(k)}catch(j){console.log(j)}return k},i.opt.fallback=2})(_,"./verify"),_(function(m){var i=_("./shim"),u=_("./settings"),o=_("./sha256");const a=async(l,t,y)=>{const s=l+(t||i.random(8)).toString("utf8"),d=i.Buffer.from(await o(s),"binary"),p=u.keyToJwk(d);return await i.subtle.importKey("jwk",p,{name:"AES-GCM"},!1,["encrypt","decrypt"])};m.exports=a})(_,"./aeskey"),_(function(m){var i=_("./root"),u=_("./shim");_("./settings");var o=_("./aeskey"),a;i.encrypt=i.encrypt||(async(l,t,y,s)=>{try{s=s||{};var d=(t||s).epriv||t;if(a===l)throw"`undefined` not allowed.";if(!d){if(!i.I)throw"No encryption key.";t=await i.I(null,{what:l,how:"encrypt",why:s.why}),d=t.epriv||t}var p=typeof l=="string"?l:await u.stringify(l),g={s:u.random(9),iv:u.random(15)},f=await o(d,g.s,s).then(v=>u.subtle.encrypt({name:s.name||"AES-GCM",iv:new Uint8Array(g.iv)},v,new u.TextEncoder().encode(p))),c={ct:u.Buffer.from(f,"binary").toString(s.encode||"base64"),iv:g.iv.toString(s.encode||"base64"),s:g.s.toString(s.encode||"base64")};if(s.raw||(c="SEA"+await u.stringify(c)),y)try{y(c)}catch(v){console.log(v)}return c}catch(v){if(console.log(v),i.err=v,i.throw)throw v;y&&y();return}}),m.exports=i.encrypt})(_,"./encrypt"),_(function(m){var i=_("./root"),u=_("./shim"),o=_("./settings"),a=_("./aeskey");i.decrypt=i.decrypt||(async(l,t,y,s)=>{try{s=s||{};var d=(t||s).epriv||t;if(!d){if(!i.I)throw"No decryption key.";t=await i.I(null,{what:l,how:"decrypt",why:s.why}),d=t.epriv||t}var p=await o.parse(l),g,f,c;try{g=u.Buffer.from(p.s,s.encode||"base64"),f=u.Buffer.from(p.iv,s.encode||"base64"),c=u.Buffer.from(p.ct,s.encode||"base64");var v=await a(d,g,s).then(n=>u.subtle.decrypt({name:s.name||"AES-GCM",iv:new Uint8Array(f),tagLength:128},n,new Uint8Array(c)))}catch{if(s.encode==="utf8")throw"Could not decrypt";if(i.opt.fallback)return s.encode="utf8",await i.decrypt(l,t,y,s)}var r=await o.parse(new u.TextDecoder("utf8").decode(v));if(y)try{y(r)}catch(n){console.log(n)}return r}catch(n){if(console.log(n),i.err=n,i.throw)throw n;y&&y();return}}),m.exports=i.decrypt})(_,"./decrypt"),_(function(m){var i=_("./root"),u=_("./shim");_("./settings"),i.secret=i.secret||(async(a,l,t,y)=>{try{if(y=y||{},!l||!l.epriv||!l.epub){if(!i.I)throw"No secret mix.";l=await i.I(null,{what:a,how:"secret",why:y.why})}var s=a.epub||a,d=l.epub,p=l.epriv,g=u.ossl||u.subtle,f=o(s),c=Object.assign({public:await g.importKey(...f,!0,[])},{name:"ECDH",namedCurve:"P-256"}),v=o(d,p),r=await g.importKey(...v,!1,["deriveBits"]).then(async e=>{var h=await g.deriveBits(c,e,256),x=new Uint8Array(h),T=await g.importKey("raw",x,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return g.exportKey("jwk",T).then(({k})=>k)}),n=r;if(t)try{t(n)}catch(e){console.log(e)}return n}catch(e){if(console.log(e),i.err=e,i.throw)throw e;t&&t();return}});var o=(a,l)=>{var[t,y]=a.split("."),s=l?{d:l}:{};return["jwk",Object.assign(s,{x:t,y,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};m.exports=i.secret})(_,"./secret"),_(function(m){var i=_("./root");i.certify=i.certify||(async(u,o={},a,l,t={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),u=(()=>{var n=[];if(u){if((typeof u=="string"||Array.isArray(u))&&u.indexOf("*")>-1)return"*";if(typeof u=="string")return u;if(Array.isArray(u)){if(u.length===1&&u[0])return typeof u[0]=="object"&&u[0].pub?u[0].pub:typeof u[0]=="string"?u[0]:null;u.map(e=>{typeof e=="string"?n.push(e):typeof e=="object"&&e.pub&&n.push(e.pub)})}return typeof u=="object"&&u.pub?u.pub:n.length>0?n:null}})(),!u)return console.log("No certificant found.");const s=t.expiry&&(typeof t.expiry=="number"||typeof t.expiry=="string")?parseFloat(t.expiry):null,d=(o||{}).read?o.read:null,p=(o||{}).write?o.write:typeof o=="string"||Array.isArray(o)||o["+"]||o["#"]||o["."]||o["="]||o["*"]||o[">"]||o["<"]?o:null,g=(t||{}).block||(t||{}).blacklist||(t||{}).ban||{},f=g.read&&(typeof g.read=="string"||(g.read||{})["#"])?g.read:null,c=typeof g=="string"?g:g.write&&(typeof g.write=="string"||g.write["#"])?g.write:null;if(!d&&!p)return console.log("No policy found.");const v=JSON.stringify(at(at(at(at(at({c:u},s?{e:s}:{}),d?{r:d}:{}),p?{w:p}:{}),f?{rb:f}:{}),c?{wb:c}:{}));var y=await i.sign(v,a,null,{raw:1});if(t.raw||(y="SEA"+JSON.stringify(y)),l)try{l(y)}catch(n){console.log(n)}return y}catch(s){if(i.err=s,i.throw)throw s;l&&l();return}}),m.exports=i.certify})(_,"./certify"),_(function(m){var i=_("./shim"),u=_("./root");u.work=_("./work"),u.sign=_("./sign"),u.verify=_("./verify"),u.encrypt=_("./encrypt"),u.decrypt=_("./decrypt"),u.certify=_("./certify"),u.random=u.random||i.random,u.Buffer=u.Buffer||_("./buffer"),u.keyid=u.keyid||(async o=>{try{const a=i.Buffer.concat(o.replace(/-/g,"+").replace(/_/g,"/").split(".").map(s=>i.Buffer.from(s,"base64"))),l=i.Buffer.concat([i.Buffer.from([153,a.length/256,a.length%256]),a]),t=await sha1hash(l),y=i.Buffer.from(t,"binary");return y.toString("hex",y.length-8)}catch(a){throw console.log(a),a}}),((u.window||{}).GUN||{}).SEA=u,m.exports=u})(_,"./sea"),_(function(m){var i=_("./sea"),u,o;i.window?u=i.window.GUN||{chain:{}}:u=_((o+""==typeof O?".":"")+"./gun",1),i.GUN=u;function a(t){this._={$:this}}a.prototype=function(){function t(){}return t.prototype=u.chain,new t}(),a.prototype.constructor=a,u.chain.user=function(t){var y=this,s=y.back(-1),d;if(t)return t=i.opt.pub((t._||"")["#"])||t,s.get("~"+t);if(d=s.back("user"))return d;var s=s._,p=s,g=p.opt.uuid||l;return(p=(d=p.user=y.chain(new a))._).opt={},p.opt.uuid=function(f){var c=g(),v=s.user;return!v||!(v=v.is)||!(v=v.pub)||(c="~"+v+"/"+c,f&&f.call&&f(null,c)),c},d};function l(){return u.state().toString(36).replace(".","")}u.User=a,a.GUN=u,a.SEA=u.SEA=i,m.exports=a})(_,"./user"),_(function(m){var i,u=""+i!=typeof window?window.Gun||{chain:{}}:_((""+i==typeof O?".":"")+"./gun",1);u.chain.then=function(o,a){var l=this,t=new Promise(function(y,s){l.once(y,a)});return o?t.then(o):t}})(_,"./then"),_(function(m){var i=_("./user"),u=i.SEA,o=i.GUN,a=function(){};i.prototype.create=function(...l){var t=typeof l[0]=="object"&&(l[0].pub||l[0].epub)?l[0]:typeof l[1]=="object"&&(l[1].pub||l[1].epub)?l[1]:null,y=t&&(t.pub||t.epub)?t.pub:typeof l[0]=="string"?l[0]:null,s=t&&(t.pub||t.epub)?t:y&&typeof l[1]=="string"?l[1]:null,d=l.filter(n=>typeof n=="function")[0]||null,p=l&&l.length>1&&typeof l[l.length-1]=="object"?l[l.length-1]:{},g=this,f=g._,c=g.back(-1);if(d=d||a,p=p||{},p.check!==!1){var v;if(y||(v="No user."),(s||"").length<8&&(v="Password too short!"),v)return d({err:o.log(v)}),g}if(f.ing)return(d||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),g;f.ing=!0;var r={};return r.a=function(n){if(r.pubs=n,n&&!p.already){var e={err:o.log("User already created!")};f.ing=!1,(d||a)(e),g.leave();return}r.salt=String.random(64),u.work(s,r.salt,r.b)},r.b=function(n){r.proof=n,t?r.c(t):u.pair(r.c)},r.c=function(n){var e;r.pair=n||{},(e=f.root.user)&&(e._.sea=n,e.is={pub:n.pub,epub:n.epub,alias:y}),r.data={pub:n.pub},r.d()},r.d=function(){r.data.alias=y,r.e()},r.e=function(){r.data.epub=r.pair.epub,u.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},r.proof,r.f,{raw:1})},r.f=function(n){r.data.auth=JSON.stringify({ek:n,s:r.salt}),r.g(r.data.auth)},r.g=function(n){var e;r.data.auth=r.data.auth||n,c.get(e="~"+r.pair.pub).put(r.data).on(r.h);var h={};h[e]={"#":e},c.get("~@"+y).put(h).get(e).on(r.i)},r.h=function(n,e,h,x){x.off(),r.h.ok=1,r.i()},r.i=function(n,e,h,x){x&&(r.i.ok=1,x.off()),!(!r.h.ok||!r.i.ok)&&(f.ing=!1,d({ok:0,pub:r.pair.pub}),a===d&&(t?g.auth(t):g.auth(y,s)))},c.get("~@"+y).once(r.a),g},i.prototype.leave=function(l,t){var y=this,s=y.back(-1)._.user;if(s&&(delete s.is,delete s._.is,delete s._.sea),u.window)try{var d={};d=window.sessionStorage,delete d.recall,delete d.pair}catch{}return y}})(_,"./create"),_(function(m){var i=_("./user"),u=i.SEA,o=i.GUN,a=function(){};i.prototype.auth=function(...t){var y=typeof t[0]=="object"&&(t[0].pub||t[0].epub)?t[0]:typeof t[1]=="object"&&(t[1].pub||t[1].epub)?t[1]:null,s=!y&&typeof t[0]=="string"?t[0]:null,d=s&&typeof t[1]=="string"?t[1]:null,p=t.filter(e=>typeof e=="function")[0]||null,g=t&&t.length>1&&typeof t[t.length-1]=="object"?t[t.length-1]:{},f=this,c=f._,v=f.back(-1);if(c.ing)return(p||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),f;c.ing=!0;var r={},n;return r.a=function(e){if(!e)return r.b();if(!e.pub){var h=[];return Object.keys(e).forEach(function(x){x!="_"&&h.push(e[x])}),r.b(h)}if(r.name)return r.f(e);r.c((r.data=e).auth)},r.b=function(e){var h=(r.list=(r.list||[]).concat(e||[])).shift();if(n===h)return r.name?r.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):r.err("Wrong user or password.");v.get(h).once(r.a)},r.c=function(e){if(n===e)return r.b();if(typeof e=="string")return r.c(l(e));u.work(d,(r.auth=e).s,r.d,r.enc)},r.d=function(e){u.decrypt(r.auth.ek,e,r.e,r.enc)},r.e=function(e){if(n===e)return r.enc?(r.enc=null,r.b()):(r.enc={encode:"utf8"},r.c(r.auth));r.half=e,r.f(r.data)},r.f=function(e){var h=r.half||{},x=r.data||{};r.g(r.lol={pub:e.pub||x.pub,epub:e.epub||x.epub,priv:e.priv||h.priv,epriv:e.epriv||h.epriv})},r.g=function(e){if(!e||!e.pub||!e.epub)return r.b();r.pair=e;var h=v._.user,x=h._;x.tag;var T=x.opt;x=h._=v.get("~"+e.pub)._,x.opt=T,h.is={pub:e.pub,epub:e.epub,alias:s||e.pub},x.sea=r.pair,c.ing=!1;try{d&&n==(l(c.root.graph["~"+e.pub].auth)||"")[":"]&&(g.shuffle=g.change=d)}catch{}if(g.change?r.z():(p||a)(x),u.window&&(f.back("user")._.opt||g).remember)try{var k={};k=window.sessionStorage,k.recall=!0,k.pair=JSON.stringify(e)}catch{}try{v._.tag.auth?v._.on("auth",x):setTimeout(function(){v._.on("auth",x)},1)}catch(j){o.log("Your 'auth' callback crashed with:",j)}},r.z=function(){r.salt=String.random(64),u.work(g.change,r.salt,r.y)},r.y=function(e){u.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},e,r.x,{raw:1})},r.x=function(e){r.w(JSON.stringify({ek:e,s:r.salt}))},r.w=function(e){if(g.shuffle){console.log("migrate core account from UTF8 & shuffle");var h={};Object.keys(r.data).forEach(function(x){h[x]=r.data[x]}),delete h._,h.auth=e,v.get("~"+r.pair.pub).put(h)}v.get("~"+r.pair.pub).get("auth").put(e,p||a)},r.err=function(e){var h={err:o.log(e||"User cannot be found!")};c.ing=!1,(p||a)(h)},r.plugin=function(e){if(!(r.name=e))return r.err();var h=[e];e[0]!=="~"&&(h[1]="~"+e,h[2]="~@"+e),r.b(h)},y?r.g(y):s?v.get("~@"+s).once(r.a):!s&&!d&&u.name(r.plugin),f};function l(t){if(typeof t!="string")return t;try{t=JSON.parse(t)}catch{t={}}return t}})(_,"./auth"),_(function(m){var i=_("./user"),u=i.SEA;i.GUN,i.prototype.recall=function(o,a){var l=this,t=l.back(-1);if(o=o||{},o&&o.sessionStorage){if(u.window)try{var y={};y=window.sessionStorage,y&&(t._.opt.remember=!0,(l.back("user")._.opt||o).remember=!0,(y.recall||y.pair)&&t.user().auth(JSON.parse(y.pair),a))}catch{}return l}return l}})(_,"./recall"),_(function(m){var i=_("./user"),u=i.SEA,o=i.GUN,a=function(){};i.prototype.pair=function(){var l=this,t;try{t=new Proxy({DANGER:"\u2620"},{get:function(y,s,d){if(!(!l.is||!(l._||"").sea))return l._.sea[s]}})}catch{}return t},i.prototype.delete=async function(l,t,y){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var s=this;s.back(-1);var d=s.back("user");try{d.auth(l,t,function(p){var g=(d.is||{}).pub;d.map().once(function(){this.put(null)}),d.leave(),(y||a)({ok:0})})}catch(p){o.log("User.delete failed! Error:",p)}return s},i.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const l=this.back(-1);try{return await authRecall(l),l._.user._}catch{const y="No session!";throw o.log(y),{err:y}}},i.prototype.trust=async function(l){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(l)&&l.get("pub").get((t,y)=>{console.log(t,y)}),l.get("trust").get(path).put(theirPubkey)},i.prototype.grant=function(l,t){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,s=y.back(-1).user(),d=s._.sea,p="";return y.back(function(g){g.is||(p+=g.get||"")}),async function(){var g,f=await s.get("grant").get(d.pub).get(p).then();f=await u.decrypt(f,d),f||(f=u.random(16).toString(),g=await u.encrypt(f,d),s.get("grant").get(d.pub).get(p).put(g));var c=l.get("pub").then(),v=l.get("epub").then();c=await c,v=await v;var r=await u.secret(v,d);g=await u.encrypt(f,r),s.get("grant").get(c).get(p).put(g,t)}(),y},i.prototype.secret=function(l,t){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,s=y.back(-1).user(),d=s.pair(),p="";return y.back(function(g){g.is||(p+=g.get||"")}),async function(){var g,f=await s.get("trust").get(d.pub).get(p).then();f=await u.decrypt(f,d),f||(f=u.random(16).toString(),g=await u.encrypt(f,d),s.get("trust").get(d.pub).get(p).put(g)),g=await u.encrypt(l,f),y.put(g,t)}(),y},m.exports=i})(_,"./share"),_(function(m){var i=_("./sea"),u=_("./settings"),o=function(){},a,l=""+a!=typeof window?window.Gun||{on:o}:_((""+a==typeof O?".":"")+"./gun",1);l.on("opt",function(f){f.sea||(f.sea={own:{}},f.on("put",t,f)),this.to.next(f)});function t(f){var c=this,v=c.as,r=f.put,n=r["#"],e=r["."],h=r[":"],x=r[">"],T=f["#"],k;if(!(!n||!e)){if((f._||"").faith&&(v.opt||"").faith&&typeof f._=="function"){i.opt.pack(r,function(S){i.verify(S,!1,function($){r["="]=i.opt.unpack($),c.to.next(f)})});return}var j=function(S){v.on("in",{"@":T,err:f.err=S})};if((f._||"").DBG&&((f._||"").DBG.c=+new Date),0<=n.indexOf("<?")&&(k=parseFloat(n.split("<?")[1]||""),k&&x<l.state()-k*1e3)){(k=f._)&&k.stun&&k.stun--;return}if(n==="~@"){t.alias(c,f,h,e,n,v,j);return}if(n.slice(0,2)==="~@"){t.pubs(c,f,h,e,n,v,j);return}if(k=i.opt.pub(n)){t.pub(c,f,h,e,n,v,j,v.user||"",k);return}if(0<=n.indexOf("#")){t.hash(c,f,h,e,n,v,j);return}t.any(c,f,h,e,n,v,j,v.user||"")}}t.hash=function(f,c,v,r,n,e,h){i.work(v,null,function(x){if(x&&x===r.split("#").slice(-1)[0])return f.to.next(c);h("Data hash not same as hash!")},{name:"SHA-256"})},t.alias=function(f,c,v,r,n,e,h){if(!v)return h("Data must exist!");if("~@"+r===s(v))return f.to.next(c);h("Alias not same!")},t.pubs=function(f,c,v,r,n,e,h){if(!v)return h("Alias must exist!");if(r===s(v))return f.to.next(c);h("Alias not same!")},t.pub=async function(f,c,v,r,n,e,h,x,T){var k;const j=await u.parse(v)||{},S=($,w,b)=>{if($.m&&$.s&&w&&T)return i.verify($,T,A=>{if(a!==A&&a!==A.e&&c.put[">"]&&c.put[">"]>parseFloat(A.e))return h("Certificate expired.");if(a!==A&&A.c&&A.w&&(A.c===w||A.c.indexOf("*")>-1)){let C=n.indexOf("/")>-1?n.replace(n.substring(0,n.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const D=Array.isArray(A.w)?A.w:typeof A.w=="object"||typeof A.w=="string"?[A.w]:[];for(const N of D)if(String.match(C,N["#"])&&String.match(r,N["."])||!N["."]&&String.match(C,N["#"])||!N["#"]&&String.match(r,N["."])||String.match(C?C+"/"+r:r,N["#"]||N)){if(N["+"]&&N["+"].indexOf("*")>-1&&C&&C.indexOf(w)==-1&&r.indexOf(w)==-1)return h(`Path "${C}" or key "${r}" must contain string "${w}".`);if(A.wb&&(typeof A.wb=="string"||(A.wb||{})["#"])){var E=f.as.root.$.back(-1);return typeof A.wb=="string"&&A.wb.slice(0,1)!=="~"&&(E=E.get("~"+T)),E.get(A.wb).get(w).once(P=>P&&(P===1||P===!0)?h(`Certificant ${w} blocked.`):b(A))}return b(A)}return h("Certificate verification fail.")}})};if(r==="pub"&&"~"+T===n)return v===T?f.to.next(c):h("Account not same!");if((k=x.is)&&k.pub&&!j["*"]&&!j["+"]&&(T===k.pub||T!==k.pub&&((c._.msg||{}).opt||{}).cert)){i.opt.pack(c.put,$=>{i.sign($,x._.sea,async function(w){if(a===w)return h(i.err||"Signature fail.");if(c.put[":"]={":":k=i.opt.unpack(w.m),"~":w.s},c.put["="]=k,T===x.is.pub){(k=s(v))&&((e.sea.own[k]=e.sea.own[k]||{})[T]=1),JSON.stringifyAsync(c.put[":"],function(b,A){return b?h(b||"Stringify error."):(c.put[":"]=A,f.to.next(c))});return}if(T!==x.is.pub&&((c._.msg||{}).opt||{}).cert){const b=await u.parse(c._.msg.opt.cert);b&&b.m&&b.s&&S(b,x.is.pub,A=>{c.put[":"]["+"]=b,c.put[":"]["*"]=x.is.pub,JSON.stringifyAsync(c.put[":"],function(E,C){return E?h(E||"Stringify error."):(c.put[":"]=C,f.to.next(c))})})}},{raw:1})});return}i.opt.pack(c.put,$=>{i.verify($,j["*"]||T,function(w){var b;if(w=i.opt.unpack(w),a===w)return h("Unverified data.");if((b=s(w))&&T===i.opt.pub(b)&&((e.sea.own[b]=e.sea.own[b]||{})[T]=1),j["+"]&&j["+"].m&&j["+"].s&&j["*"])S(j["+"],j["*"],A=>(c.put["="]=w,f.to.next(c)));else return c.put["="]=w,f.to.next(c)})})},t.any=function(f,c,v,r,n,e,h,x){if(e.opt.secure)return h("Soul missing public key at '"+r+"'.");e.on("secure",function(T){if(this.off(),!e.opt.secure)return f.to.next(T);h("Data cannot be changed.")}).on.on("secure",c)};var y=l.valid,s=function(f,c){return typeof(c=y(f))=="string"&&c};(l.state||"").ify;var d=/[^\w_-]/;i.opt.pub=function(f){if(!!f&&(f=f.split("~"),!(!f||!(f=f[1]))&&(f=f.split(d).slice(0,2),!(!f||f.length!=2)&&(f[0]||"")[0]!=="@")))return f=f.slice(0,2).join("."),f},i.opt.stringy=function(f){},i.opt.pack=function(f,c,v,r,n){var e,h;if(i.opt.check(f))return c(f);f&&f["#"]&&f["."]&&f[">"]&&(e=f[":"],h=1),JSON.parseAsync(h?e:f,function(x,T){var k=a!==(T||"")[":"]&&(T||"")["~"];if(!k){c(f);return}c({m:{"#":n||f["#"],".":v||f["."],":":(T||"")[":"],">":f[">"]||l.state.is(r,v)},s:k})})};var p=i.opt;i.opt.unpack=function(f,c,v){var r;if(a!==f){if(f&&a!==(r=f[":"]))return r;if(c=c||p.fall_key,!v&&p.fall_val&&(v={},v[c]=p.fall_val),!(!c||!v)){if(f===v[c]||!i.opt.check(v[c]))return f;var n=v&&v._&&v._["#"]||p.fall_soul,e=l.state.is(v,c)||p.fall_state;if(f&&f.length===4&&n===f[0]&&c===f[1]&&g(e)===g(f[3]))return f[2];if(e<i.opt.shuffle_attack)return f}}},i.opt.shuffle_attack=15463296e5;var g=Math.floor})(_,"./index")})()})(Rt);var wt=Rt.exports,Mt=typeof window!="undefined"?window.Gun:rt.exports;Mt.chain.promise=function(I){var _=this,I=I||function(O){return O};return new Promise(function(O,m){_.once(function(i,u){O({put:i,get:u,gun:this})})}).then(I)};Mt.chain.then=function(I){var _=this,O=new Promise((m,i)=>{_.once(function(u,o){m(u,o)})});return I?O.then(I):O};var Ht={exports:{}};(function(){function I(){var u=function(o,a,l){if(u.unit=0,!l&&m!==a&&(u.last=""+o<u.last?u.last:""+o,delete(u.$||{})[i]),l=l||u.$||(u.$={}),!o&&Object.keys(l).length)return l;o=""+o;for(var t=0,y=o.length-1,s=o[t],d,p;!(d=l[s])&&t<y;)s+=o[++t];if(d)if(t==y){if(m===a)return m===(p=d[""])?d:(u.unit=1)&&p;d[""]=a}else return m!==a&&delete d[i],u(o.slice(++t),a,d||(d={}));else{if(!_(l,function(g,f){var c=0,v="";if((f||"").length)for(;f[c]==o[c];)v+=f[c++];if(v){if(m===a)return c<=y?void 0:((p||(p={}))[f.slice(c)]=g,g);var r={};if(r[f.slice(c)]=g,c=o.slice(c),c===""?r[""]=a:(r[c]={})[""]=a,l[v]=r,I.debug&&""+v=="undefined"){console.log(0,v);debugger}return delete l[f],!0}})){if(m===a)return;if((l[s]||(l[s]={}))[""]=a,I.debug&&""+s=="undefined"){console.log(1,s);debugger}}if(m===a)return p}};return u}if(I.map=function u(o,a,l,t){t=t||[];var y=typeof o=="function"?o.$||{}:o;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!y){if(typeof y=="string"){if(I.debug)throw["BUG:",o,a,l,t];return}var s=(y[i]||O).sort||(y[i]=function k(){return k.sort=Object.keys(y).sort(),k}()).sort,d;l=l===!0?{branch:!0}:l||{},(d=l.reverse)&&(s=s.slice(0).reverse());for(var p=l.start,g=l.end,f="\uFFFF",c=0,v=s.length;c<v;c++){var r=s[c],n=y[r],e,h,x;if(!(!n||r===""||i===r)&&(h=t.slice(0),h.push(r),x=h.join(""),!(m!==p&&x<(p||"").slice(0,x.length))&&!(m!==g&&(g||f)<x))){if(d&&(e=u(n,a,l,h),m!==e))return e;if(m!==(e=n[""])){var T=1;if(m!==p&&x<(p||"")&&(T=0),m!==g&&x>(g||f)&&(T=0),T&&(e=a(e,x,r,t),m!==e))return e}else if(l.branch&&(e=a(m,x,r,t),m!==e))return e;if(t=h,!d&&(e=u(n,a,l,t),m!==e))return e;t.pop()}}}},typeof window!="undefined")window.Radix=I;else try{Ht.exports=I}catch{}var _=I.object=function(u,o,a){for(var l in u)if(!!u.hasOwnProperty(l)&&(a=o(u[l],l))!==m)return a},O={},m,i=String.fromCharCode(24)})();var Ft={exports:{}},Pe={exports:{}};(function(I){(function(){var _={},O,m=setTimeout.turn||typeof setImmediate!=""+O&&setImmediate||setTimeout;_.parseAsync=function(u,o,a,l){if(typeof u!="string"){try{o(O,JSON.parse(u))}catch(s){o(s)}return}var t={i:0,text:u,done:o,l:u.length,up:[]};l=l||1024*32,y();function y(){for(var s=t.text,d=t.i,p=t.l,g=0,f=t.w,c,v;g++<l;){var r=s[d++];if(d>p){t.end=!0;break}if(f)d=s.indexOf('"',d-1),r=s[d],v=s[d-1]=="\\",c=c||v,r=='"'&&!v&&(f=O,v=t.s,t.a?(v=s.slice(t.sl,d),(c||1+v.indexOf("\\u"))&&(v=JSON.parse('"'+v+'"')),t.at instanceof Array?t.at.push(t.s=v):(t.at||(t.end=g=l,v=O),(t.at||{})[t.s]=t.s=v)):(t.s=s.slice(t.sl,d),(c||1+t.s.indexOf("\\u"))&&(t.s=JSON.parse('"'+t.s+'"'))),t.a=c=O),++d;else switch(r){case'"':t.sl=d,f=!0;break;case":":t.ai=d,t.a=!0;break;case",":(t.a||t.at instanceof Array)&&(v=s.slice(t.ai,d-1))&&O!==(v=i(v))&&(t.at instanceof Array?t.at.push(v):t.at[t.s]=v),t.a=O,t.at instanceof Array&&(t.a=!0,t.ai=d);break;case"{":t.up.push(t.at||(t.at={})),t.at instanceof Array?t.at.push(t.at={}):O!==(v=t.s)&&(t.at[v]=t.at={}),t.a=O;break;case"}":t.a&&(v=s.slice(t.ai,d-1))&&O!==(v=i(v))&&(t.at instanceof Array?t.at.push(v):(t.at||(t.end=g=l,v=O),(t.at||{})[t.s]=v)),t.a=O,t.at=t.up.pop();break;case"[":O!==(v=t.s)?(t.up.push(t.at),t.at[v]=t.at=[]):t.at||t.up.push(t.at=[]),t.a=!0,t.ai=d;break;case"]":t.a&&(v=s.slice(t.ai,d-1))&&O!==(v=i(v))&&(t.at instanceof Array?t.at.push(v):t.at[t.s]=v),t.a=O,t.at=t.up.pop();break}}if(t.s=O,t.i=d,t.w=f,t.end){if(v=t.at,O===v)try{v=JSON.parse(u)}catch(n){return t.done(n)}t.done(O,v)}else m(y)}};function i(u){var o=parseFloat(u);if(!isNaN(o))return o;if(u=u.trim(),u=="true")return!0;if(u=="false")return!1;if(u=="null")return null}_.stringifyAsync=function(u,o,a,l,t){t=t||{},t.text=t.text||"",t.up=[t.at={d:u}],t.done=o,t.i=0;var y=0;s();function s(){var d=t.at,p=d.d,g="",f;switch(d.i&&d.i-d.j>0&&(g+=","),O!==(f=d.k)&&(g+=JSON.stringify(f)+":"),typeof p){case"boolean":g+=""+p;break;case"string":g+=JSON.stringify(p);break;case"number":g+=p;break;case"object":if(!p){g+="null";break}if(p instanceof Array){g+="[",d={i:-1,as:p,up:d,j:0},d.l=p.length,t.up.push(t.at=d);break}if(typeof(p||"").toJSON!="function"){g+="{",d={i:-1,ok:Object.keys(p).sort(),as:p,up:d,j:0},d.l=d.ok.length,t.up.push(t.at=d);break}if(f=p.toJSON()){g+=f;break}case"function":if(d.as instanceof Array){g+="null";break}default:g="",d.j++}for(t.text+=g;1+d.i>=d.l;)t.text+=d.ok?"}":"]",d=t.at=d.up;if(++d.i<d.l){if((f=d.ok)?d.d=d.as[d.k=f[d.i]]:d.d=d.as[d.i],++y<9)return s();y=0,m(s);return}t.done(O,t.text)}},typeof window!=""+O&&(window.YSON=_);try{""+O!="object"&&(I.exports=_)}catch{}typeof JSON!=""+O&&(JSON.parseAsync=_.parseAsync,JSON.stringifyAsync=_.stringifyAsync)})()})(Pe);(function(){function I(m){m=m||{},m.log=m.log||console.log,m.file=String(m.file||"radata");var i=(I.has||(I.has={}))[m.file];if(i)return i;m.max=m.max||(m.memory?m.memory*999*999:3e8)*.3,m.until=m.until||m.wait||250,m.batch=m.batch||10*1e3,m.chunk=m.chunk||1024*1024*1,m.code=m.code||{},m.code.from=m.code.from||"!",m.jsonify=!0;function u(c){return encodeURIComponent(c).replace(/\*/g,"%2A")}function o(c){return t!==c&&(!c||typeof c!="object")}var a=""+t==typeof setImmediate?setTimeout:setImmediate,l=setTimeout.turn||a,t,y=O.object,s=0;if(!m.store)return m.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!m.store.put)return m.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!m.store.get)return m.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");!m.store.list;var d=JSON.parseAsync||function(c,v,r){var n;try{v(n,JSON.parse(c,r))}catch(e){v(e)}},p=function(c,v,r,n,e){if(typeof v=="function"){var h=r||{};r=v,p.read(c,r,h,e||n);return}p.save(c,v,r,n,e)};p.save=function(c,v,r,n,e){var h={key:c},x,T;h.find=function(k){var j;if(h.file=k||(k=m.code.from),e&&(e=e[k]=e[k]||{}),e&&(e.sf=e.sf||+new Date),j=p.disk[k]){h.mix(t,j);return}p.parse(k,h.mix,t,e)},h.mix=function(k,j){if(e&&(e.sml=+new Date),e&&(e.sm=e.sm||+new Date),h.err=k||h.err){r(k);return}var S=h.file=(j||"").file||h.file,$;if(!j&&S!==m.code.from){p.find.bad(S),p.save(c,v,r,n);return}if((j=p.disk[S]||(p.disk[S]=j||O())).file||(j.file=S),m.compare&&(v=m.compare(j(c),v,c,S),t===v)){r(k,-1);return}if((h.disk=j)(c,v),n&&(($=($=j.tags||(j.tags={}))[n]||($[n]=p.tags[n]||(p.tags[n]={})))[S]||($[S]=p.one[n]||(p.one[n]=r)),r=null),e&&(e.st=e.st||+new Date),j.Q){r&&j.Q.push(r);return}j.Q=r?[r]:[],j.to=setTimeout(h.write,m.until)},h.write=function(){e&&(e.sto=e.sto||+new Date);var k=x=h.file,j=h.disk;T=h.q=j.Q,h.tags=j.tags,delete j.Q,delete p.disk[k],delete j.tags,p.write(k,j,h.ack,t,e)},h.ack=function(k,j){e&&(e.sa=e.sa||+new Date),e&&(e.sal=T.length);var S,$;for(var w in p.tags)if(!!p.tags.hasOwnProperty(w)){var b=p.tags[w];if(!(($=p.disk[x])&&($=$.tags)&&$[b])){S=b[x],delete b[x];var A;for(var E in b)if(b.hasOwnProperty(E)){A=!0;break}A||(delete p.tags[b],S&&S(k,j))}}!T&&(T="");for(var C=T.length,D=0,N=+new Date;D<C;D++)(S=T[D])&&S(k,j);console.STAT&&console.STAT(N,+new Date-N,"rad acks",u(h.file)),console.STAT&&console.STAT(N,T.length,"rad acks #",u(h.file))},r||(r=function(k,j){}),p.find(c,h.find)},p.disk={},p.one={},p.tags={};var g=0;p.write=function(c,v,r,n,e){if(!v){r("No radix!");return}n=typeof n=="object"?n:{force:n};var h=function(){},x,T;if(h.text="",h.file=c=v.file||(v.file=c),!c){r("What file?");return}if(h.write=function(){var k=v.raw=h.text;p.disk[c=v.file||h.file||c]=v;var j=+new Date;e&&(e.wd=j),p.find.add(c,function($){if(e&&(e.wa=+new Date),$){r($);return}m.store.put(u(c),k,function(b,A){e&&(e.wp=+new Date),console.STAT&&console.STAT(j,s=+new Date-j,"wrote disk",JSON.stringify(c),++g,"total all writes."),r(b,A||1),v.Q||delete p.disk[c]})})},h.split=function(){var k=+new Date;e&&(e.wf=k),h.text="",h.count||(h.count=0,O.map(v,function(){h.count++})),e&&(e.wfc=h.count),h.limit=Math.ceil(h.count/2);var j=h.count;return h.count=0,e&&(e.wf1=+new Date),h.sub=O(),O.map(v,h.slice,{reverse:1}),e&&(e.wf2=+new Date),p.write(h.end,h.sub,h.both,n),e&&(e.wf3=+new Date),h.hub=O(),O.map(v,h.stop),e&&(e.wf4=+new Date),p.write(v.file,h.hub,h.both,n),e&&(e.wf5=+new Date),console.STAT&&console.STAT(k,+new Date-k,"rad split",u(v.file),j),!0},h.slice=function(k,j){if(h.sub(h.end=j,k),h.limit<=++h.count)return!0},h.stop=function(k,j){if(j>=h.end)return!0;h.hub(j,k)},h.both=function(k,j){if(e&&(e.wfd=+new Date),T){r(k||T);return}if(x){r(k,j);return}x=!0,T=k},h.each=function(k,j,S,$){if(t!==k&&h.count++,m.max<=(k||"").length)return r("Data too big!"),!0;var w=I.encode($.length)+"#"+I.encode(S)+(t===k?"":":"+I.encode(k))+`
`;if(m.chunk<h.text.length+w.length&&1<h.count&&!n.force)return h.split();h.text+=w},m.jsonify){p.write.jsonify(h,v,r,n,e);return}O.map(v,h.each,!0)||h.write()},p.write.jsonify=function(c,v,r,n,e){var h,x=+new Date;e&&(e.w=x);try{h=JSON.stringify(v.$)}catch{r("Cannot radisk!");return}if(e&&(e.ws=+new Date),console.STAT&&console.STAT(x,+new Date-x,"rad stringified JSON"),m.chunk<h.length&&!n.force){var T=0;if(O.map(v,function(){if(T++)return!0}),T>1)return c.split()}c.text=h,c.write()},p.range=function(c,v){if(!(!c||!v)){if(t===v.start&&t===v.end||o(c))return c;var r=O();return O.map(c,function(n,e){r(e,n)},v),r("")}},function(){p.read=function(c,v,r,n){r=r||{};var e={key:c};e.find=function(h){var x;if(e.file=h||(h=m.code.from),n&&(n=n[h]=n[h]||{}),n&&(n.rf=n.rf||+new Date),x=p.disk[e.file=h]){e.check(t,x);return}p.parse(h,e.check,t,n)},e.get=function(h,x,T){if(n&&(n.rgl=+new Date),n&&(n.rg=n.rg||+new Date),e.err=h||e.err){v(h);return}var k=e.file=(x||"").file||e.file;if(!x&&k!==m.code.from){p.find.bad(k),p.read(c,v,r);return}if(x=p.disk[k]||(p.disk[k]=x),!x){v(k===m.code.from?t:"No file!");return}x.file||(x.file=k);var j=p.range(x(c),r);if(n&&(n.rr=+new Date),r.unit=x.unit,r.chunks=(r.chunks||0)+1,r.parsed=(r.parsed||0)+((T||"").parsed||r.chunks*m.chunk),r.more=1,r.next=t,O.map(p.list,function(b,A){if(!(!b||k===A))return r.next=A,1},r.reverse?{reverse:1,end:k}:{start:k}),n&&(n.rl=+new Date),r.next||(r.more=0),r.next&&(!r.reverse&&(c<r.next&&r.next.indexOf(c)!=0||t!==r.end&&(r.end||"\uFFFF")<r.next)&&(r.more=0),r.reverse&&(c>r.next&&c.indexOf(r.next)!=0||t!==r.start&&(r.start||"")>r.next&&k<=r.start)&&(r.more=0)),!r.more){v(e.err,j,r);return}if(j&&v(e.err,j,r),!(r.parsed>=r.limit)){var S=+new Date;n&&(n.rm=S);var $=r.next;a(function(){console.STAT&&console.STAT(S,+new Date-S,"rad more"),p.parse($,e.check)},0)}},e.check=function(h,x,T){if(e.get(h,x,T),!(!x||x.check)){x.check=1;var k=+new Date;(T||(T={})).file||(T.file=e.file),O.map(x,function(j,S){p.find(S,function($){if(($||($=m.code.from))!==T.file){var w=(""+Math.random()).slice(-3);l(function(){p.save(S,j,function b(A,E){if(A){p.save(S,j,b);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",w,u(S),u(T.file),u($))})},0)}})}),console.STAT&&console.STAT(k,+new Date-k,"rad check")}},p.find(c||(r.reverse?r.end||"":r.start||""),e.find)}}(),function(){var c=0,v={},r=String.fromCharCode(31);p.parse=function(n,e,h,x){var T;if(!n)return e();if(T=v[n]){T.push(e);return}T=v[n]=[e];var k=function(){},j={file:n};(k.disk=O()).file=n,k.read=function($,w){if(x&&(x.rpg=+new Date),console.STAT&&console.STAT(S,+new Date-S,"read disk",JSON.stringify(n),++c,"total all parses."),(k.err=$)||(k.not=!w)){delete v[n],k.map(T,k.ack);return}if(typeof w!="string"){try{m.max<=w.length?k.err="Chunk too big!":w=w.toString()}catch(b){k.err=b}if(k.err){delete v[n],k.map(T,k.ack);return}}if(j.parsed=w.length,x&&(x.rpl=j.parsed),x&&(x.rpa=T.length),S=+new Date,!(m.jsonify||w[0]==="{")){k.radec($,w);return}d(w,function(b,A){if(!b){delete v[n],k.disk.$=A,console.STAT&&(s=+new Date-S)>9&&console.STAT(S,s,"rad parsed JSON"),x&&(x.rpd=+new Date),k.map(T,k.ack);return}if(w[0]==="{"){delete v[n],k.err="JSON error!",k.map(T,k.ack);return}k.radec(b,w)})},k.map=function(){if(!(!T||!T.length)){for(var $=+new Date,w=k.err,b=k.not?t:k.disk,A=0,E;A<9&&(E=T[A++]);)E(w,b,j);console.STAT&&console.STAT($,+new Date-$,"rad packs",u(n)),console.STAT&&console.STAT($,A,"rad packs #",u(n)),!!(T=T.slice(A)).length&&l(k.map,0)}},k.ack=function($){if(!!$){if(k.err||k.not){$(k.err,t,j);return}$(t,k.disk,j)}},k.radec=function($,w){delete v[n],S=+new Date;var b=k.split(w),A=[],E,C,D;if(!b||b[1]!==0){k.err="File '"+n+"' does not have root radix! ",k.map(T,k.ack);return}for(;b;)C=D=t,E=b[1],b=k.split(b[2])||"",b[0]=="#"&&(C=b[1],A=A.slice(0,E),E<=A.length&&A.push(C)),b=k.split(b[2])||"",b[0]!=`
`&&((b[0]=="="||b[0]==":")&&(D=b[1]),t!==C&&t!==D&&k.disk(A.join(""),D),b=k.split(b[2]));console.STAT&&console.STAT(S,+new Date-S,"parsed RAD"),k.map(T,k.ack)},k.split=function($){if(!!$){var w=[],b={},A=-1,E="";if(A=$.indexOf(r),!!$[A])return E=$.slice(0,A),w[0]=E,w[1]=I.decode($.slice(A),b),w[2]=$.slice(A+b.i),w}},p.disk&&(h||(h=(p.disk[n]||"").raw));var S=+new Date;if(x&&(x.rp=S),h)return l(function(){k.read(t,h)},0);m.store.get(u(n),k.read)}}(),function(){var c,v=String.fromCharCode(28),r;p.find=function(h,x){if(!c){if(r){r.push([h,x]);return}r=[[h,x]],p.parse(v,n);return}O.map(p.list=c,function(T,k){if(!!T)return x(k)||!0},{reverse:1,end:h})||x(m.code.from)},p.find.add=function(h,x){var T=c(h);if(T||h===v){x(t,1);return}c(h,1),x.found=(x.found||0)+1,p.write(v,c,function(k,j){if(k){x(k);return}x.found=(x.found||0)-1,x.found===0&&x(t,1)},!0)},p.find.bad=function(h,x){c(h,0),p.write(v,c,x||f)};function n(h,x){if(h){m.log("list",h),setTimeout(function(){p.parse(v,n)},1e3);return}if(x){e(x);return}if(c=c||x||O(),!m.store.list){e(c);return}m.store.list(function(T){if(!T){e(c);return}p.find.add(T,f)})}function e(h,x){c=c||h,c.file=v,x=r,r=null,y(x,function(T){p.find(T[0],T[1])})}}();try{!_.window&&require("./radmigtmp")(p)}catch{}var f=function(){},t;return I.has[m.file]=p,p}if(function(){var m=String.fromCharCode(31);I.encode=function(i,u,o){o=o||m;var a=o,l;if(typeof i=="string"){for(var t=i.indexOf(o);t!=-1;)a+=o,t=i.indexOf(o,t+1);return a+'"'+i+o}else{if(i&&i["#"]&&Object.keys(i).length==1)return a+"#"+l+a;if(typeof i=="number")return a+"+"+(i||0)+a;if(i===null)return a+" "+a;if(i===!0)return a+"+"+a;if(i===!1)return a+"-"+a}},I.decode=function(i,u,o){o=o||m;var a="",l=-1,t=0,y,s;if(o===i[0]){for(;o===i[++l];)++t;for(s=i[y=t]||!0;--t>=0;)l=i.indexOf(o,l+1);if(l==-1&&(l=i.length),a=i.slice(y+1,l),u&&(u.i=l+1),s==='"')return a;if(s==="#")return{"#":a};if(s==="+")return a.length===0?!0:parseFloat(a);if(s===" ")return null;if(s==="-")return!1}}}(),typeof window!="undefined"){var _=window.Gun,O=window.Radix;window.Radisk=I}else{var _=rt.exports,O=Ht.exports;try{Ft.exports=I}catch{}}I.Radix=O})();var Z=typeof window!="undefined"?window.Gun:rt.exports;Z.on("create",function(I){Z.TESTING&&(I.opt.file="radatatest"),this.to.next(I);var _=I.opt,O;if(!(_.rad===!1||_.radisk===!1)&&!(O+""!=typeof process&&""+(process.env||"").RAD=="false")){var m=Z.window&&Z.window.Radisk||Ft.exports,i=m.Radix,u=m(_),o=String.fromCharCode(27),a=0;I.on("put",function(t){if(this.to.next(t),!(t._||"").rad){var y=t["#"],s=t.put,d=s["#"],p=s["."],g=s[":"],f=s[">"],c=(t._||"").DBG;c&&(c.sp=c.sp||+new Date);var v=(t._||"").RPS||((t._||"").RPS=+new Date);u(d+o+p,{":":g,">":f},function(r,n){if(c&&(c.spd=c.spd||+new Date),console.STAT&&console.STAT(v,+new Date-v,"put"),r){I.on("in",{"@":y,err:r,DBG:c});return}I.on("in",{"@":y,ok:n,DBG:c})},!1,c&&(c.r=c.r||{})),c&&(c.sps=c.sps||+new Date)}}),I.on("get",function(t){this.to.next(t);var y=t._||"",s=y.DBG=t.DBG;s&&(s.sg=+new Date);var d=t["#"],p=t.get,g=t.get["#"],f=t.get["."]||"",c={},v,r,n,e;if(typeof g=="string"?r=g:g&&(O!==(n=g["*"])&&(c.limit=e=1),O!==g[">"]&&(c.start=g[">"]),O!==g["<"]&&(c.end=g["<"]),r=e?""+n:n||g["="],e=null),r&&!c.limit&&(typeof f=="string"?r=r+o+(c.atom=f):f&&(O!==f[">"]&&(c.start=f[">"],c.limit=1),O!==f["<"]&&(c.end=f["<"],c.limit=1),O!==(n=f["*"])&&(c.limit=e=1),r&&(r=r+o+(e?""+(n||""):n||(c.atom=f["="]||""))))),((n=p["%"])||c.limit)&&(c.limit=n<=(c.pack||1e3*100)?n:1),(f["-"]||(g||{})["-"]||p["-"])&&(c.reverse=!0),(n=(I.next||"")[g])&&n.put){if(c.atom){if(n=(n.next||"")[c.atom],n&&n.rad)return}else if(n&&n.rad)return}var h=Z.state(),x=+new Date,T=0;s&&(s.sgm=x),u(r||"",function(j,S,$){s&&(s.sgr=+new Date),s&&(s.sgi=$);try{_.store.stats.get.time[l%50]=+new Date-x,++l,_.store.stats.get.count++,j&&(_.store.stats.get.err=j)}catch{}console.STAT&&console.STAT(x,+new Date-x,"got",JSON.stringify(r)),x=+new Date,$=$||"";var w,b;if($.unit&&S&&O!==(w=S[":"])&&O!==(b=S[">"])){var A=r.split(o),E=A[0],C=A[1];(v=v||{})[E]=Z.state.ify(v[E],C,b,w,E),I.$.get(E).get(C)._.rad=h}else S&&(typeof S!="string"&&(c.atom?S=O:i.map(S,k,c)),!v&&S&&k(S,""),!c.atom&&!f&typeof g=="string"&&!c.limit&&!c.more&&(I.$.get(g)._.rad=h));s&&(s.sgp=+new Date),console.STAT&&(a=+new Date-x)>9&&(console.STAT(x,a,"got prep time"),console.STAT(x,T,"got prep #")),T=0,x=+new Date;var D=function(){};D.faith=!0,D.rad=p,I.on("in",{"@":d,put:v,"%":$.more?1:O,err:j||O,_:D,DBG:s}),console.STAT&&(a=+new Date-x)>9&&console.STAT(x,a,"got emit",Object.keys(v||{}).length),v=O},c,s&&(s.r=s.r||{})),s&&(s.sgd=+new Date),console.STAT&&(a=+new Date-x)>9&&console.STAT(x,a,"get call");function k(j,S,$,w){if(T++,!!j){S=(r+S).split(o);var b=S.slice(0,1)[0];if(S=S.slice(-1)[0],c.limit&&c.limit<=c.count)return!0;var A,E,C=b,D=S;if(typeof j!="string"){A=j[":"],E=j[">"],(v=v||{})[C]=Z.state.ify(v[C],D,E,A,C),c.count=(c.count||0)+((A||"").length||9);return}c.count=(c.count||0)+j.length;var N=j.lastIndexOf(">"),P=m.decode(j.slice(N+1),null,o);j=m.decode(j.slice(0,N),null,o),(v=v||{})[b]=Z.state.ify(v[b],S,P,j,b)}}}),Z.valid,(_.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}});var Je={exports:{}};(function(){function I(O){O=O||{},O.file=String(O.file||"radata");var m=I[O.file],i=null,u;if(m)return console.log("Warning: reusing same IndexedDB store and options as 1st."),I[O.file];m=I[O.file]=function(){};try{O.indexedDB=O.indexedDB||I.indexedDB||indexedDB}catch{}try{if(!O.indexedDB||location.protocol=="file:"){var o=m.d||(m.d={});return m.put=function(a,l,t){o[a]=l,setTimeout(function(){t(null,1)},250)},m.get=function(a,l){setTimeout(function(){l(null,o[a]||u)},5)},console.log("Warning: No indexedDB exists to persist data to!"),m}}catch{}return m.start=function(){var a=indexedDB.open(O.file,1);a.onupgradeneeded=function(l){l.target.result.createObjectStore(O.file)},a.onsuccess=function(){i=a.result},a.onerror=function(l){console.log(l||1)}},m.start(),m.put=function(a,l,t){if(!i){setTimeout(function(){m.put(a,l,t)},1);return}var y=i.transaction([O.file],"readwrite"),s=y.objectStore(O.file),d=s.put(l,""+a);d.onsuccess=s.onsuccess=y.onsuccess=function(){t(null,1)},d.onabort=s.onabort=y.onabort=function(p){t(p||"put.tx.abort")},d.onerror=s.onerror=y.onerror=function(p){t(p||"put.tx.error")}},m.get=function(a,l){if(!i){setTimeout(function(){m.get(a,l)},9);return}var t=i.transaction([O.file],"readonly"),y=t.objectStore(O.file),s=y.get(""+a);s.onsuccess=function(){l(null,s.result)},s.onabort=function(d){l(d||4)},s.onerror=function(d){l(d||5)}},setInterval(function(){i&&i.close(),i=null,m.start()},1e3*15),m}if(typeof window!="undefined")(I.window=window).RindexedDB=I,I.indexedDB=window.indexedDB;else try{Je.exports=I}catch{}try{var _=I.window.Gun||require("../gun");_.on("create",function(O){this.to.next(O),O.opt.store=O.opt.store||I(O.opt)})}catch{}})();(function(){var I=typeof window!="undefined"?window.Gun:rt.exports;I.on("create",function(_){})})();let W,gt;Ut.node.soul;const ct=ft({pulse:0,peers:null,path:null});function Ue(I="gunvue",_=["https://etogun.glitch.me/gun"],O=!1){return W=Ut({peers:_,localStorage:!1}),gt=W.get(I),O&&(window.gun=W,window.sea=wt),ct.peers=_,ct.path=I,gt.get("relay").get("pulse").on(m=>{ct.pulse=m}),{gun:W,db:gt,relay:ct}}const q=ft({is:null,pub:kt(()=>{var I;return(I=q.is)==null?void 0:I.pub}),profile:{},pair:null,name:null,presence:null,graph(){return W.user()},async generate(){q.pair=await wt.pair()},init(){q.is=W.user().is,q.presence=setInterval(()=>{W.user().get("presence").put(Date.now())},1500),W.user().get("profile").map().on((I,_)=>{q.profile[_]=I})},logout(){var I;let _=!!((I=q.is)==null?void 0:I.pub);W.user().leave(),clearInterval(q.presence),setTimeout(()=>{var O;_&&!((O=W.user()._)==null?void 0:O.sea)&&(q.is=null,q.profile={},console.info("User logged out"))},500)},auth(I=q.pair){if(!I)return console.log("No pair to auth");W.user().auth(I,async()=>{})},async hasPass(I){return await W.get(`~${I}`).get("pass").get("pair").then()},async logWithPass(I,_){let O=await W.get(`~${I}`).get("pass").get("pair").then();await wt.decrypt(O,_)}}),Re={class:"flex items-center p-20"},Me={class:"p-4 flex items-center"},He={setup(I){const{relay:_}=Ue();return(O,m)=>{const i=De;return Q(),X("div",Re,[z("div",Me,[tt(i,{class:"mx-2"}),z("span",null,St(xt(_).pulse),1)])])}}};(()=>{if(!O())return;const I=CanvasRenderingContext2D.prototype,_=I.drawImage;if(!_){console.error("This script requires a basic implementation of drawImage");return}I.drawImage=function(a,l,t){if(!(arguments.length===9))return _.apply(this,[...arguments]);const s=m(...arguments);if(!i(s))return _.apply(this,s)};function O(){const o=document.createElement("canvas").getContext("2d");o.fillRect(0,0,40,40),o.drawImage(o.canvas,-40,-40,80,80,50,50,20,20);const a=o.getImageData(50,50,30,30),l=new Uint32Array(a.data.buffer),t=(d,p)=>l[p*a.width+d],y=[[9,9],[20,9],[9,20],[20,20]],s=[[10,10],[19,10],[10,19],[19,19]];return y.some(([d,p])=>t(d,p)!==0)||s.some(([d,p])=>t(d,p)===0)}function m(o,a,l,t,y,s,d,p,g){const{width:f,height:c}=u(o);t<0&&(a+=t,t=Math.abs(t)),y<0&&(l+=y,y=Math.abs(y)),p<0&&(s+=p,p=Math.abs(p)),g<0&&(d+=g,g=Math.abs(g));const v=Math.max(a,0),r=Math.min(a+t,f),n=Math.max(l,0),e=Math.min(l+y,c),h=p/t,x=g/y;return[o,v,n,r-v,e-n,a<0?s-a*h:s,l<0?d-l*x:d,(r-v)*h,(e-n)*x]}function i(o){return[3,4,7,8].some(a=>!o[a])}function u(o){const a=l=>{const t=globalThis[l];return t&&o instanceof t};if(a("HTMLImageElement"))return{width:o.naturalWidth,height:o.naturalHeight};if(a("HTMLVideoElement"))return{width:o.videoWidth,height:o.videoHeight};if(a("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(a("HTMLCanvasElement")||a("ImageBitmap"))return o}})();const et={};if(document){class I extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"}),this.img=document.createElement("img"),this.shadowRoot.append(this.img)}render(){this.pub=this.hasAttribute("pub")?this.getAttribute("pub"):"1234123455Ute2tFhdjDQgzR-1234lfSlZxgEZKuquI.2F-j1234434U1234Asj-5lxnECG5TDyuPD8gEiuI123",this.size=this.hasAttribute("size")?this.getAttribute("size"):400,this.round=!!(this.hasAttribute("round")||this.getAttribute("round")==""),this.round?this.img.style.borderRadius="100%":this.img.style.borderRadius="0%",this.dark=!!(this.hasAttribute("dark")||this.getAttribute("dark")==""),this.img.src=mt(this.pub,this.size,this.dark)}connectedCallback(){this.render()}static get observedAttributes(){return["pub","round","size","dark"]}attributeChangedCallback(O,m,i){this.render()}}customElements.define("gun-avatar",I),document.addEventListener("DOMContentLoaded",()=>{let _=document.getElementsByClassName("gun-avatar");for(let O of _)O.src=mt(O.dataset.pub,O.dataset.size,O.dataset.dark)})}function mt(I,_=800,O=!1){var m;if(!I)return;if((m=et==null?void 0:et[_])==null?void 0:m[I])return et[_][I];const i=document.createElement("canvas");i.width=i.height=_;const u=i.getContext("2d"),a=I.split(".").map(l=>Ke(l));return Fe(u,a[0][42],a[1][42],_,O),Kt(a[0],u,_,.42*_),u.globalCompositeOperation="lighter",Kt(a[1],u,_,.125*_),u.globalCompositeOperation="source-over",u.scale(-1,1),u.translate(-_/2,0),u.drawImage(i,_/2,0,_,_,0,0,_,_),et[_]=et[_]||{},et[_][I]=i.toDataURL(),et[_][I]}function Fe(I,_,O,m,i=!1){var u=I.createLinearGradient(0,0,0,m);let o=70;i&&(o=0),u.addColorStop(0,`hsl(0,0%,${o+_*30}%)`),u.addColorStop(1,`hsl(0,0%,${o+O*30}%)`),I.fillStyle=u,I.fillRect(0,0,m,m)}function Kt(I,_,O,m){Be(I,7).forEach(u=>{if(u.length==7){let o=O/2+u[0]*O/2,a=u[1]*O,l=u[2]*m,t=u[3]*360,y=u[4]*100,s=u[5]*100,d=u[6];_.beginPath(),_.arc(o,a,l,0,2*Math.PI,!1),_.fillStyle=`hsla(${t},${y}%,${s}%,${d})`,_.closePath(),_.fill()}})}function Ke(I){const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split("");let m=[],i=0;for(let u of I)m[i++]=O.indexOf(u)/64;return m}function Be(I,_=3){return[...Array(Math.ceil(I.length/_))].map(()=>I.splice(0,_))}var Ge=(I,_)=>{const O=I.__vccOpts||I;for(const[m,i]of _)O[m]=i;return O};const We=["title"],qe={props:{pub:String,size:{type:Number,default:40}},setup(I){const _=I,O=Xt("");return zt(()=>{_.pub&&_.pub.includes(".")&&_.size>=10&&(O.value=mt(_.pub,32))}),(m,i)=>I.pub?(Q(),X("div",{key:0,class:"avatar bg-local",title:I.pub,style:te({background:`url(${O.value})`})},null,12,We)):ee("",!0)}};var en=Ge(qe,[["__scopeId","data-v-09fa3770"]]);const Le={class:"p-4"},Ve=z("div",{class:"font-bold text-3xl"},"@gun-vue",-1),Qe={setup(I){return(_,O)=>(Q(),X("div",Le,[Ve,tt(xt(He),{class:"text-bold"})]))}},Ye=[{name:"index",path:"/",component:Qe,props:!0},{name:"account",path:"/account",component:()=>yt(()=>import("./index.fa8898b9.js"),["assets/index.fa8898b9.js","assets/vendor.ce457e9e.js"]),props:!0},{name:"game",path:"/game",component:()=>yt(()=>import("./index.6541d0af.js"),["assets/index.6541d0af.js","assets/vendor.ce457e9e.js"]),props:!0},{name:"players",path:"/players",component:()=>yt(()=>import("./index.1a09513d.js"),["assets/index.1a09513d.js","assets/vendor.ce457e9e.js"]),props:!0}],Ze=ne({history:re(),routes:Ye}),Xe=ie(xe);Xe.use(Ze).mount("#app");export{ht as S,en as a,dt as d,tn as u};
